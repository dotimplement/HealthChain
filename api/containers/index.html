
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Simplify prototyping and testing NLP applications in a healthcare context.">
      
      
        <meta name="author" content="Jennifer Jiang-Kells">
      
      
      
        <link rel="prev" href="../component/">
      
      
        <link rel="next" href="../adapters/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/healthchain_logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Containers - HealthChain üí´ üè•</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../stylesheets/welcome.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-JZW5MPV5Y4"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-JZW5MPV5Y4",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-JZW5MPV5Y4",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#containers" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="HealthChain üí´ üè•" class="md-header__button md-logo" aria-label="HealthChain üí´ üè•" data-md-component="logo">
      
  <img src="../../assets/images/healthchain_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HealthChain üí´ üè•
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Containers
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m3.55 19.09 1.41 1.41 1.8-1.79-1.42-1.42M12 6c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6c0-3.32-2.69-6-6-6m8 7h3v-2h-3m-2.76 7.71 1.8 1.79 1.41-1.41-1.79-1.8M20.45 5l-1.41-1.4-1.8 1.79 1.42 1.42M13 1h-2v3h2M6.76 5.39 4.96 3.6 3.55 5l1.79 1.81zM1 13h3v-2H1m12 9h-2v3h2"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/dotimplement/healthchain" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    dotimplement/healthchain
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../installation/" class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tutorials/" class="md-tabs__link">
          
  
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../cookbook/" class="md-tabs__link">
          
  
  
  Cookbook

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../reference/" class="md-tabs__link">
          
  
  
  Docs

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../community/" class="md-tabs__link">
          
  
  
  Community

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="HealthChain üí´ üè•" class="md-nav__button md-logo" aria-label="HealthChain üí´ üè•" data-md-component="logo">
      
  <img src="../../assets/images/healthchain_logo.png" alt="logo">

    </a>
    HealthChain üí´ üè•
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/dotimplement/healthchain" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    dotimplement/healthchain
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../distribution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Licence
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Tutorials
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tutorials
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tutorials
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    ClinicalFlow Tutorial
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    ClinicalFlow Tutorial
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/clinicalflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/clinicalflow/setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Setup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/clinicalflow/fhir-basics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FHIR Basics
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/clinicalflow/pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Build Pipeline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/clinicalflow/gateway/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Create Gateway
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/clinicalflow/testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Test with Sandbox
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/clinicalflow/next-steps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Next Steps
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Cookbook
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Cookbook
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cookbook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/setup_fhir_sandboxes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Setup FHIR Sandbox
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/multi_ehr_aggregation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Multi-Source Data Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/clinical_coding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Automated Clinical Coding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/discharge_summarizer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Discharge Summarizer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/ml_model_deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    ML Model Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbook/format_conversion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Format Conversion
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Docs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Docs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Welcome
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Gateway
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Gateway
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/gateway/gateway/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/gateway/api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HealthChainAPI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/gateway/fhir_gateway/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FHIR Gateway
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/gateway/events/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Events
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2_5" >
        
          
          <label class="md-nav__link" for="__nav_5_2_5" id="__nav_5_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Protocols
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Protocols
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/gateway/cdshooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CDS Hooks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/gateway/soap_cda/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SOAP/CDA
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    I/O
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    I/O
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_3_1" >
        
          
          <label class="md-nav__link" for="__nav_5_3_1" id="__nav_5_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Containers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Containers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/io/containers/containers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/io/containers/document/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Document
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/io/containers/dataset/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dataset
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_3_2" >
        
          
          <label class="md-nav__link" for="__nav_5_3_2" id="__nav_5_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Adapters
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Adapters
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/io/adapters/adapters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/io/adapters/cdaadapter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CDA Adapter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/io/adapters/cdsfhiradapter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CDS FHIR Adapter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_3_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3_3" id="__nav_5_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Mappers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Mappers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/io/mappers/mappers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/io/mappers/fhir_feature/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FHIR Feature Mapper
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Pipeline
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Pipeline
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/pipeline/pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_4_2" >
        
          
          <label class="md-nav__link" for="__nav_5_4_2" id="__nav_5_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Components
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Components
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/pipeline/components/components/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/pipeline/components/cdscardcreator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CdsCardCreator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/pipeline/components/fhirproblemextractor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FHIRProblemListExtractor
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_4_3" >
        
          
          <label class="md-nav__link" for="__nav_5_4_3" id="__nav_5_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Prebuilt Pipelines
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Prebuilt Pipelines
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/pipeline/prebuilt_pipelines/medicalcoding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Medical Coding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/pipeline/prebuilt_pipelines/summarization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Summarization
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_5" >
        
          
          <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Integrations
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Integrations
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/pipeline/integrations/integrations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Interoperability
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Interoperability
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/interop/interop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/interop/engine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Engine
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/interop/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/interop/templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Templates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/interop/mappings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mappings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/interop/parsers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Parsers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/interop/generators/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Generators
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/interop/xmltodict/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Working with xmltodict
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/interop/experimental/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    In Development
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_7" >
        
          
          <label class="md-nav__link" for="__nav_5_7" id="__nav_5_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Utilities
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Utilities
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/utilities/fhir_helpers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FHIR Helpers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/utilities/sandbox/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sandbox
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/utilities/data_generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Data Generator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pipeline
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../component/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Component
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Containers
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Containers
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#healthchain.io.containers" class="md-nav__link">
    <span class="md-ellipsis">
      
        containers
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#healthchain.io.containers.BaseDocument" class="md-nav__link">
    <span class="md-ellipsis">
      
        BaseDocument
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#healthchain.io.containers.DataContainer" class="md-nav__link">
    <span class="md-ellipsis">
      
        DataContainer
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#healthchain.io.containers.Dataset" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dataset
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dataset">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.Dataset.from_fhir_bundle" class="md-nav__link">
    <span class="md-ellipsis">
      
        from_fhir_bundle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.Dataset.to_risk_assessment" class="md-nav__link">
    <span class="md-ellipsis">
      
        to_risk_assessment
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.Dataset.validate" class="md-nav__link">
    <span class="md-ellipsis">
      
        validate
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#healthchain.io.containers.Document" class="md-nav__link">
    <span class="md-ellipsis">
      
        Document
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Document">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.Document.__iter__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __iter__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.Document.__len__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __len__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.Document.__post_init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __post_init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.Document.update_problem_list_from_nlp" class="md-nav__link">
    <span class="md-ellipsis">
      
        update_problem_list_from_nlp
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.Document.word_count" class="md-nav__link">
    <span class="md-ellipsis">
      
        word_count
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#healthchain.io.containers.FeatureSchema" class="md-nav__link">
    <span class="md-ellipsis">
      
        FeatureSchema
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FeatureSchema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.FeatureSchema.convert_feature_dicts" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_feature_dicts
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.FeatureSchema.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      
        from_dict
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.FeatureSchema.from_yaml" class="md-nav__link">
    <span class="md-ellipsis">
      
        from_yaml
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.FeatureSchema.get_feature_names" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_feature_names
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.FeatureSchema.get_features_by_resource" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_features_by_resource
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.FeatureSchema.get_observation_codes" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_observation_codes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.FeatureSchema.get_required_features" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_required_features
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.FeatureSchema.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      
        to_dict
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.FeatureSchema.to_yaml" class="md-nav__link">
    <span class="md-ellipsis">
      
        to_yaml
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.FeatureSchema.validate_dataframe_columns" class="md-nav__link">
    <span class="md-ellipsis">
      
        validate_dataframe_columns
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#healthchain.io.containers.base" class="md-nav__link">
    <span class="md-ellipsis">
      
        base
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="base">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.base.BaseDocument" class="md-nav__link">
    <span class="md-ellipsis">
      
        BaseDocument
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.base.DataContainer" class="md-nav__link">
    <span class="md-ellipsis">
      
        DataContainer
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#healthchain.io.containers.dataset" class="md-nav__link">
    <span class="md-ellipsis">
      
        dataset
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="dataset">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.dataset.Dataset" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dataset
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dataset">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.dataset.Dataset.from_fhir_bundle" class="md-nav__link">
    <span class="md-ellipsis">
      
        from_fhir_bundle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.dataset.Dataset.to_risk_assessment" class="md-nav__link">
    <span class="md-ellipsis">
      
        to_risk_assessment
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.dataset.Dataset.validate" class="md-nav__link">
    <span class="md-ellipsis">
      
        validate
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#healthchain.io.containers.document" class="md-nav__link">
    <span class="md-ellipsis">
      
        document
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="document">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.CdsAnnotations" class="md-nav__link">
    <span class="md-ellipsis">
      
        CdsAnnotations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CdsAnnotations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.CdsAnnotations.actions" class="md-nav__link">
    <span class="md-ellipsis">
      
        actions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.CdsAnnotations.cards" class="md-nav__link">
    <span class="md-ellipsis">
      
        cards
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.Document" class="md-nav__link">
    <span class="md-ellipsis">
      
        Document
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Document">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.Document.__iter__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __iter__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.Document.__len__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __len__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.Document.__post_init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __post_init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.Document.update_problem_list_from_nlp" class="md-nav__link">
    <span class="md-ellipsis">
      
        update_problem_list_from_nlp
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.Document.word_count" class="md-nav__link">
    <span class="md-ellipsis">
      
        word_count
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData" class="md-nav__link">
    <span class="md-ellipsis">
      
        FhirData
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FhirData">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData--add-prefetch-resources-from-cds-request" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add prefetch resources from CDS request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData--add-document-to-bundle" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add document to bundle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData--get-document-with-relationships" class="md-nav__link">
    <span class="md-ellipsis">
      
        Get document with relationships
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData--access-clinical-lists" class="md-nav__link">
    <span class="md-ellipsis">
      
        Access clinical lists
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.allergy_list" class="md-nav__link">
    <span class="md-ellipsis">
      
        allergy_list
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.bundle" class="md-nav__link">
    <span class="md-ellipsis">
      
        bundle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.medication_list" class="md-nav__link">
    <span class="md-ellipsis">
      
        medication_list
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.operation_outcomes" class="md-nav__link">
    <span class="md-ellipsis">
      
        operation_outcomes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.patient" class="md-nav__link">
    <span class="md-ellipsis">
      
        patient
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.patients" class="md-nav__link">
    <span class="md-ellipsis">
      
        patients
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.prefetch_resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        prefetch_resources
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.problem_list" class="md-nav__link">
    <span class="md-ellipsis">
      
        problem_list
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.provenances" class="md-nav__link">
    <span class="md-ellipsis">
      
        provenances
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.add_document_reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_document_reference
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.add_resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_resources
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.get_document_reference_family" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_document_reference_family
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.get_document_references_readable" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_document_references_readable
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.get_prefetch_resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_prefetch_resources
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.get_resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_resources
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.ModelOutputs" class="md-nav__link">
    <span class="md-ellipsis">
      
        ModelOutputs
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ModelOutputs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.ModelOutputs.get_generated_text" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_generated_text
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.NlpAnnotations" class="md-nav__link">
    <span class="md-ellipsis">
      
        NlpAnnotations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema" class="md-nav__link">
    <span class="md-ellipsis">
      
        featureschema
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="featureschema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureMapping" class="md-nav__link">
    <span class="md-ellipsis">
      
        FeatureMapping
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FeatureMapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureMapping.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      
        from_dict
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureMapping.validate_resource_requirements" class="md-nav__link">
    <span class="md-ellipsis">
      
        validate_resource_requirements
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureSchema" class="md-nav__link">
    <span class="md-ellipsis">
      
        FeatureSchema
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FeatureSchema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureSchema.convert_feature_dicts" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_feature_dicts
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureSchema.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      
        from_dict
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureSchema.from_yaml" class="md-nav__link">
    <span class="md-ellipsis">
      
        from_yaml
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureSchema.get_feature_names" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_feature_names
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureSchema.get_features_by_resource" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_features_by_resource
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureSchema.get_observation_codes" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_observation_codes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureSchema.get_required_features" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_required_features
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureSchema.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      
        to_dict
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureSchema.to_yaml" class="md-nav__link">
    <span class="md-ellipsis">
      
        to_yaml
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureSchema.validate_dataframe_columns" class="md-nav__link">
    <span class="md-ellipsis">
      
        validate_dataframe_columns
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adapters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Adapters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cds_hooks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CDS Hooks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sandbox/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sandbox Client
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../interop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Interoperability Engine
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fhir_helpers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FHIR Helpers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Community
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Community
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../community/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Community
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#healthchain.io.containers" class="md-nav__link">
    <span class="md-ellipsis">
      
        containers
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#healthchain.io.containers.BaseDocument" class="md-nav__link">
    <span class="md-ellipsis">
      
        BaseDocument
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#healthchain.io.containers.DataContainer" class="md-nav__link">
    <span class="md-ellipsis">
      
        DataContainer
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#healthchain.io.containers.Dataset" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dataset
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dataset">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.Dataset.from_fhir_bundle" class="md-nav__link">
    <span class="md-ellipsis">
      
        from_fhir_bundle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.Dataset.to_risk_assessment" class="md-nav__link">
    <span class="md-ellipsis">
      
        to_risk_assessment
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.Dataset.validate" class="md-nav__link">
    <span class="md-ellipsis">
      
        validate
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#healthchain.io.containers.Document" class="md-nav__link">
    <span class="md-ellipsis">
      
        Document
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Document">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.Document.__iter__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __iter__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.Document.__len__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __len__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.Document.__post_init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __post_init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.Document.update_problem_list_from_nlp" class="md-nav__link">
    <span class="md-ellipsis">
      
        update_problem_list_from_nlp
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.Document.word_count" class="md-nav__link">
    <span class="md-ellipsis">
      
        word_count
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#healthchain.io.containers.FeatureSchema" class="md-nav__link">
    <span class="md-ellipsis">
      
        FeatureSchema
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FeatureSchema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.FeatureSchema.convert_feature_dicts" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_feature_dicts
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.FeatureSchema.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      
        from_dict
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.FeatureSchema.from_yaml" class="md-nav__link">
    <span class="md-ellipsis">
      
        from_yaml
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.FeatureSchema.get_feature_names" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_feature_names
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.FeatureSchema.get_features_by_resource" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_features_by_resource
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.FeatureSchema.get_observation_codes" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_observation_codes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.FeatureSchema.get_required_features" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_required_features
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.FeatureSchema.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      
        to_dict
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.FeatureSchema.to_yaml" class="md-nav__link">
    <span class="md-ellipsis">
      
        to_yaml
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.FeatureSchema.validate_dataframe_columns" class="md-nav__link">
    <span class="md-ellipsis">
      
        validate_dataframe_columns
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#healthchain.io.containers.base" class="md-nav__link">
    <span class="md-ellipsis">
      
        base
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="base">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.base.BaseDocument" class="md-nav__link">
    <span class="md-ellipsis">
      
        BaseDocument
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.base.DataContainer" class="md-nav__link">
    <span class="md-ellipsis">
      
        DataContainer
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#healthchain.io.containers.dataset" class="md-nav__link">
    <span class="md-ellipsis">
      
        dataset
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="dataset">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.dataset.Dataset" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dataset
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Dataset">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.dataset.Dataset.from_fhir_bundle" class="md-nav__link">
    <span class="md-ellipsis">
      
        from_fhir_bundle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.dataset.Dataset.to_risk_assessment" class="md-nav__link">
    <span class="md-ellipsis">
      
        to_risk_assessment
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.dataset.Dataset.validate" class="md-nav__link">
    <span class="md-ellipsis">
      
        validate
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#healthchain.io.containers.document" class="md-nav__link">
    <span class="md-ellipsis">
      
        document
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="document">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.CdsAnnotations" class="md-nav__link">
    <span class="md-ellipsis">
      
        CdsAnnotations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CdsAnnotations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.CdsAnnotations.actions" class="md-nav__link">
    <span class="md-ellipsis">
      
        actions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.CdsAnnotations.cards" class="md-nav__link">
    <span class="md-ellipsis">
      
        cards
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.Document" class="md-nav__link">
    <span class="md-ellipsis">
      
        Document
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Document">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.Document.__iter__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __iter__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.Document.__len__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __len__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.Document.__post_init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __post_init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.Document.update_problem_list_from_nlp" class="md-nav__link">
    <span class="md-ellipsis">
      
        update_problem_list_from_nlp
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.Document.word_count" class="md-nav__link">
    <span class="md-ellipsis">
      
        word_count
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData" class="md-nav__link">
    <span class="md-ellipsis">
      
        FhirData
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FhirData">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData--add-prefetch-resources-from-cds-request" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add prefetch resources from CDS request
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData--add-document-to-bundle" class="md-nav__link">
    <span class="md-ellipsis">
      
        Add document to bundle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData--get-document-with-relationships" class="md-nav__link">
    <span class="md-ellipsis">
      
        Get document with relationships
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData--access-clinical-lists" class="md-nav__link">
    <span class="md-ellipsis">
      
        Access clinical lists
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.allergy_list" class="md-nav__link">
    <span class="md-ellipsis">
      
        allergy_list
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.bundle" class="md-nav__link">
    <span class="md-ellipsis">
      
        bundle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.medication_list" class="md-nav__link">
    <span class="md-ellipsis">
      
        medication_list
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.operation_outcomes" class="md-nav__link">
    <span class="md-ellipsis">
      
        operation_outcomes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.patient" class="md-nav__link">
    <span class="md-ellipsis">
      
        patient
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.patients" class="md-nav__link">
    <span class="md-ellipsis">
      
        patients
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.prefetch_resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        prefetch_resources
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.problem_list" class="md-nav__link">
    <span class="md-ellipsis">
      
        problem_list
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.provenances" class="md-nav__link">
    <span class="md-ellipsis">
      
        provenances
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.add_document_reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_document_reference
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.add_resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_resources
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.get_document_reference_family" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_document_reference_family
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.get_document_references_readable" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_document_references_readable
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.get_prefetch_resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_prefetch_resources
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.FhirData.get_resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_resources
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.ModelOutputs" class="md-nav__link">
    <span class="md-ellipsis">
      
        ModelOutputs
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ModelOutputs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.ModelOutputs.get_generated_text" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_generated_text
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.document.NlpAnnotations" class="md-nav__link">
    <span class="md-ellipsis">
      
        NlpAnnotations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema" class="md-nav__link">
    <span class="md-ellipsis">
      
        featureschema
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="featureschema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureMapping" class="md-nav__link">
    <span class="md-ellipsis">
      
        FeatureMapping
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FeatureMapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureMapping.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      
        from_dict
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureMapping.validate_resource_requirements" class="md-nav__link">
    <span class="md-ellipsis">
      
        validate_resource_requirements
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureSchema" class="md-nav__link">
    <span class="md-ellipsis">
      
        FeatureSchema
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="FeatureSchema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureSchema.convert_feature_dicts" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_feature_dicts
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureSchema.from_dict" class="md-nav__link">
    <span class="md-ellipsis">
      
        from_dict
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureSchema.from_yaml" class="md-nav__link">
    <span class="md-ellipsis">
      
        from_yaml
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureSchema.get_feature_names" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_feature_names
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureSchema.get_features_by_resource" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_features_by_resource
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureSchema.get_observation_codes" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_observation_codes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureSchema.get_required_features" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_required_features
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureSchema.to_dict" class="md-nav__link">
    <span class="md-ellipsis">
      
        to_dict
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureSchema.to_yaml" class="md-nav__link">
    <span class="md-ellipsis">
      
        to_yaml
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthchain.io.containers.featureschema.FeatureSchema.validate_dataframe_columns" class="md-nav__link">
    <span class="md-ellipsis">
      
        validate_dataframe_columns
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="containers">Containers</h1>


<div class="doc doc-object doc-module">



<a id="healthchain.io.containers"></a>
    <div class="doc doc-contents first">










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="healthchain.io.containers.BaseDocument" class="doc doc-heading">
            <code>BaseDocument</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="DataContainer


  
      dataclass
   (healthchain.io.containers.base.DataContainer)" href="#healthchain.io.containers.base.DataContainer">DataContainer</a>[<span title="str">str</span>]</code></p>



        <p>Base document container for raw text content.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>healthchain/io/containers/base.py</code></summary>
                <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-50">50</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-51">51</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-52">52</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-53">53</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-54">54</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-55">55</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-56">56</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-57">57</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-58">58</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-59">59</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-60">60</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-61">61</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50"></a><span style="color: #82AAFF">@dataclass</span>
</span><span id="__span-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51"></a><span style="color: #BB80B3">class</span><span style="color: #EFF"> </span><span style="color: #FFCB6B">BaseDocument</span><span style="color: #89DDFF">(</span><span style="color: #EFF">DataContainer</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]):</span>
</span><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Base document container for raw text content.&quot;&quot;&quot;</span>
</span><span id="__span-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53"></a>
</span><span id="__span-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54"></a>    <span style="color: #EFF">data</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span>
</span><span id="__span-0-55"><a id="__codelineno-0-55" name="__codelineno-0-55"></a>    <span style="color: #EFF">text</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">field</span><span style="color: #89DDFF">(</span><span style="color: #EFF">init</span><span style="color: #89DDFF">=False)</span>
</span><span id="__span-0-56"><a id="__codelineno-0-56" name="__codelineno-0-56"></a>
</span><span id="__span-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">__post_init__</span><span style="color: #89DDFF">(self):</span>
</span><span id="__span-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">text</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span>
</span><span id="__span-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59"></a>
</span><span id="__span-0-60"><a id="__codelineno-0-60" name="__codelineno-0-60"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">char_count</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">int</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-61"><a id="__codelineno-0-61" name="__codelineno-0-61"></a>        <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">)</span>
</span></code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="healthchain.io.containers.DataContainer" class="doc doc-heading">
            <code>DataContainer</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Generic">Generic</span>[<span title="healthchain.io.containers.base.T">T</span>]</code></p>



        <p>A generic container for data.</p>
<p>This class represents a container for data with a specific type T.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">ATTRIBUTE</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.DataContainer.data">data</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>The data stored in the container.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="healthchain.io.containers.base.T">T</span></code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">METHOD</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.DataContainer.to_dict">to_dict</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Converts the container's data to a dictionary.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.DataContainer.to_json">to_json</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Converts the container's data to a JSON string.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.DataContainer.from_dict">from_dict</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Dict[str, Any]) -&gt; "DataContainer":
Creates a DataContainer instance from a dictionary.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.DataContainer.from_json">from_json</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>str) -&gt; "DataContainer":
Creates a DataContainer instance from a JSON string.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>healthchain/io/containers/base.py</code></summary>
                <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-9"> 9</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-10">10</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-11">11</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-12">12</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-13">13</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-14">14</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-15">15</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-16">16</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-17">17</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-18">18</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-19">19</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-20">20</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-21">21</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-22">22</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-23">23</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-24">24</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-25">25</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-26">26</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-27">27</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-28">28</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-29">29</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-30">30</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-31">31</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-32">32</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-33">33</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-34">34</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-35">35</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-36">36</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-37">37</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-38">38</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-39">39</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-40">40</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-41">41</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-42">42</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-43">43</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-44">44</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-45">45</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-46">46</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-47">47</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9"></a><span style="color: #82AAFF">@dataclass</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10"></a><span style="color: #BB80B3">class</span><span style="color: #EFF"> </span><span style="color: #FFCB6B">DataContainer</span><span style="color: #89DDFF">(</span><span style="color: #EFF">Generic</span><span style="color: #89DDFF">[</span><span style="color: #EFF">T</span><span style="color: #89DDFF">]):</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12"></a><span style="color: #546E7A; font-style: italic">    A generic container for data.</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13"></a>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14"></a><span style="color: #546E7A; font-style: italic">    This class represents a container for data with a specific type T.</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15"></a>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16"></a><span style="color: #546E7A; font-style: italic">    Attributes:</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17"></a><span style="color: #546E7A; font-style: italic">        data (T): The data stored in the container.</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18"></a>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19"></a><span style="color: #546E7A; font-style: italic">    Methods:</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20"></a><span style="color: #546E7A; font-style: italic">        to_dict() -&gt; Dict[str, Any]:</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21"></a><span style="color: #546E7A; font-style: italic">            Converts the container&#39;s data to a dictionary.</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22"></a>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23"></a><span style="color: #546E7A; font-style: italic">        to_json() -&gt; str:</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24"></a><span style="color: #546E7A; font-style: italic">            Converts the container&#39;s data to a JSON string.</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25"></a>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26"></a><span style="color: #546E7A; font-style: italic">        from_dict(cls, data: Dict[str, Any]) -&gt; &quot;DataContainer&quot;:</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27"></a><span style="color: #546E7A; font-style: italic">            Creates a DataContainer instance from a dictionary.</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28"></a>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29"></a><span style="color: #546E7A; font-style: italic">        from_json(cls, json_str: str) -&gt; &quot;DataContainer&quot;:</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30"></a><span style="color: #546E7A; font-style: italic">            Creates a DataContainer instance from a JSON string.</span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32"></a>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33"></a>    <span style="color: #EFF">data</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">T</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34"></a>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">to_dict</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">{</span><span style="color: #EFF">k</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">v</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">k</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">v</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #82AAFF">__dict__</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()</span> <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #EFF">k</span><span style="color: #89DDFF">.</span><span style="color: #EFF">startswith</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;_&quot;</span><span style="color: #89DDFF">)}</span>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37"></a>
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">to_json</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39"></a>        <span style="color: #BB80B3">return</span> <span style="color: #EFF">json</span><span style="color: #89DDFF">.</span><span style="color: #EFF">dumps</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">to_dict</span><span style="color: #89DDFF">())</span>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40"></a>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41"></a>    <span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">from_dict</span><span style="color: #89DDFF">(cls,</span> <span style="color: #EFF">data</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;DataContainer&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">cls(**</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44"></a>
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45"></a>    <span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">from_json</span><span style="color: #89DDFF">(cls,</span> <span style="color: #EFF">json_str</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;DataContainer&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">cls.</span><span style="color: #EFF">from_dict</span><span style="color: #89DDFF">(</span><span style="color: #EFF">json</span><span style="color: #89DDFF">.</span><span style="color: #EFF">loads</span><span style="color: #89DDFF">(</span><span style="color: #EFF">json_str</span><span style="color: #89DDFF">))</span>
</span></code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="healthchain.io.containers.Dataset" class="doc doc-heading">
            <code>Dataset</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="DataContainer


  
      dataclass
   (healthchain.io.containers.base.DataContainer)" href="#healthchain.io.containers.base.DataContainer">DataContainer</a>[<span title="pandas.DataFrame">DataFrame</span>]</code></p>



        <p>A container for tabular data optimized for ML inference, lightweight wrapper around a pandas DataFrame.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">ATTRIBUTE</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.Dataset.data">data</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>The pandas DataFrame containing the dataset.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="healthchain.io.containers.base.T">T</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.Dataset.metadata">metadata</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Dict for storing pipeline results (predictions, probabilities, etc.)</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">METHOD</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.Dataset.from_csv">from_csv</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Load Dataset from CSV.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.Dataset.from_dict">from_dict</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Load Dataset from dict.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="from_fhir_bundle(bundle, schema, aggregation='mean')

  
      classmethod
   (healthchain.io.containers.Dataset.from_fhir_bundle)" href="#healthchain.io.containers.Dataset.from_fhir_bundle">from_fhir_bundle</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Create Dataset from FHIR Bundle and schema.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.Dataset.to_csv">to_csv</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Save Dataset to CSV.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="to_risk_assessment(outcome_code, outcome_display, outcome_system='http://hl7.org/fhir/sid/icd-10', model_name=None, model_version=None, high_threshold=0.7, moderate_threshold=0.4, predictions=None, probabilities=None) (healthchain.io.containers.Dataset.to_risk_assessment)" href="#healthchain.io.containers.Dataset.to_risk_assessment">to_risk_assessment</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Convert predictions to FHIR RiskAssessment.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>healthchain/io/containers/dataset.py</code></summary>
                <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-21"> 21</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-22"> 22</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-23"> 23</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-24"> 24</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-25"> 25</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-26"> 26</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-27"> 27</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-28"> 28</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-29"> 29</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-30"> 30</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-31"> 31</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-32"> 32</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-33"> 33</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-34"> 34</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-35"> 35</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-36"> 36</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-37"> 37</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-38"> 38</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-39"> 39</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-40"> 40</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-41"> 41</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-42"> 42</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-43"> 43</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-44"> 44</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-45"> 45</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-46"> 46</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-47"> 47</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-48"> 48</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-49"> 49</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-50"> 50</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-51"> 51</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-52"> 52</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-53"> 53</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-54"> 54</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-55"> 55</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-56"> 56</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-57"> 57</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-58"> 58</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-59"> 59</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-60"> 60</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-61"> 61</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-62"> 62</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-63"> 63</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-64"> 64</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-65"> 65</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-66"> 66</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-67"> 67</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-68"> 68</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-69"> 69</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-70"> 70</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-71"> 71</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-72"> 72</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-73"> 73</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-74"> 74</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-75"> 75</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-76"> 76</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-77"> 77</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-78"> 78</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-79"> 79</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-80"> 80</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-81"> 81</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-82"> 82</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-83"> 83</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-84"> 84</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-85"> 85</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-86"> 86</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-87"> 87</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-88"> 88</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-89"> 89</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-90"> 90</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-91"> 91</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-92"> 92</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-93"> 93</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-94"> 94</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-95"> 95</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-96"> 96</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-97"> 97</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-98"> 98</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-99"> 99</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-100">100</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-101">101</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-102">102</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-103">103</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-104">104</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-105">105</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-106">106</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-107">107</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-108">108</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-109">109</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-110">110</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-111">111</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-112">112</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-113">113</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-114">114</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-115">115</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-116">116</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-117">117</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-118">118</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-119">119</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-120">120</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-121">121</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-122">122</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-123">123</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-124">124</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-125">125</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-126">126</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-127">127</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-128">128</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-129">129</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-130">130</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-131">131</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-132">132</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-133">133</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-134">134</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-135">135</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-136">136</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-137">137</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-138">138</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-139">139</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-140">140</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-141">141</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-142">142</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-143">143</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-144">144</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-145">145</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-146">146</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-147">147</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-148">148</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-149">149</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-150">150</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-151">151</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-152">152</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-153">153</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-154">154</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-155">155</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-156">156</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-157">157</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-158">158</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-159">159</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-160">160</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-161">161</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-162">162</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-163">163</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-164">164</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-165">165</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-166">166</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-167">167</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-168">168</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-169">169</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-170">170</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-171">171</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-172">172</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-173">173</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-174">174</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-175">175</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-176">176</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-177">177</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-178">178</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-179">179</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-180">180</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-181">181</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-182">182</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-183">183</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-184">184</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-185">185</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-186">186</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-187">187</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-188">188</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-189">189</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-190">190</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-191">191</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-192">192</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-193">193</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-194">194</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-195">195</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-196">196</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-197">197</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-198">198</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-199">199</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-200">200</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-201">201</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-202">202</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-203">203</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-204">204</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-205">205</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-206">206</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-207">207</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-208">208</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-209">209</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-210">210</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-211">211</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-212">212</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-213">213</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-214">214</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-215">215</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-216">216</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-217">217</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-218">218</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-219">219</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-220">220</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-221">221</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-222">222</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-223">223</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-224">224</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-225">225</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-226">226</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-227">227</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-228">228</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-229">229</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-230">230</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-231">231</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-232">232</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-233">233</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-234">234</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-235">235</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-236">236</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-237">237</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-238">238</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-239">239</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-240">240</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-241">241</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-242">242</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-243">243</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-244">244</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-245">245</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-246">246</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-247">247</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-248">248</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-249">249</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-250">250</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-251">251</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-252">252</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-253">253</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-254">254</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-255">255</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-256">256</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-257">257</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-258">258</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-259">259</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-260">260</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-261">261</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-262">262</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-263">263</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-264">264</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-265">265</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-266">266</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-267">267</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-268">268</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-269">269</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-270">270</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-271">271</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-272">272</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-273">273</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-274">274</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-275">275</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-276">276</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-277">277</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-278">278</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-279">279</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-280">280</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-281">281</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-282">282</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-283">283</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-284">284</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-285">285</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-286">286</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-287">287</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-288">288</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-289">289</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-290">290</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-291">291</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-292">292</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-293">293</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-294">294</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-295">295</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-296">296</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-297">297</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-298">298</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-299">299</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-300">300</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-301">301</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-302">302</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-303">303</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-304">304</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-305">305</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-306">306</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-307">307</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-308">308</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-309">309</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-310">310</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-311">311</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-312">312</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-313">313</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-314">314</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-315">315</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-316">316</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-317">317</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-318">318</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-319">319</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-320">320</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21"></a><span style="color: #82AAFF">@dataclass</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22"></a><span style="color: #BB80B3">class</span><span style="color: #EFF"> </span><span style="color: #FFCB6B">Dataset</span><span style="color: #89DDFF">(</span><span style="color: #EFF">DataContainer</span><span style="color: #89DDFF">[</span><span style="color: #EFF">pd</span><span style="color: #89DDFF">.</span><span style="color: #EFF">DataFrame</span><span style="color: #89DDFF">]):</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24"></a><span style="color: #546E7A; font-style: italic">    A container for tabular data optimized for ML inference, lightweight wrapper around a pandas DataFrame.</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25"></a>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26"></a><span style="color: #546E7A; font-style: italic">    Attributes:</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27"></a><span style="color: #546E7A; font-style: italic">        data: The pandas DataFrame containing the dataset.</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28"></a><span style="color: #546E7A; font-style: italic">        metadata: Dict for storing pipeline results (predictions, probabilities, etc.)</span>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29"></a>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30"></a><span style="color: #546E7A; font-style: italic">    Methods:</span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31"></a><span style="color: #546E7A; font-style: italic">        from_csv: Load Dataset from CSV.</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32"></a><span style="color: #546E7A; font-style: italic">        from_dict: Load Dataset from dict.</span>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33"></a><span style="color: #546E7A; font-style: italic">        from_fhir_bundle: Create Dataset from FHIR Bundle and schema.</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34"></a><span style="color: #546E7A; font-style: italic">        to_csv: Save Dataset to CSV.</span>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35"></a><span style="color: #546E7A; font-style: italic">        to_risk_assessment: Convert predictions to FHIR RiskAssessment.</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37"></a>
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38"></a>    <span style="color: #EFF">metadata</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">field</span><span style="color: #89DDFF">(</span><span style="color: #EFF">default_factory</span><span style="color: #89DDFF">=</span><span style="color: #82AAFF">dict</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39"></a>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">__post_init__</span><span style="color: #89DDFF">(self):</span>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41"></a>        <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">pd</span><span style="color: #89DDFF">.</span><span style="color: #EFF">DataFrame</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42"></a>            <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">TypeError</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;data must be a pandas DataFrame&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43"></a>
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">columns</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46"></a>        <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47"></a>
</span><span id="__span-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-49"><a id="__codelineno-0-49" name="__codelineno-0-49"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">index</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">pd</span><span style="color: #89DDFF">.</span><span style="color: #EFF">Index</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">index</span>
</span><span id="__span-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51"></a>
</span><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">dtypes</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">{</span><span style="color: #EFF">col</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">(</span><span style="color: #EFF">dtype</span><span style="color: #89DDFF">)</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">col</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">dtype</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">dtypes</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()}</span>
</span><span id="__span-0-55"><a id="__codelineno-0-55" name="__codelineno-0-55"></a>
</span><span id="__span-0-56"><a id="__codelineno-0-56" name="__codelineno-0-56"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">column_count</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">int</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57"></a>        <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58"></a>
</span><span id="__span-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">row_count</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">int</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-60"><a id="__codelineno-0-60" name="__codelineno-0-60"></a>        <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-61"><a id="__codelineno-0-61" name="__codelineno-0-61"></a>
</span><span id="__span-0-62"><a id="__codelineno-0-62" name="__codelineno-0-62"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_dtype</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">column</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-63"><a id="__codelineno-0-63" name="__codelineno-0-63"></a>        <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">[</span><span style="color: #EFF">column</span><span style="color: #89DDFF">].</span><span style="color: #EFF">dtype</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-64"><a id="__codelineno-0-64" name="__codelineno-0-64"></a>
</span><span id="__span-0-65"><a id="__codelineno-0-65" name="__codelineno-0-65"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">__iter__</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Iterator</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-66"><a id="__codelineno-0-66" name="__codelineno-0-66"></a>        <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">iter</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-67"><a id="__codelineno-0-67" name="__codelineno-0-67"></a>
</span><span id="__span-0-68"><a id="__codelineno-0-68" name="__codelineno-0-68"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">__len__</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">int</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-69"><a id="__codelineno-0-69" name="__codelineno-0-69"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">row_count</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-70"><a id="__codelineno-0-70" name="__codelineno-0-70"></a>
</span><span id="__span-0-71"><a id="__codelineno-0-71" name="__codelineno-0-71"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">describe</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-72"><a id="__codelineno-0-72" name="__codelineno-0-72"></a>        <span style="color: #BB80B3">return</span> <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Dataset with </span><span style="color: #89DDFF">{self.</span><span style="color: #EFF">column_count</span><span style="color: #89DDFF">()}</span><span style="color: #C3E88D"> columns and </span><span style="color: #89DDFF">{self.</span><span style="color: #EFF">row_count</span><span style="color: #89DDFF">()}</span><span style="color: #C3E88D"> rows&quot;</span>
</span><span id="__span-0-73"><a id="__codelineno-0-73" name="__codelineno-0-73"></a>
</span><span id="__span-0-74"><a id="__codelineno-0-74" name="__codelineno-0-74"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">remove_column</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">name</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-75"><a id="__codelineno-0-75" name="__codelineno-0-75"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">drop</span><span style="color: #89DDFF">(</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">=[</span><span style="color: #EFF">name</span><span style="color: #89DDFF">],</span> <span style="color: #EFF">inplace</span><span style="color: #89DDFF">=True)</span>
</span><span id="__span-0-76"><a id="__codelineno-0-76" name="__codelineno-0-76"></a>
</span><span id="__span-0-77"><a id="__codelineno-0-77" name="__codelineno-0-77"></a>    <span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-78"><a id="__codelineno-0-78" name="__codelineno-0-78"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">from_csv</span><span style="color: #89DDFF">(cls,</span> <span style="color: #EFF">path</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">**</span><span style="color: #EFF">kwargs</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;Dataset&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-79"><a id="__codelineno-0-79" name="__codelineno-0-79"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">cls(</span><span style="color: #EFF">pd</span><span style="color: #89DDFF">.</span><span style="color: #EFF">read_csv</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">**</span><span style="color: #EFF">kwargs</span><span style="color: #89DDFF">))</span>
</span><span id="__span-0-80"><a id="__codelineno-0-80" name="__codelineno-0-80"></a>
</span><span id="__span-0-81"><a id="__codelineno-0-81" name="__codelineno-0-81"></a>    <span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-82"><a id="__codelineno-0-82" name="__codelineno-0-82"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">from_dict</span><span style="color: #89DDFF">(cls,</span> <span style="color: #EFF">data</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;Dataset&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-83"><a id="__codelineno-0-83" name="__codelineno-0-83"></a>        <span style="color: #EFF">df</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">pd</span><span style="color: #89DDFF">.</span><span style="color: #EFF">DataFrame</span><span style="color: #89DDFF">(</span><span style="color: #EFF">data</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;data&quot;</span><span style="color: #89DDFF">])</span>
</span><span id="__span-0-84"><a id="__codelineno-0-84" name="__codelineno-0-84"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">cls(</span><span style="color: #EFF">df</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-85"><a id="__codelineno-0-85" name="__codelineno-0-85"></a>
</span><span id="__span-0-86"><a id="__codelineno-0-86" name="__codelineno-0-86"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">to_csv</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">path</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">**</span><span style="color: #EFF">kwargs</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-87"><a id="__codelineno-0-87" name="__codelineno-0-87"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">to_csv</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">**</span><span style="color: #EFF">kwargs</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-88"><a id="__codelineno-0-88" name="__codelineno-0-88"></a>
</span><span id="__span-0-89"><a id="__codelineno-0-89" name="__codelineno-0-89"></a>    <span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-90"><a id="__codelineno-0-90" name="__codelineno-0-90"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">from_fhir_bundle</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-91"><a id="__codelineno-0-91" name="__codelineno-0-91"></a>        <span style="color: #89DDFF">cls,</span>
</span><span id="__span-0-92"><a id="__codelineno-0-92" name="__codelineno-0-92"></a>        <span style="color: #EFF">bundle</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Union</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Bundle</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]],</span>
</span><span id="__span-0-93"><a id="__codelineno-0-93" name="__codelineno-0-93"></a>        <span style="color: #EFF">schema</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Union</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">FeatureSchema</span><span style="color: #89DDFF">],</span>
</span><span id="__span-0-94"><a id="__codelineno-0-94" name="__codelineno-0-94"></a>        <span style="color: #EFF">aggregation</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;mean&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-95"><a id="__codelineno-0-95" name="__codelineno-0-95"></a>    <span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;Dataset&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-96"><a id="__codelineno-0-96" name="__codelineno-0-96"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Create Dataset from a FHIR Bundle using a feature schema.</span>
</span><span id="__span-0-97"><a id="__codelineno-0-97" name="__codelineno-0-97"></a>
</span><span id="__span-0-98"><a id="__codelineno-0-98" name="__codelineno-0-98"></a><span style="color: #546E7A; font-style: italic">        Extracts features from FHIR resources according to the schema specification,</span>
</span><span id="__span-0-99"><a id="__codelineno-0-99" name="__codelineno-0-99"></a><span style="color: #546E7A; font-style: italic">        converting FHIR data to a pandas DataFrame suitable for ML inference.</span>
</span><span id="__span-0-100"><a id="__codelineno-0-100" name="__codelineno-0-100"></a>
</span><span id="__span-0-101"><a id="__codelineno-0-101" name="__codelineno-0-101"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-102"><a id="__codelineno-0-102" name="__codelineno-0-102"></a><span style="color: #546E7A; font-style: italic">            bundle: FHIR Bundle resource (object or dict)</span>
</span><span id="__span-0-103"><a id="__codelineno-0-103" name="__codelineno-0-103"></a><span style="color: #546E7A; font-style: italic">            schema: FeatureSchema object, or path to YAML schema file</span>
</span><span id="__span-0-104"><a id="__codelineno-0-104" name="__codelineno-0-104"></a><span style="color: #546E7A; font-style: italic">            aggregation: How to aggregate multiple observation values (default: &quot;mean&quot;)</span>
</span><span id="__span-0-105"><a id="__codelineno-0-105" name="__codelineno-0-105"></a><span style="color: #546E7A; font-style: italic">                Options: &quot;mean&quot;, &quot;median&quot;, &quot;max&quot;, &quot;min&quot;, &quot;last&quot; (default: &quot;mean&quot;)</span>
</span><span id="__span-0-106"><a id="__codelineno-0-106" name="__codelineno-0-106"></a>
</span><span id="__span-0-107"><a id="__codelineno-0-107" name="__codelineno-0-107"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-108"><a id="__codelineno-0-108" name="__codelineno-0-108"></a><span style="color: #546E7A; font-style: italic">            Dataset container with extracted features</span>
</span><span id="__span-0-109"><a id="__codelineno-0-109" name="__codelineno-0-109"></a>
</span><span id="__span-0-110"><a id="__codelineno-0-110" name="__codelineno-0-110"></a><span style="color: #546E7A; font-style: italic">        Example:</span>
</span><span id="__span-0-111"><a id="__codelineno-0-111" name="__codelineno-0-111"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; from fhir.resources.bundle import Bundle</span>
</span><span id="__span-0-112"><a id="__codelineno-0-112" name="__codelineno-0-112"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; bundle = Bundle(**patient_data)</span>
</span><span id="__span-0-113"><a id="__codelineno-0-113" name="__codelineno-0-113"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; dataset = Dataset.from_fhir_bundle(</span>
</span><span id="__span-0-114"><a id="__codelineno-0-114" name="__codelineno-0-114"></a><span style="color: #546E7A; font-style: italic">            ...     bundle,</span>
</span><span id="__span-0-115"><a id="__codelineno-0-115" name="__codelineno-0-115"></a><span style="color: #546E7A; font-style: italic">            ...     schema=&quot;healthchain/configs/features/sepsis_vitals.yaml&quot;</span>
</span><span id="__span-0-116"><a id="__codelineno-0-116" name="__codelineno-0-116"></a><span style="color: #546E7A; font-style: italic">            ... )</span>
</span><span id="__span-0-117"><a id="__codelineno-0-117" name="__codelineno-0-117"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; df = dataset.data</span>
</span><span id="__span-0-118"><a id="__codelineno-0-118" name="__codelineno-0-118"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-119"><a id="__codelineno-0-119" name="__codelineno-0-119"></a>        <span style="color: #546E7A; font-style: italic"># Load schema if path provided</span>
</span><span id="__span-0-120"><a id="__codelineno-0-120" name="__codelineno-0-120"></a>        <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">schema</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">(</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">)):</span>
</span><span id="__span-0-121"><a id="__codelineno-0-121" name="__codelineno-0-121"></a>            <span style="color: #EFF">schema</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">FeatureSchema</span><span style="color: #89DDFF">.</span><span style="color: #EFF">from_yaml</span><span style="color: #89DDFF">(</span><span style="color: #EFF">schema</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-122"><a id="__codelineno-0-122" name="__codelineno-0-122"></a>
</span><span id="__span-0-123"><a id="__codelineno-0-123" name="__codelineno-0-123"></a>        <span style="color: #546E7A; font-style: italic"># Extract features using mapper</span>
</span><span id="__span-0-124"><a id="__codelineno-0-124" name="__codelineno-0-124"></a>        <span style="color: #EFF">mapper</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">FHIRFeatureMapper</span><span style="color: #89DDFF">(</span><span style="color: #EFF">schema</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-125"><a id="__codelineno-0-125" name="__codelineno-0-125"></a>        <span style="color: #EFF">df</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">mapper</span><span style="color: #89DDFF">.</span><span style="color: #EFF">extract_features</span><span style="color: #89DDFF">(</span><span style="color: #EFF">bundle</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">aggregation</span><span style="color: #89DDFF">=</span><span style="color: #EFF">aggregation</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-126"><a id="__codelineno-0-126" name="__codelineno-0-126"></a>
</span><span id="__span-0-127"><a id="__codelineno-0-127" name="__codelineno-0-127"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">cls(</span><span style="color: #EFF">df</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-128"><a id="__codelineno-0-128" name="__codelineno-0-128"></a>
</span><span id="__span-0-129"><a id="__codelineno-0-129" name="__codelineno-0-129"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">validate</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-130"><a id="__codelineno-0-130" name="__codelineno-0-130"></a>        <span style="color: #89DDFF">self,</span> <span style="color: #EFF">schema</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">FeatureSchema</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">raise_on_error</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">bool</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">False</span>
</span><span id="__span-0-131"><a id="__codelineno-0-131" name="__codelineno-0-131"></a>    <span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">ValidationResult</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-132"><a id="__codelineno-0-132" name="__codelineno-0-132"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Validate DataFrame against a feature schema.</span>
</span><span id="__span-0-133"><a id="__codelineno-0-133" name="__codelineno-0-133"></a>
</span><span id="__span-0-134"><a id="__codelineno-0-134" name="__codelineno-0-134"></a><span style="color: #546E7A; font-style: italic">        Checks that required features are present and have correct data types.</span>
</span><span id="__span-0-135"><a id="__codelineno-0-135" name="__codelineno-0-135"></a>
</span><span id="__span-0-136"><a id="__codelineno-0-136" name="__codelineno-0-136"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-137"><a id="__codelineno-0-137" name="__codelineno-0-137"></a><span style="color: #546E7A; font-style: italic">            schema: FeatureSchema to validate against</span>
</span><span id="__span-0-138"><a id="__codelineno-0-138" name="__codelineno-0-138"></a><span style="color: #546E7A; font-style: italic">            raise_on_error: Whether to raise exception on validation failure</span>
</span><span id="__span-0-139"><a id="__codelineno-0-139" name="__codelineno-0-139"></a>
</span><span id="__span-0-140"><a id="__codelineno-0-140" name="__codelineno-0-140"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-141"><a id="__codelineno-0-141" name="__codelineno-0-141"></a><span style="color: #546E7A; font-style: italic">            ValidationResult with validation status and details</span>
</span><span id="__span-0-142"><a id="__codelineno-0-142" name="__codelineno-0-142"></a>
</span><span id="__span-0-143"><a id="__codelineno-0-143" name="__codelineno-0-143"></a><span style="color: #546E7A; font-style: italic">        Raises:</span>
</span><span id="__span-0-144"><a id="__codelineno-0-144" name="__codelineno-0-144"></a><span style="color: #546E7A; font-style: italic">            ValueError: If raise_on_error is True and validation fails</span>
</span><span id="__span-0-145"><a id="__codelineno-0-145" name="__codelineno-0-145"></a>
</span><span id="__span-0-146"><a id="__codelineno-0-146" name="__codelineno-0-146"></a><span style="color: #546E7A; font-style: italic">        Example:</span>
</span><span id="__span-0-147"><a id="__codelineno-0-147" name="__codelineno-0-147"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; schema = FeatureSchema.from_yaml(&quot;configs/features/sepsis_vitals.yaml&quot;)</span>
</span><span id="__span-0-148"><a id="__codelineno-0-148" name="__codelineno-0-148"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; result = dataset.validate(schema)</span>
</span><span id="__span-0-149"><a id="__codelineno-0-149" name="__codelineno-0-149"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; if not result.valid:</span>
</span><span id="__span-0-150"><a id="__codelineno-0-150" name="__codelineno-0-150"></a><span style="color: #546E7A; font-style: italic">            ...     print(result.errors)</span>
</span><span id="__span-0-151"><a id="__codelineno-0-151" name="__codelineno-0-151"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-152"><a id="__codelineno-0-152" name="__codelineno-0-152"></a>        <span style="color: #EFF">result</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">ValidationResult</span><span style="color: #89DDFF">(</span><span style="color: #EFF">valid</span><span style="color: #89DDFF">=True)</span>
</span><span id="__span-0-153"><a id="__codelineno-0-153" name="__codelineno-0-153"></a>
</span><span id="__span-0-154"><a id="__codelineno-0-154" name="__codelineno-0-154"></a>        <span style="color: #546E7A; font-style: italic"># Check for missing required features</span>
</span><span id="__span-0-155"><a id="__codelineno-0-155" name="__codelineno-0-155"></a>        <span style="color: #EFF">required</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">schema</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get_required_features</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-156"><a id="__codelineno-0-156" name="__codelineno-0-156"></a>        <span style="color: #EFF">missing</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[</span><span style="color: #EFF">f</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">f</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">required</span> <span style="color: #BB80B3">if</span> <span style="color: #EFF">f</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-157"><a id="__codelineno-0-157" name="__codelineno-0-157"></a>
</span><span id="__span-0-158"><a id="__codelineno-0-158" name="__codelineno-0-158"></a>        <span style="color: #BB80B3">for</span> <span style="color: #EFF">feature</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">missing</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-159"><a id="__codelineno-0-159" name="__codelineno-0-159"></a>            <span style="color: #EFF">result</span><span style="color: #89DDFF">.</span><span style="color: #EFF">add_missing_feature</span><span style="color: #89DDFF">(</span><span style="color: #EFF">feature</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-160"><a id="__codelineno-0-160" name="__codelineno-0-160"></a>
</span><span id="__span-0-161"><a id="__codelineno-0-161" name="__codelineno-0-161"></a>        <span style="color: #546E7A; font-style: italic"># Check data types for present features</span>
</span><span id="__span-0-162"><a id="__codelineno-0-162" name="__codelineno-0-162"></a>        <span style="color: #BB80B3">for</span> <span style="color: #EFF">feature_name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">schema</span><span style="color: #89DDFF">.</span><span style="color: #EFF">features</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">():</span>
</span><span id="__span-0-163"><a id="__codelineno-0-163" name="__codelineno-0-163"></a>            <span style="color: #BB80B3">if</span> <span style="color: #EFF">feature_name</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-164"><a id="__codelineno-0-164" name="__codelineno-0-164"></a>                <span style="color: #EFF">actual_dtype</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">[</span><span style="color: #EFF">feature_name</span><span style="color: #89DDFF">].</span><span style="color: #EFF">dtype</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-165"><a id="__codelineno-0-165" name="__codelineno-0-165"></a>                <span style="color: #EFF">expected_dtype</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">dtype</span>
</span><span id="__span-0-166"><a id="__codelineno-0-166" name="__codelineno-0-166"></a>
</span><span id="__span-0-167"><a id="__codelineno-0-167" name="__codelineno-0-167"></a>                <span style="color: #546E7A; font-style: italic"># Check for type mismatches (allow some flexibility)</span>
</span><span id="__span-0-168"><a id="__codelineno-0-168" name="__codelineno-0-168"></a>                <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_dtypes_compatible</span><span style="color: #89DDFF">(</span><span style="color: #EFF">actual_dtype</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">expected_dtype</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-169"><a id="__codelineno-0-169" name="__codelineno-0-169"></a>                    <span style="color: #EFF">result</span><span style="color: #89DDFF">.</span><span style="color: #EFF">add_type_mismatch</span><span style="color: #89DDFF">(</span><span style="color: #EFF">feature_name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">expected_dtype</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">actual_dtype</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-170"><a id="__codelineno-0-170" name="__codelineno-0-170"></a>
</span><span id="__span-0-171"><a id="__codelineno-0-171" name="__codelineno-0-171"></a>        <span style="color: #546E7A; font-style: italic"># Warn about optional missing features</span>
</span><span id="__span-0-172"><a id="__codelineno-0-172" name="__codelineno-0-172"></a>        <span style="color: #EFF">optional</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">set</span><span style="color: #89DDFF">(</span><span style="color: #EFF">schema</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get_feature_names</span><span style="color: #89DDFF">())</span> <span style="color: #89DDFF">-</span> <span style="color: #82AAFF">set</span><span style="color: #89DDFF">(</span><span style="color: #EFF">required</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-173"><a id="__codelineno-0-173" name="__codelineno-0-173"></a>        <span style="color: #EFF">missing_optional</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[</span><span style="color: #EFF">f</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">f</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">optional</span> <span style="color: #BB80B3">if</span> <span style="color: #EFF">f</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-174"><a id="__codelineno-0-174" name="__codelineno-0-174"></a>
</span><span id="__span-0-175"><a id="__codelineno-0-175" name="__codelineno-0-175"></a>        <span style="color: #BB80B3">for</span> <span style="color: #EFF">feature</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">missing_optional</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-176"><a id="__codelineno-0-176" name="__codelineno-0-176"></a>            <span style="color: #EFF">result</span><span style="color: #89DDFF">.</span><span style="color: #EFF">add_warning</span><span style="color: #89DDFF">(</span><span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Optional feature &#39;</span><span style="color: #89DDFF">{</span><span style="color: #EFF">feature</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&#39; is missing&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-177"><a id="__codelineno-0-177" name="__codelineno-0-177"></a>
</span><span id="__span-0-178"><a id="__codelineno-0-178" name="__codelineno-0-178"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">raise_on_error</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #EFF">result</span><span style="color: #89DDFF">.</span><span style="color: #EFF">valid</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-179"><a id="__codelineno-0-179" name="__codelineno-0-179"></a>            <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">(</span><span style="color: #EFF">result</span><span style="color: #89DDFF">))</span>
</span><span id="__span-0-180"><a id="__codelineno-0-180" name="__codelineno-0-180"></a>
</span><span id="__span-0-181"><a id="__codelineno-0-181" name="__codelineno-0-181"></a>        <span style="color: #BB80B3">return</span> <span style="color: #EFF">result</span>
</span><span id="__span-0-182"><a id="__codelineno-0-182" name="__codelineno-0-182"></a>
</span><span id="__span-0-183"><a id="__codelineno-0-183" name="__codelineno-0-183"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">_dtypes_compatible</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">actual</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">expected</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">bool</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-184"><a id="__codelineno-0-184" name="__codelineno-0-184"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Check if actual dtype is compatible with expected dtype.</span>
</span><span id="__span-0-185"><a id="__codelineno-0-185" name="__codelineno-0-185"></a>
</span><span id="__span-0-186"><a id="__codelineno-0-186" name="__codelineno-0-186"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-187"><a id="__codelineno-0-187" name="__codelineno-0-187"></a><span style="color: #546E7A; font-style: italic">            actual: Actual dtype string</span>
</span><span id="__span-0-188"><a id="__codelineno-0-188" name="__codelineno-0-188"></a><span style="color: #546E7A; font-style: italic">            expected: Expected dtype string</span>
</span><span id="__span-0-189"><a id="__codelineno-0-189" name="__codelineno-0-189"></a>
</span><span id="__span-0-190"><a id="__codelineno-0-190" name="__codelineno-0-190"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-191"><a id="__codelineno-0-191" name="__codelineno-0-191"></a><span style="color: #546E7A; font-style: italic">            True if dtypes are compatible</span>
</span><span id="__span-0-192"><a id="__codelineno-0-192" name="__codelineno-0-192"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-193"><a id="__codelineno-0-193" name="__codelineno-0-193"></a>        <span style="color: #546E7A; font-style: italic"># Handle numeric types flexibly</span>
</span><span id="__span-0-194"><a id="__codelineno-0-194" name="__codelineno-0-194"></a>        <span style="color: #EFF">numeric_types</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">{</span><span style="color: #C3E88D">&quot;int64&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;int32&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;float64&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;float32&quot;</span><span style="color: #89DDFF">}</span>
</span><span id="__span-0-195"><a id="__codelineno-0-195" name="__codelineno-0-195"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">expected</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">numeric_types</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #EFF">actual</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">numeric_types</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-196"><a id="__codelineno-0-196" name="__codelineno-0-196"></a>            <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">True</span>
</span><span id="__span-0-197"><a id="__codelineno-0-197" name="__codelineno-0-197"></a>
</span><span id="__span-0-198"><a id="__codelineno-0-198" name="__codelineno-0-198"></a>        <span style="color: #546E7A; font-style: italic"># Exact match for non-numeric types</span>
</span><span id="__span-0-199"><a id="__codelineno-0-199" name="__codelineno-0-199"></a>        <span style="color: #BB80B3">return</span> <span style="color: #EFF">actual</span> <span style="color: #89DDFF">==</span> <span style="color: #EFF">expected</span>
</span><span id="__span-0-200"><a id="__codelineno-0-200" name="__codelineno-0-200"></a>
</span><span id="__span-0-201"><a id="__codelineno-0-201" name="__codelineno-0-201"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">to_risk_assessment</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-202"><a id="__codelineno-0-202" name="__codelineno-0-202"></a>        <span style="color: #89DDFF">self,</span>
</span><span id="__span-0-203"><a id="__codelineno-0-203" name="__codelineno-0-203"></a>        <span style="color: #EFF">outcome_code</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-204"><a id="__codelineno-0-204" name="__codelineno-0-204"></a>        <span style="color: #EFF">outcome_display</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-205"><a id="__codelineno-0-205" name="__codelineno-0-205"></a>        <span style="color: #EFF">outcome_system</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;http://hl7.org/fhir/sid/icd-10&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-206"><a id="__codelineno-0-206" name="__codelineno-0-206"></a>        <span style="color: #EFF">model_name</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None,</span>
</span><span id="__span-0-207"><a id="__codelineno-0-207" name="__codelineno-0-207"></a>        <span style="color: #EFF">model_version</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None,</span>
</span><span id="__span-0-208"><a id="__codelineno-0-208" name="__codelineno-0-208"></a>        <span style="color: #EFF">high_threshold</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">float</span> <span style="color: #89DDFF">=</span> <span style="color: #F78C6C">0.7</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-209"><a id="__codelineno-0-209" name="__codelineno-0-209"></a>        <span style="color: #EFF">moderate_threshold</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">float</span> <span style="color: #89DDFF">=</span> <span style="color: #F78C6C">0.4</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-210"><a id="__codelineno-0-210" name="__codelineno-0-210"></a>        <span style="color: #EFF">predictions</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">np</span><span style="color: #89DDFF">.</span><span style="color: #EFF">ndarray</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None,</span>
</span><span id="__span-0-211"><a id="__codelineno-0-211" name="__codelineno-0-211"></a>        <span style="color: #EFF">probabilities</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">np</span><span style="color: #89DDFF">.</span><span style="color: #EFF">ndarray</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None,</span>
</span><span id="__span-0-212"><a id="__codelineno-0-212" name="__codelineno-0-212"></a>    <span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">RiskAssessment</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-213"><a id="__codelineno-0-213" name="__codelineno-0-213"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Convert model predictions to FHIR RiskAssessment resources.</span>
</span><span id="__span-0-214"><a id="__codelineno-0-214" name="__codelineno-0-214"></a>
</span><span id="__span-0-215"><a id="__codelineno-0-215" name="__codelineno-0-215"></a><span style="color: #546E7A; font-style: italic">        Creates RiskAssessment resources from ML model output, suitable for</span>
</span><span id="__span-0-216"><a id="__codelineno-0-216" name="__codelineno-0-216"></a><span style="color: #546E7A; font-style: italic">        including in FHIR Bundles or sending to FHIR servers.</span>
</span><span id="__span-0-217"><a id="__codelineno-0-217" name="__codelineno-0-217"></a>
</span><span id="__span-0-218"><a id="__codelineno-0-218" name="__codelineno-0-218"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-219"><a id="__codelineno-0-219" name="__codelineno-0-219"></a><span style="color: #546E7A; font-style: italic">            outcome_code: Code for the predicted outcome (e.g., &quot;A41.9&quot; for sepsis)</span>
</span><span id="__span-0-220"><a id="__codelineno-0-220" name="__codelineno-0-220"></a><span style="color: #546E7A; font-style: italic">            outcome_display: Display text for the outcome (e.g., &quot;Sepsis&quot;)</span>
</span><span id="__span-0-221"><a id="__codelineno-0-221" name="__codelineno-0-221"></a><span style="color: #546E7A; font-style: italic">            outcome_system: Code system for the outcome (default: ICD-10)</span>
</span><span id="__span-0-222"><a id="__codelineno-0-222" name="__codelineno-0-222"></a><span style="color: #546E7A; font-style: italic">            model_name: Name of the ML model (optional)</span>
</span><span id="__span-0-223"><a id="__codelineno-0-223" name="__codelineno-0-223"></a><span style="color: #546E7A; font-style: italic">            model_version: Version of the ML model (optional)</span>
</span><span id="__span-0-224"><a id="__codelineno-0-224" name="__codelineno-0-224"></a><span style="color: #546E7A; font-style: italic">            high_threshold: Threshold for high risk (default: 0.7)</span>
</span><span id="__span-0-225"><a id="__codelineno-0-225" name="__codelineno-0-225"></a><span style="color: #546E7A; font-style: italic">            moderate_threshold: Threshold for moderate risk (default: 0.4)</span>
</span><span id="__span-0-226"><a id="__codelineno-0-226" name="__codelineno-0-226"></a><span style="color: #546E7A; font-style: italic">            predictions: Binary predictions array (0/1). Defaults to metadata[&quot;predictions&quot;]</span>
</span><span id="__span-0-227"><a id="__codelineno-0-227" name="__codelineno-0-227"></a><span style="color: #546E7A; font-style: italic">            probabilities: Probability scores array (0-1). Defaults to metadata[&quot;probabilities&quot;]</span>
</span><span id="__span-0-228"><a id="__codelineno-0-228" name="__codelineno-0-228"></a>
</span><span id="__span-0-229"><a id="__codelineno-0-229" name="__codelineno-0-229"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-230"><a id="__codelineno-0-230" name="__codelineno-0-230"></a><span style="color: #546E7A; font-style: italic">            List of RiskAssessment resources, one per patient</span>
</span><span id="__span-0-231"><a id="__codelineno-0-231" name="__codelineno-0-231"></a>
</span><span id="__span-0-232"><a id="__codelineno-0-232" name="__codelineno-0-232"></a><span style="color: #546E7A; font-style: italic">        Example:</span>
</span><span id="__span-0-233"><a id="__codelineno-0-233" name="__codelineno-0-233"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; risk_assessments = dataset.to_risk_assessment(</span>
</span><span id="__span-0-234"><a id="__codelineno-0-234" name="__codelineno-0-234"></a><span style="color: #546E7A; font-style: italic">            ...     outcome_code=&quot;A41.9&quot;,</span>
</span><span id="__span-0-235"><a id="__codelineno-0-235" name="__codelineno-0-235"></a><span style="color: #546E7A; font-style: italic">            ...     outcome_display=&quot;Sepsis, unspecified&quot;,</span>
</span><span id="__span-0-236"><a id="__codelineno-0-236" name="__codelineno-0-236"></a><span style="color: #546E7A; font-style: italic">            ...     model_name=&quot;RandomForest&quot;,</span>
</span><span id="__span-0-237"><a id="__codelineno-0-237" name="__codelineno-0-237"></a><span style="color: #546E7A; font-style: italic">            ...     model_version=&quot;1.0&quot;</span>
</span><span id="__span-0-238"><a id="__codelineno-0-238" name="__codelineno-0-238"></a><span style="color: #546E7A; font-style: italic">            ... )</span>
</span><span id="__span-0-239"><a id="__codelineno-0-239" name="__codelineno-0-239"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-240"><a id="__codelineno-0-240" name="__codelineno-0-240"></a>        <span style="color: #546E7A; font-style: italic"># Fall back to metadata if not provided</span>
</span><span id="__span-0-241"><a id="__codelineno-0-241" name="__codelineno-0-241"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">predictions</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-242"><a id="__codelineno-0-242" name="__codelineno-0-242"></a>            <span style="color: #EFF">predictions</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">metadata</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;predictions&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-243"><a id="__codelineno-0-243" name="__codelineno-0-243"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">probabilities</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-244"><a id="__codelineno-0-244" name="__codelineno-0-244"></a>            <span style="color: #EFF">probabilities</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">metadata</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;probabilities&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-245"><a id="__codelineno-0-245" name="__codelineno-0-245"></a>
</span><span id="__span-0-246"><a id="__codelineno-0-246" name="__codelineno-0-246"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">predictions</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None</span> <span style="color: #89DDFF; font-style: italic">or</span> <span style="color: #EFF">probabilities</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-247"><a id="__codelineno-0-247" name="__codelineno-0-247"></a>            <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-248"><a id="__codelineno-0-248" name="__codelineno-0-248"></a>                <span style="color: #C3E88D">&quot;predictions and probabilities must be provided or available in metadata&quot;</span>
</span><span id="__span-0-249"><a id="__codelineno-0-249" name="__codelineno-0-249"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-250"><a id="__codelineno-0-250" name="__codelineno-0-250"></a>
</span><span id="__span-0-251"><a id="__codelineno-0-251" name="__codelineno-0-251"></a>        <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(</span><span style="color: #EFF">predictions</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">!=</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-252"><a id="__codelineno-0-252" name="__codelineno-0-252"></a>            <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-253"><a id="__codelineno-0-253" name="__codelineno-0-253"></a>                <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Predictions length (</span><span style="color: #89DDFF">{</span><span style="color: #82AAFF">len</span><span style="color: #89DDFF">(</span><span style="color: #EFF">predictions</span><span style="color: #89DDFF">)}</span><span style="color: #C3E88D">) must match &quot;</span>
</span><span id="__span-0-254"><a id="__codelineno-0-254" name="__codelineno-0-254"></a>                <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;DataFrame length (</span><span style="color: #89DDFF">{</span><span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)}</span><span style="color: #C3E88D">)&quot;</span>
</span><span id="__span-0-255"><a id="__codelineno-0-255" name="__codelineno-0-255"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-256"><a id="__codelineno-0-256" name="__codelineno-0-256"></a>
</span><span id="__span-0-257"><a id="__codelineno-0-257" name="__codelineno-0-257"></a>        <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(</span><span style="color: #EFF">probabilities</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">!=</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-258"><a id="__codelineno-0-258" name="__codelineno-0-258"></a>            <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-259"><a id="__codelineno-0-259" name="__codelineno-0-259"></a>                <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Probabilities length (</span><span style="color: #89DDFF">{</span><span style="color: #82AAFF">len</span><span style="color: #89DDFF">(</span><span style="color: #EFF">probabilities</span><span style="color: #89DDFF">)}</span><span style="color: #C3E88D">) must match &quot;</span>
</span><span id="__span-0-260"><a id="__codelineno-0-260" name="__codelineno-0-260"></a>                <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;DataFrame length (</span><span style="color: #89DDFF">{</span><span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)}</span><span style="color: #C3E88D">)&quot;</span>
</span><span id="__span-0-261"><a id="__codelineno-0-261" name="__codelineno-0-261"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-262"><a id="__codelineno-0-262" name="__codelineno-0-262"></a>
</span><span id="__span-0-263"><a id="__codelineno-0-263" name="__codelineno-0-263"></a>        <span style="color: #EFF">risk_assessments</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[]</span>
</span><span id="__span-0-264"><a id="__codelineno-0-264" name="__codelineno-0-264"></a>
</span><span id="__span-0-265"><a id="__codelineno-0-265" name="__codelineno-0-265"></a>        <span style="color: #546E7A; font-style: italic"># Get patient references</span>
</span><span id="__span-0-266"><a id="__codelineno-0-266" name="__codelineno-0-266"></a>        <span style="color: #BB80B3">if</span> <span style="color: #C3E88D">&quot;patient_ref&quot;</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-267"><a id="__codelineno-0-267" name="__codelineno-0-267"></a>            <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;DataFrame must have &#39;patient_ref&#39; column&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-268"><a id="__codelineno-0-268" name="__codelineno-0-268"></a>
</span><span id="__span-0-269"><a id="__codelineno-0-269" name="__codelineno-0-269"></a>        <span style="color: #BB80B3">for</span> <span style="color: #EFF">idx</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">row</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">iterrows</span><span style="color: #89DDFF">():</span>
</span><span id="__span-0-270"><a id="__codelineno-0-270" name="__codelineno-0-270"></a>            <span style="color: #EFF">patient_ref</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">row</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;patient_ref&quot;</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-271"><a id="__codelineno-0-271" name="__codelineno-0-271"></a>            <span style="color: #EFF">prediction</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">int</span><span style="color: #89DDFF">(</span><span style="color: #EFF">predictions</span><span style="color: #89DDFF">[</span><span style="color: #EFF">idx</span><span style="color: #89DDFF">])</span>
</span><span id="__span-0-272"><a id="__codelineno-0-272" name="__codelineno-0-272"></a>            <span style="color: #EFF">probability</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">float</span><span style="color: #89DDFF">(</span><span style="color: #EFF">probabilities</span><span style="color: #89DDFF">[</span><span style="color: #EFF">idx</span><span style="color: #89DDFF">])</span>
</span><span id="__span-0-273"><a id="__codelineno-0-273" name="__codelineno-0-273"></a>
</span><span id="__span-0-274"><a id="__codelineno-0-274" name="__codelineno-0-274"></a>            <span style="color: #546E7A; font-style: italic"># Determine qualitative risk</span>
</span><span id="__span-0-275"><a id="__codelineno-0-275" name="__codelineno-0-275"></a>            <span style="color: #BB80B3">if</span> <span style="color: #EFF">probability</span> <span style="color: #89DDFF">&gt;=</span> <span style="color: #EFF">high_threshold</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-276"><a id="__codelineno-0-276" name="__codelineno-0-276"></a>                <span style="color: #EFF">qualitative_risk</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;high&quot;</span>
</span><span id="__span-0-277"><a id="__codelineno-0-277" name="__codelineno-0-277"></a>            <span style="color: #BB80B3">elif</span> <span style="color: #EFF">probability</span> <span style="color: #89DDFF">&gt;=</span> <span style="color: #EFF">moderate_threshold</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-278"><a id="__codelineno-0-278" name="__codelineno-0-278"></a>                <span style="color: #EFF">qualitative_risk</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;moderate&quot;</span>
</span><span id="__span-0-279"><a id="__codelineno-0-279" name="__codelineno-0-279"></a>            <span style="color: #BB80B3">else</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-280"><a id="__codelineno-0-280" name="__codelineno-0-280"></a>                <span style="color: #EFF">qualitative_risk</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;low&quot;</span>
</span><span id="__span-0-281"><a id="__codelineno-0-281" name="__codelineno-0-281"></a>
</span><span id="__span-0-282"><a id="__codelineno-0-282" name="__codelineno-0-282"></a>            <span style="color: #546E7A; font-style: italic"># Build prediction dict</span>
</span><span id="__span-0-283"><a id="__codelineno-0-283" name="__codelineno-0-283"></a>            <span style="color: #EFF">prediction_dict</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-284"><a id="__codelineno-0-284" name="__codelineno-0-284"></a>                <span style="color: #C3E88D">&quot;outcome&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-285"><a id="__codelineno-0-285" name="__codelineno-0-285"></a>                    <span style="color: #C3E88D">&quot;code&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">outcome_code</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-286"><a id="__codelineno-0-286" name="__codelineno-0-286"></a>                    <span style="color: #C3E88D">&quot;display&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">outcome_display</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-287"><a id="__codelineno-0-287" name="__codelineno-0-287"></a>                    <span style="color: #C3E88D">&quot;system&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">outcome_system</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-288"><a id="__codelineno-0-288" name="__codelineno-0-288"></a>                <span style="color: #89DDFF">},</span>
</span><span id="__span-0-289"><a id="__codelineno-0-289" name="__codelineno-0-289"></a>                <span style="color: #C3E88D">&quot;probability&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">probability</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-290"><a id="__codelineno-0-290" name="__codelineno-0-290"></a>                <span style="color: #C3E88D">&quot;qualitative_risk&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">qualitative_risk</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-291"><a id="__codelineno-0-291" name="__codelineno-0-291"></a>            <span style="color: #89DDFF">}</span>
</span><span id="__span-0-292"><a id="__codelineno-0-292" name="__codelineno-0-292"></a>
</span><span id="__span-0-293"><a id="__codelineno-0-293" name="__codelineno-0-293"></a>            <span style="color: #546E7A; font-style: italic"># Create method CodeableConcept if model info provided</span>
</span><span id="__span-0-294"><a id="__codelineno-0-294" name="__codelineno-0-294"></a>            <span style="color: #EFF">method</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-295"><a id="__codelineno-0-295" name="__codelineno-0-295"></a>            <span style="color: #BB80B3">if</span> <span style="color: #EFF">model_name</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-296"><a id="__codelineno-0-296" name="__codelineno-0-296"></a>                <span style="color: #EFF">method</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">create_single_codeable_concept</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-297"><a id="__codelineno-0-297" name="__codelineno-0-297"></a>                    <span style="color: #EFF">code</span><span style="color: #89DDFF">=</span><span style="color: #EFF">model_name</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-298"><a id="__codelineno-0-298" name="__codelineno-0-298"></a>                    <span style="color: #EFF">display</span><span style="color: #89DDFF">=</span><span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;</span><span style="color: #89DDFF">{</span><span style="color: #EFF">model_name</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D"> v</span><span style="color: #89DDFF">{</span><span style="color: #EFF">model_version</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-299"><a id="__codelineno-0-299" name="__codelineno-0-299"></a>                    <span style="color: #BB80B3">if</span> <span style="color: #EFF">model_version</span>
</span><span id="__span-0-300"><a id="__codelineno-0-300" name="__codelineno-0-300"></a>                    <span style="color: #BB80B3">else</span> <span style="color: #EFF">model_name</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-301"><a id="__codelineno-0-301" name="__codelineno-0-301"></a>                    <span style="color: #EFF">system</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&quot;https://healthchain.github.io/ml-models&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-302"><a id="__codelineno-0-302" name="__codelineno-0-302"></a>                <span style="color: #89DDFF">)</span>
</span><span id="__span-0-303"><a id="__codelineno-0-303" name="__codelineno-0-303"></a>
</span><span id="__span-0-304"><a id="__codelineno-0-304" name="__codelineno-0-304"></a>            <span style="color: #546E7A; font-style: italic"># Create comment with prediction details</span>
</span><span id="__span-0-305"><a id="__codelineno-0-305" name="__codelineno-0-305"></a>            <span style="color: #EFF">comment</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">(</span>
</span><span id="__span-0-306"><a id="__codelineno-0-306" name="__codelineno-0-306"></a>                <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;ML prediction: </span><span style="color: #89DDFF">{</span><span style="color: #C3E88D">&#39;Positive&#39;</span><span style="color: #EFF"> </span><span style="color: #BB80B3">if</span><span style="color: #EFF"> prediction </span><span style="color: #89DDFF">==</span><span style="color: #EFF"> </span><span style="color: #F78C6C">1</span><span style="color: #EFF"> </span><span style="color: #BB80B3">else</span><span style="color: #EFF"> </span><span style="color: #C3E88D">&#39;Negative&#39;</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D"> &quot;</span>
</span><span id="__span-0-307"><a id="__codelineno-0-307" name="__codelineno-0-307"></a>                <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;(probability: </span><span style="color: #89DDFF">{</span><span style="color: #EFF">probability</span><span style="color: #89DDFF">:</span><span style="color: #C3E88D">.2%</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">, risk: </span><span style="color: #89DDFF">{</span><span style="color: #EFF">qualitative_risk</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">)&quot;</span>
</span><span id="__span-0-308"><a id="__codelineno-0-308" name="__codelineno-0-308"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-309"><a id="__codelineno-0-309" name="__codelineno-0-309"></a>
</span><span id="__span-0-310"><a id="__codelineno-0-310" name="__codelineno-0-310"></a>            <span style="color: #546E7A; font-style: italic"># Create RiskAssessment</span>
</span><span id="__span-0-311"><a id="__codelineno-0-311" name="__codelineno-0-311"></a>            <span style="color: #EFF">risk_assessment</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">create_risk_assessment_from_prediction</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-312"><a id="__codelineno-0-312" name="__codelineno-0-312"></a>                <span style="color: #EFF">subject</span><span style="color: #89DDFF">=</span><span style="color: #EFF">patient_ref</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-313"><a id="__codelineno-0-313" name="__codelineno-0-313"></a>                <span style="color: #EFF">prediction</span><span style="color: #89DDFF">=</span><span style="color: #EFF">prediction_dict</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-314"><a id="__codelineno-0-314" name="__codelineno-0-314"></a>                <span style="color: #EFF">method</span><span style="color: #89DDFF">=</span><span style="color: #EFF">method</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-315"><a id="__codelineno-0-315" name="__codelineno-0-315"></a>                <span style="color: #EFF">comment</span><span style="color: #89DDFF">=</span><span style="color: #EFF">comment</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-316"><a id="__codelineno-0-316" name="__codelineno-0-316"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-317"><a id="__codelineno-0-317" name="__codelineno-0-317"></a>
</span><span id="__span-0-318"><a id="__codelineno-0-318" name="__codelineno-0-318"></a>            <span style="color: #EFF">risk_assessments</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">risk_assessment</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-319"><a id="__codelineno-0-319" name="__codelineno-0-319"></a>
</span><span id="__span-0-320"><a id="__codelineno-0-320" name="__codelineno-0-320"></a>        <span style="color: #BB80B3">return</span> <span style="color: #EFF">risk_assessments</span>
</span></code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="healthchain.io.containers.Dataset.from_fhir_bundle" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">from_fhir_bundle</span><span style="color: #89DDFF">(</span><span style="color: #EFF">bundle</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">schema</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">aggregation</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&#39;mean&#39;</span><span style="color: #89DDFF">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Create Dataset from a FHIR Bundle using a feature schema.</p>
<p>Extracts features from FHIR resources according to the schema specification,
converting FHIR data to a pandas DataFrame suitable for ML inference.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>bundle</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>FHIR Bundle resource (object or dict)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[<span title="fhir.resources.bundle.Bundle">Bundle</span>, <span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>schema</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>FeatureSchema object, or path to YAML schema file</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="pathlib.Path">Path</span>, <a class="autorefs autorefs-internal" title="FeatureSchema (healthchain.io.containers.featureschema.FeatureSchema)" href="#healthchain.io.containers.featureschema.FeatureSchema">FeatureSchema</a>]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>aggregation</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>How to aggregate multiple observation values (default: "mean")
Options: "mean", "median", "max", "min", "last" (default: "mean")</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#39;mean&#39;</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="Dataset


  
      dataclass
   (healthchain.io.containers.dataset.Dataset)" href="#healthchain.io.containers.dataset.Dataset">Dataset</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Dataset container with extracted features</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>from fhir.resources.bundle import Bundle
bundle = Bundle(**patient_data)
dataset = Dataset.from_fhir_bundle(
...     bundle,
...     schema="healthchain/configs/features/sepsis_vitals.yaml"
... )
df = dataset.data</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/dataset.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-89"> 89</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-90"> 90</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-91"> 91</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-92"> 92</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-93"> 93</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-94"> 94</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-95"> 95</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-96"> 96</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-97"> 97</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-98"> 98</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-99"> 99</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-100">100</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-101">101</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-102">102</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-103">103</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-104">104</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-105">105</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-106">106</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-107">107</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-108">108</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-109">109</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-110">110</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-111">111</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-112">112</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-113">113</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-114">114</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-115">115</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-116">116</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-117">117</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-118">118</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-119">119</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-120">120</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-121">121</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-122">122</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-123">123</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-124">124</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-125">125</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-126">126</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-127">127</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-89"><a id="__codelineno-0-89" name="__codelineno-0-89"></a><span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-90"><a id="__codelineno-0-90" name="__codelineno-0-90"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">from_fhir_bundle</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-91"><a id="__codelineno-0-91" name="__codelineno-0-91"></a>    <span style="color: #89DDFF">cls,</span>
</span><span id="__span-0-92"><a id="__codelineno-0-92" name="__codelineno-0-92"></a>    <span style="color: #EFF">bundle</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Union</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Bundle</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]],</span>
</span><span id="__span-0-93"><a id="__codelineno-0-93" name="__codelineno-0-93"></a>    <span style="color: #EFF">schema</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Union</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">FeatureSchema</span><span style="color: #89DDFF">],</span>
</span><span id="__span-0-94"><a id="__codelineno-0-94" name="__codelineno-0-94"></a>    <span style="color: #EFF">aggregation</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;mean&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-95"><a id="__codelineno-0-95" name="__codelineno-0-95"></a><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;Dataset&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-96"><a id="__codelineno-0-96" name="__codelineno-0-96"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Create Dataset from a FHIR Bundle using a feature schema.</span>
</span><span id="__span-0-97"><a id="__codelineno-0-97" name="__codelineno-0-97"></a>
</span><span id="__span-0-98"><a id="__codelineno-0-98" name="__codelineno-0-98"></a><span style="color: #546E7A; font-style: italic">    Extracts features from FHIR resources according to the schema specification,</span>
</span><span id="__span-0-99"><a id="__codelineno-0-99" name="__codelineno-0-99"></a><span style="color: #546E7A; font-style: italic">    converting FHIR data to a pandas DataFrame suitable for ML inference.</span>
</span><span id="__span-0-100"><a id="__codelineno-0-100" name="__codelineno-0-100"></a>
</span><span id="__span-0-101"><a id="__codelineno-0-101" name="__codelineno-0-101"></a><span style="color: #546E7A; font-style: italic">    Args:</span>
</span><span id="__span-0-102"><a id="__codelineno-0-102" name="__codelineno-0-102"></a><span style="color: #546E7A; font-style: italic">        bundle: FHIR Bundle resource (object or dict)</span>
</span><span id="__span-0-103"><a id="__codelineno-0-103" name="__codelineno-0-103"></a><span style="color: #546E7A; font-style: italic">        schema: FeatureSchema object, or path to YAML schema file</span>
</span><span id="__span-0-104"><a id="__codelineno-0-104" name="__codelineno-0-104"></a><span style="color: #546E7A; font-style: italic">        aggregation: How to aggregate multiple observation values (default: &quot;mean&quot;)</span>
</span><span id="__span-0-105"><a id="__codelineno-0-105" name="__codelineno-0-105"></a><span style="color: #546E7A; font-style: italic">            Options: &quot;mean&quot;, &quot;median&quot;, &quot;max&quot;, &quot;min&quot;, &quot;last&quot; (default: &quot;mean&quot;)</span>
</span><span id="__span-0-106"><a id="__codelineno-0-106" name="__codelineno-0-106"></a>
</span><span id="__span-0-107"><a id="__codelineno-0-107" name="__codelineno-0-107"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-108"><a id="__codelineno-0-108" name="__codelineno-0-108"></a><span style="color: #546E7A; font-style: italic">        Dataset container with extracted features</span>
</span><span id="__span-0-109"><a id="__codelineno-0-109" name="__codelineno-0-109"></a>
</span><span id="__span-0-110"><a id="__codelineno-0-110" name="__codelineno-0-110"></a><span style="color: #546E7A; font-style: italic">    Example:</span>
</span><span id="__span-0-111"><a id="__codelineno-0-111" name="__codelineno-0-111"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; from fhir.resources.bundle import Bundle</span>
</span><span id="__span-0-112"><a id="__codelineno-0-112" name="__codelineno-0-112"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; bundle = Bundle(**patient_data)</span>
</span><span id="__span-0-113"><a id="__codelineno-0-113" name="__codelineno-0-113"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; dataset = Dataset.from_fhir_bundle(</span>
</span><span id="__span-0-114"><a id="__codelineno-0-114" name="__codelineno-0-114"></a><span style="color: #546E7A; font-style: italic">        ...     bundle,</span>
</span><span id="__span-0-115"><a id="__codelineno-0-115" name="__codelineno-0-115"></a><span style="color: #546E7A; font-style: italic">        ...     schema=&quot;healthchain/configs/features/sepsis_vitals.yaml&quot;</span>
</span><span id="__span-0-116"><a id="__codelineno-0-116" name="__codelineno-0-116"></a><span style="color: #546E7A; font-style: italic">        ... )</span>
</span><span id="__span-0-117"><a id="__codelineno-0-117" name="__codelineno-0-117"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; df = dataset.data</span>
</span><span id="__span-0-118"><a id="__codelineno-0-118" name="__codelineno-0-118"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-119"><a id="__codelineno-0-119" name="__codelineno-0-119"></a>    <span style="color: #546E7A; font-style: italic"># Load schema if path provided</span>
</span><span id="__span-0-120"><a id="__codelineno-0-120" name="__codelineno-0-120"></a>    <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">schema</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">(</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">)):</span>
</span><span id="__span-0-121"><a id="__codelineno-0-121" name="__codelineno-0-121"></a>        <span style="color: #EFF">schema</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">FeatureSchema</span><span style="color: #89DDFF">.</span><span style="color: #EFF">from_yaml</span><span style="color: #89DDFF">(</span><span style="color: #EFF">schema</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-122"><a id="__codelineno-0-122" name="__codelineno-0-122"></a>
</span><span id="__span-0-123"><a id="__codelineno-0-123" name="__codelineno-0-123"></a>    <span style="color: #546E7A; font-style: italic"># Extract features using mapper</span>
</span><span id="__span-0-124"><a id="__codelineno-0-124" name="__codelineno-0-124"></a>    <span style="color: #EFF">mapper</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">FHIRFeatureMapper</span><span style="color: #89DDFF">(</span><span style="color: #EFF">schema</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-125"><a id="__codelineno-0-125" name="__codelineno-0-125"></a>    <span style="color: #EFF">df</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">mapper</span><span style="color: #89DDFF">.</span><span style="color: #EFF">extract_features</span><span style="color: #89DDFF">(</span><span style="color: #EFF">bundle</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">aggregation</span><span style="color: #89DDFF">=</span><span style="color: #EFF">aggregation</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-126"><a id="__codelineno-0-126" name="__codelineno-0-126"></a>
</span><span id="__span-0-127"><a id="__codelineno-0-127" name="__codelineno-0-127"></a>    <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">cls(</span><span style="color: #EFF">df</span><span style="color: #89DDFF">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="healthchain.io.containers.Dataset.to_risk_assessment" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">to_risk_assessment</span><span style="color: #89DDFF">(</span><span style="color: #EFF">outcome_code</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">outcome_display</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">outcome_system</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&#39;http://hl7.org/fhir/sid/icd-10&#39;</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">model_name</span><span style="color: #89DDFF">=None,</span> <span style="color: #EFF">model_version</span><span style="color: #89DDFF">=None,</span> <span style="color: #EFF">high_threshold</span><span style="color: #89DDFF">=</span><span style="color: #F78C6C">0.7</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">moderate_threshold</span><span style="color: #89DDFF">=</span><span style="color: #F78C6C">0.4</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">predictions</span><span style="color: #89DDFF">=None,</span> <span style="color: #EFF">probabilities</span><span style="color: #89DDFF">=None)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Convert model predictions to FHIR RiskAssessment resources.</p>
<p>Creates RiskAssessment resources from ML model output, suitable for
including in FHIR Bundles or sending to FHIR servers.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>outcome_code</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Code for the predicted outcome (e.g., "A41.9" for sepsis)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>outcome_display</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Display text for the outcome (e.g., "Sepsis")</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>outcome_system</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Code system for the outcome (default: ICD-10)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#39;http://hl7.org/fhir/sid/icd-10&#39;</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>model_name</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Name of the ML model (optional)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>model_version</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Version of the ML model (optional)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>high_threshold</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Threshold for high risk (default: 0.7)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="float">float</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>0.7</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>moderate_threshold</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Threshold for moderate risk (default: 0.4)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="float">float</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>0.4</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>predictions</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Binary predictions array (0/1). Defaults to metadata["predictions"]</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="numpy.ndarray">ndarray</span>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>probabilities</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Probability scores array (0-1). Defaults to metadata["probabilities"]</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="numpy.ndarray">ndarray</span>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.List">List</span>[<span title="fhir.resources.riskassessment.RiskAssessment">RiskAssessment</span>]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>List of RiskAssessment resources, one per patient</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>risk_assessments = dataset.to_risk_assessment(
...     outcome_code="A41.9",
...     outcome_display="Sepsis, unspecified",
...     model_name="RandomForest",
...     model_version="1.0"
... )</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/dataset.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-201">201</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-202">202</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-203">203</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-204">204</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-205">205</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-206">206</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-207">207</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-208">208</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-209">209</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-210">210</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-211">211</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-212">212</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-213">213</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-214">214</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-215">215</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-216">216</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-217">217</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-218">218</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-219">219</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-220">220</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-221">221</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-222">222</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-223">223</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-224">224</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-225">225</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-226">226</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-227">227</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-228">228</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-229">229</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-230">230</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-231">231</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-232">232</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-233">233</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-234">234</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-235">235</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-236">236</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-237">237</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-238">238</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-239">239</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-240">240</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-241">241</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-242">242</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-243">243</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-244">244</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-245">245</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-246">246</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-247">247</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-248">248</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-249">249</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-250">250</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-251">251</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-252">252</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-253">253</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-254">254</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-255">255</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-256">256</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-257">257</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-258">258</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-259">259</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-260">260</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-261">261</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-262">262</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-263">263</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-264">264</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-265">265</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-266">266</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-267">267</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-268">268</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-269">269</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-270">270</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-271">271</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-272">272</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-273">273</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-274">274</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-275">275</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-276">276</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-277">277</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-278">278</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-279">279</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-280">280</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-281">281</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-282">282</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-283">283</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-284">284</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-285">285</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-286">286</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-287">287</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-288">288</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-289">289</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-290">290</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-291">291</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-292">292</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-293">293</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-294">294</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-295">295</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-296">296</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-297">297</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-298">298</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-299">299</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-300">300</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-301">301</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-302">302</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-303">303</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-304">304</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-305">305</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-306">306</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-307">307</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-308">308</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-309">309</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-310">310</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-311">311</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-312">312</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-313">313</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-314">314</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-315">315</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-316">316</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-317">317</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-318">318</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-319">319</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-320">320</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-201"><a id="__codelineno-0-201" name="__codelineno-0-201"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">to_risk_assessment</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-202"><a id="__codelineno-0-202" name="__codelineno-0-202"></a>    <span style="color: #89DDFF">self,</span>
</span><span id="__span-0-203"><a id="__codelineno-0-203" name="__codelineno-0-203"></a>    <span style="color: #EFF">outcome_code</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-204"><a id="__codelineno-0-204" name="__codelineno-0-204"></a>    <span style="color: #EFF">outcome_display</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-205"><a id="__codelineno-0-205" name="__codelineno-0-205"></a>    <span style="color: #EFF">outcome_system</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;http://hl7.org/fhir/sid/icd-10&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-206"><a id="__codelineno-0-206" name="__codelineno-0-206"></a>    <span style="color: #EFF">model_name</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None,</span>
</span><span id="__span-0-207"><a id="__codelineno-0-207" name="__codelineno-0-207"></a>    <span style="color: #EFF">model_version</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None,</span>
</span><span id="__span-0-208"><a id="__codelineno-0-208" name="__codelineno-0-208"></a>    <span style="color: #EFF">high_threshold</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">float</span> <span style="color: #89DDFF">=</span> <span style="color: #F78C6C">0.7</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-209"><a id="__codelineno-0-209" name="__codelineno-0-209"></a>    <span style="color: #EFF">moderate_threshold</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">float</span> <span style="color: #89DDFF">=</span> <span style="color: #F78C6C">0.4</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-210"><a id="__codelineno-0-210" name="__codelineno-0-210"></a>    <span style="color: #EFF">predictions</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">np</span><span style="color: #89DDFF">.</span><span style="color: #EFF">ndarray</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None,</span>
</span><span id="__span-0-211"><a id="__codelineno-0-211" name="__codelineno-0-211"></a>    <span style="color: #EFF">probabilities</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">np</span><span style="color: #89DDFF">.</span><span style="color: #EFF">ndarray</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None,</span>
</span><span id="__span-0-212"><a id="__codelineno-0-212" name="__codelineno-0-212"></a><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">RiskAssessment</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-213"><a id="__codelineno-0-213" name="__codelineno-0-213"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Convert model predictions to FHIR RiskAssessment resources.</span>
</span><span id="__span-0-214"><a id="__codelineno-0-214" name="__codelineno-0-214"></a>
</span><span id="__span-0-215"><a id="__codelineno-0-215" name="__codelineno-0-215"></a><span style="color: #546E7A; font-style: italic">    Creates RiskAssessment resources from ML model output, suitable for</span>
</span><span id="__span-0-216"><a id="__codelineno-0-216" name="__codelineno-0-216"></a><span style="color: #546E7A; font-style: italic">    including in FHIR Bundles or sending to FHIR servers.</span>
</span><span id="__span-0-217"><a id="__codelineno-0-217" name="__codelineno-0-217"></a>
</span><span id="__span-0-218"><a id="__codelineno-0-218" name="__codelineno-0-218"></a><span style="color: #546E7A; font-style: italic">    Args:</span>
</span><span id="__span-0-219"><a id="__codelineno-0-219" name="__codelineno-0-219"></a><span style="color: #546E7A; font-style: italic">        outcome_code: Code for the predicted outcome (e.g., &quot;A41.9&quot; for sepsis)</span>
</span><span id="__span-0-220"><a id="__codelineno-0-220" name="__codelineno-0-220"></a><span style="color: #546E7A; font-style: italic">        outcome_display: Display text for the outcome (e.g., &quot;Sepsis&quot;)</span>
</span><span id="__span-0-221"><a id="__codelineno-0-221" name="__codelineno-0-221"></a><span style="color: #546E7A; font-style: italic">        outcome_system: Code system for the outcome (default: ICD-10)</span>
</span><span id="__span-0-222"><a id="__codelineno-0-222" name="__codelineno-0-222"></a><span style="color: #546E7A; font-style: italic">        model_name: Name of the ML model (optional)</span>
</span><span id="__span-0-223"><a id="__codelineno-0-223" name="__codelineno-0-223"></a><span style="color: #546E7A; font-style: italic">        model_version: Version of the ML model (optional)</span>
</span><span id="__span-0-224"><a id="__codelineno-0-224" name="__codelineno-0-224"></a><span style="color: #546E7A; font-style: italic">        high_threshold: Threshold for high risk (default: 0.7)</span>
</span><span id="__span-0-225"><a id="__codelineno-0-225" name="__codelineno-0-225"></a><span style="color: #546E7A; font-style: italic">        moderate_threshold: Threshold for moderate risk (default: 0.4)</span>
</span><span id="__span-0-226"><a id="__codelineno-0-226" name="__codelineno-0-226"></a><span style="color: #546E7A; font-style: italic">        predictions: Binary predictions array (0/1). Defaults to metadata[&quot;predictions&quot;]</span>
</span><span id="__span-0-227"><a id="__codelineno-0-227" name="__codelineno-0-227"></a><span style="color: #546E7A; font-style: italic">        probabilities: Probability scores array (0-1). Defaults to metadata[&quot;probabilities&quot;]</span>
</span><span id="__span-0-228"><a id="__codelineno-0-228" name="__codelineno-0-228"></a>
</span><span id="__span-0-229"><a id="__codelineno-0-229" name="__codelineno-0-229"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-230"><a id="__codelineno-0-230" name="__codelineno-0-230"></a><span style="color: #546E7A; font-style: italic">        List of RiskAssessment resources, one per patient</span>
</span><span id="__span-0-231"><a id="__codelineno-0-231" name="__codelineno-0-231"></a>
</span><span id="__span-0-232"><a id="__codelineno-0-232" name="__codelineno-0-232"></a><span style="color: #546E7A; font-style: italic">    Example:</span>
</span><span id="__span-0-233"><a id="__codelineno-0-233" name="__codelineno-0-233"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; risk_assessments = dataset.to_risk_assessment(</span>
</span><span id="__span-0-234"><a id="__codelineno-0-234" name="__codelineno-0-234"></a><span style="color: #546E7A; font-style: italic">        ...     outcome_code=&quot;A41.9&quot;,</span>
</span><span id="__span-0-235"><a id="__codelineno-0-235" name="__codelineno-0-235"></a><span style="color: #546E7A; font-style: italic">        ...     outcome_display=&quot;Sepsis, unspecified&quot;,</span>
</span><span id="__span-0-236"><a id="__codelineno-0-236" name="__codelineno-0-236"></a><span style="color: #546E7A; font-style: italic">        ...     model_name=&quot;RandomForest&quot;,</span>
</span><span id="__span-0-237"><a id="__codelineno-0-237" name="__codelineno-0-237"></a><span style="color: #546E7A; font-style: italic">        ...     model_version=&quot;1.0&quot;</span>
</span><span id="__span-0-238"><a id="__codelineno-0-238" name="__codelineno-0-238"></a><span style="color: #546E7A; font-style: italic">        ... )</span>
</span><span id="__span-0-239"><a id="__codelineno-0-239" name="__codelineno-0-239"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-240"><a id="__codelineno-0-240" name="__codelineno-0-240"></a>    <span style="color: #546E7A; font-style: italic"># Fall back to metadata if not provided</span>
</span><span id="__span-0-241"><a id="__codelineno-0-241" name="__codelineno-0-241"></a>    <span style="color: #BB80B3">if</span> <span style="color: #EFF">predictions</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-242"><a id="__codelineno-0-242" name="__codelineno-0-242"></a>        <span style="color: #EFF">predictions</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">metadata</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;predictions&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-243"><a id="__codelineno-0-243" name="__codelineno-0-243"></a>    <span style="color: #BB80B3">if</span> <span style="color: #EFF">probabilities</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-244"><a id="__codelineno-0-244" name="__codelineno-0-244"></a>        <span style="color: #EFF">probabilities</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">metadata</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;probabilities&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-245"><a id="__codelineno-0-245" name="__codelineno-0-245"></a>
</span><span id="__span-0-246"><a id="__codelineno-0-246" name="__codelineno-0-246"></a>    <span style="color: #BB80B3">if</span> <span style="color: #EFF">predictions</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None</span> <span style="color: #89DDFF; font-style: italic">or</span> <span style="color: #EFF">probabilities</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-247"><a id="__codelineno-0-247" name="__codelineno-0-247"></a>        <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-248"><a id="__codelineno-0-248" name="__codelineno-0-248"></a>            <span style="color: #C3E88D">&quot;predictions and probabilities must be provided or available in metadata&quot;</span>
</span><span id="__span-0-249"><a id="__codelineno-0-249" name="__codelineno-0-249"></a>        <span style="color: #89DDFF">)</span>
</span><span id="__span-0-250"><a id="__codelineno-0-250" name="__codelineno-0-250"></a>
</span><span id="__span-0-251"><a id="__codelineno-0-251" name="__codelineno-0-251"></a>    <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(</span><span style="color: #EFF">predictions</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">!=</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-252"><a id="__codelineno-0-252" name="__codelineno-0-252"></a>        <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-253"><a id="__codelineno-0-253" name="__codelineno-0-253"></a>            <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Predictions length (</span><span style="color: #89DDFF">{</span><span style="color: #82AAFF">len</span><span style="color: #89DDFF">(</span><span style="color: #EFF">predictions</span><span style="color: #89DDFF">)}</span><span style="color: #C3E88D">) must match &quot;</span>
</span><span id="__span-0-254"><a id="__codelineno-0-254" name="__codelineno-0-254"></a>            <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;DataFrame length (</span><span style="color: #89DDFF">{</span><span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)}</span><span style="color: #C3E88D">)&quot;</span>
</span><span id="__span-0-255"><a id="__codelineno-0-255" name="__codelineno-0-255"></a>        <span style="color: #89DDFF">)</span>
</span><span id="__span-0-256"><a id="__codelineno-0-256" name="__codelineno-0-256"></a>
</span><span id="__span-0-257"><a id="__codelineno-0-257" name="__codelineno-0-257"></a>    <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(</span><span style="color: #EFF">probabilities</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">!=</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-258"><a id="__codelineno-0-258" name="__codelineno-0-258"></a>        <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-259"><a id="__codelineno-0-259" name="__codelineno-0-259"></a>            <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Probabilities length (</span><span style="color: #89DDFF">{</span><span style="color: #82AAFF">len</span><span style="color: #89DDFF">(</span><span style="color: #EFF">probabilities</span><span style="color: #89DDFF">)}</span><span style="color: #C3E88D">) must match &quot;</span>
</span><span id="__span-0-260"><a id="__codelineno-0-260" name="__codelineno-0-260"></a>            <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;DataFrame length (</span><span style="color: #89DDFF">{</span><span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)}</span><span style="color: #C3E88D">)&quot;</span>
</span><span id="__span-0-261"><a id="__codelineno-0-261" name="__codelineno-0-261"></a>        <span style="color: #89DDFF">)</span>
</span><span id="__span-0-262"><a id="__codelineno-0-262" name="__codelineno-0-262"></a>
</span><span id="__span-0-263"><a id="__codelineno-0-263" name="__codelineno-0-263"></a>    <span style="color: #EFF">risk_assessments</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[]</span>
</span><span id="__span-0-264"><a id="__codelineno-0-264" name="__codelineno-0-264"></a>
</span><span id="__span-0-265"><a id="__codelineno-0-265" name="__codelineno-0-265"></a>    <span style="color: #546E7A; font-style: italic"># Get patient references</span>
</span><span id="__span-0-266"><a id="__codelineno-0-266" name="__codelineno-0-266"></a>    <span style="color: #BB80B3">if</span> <span style="color: #C3E88D">&quot;patient_ref&quot;</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-267"><a id="__codelineno-0-267" name="__codelineno-0-267"></a>        <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;DataFrame must have &#39;patient_ref&#39; column&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-268"><a id="__codelineno-0-268" name="__codelineno-0-268"></a>
</span><span id="__span-0-269"><a id="__codelineno-0-269" name="__codelineno-0-269"></a>    <span style="color: #BB80B3">for</span> <span style="color: #EFF">idx</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">row</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">iterrows</span><span style="color: #89DDFF">():</span>
</span><span id="__span-0-270"><a id="__codelineno-0-270" name="__codelineno-0-270"></a>        <span style="color: #EFF">patient_ref</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">row</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;patient_ref&quot;</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-271"><a id="__codelineno-0-271" name="__codelineno-0-271"></a>        <span style="color: #EFF">prediction</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">int</span><span style="color: #89DDFF">(</span><span style="color: #EFF">predictions</span><span style="color: #89DDFF">[</span><span style="color: #EFF">idx</span><span style="color: #89DDFF">])</span>
</span><span id="__span-0-272"><a id="__codelineno-0-272" name="__codelineno-0-272"></a>        <span style="color: #EFF">probability</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">float</span><span style="color: #89DDFF">(</span><span style="color: #EFF">probabilities</span><span style="color: #89DDFF">[</span><span style="color: #EFF">idx</span><span style="color: #89DDFF">])</span>
</span><span id="__span-0-273"><a id="__codelineno-0-273" name="__codelineno-0-273"></a>
</span><span id="__span-0-274"><a id="__codelineno-0-274" name="__codelineno-0-274"></a>        <span style="color: #546E7A; font-style: italic"># Determine qualitative risk</span>
</span><span id="__span-0-275"><a id="__codelineno-0-275" name="__codelineno-0-275"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">probability</span> <span style="color: #89DDFF">&gt;=</span> <span style="color: #EFF">high_threshold</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-276"><a id="__codelineno-0-276" name="__codelineno-0-276"></a>            <span style="color: #EFF">qualitative_risk</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;high&quot;</span>
</span><span id="__span-0-277"><a id="__codelineno-0-277" name="__codelineno-0-277"></a>        <span style="color: #BB80B3">elif</span> <span style="color: #EFF">probability</span> <span style="color: #89DDFF">&gt;=</span> <span style="color: #EFF">moderate_threshold</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-278"><a id="__codelineno-0-278" name="__codelineno-0-278"></a>            <span style="color: #EFF">qualitative_risk</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;moderate&quot;</span>
</span><span id="__span-0-279"><a id="__codelineno-0-279" name="__codelineno-0-279"></a>        <span style="color: #BB80B3">else</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-280"><a id="__codelineno-0-280" name="__codelineno-0-280"></a>            <span style="color: #EFF">qualitative_risk</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;low&quot;</span>
</span><span id="__span-0-281"><a id="__codelineno-0-281" name="__codelineno-0-281"></a>
</span><span id="__span-0-282"><a id="__codelineno-0-282" name="__codelineno-0-282"></a>        <span style="color: #546E7A; font-style: italic"># Build prediction dict</span>
</span><span id="__span-0-283"><a id="__codelineno-0-283" name="__codelineno-0-283"></a>        <span style="color: #EFF">prediction_dict</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-284"><a id="__codelineno-0-284" name="__codelineno-0-284"></a>            <span style="color: #C3E88D">&quot;outcome&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-285"><a id="__codelineno-0-285" name="__codelineno-0-285"></a>                <span style="color: #C3E88D">&quot;code&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">outcome_code</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-286"><a id="__codelineno-0-286" name="__codelineno-0-286"></a>                <span style="color: #C3E88D">&quot;display&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">outcome_display</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-287"><a id="__codelineno-0-287" name="__codelineno-0-287"></a>                <span style="color: #C3E88D">&quot;system&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">outcome_system</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-288"><a id="__codelineno-0-288" name="__codelineno-0-288"></a>            <span style="color: #89DDFF">},</span>
</span><span id="__span-0-289"><a id="__codelineno-0-289" name="__codelineno-0-289"></a>            <span style="color: #C3E88D">&quot;probability&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">probability</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-290"><a id="__codelineno-0-290" name="__codelineno-0-290"></a>            <span style="color: #C3E88D">&quot;qualitative_risk&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">qualitative_risk</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-291"><a id="__codelineno-0-291" name="__codelineno-0-291"></a>        <span style="color: #89DDFF">}</span>
</span><span id="__span-0-292"><a id="__codelineno-0-292" name="__codelineno-0-292"></a>
</span><span id="__span-0-293"><a id="__codelineno-0-293" name="__codelineno-0-293"></a>        <span style="color: #546E7A; font-style: italic"># Create method CodeableConcept if model info provided</span>
</span><span id="__span-0-294"><a id="__codelineno-0-294" name="__codelineno-0-294"></a>        <span style="color: #EFF">method</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-295"><a id="__codelineno-0-295" name="__codelineno-0-295"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">model_name</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-296"><a id="__codelineno-0-296" name="__codelineno-0-296"></a>            <span style="color: #EFF">method</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">create_single_codeable_concept</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-297"><a id="__codelineno-0-297" name="__codelineno-0-297"></a>                <span style="color: #EFF">code</span><span style="color: #89DDFF">=</span><span style="color: #EFF">model_name</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-298"><a id="__codelineno-0-298" name="__codelineno-0-298"></a>                <span style="color: #EFF">display</span><span style="color: #89DDFF">=</span><span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;</span><span style="color: #89DDFF">{</span><span style="color: #EFF">model_name</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D"> v</span><span style="color: #89DDFF">{</span><span style="color: #EFF">model_version</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-299"><a id="__codelineno-0-299" name="__codelineno-0-299"></a>                <span style="color: #BB80B3">if</span> <span style="color: #EFF">model_version</span>
</span><span id="__span-0-300"><a id="__codelineno-0-300" name="__codelineno-0-300"></a>                <span style="color: #BB80B3">else</span> <span style="color: #EFF">model_name</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-301"><a id="__codelineno-0-301" name="__codelineno-0-301"></a>                <span style="color: #EFF">system</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&quot;https://healthchain.github.io/ml-models&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-302"><a id="__codelineno-0-302" name="__codelineno-0-302"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-303"><a id="__codelineno-0-303" name="__codelineno-0-303"></a>
</span><span id="__span-0-304"><a id="__codelineno-0-304" name="__codelineno-0-304"></a>        <span style="color: #546E7A; font-style: italic"># Create comment with prediction details</span>
</span><span id="__span-0-305"><a id="__codelineno-0-305" name="__codelineno-0-305"></a>        <span style="color: #EFF">comment</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">(</span>
</span><span id="__span-0-306"><a id="__codelineno-0-306" name="__codelineno-0-306"></a>            <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;ML prediction: </span><span style="color: #89DDFF">{</span><span style="color: #C3E88D">&#39;Positive&#39;</span><span style="color: #EFF"> </span><span style="color: #BB80B3">if</span><span style="color: #EFF"> prediction </span><span style="color: #89DDFF">==</span><span style="color: #EFF"> </span><span style="color: #F78C6C">1</span><span style="color: #EFF"> </span><span style="color: #BB80B3">else</span><span style="color: #EFF"> </span><span style="color: #C3E88D">&#39;Negative&#39;</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D"> &quot;</span>
</span><span id="__span-0-307"><a id="__codelineno-0-307" name="__codelineno-0-307"></a>            <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;(probability: </span><span style="color: #89DDFF">{</span><span style="color: #EFF">probability</span><span style="color: #89DDFF">:</span><span style="color: #C3E88D">.2%</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">, risk: </span><span style="color: #89DDFF">{</span><span style="color: #EFF">qualitative_risk</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">)&quot;</span>
</span><span id="__span-0-308"><a id="__codelineno-0-308" name="__codelineno-0-308"></a>        <span style="color: #89DDFF">)</span>
</span><span id="__span-0-309"><a id="__codelineno-0-309" name="__codelineno-0-309"></a>
</span><span id="__span-0-310"><a id="__codelineno-0-310" name="__codelineno-0-310"></a>        <span style="color: #546E7A; font-style: italic"># Create RiskAssessment</span>
</span><span id="__span-0-311"><a id="__codelineno-0-311" name="__codelineno-0-311"></a>        <span style="color: #EFF">risk_assessment</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">create_risk_assessment_from_prediction</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-312"><a id="__codelineno-0-312" name="__codelineno-0-312"></a>            <span style="color: #EFF">subject</span><span style="color: #89DDFF">=</span><span style="color: #EFF">patient_ref</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-313"><a id="__codelineno-0-313" name="__codelineno-0-313"></a>            <span style="color: #EFF">prediction</span><span style="color: #89DDFF">=</span><span style="color: #EFF">prediction_dict</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-314"><a id="__codelineno-0-314" name="__codelineno-0-314"></a>            <span style="color: #EFF">method</span><span style="color: #89DDFF">=</span><span style="color: #EFF">method</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-315"><a id="__codelineno-0-315" name="__codelineno-0-315"></a>            <span style="color: #EFF">comment</span><span style="color: #89DDFF">=</span><span style="color: #EFF">comment</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-316"><a id="__codelineno-0-316" name="__codelineno-0-316"></a>        <span style="color: #89DDFF">)</span>
</span><span id="__span-0-317"><a id="__codelineno-0-317" name="__codelineno-0-317"></a>
</span><span id="__span-0-318"><a id="__codelineno-0-318" name="__codelineno-0-318"></a>        <span style="color: #EFF">risk_assessments</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">risk_assessment</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-319"><a id="__codelineno-0-319" name="__codelineno-0-319"></a>
</span><span id="__span-0-320"><a id="__codelineno-0-320" name="__codelineno-0-320"></a>    <span style="color: #BB80B3">return</span> <span style="color: #EFF">risk_assessments</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="healthchain.io.containers.Dataset.validate" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">validate</span><span style="color: #89DDFF">(</span><span style="color: #EFF">schema</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">raise_on_error</span><span style="color: #89DDFF">=False)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Validate DataFrame against a feature schema.</p>
<p>Checks that required features are present and have correct data types.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>schema</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>FeatureSchema to validate against</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-internal" title="FeatureSchema (healthchain.io.containers.featureschema.FeatureSchema)" href="#healthchain.io.containers.featureschema.FeatureSchema">FeatureSchema</a></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>raise_on_error</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Whether to raise exception on validation failure</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="bool">bool</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="healthchain.io.types.ValidationResult">ValidationResult</span></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>ValidationResult with validation status and details</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RAISES</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code><span title="ValueError">ValueError</span></code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <p>If raise_on_error is True and validation fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>schema = FeatureSchema.from_yaml("configs/features/sepsis_vitals.yaml")
result = dataset.validate(schema)
if not result.valid:
...     print(result.errors)</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/dataset.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-129">129</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-130">130</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-131">131</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-132">132</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-133">133</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-134">134</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-135">135</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-136">136</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-137">137</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-138">138</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-139">139</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-140">140</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-141">141</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-142">142</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-143">143</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-144">144</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-145">145</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-146">146</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-147">147</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-148">148</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-149">149</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-150">150</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-151">151</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-152">152</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-153">153</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-154">154</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-155">155</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-156">156</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-157">157</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-158">158</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-159">159</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-160">160</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-161">161</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-162">162</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-163">163</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-164">164</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-165">165</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-166">166</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-167">167</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-168">168</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-169">169</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-170">170</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-171">171</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-172">172</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-173">173</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-174">174</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-175">175</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-176">176</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-177">177</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-178">178</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-179">179</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-180">180</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-181">181</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-129"><a id="__codelineno-0-129" name="__codelineno-0-129"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">validate</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-130"><a id="__codelineno-0-130" name="__codelineno-0-130"></a>    <span style="color: #89DDFF">self,</span> <span style="color: #EFF">schema</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">FeatureSchema</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">raise_on_error</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">bool</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">False</span>
</span><span id="__span-0-131"><a id="__codelineno-0-131" name="__codelineno-0-131"></a><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">ValidationResult</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-132"><a id="__codelineno-0-132" name="__codelineno-0-132"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Validate DataFrame against a feature schema.</span>
</span><span id="__span-0-133"><a id="__codelineno-0-133" name="__codelineno-0-133"></a>
</span><span id="__span-0-134"><a id="__codelineno-0-134" name="__codelineno-0-134"></a><span style="color: #546E7A; font-style: italic">    Checks that required features are present and have correct data types.</span>
</span><span id="__span-0-135"><a id="__codelineno-0-135" name="__codelineno-0-135"></a>
</span><span id="__span-0-136"><a id="__codelineno-0-136" name="__codelineno-0-136"></a><span style="color: #546E7A; font-style: italic">    Args:</span>
</span><span id="__span-0-137"><a id="__codelineno-0-137" name="__codelineno-0-137"></a><span style="color: #546E7A; font-style: italic">        schema: FeatureSchema to validate against</span>
</span><span id="__span-0-138"><a id="__codelineno-0-138" name="__codelineno-0-138"></a><span style="color: #546E7A; font-style: italic">        raise_on_error: Whether to raise exception on validation failure</span>
</span><span id="__span-0-139"><a id="__codelineno-0-139" name="__codelineno-0-139"></a>
</span><span id="__span-0-140"><a id="__codelineno-0-140" name="__codelineno-0-140"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-141"><a id="__codelineno-0-141" name="__codelineno-0-141"></a><span style="color: #546E7A; font-style: italic">        ValidationResult with validation status and details</span>
</span><span id="__span-0-142"><a id="__codelineno-0-142" name="__codelineno-0-142"></a>
</span><span id="__span-0-143"><a id="__codelineno-0-143" name="__codelineno-0-143"></a><span style="color: #546E7A; font-style: italic">    Raises:</span>
</span><span id="__span-0-144"><a id="__codelineno-0-144" name="__codelineno-0-144"></a><span style="color: #546E7A; font-style: italic">        ValueError: If raise_on_error is True and validation fails</span>
</span><span id="__span-0-145"><a id="__codelineno-0-145" name="__codelineno-0-145"></a>
</span><span id="__span-0-146"><a id="__codelineno-0-146" name="__codelineno-0-146"></a><span style="color: #546E7A; font-style: italic">    Example:</span>
</span><span id="__span-0-147"><a id="__codelineno-0-147" name="__codelineno-0-147"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; schema = FeatureSchema.from_yaml(&quot;configs/features/sepsis_vitals.yaml&quot;)</span>
</span><span id="__span-0-148"><a id="__codelineno-0-148" name="__codelineno-0-148"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; result = dataset.validate(schema)</span>
</span><span id="__span-0-149"><a id="__codelineno-0-149" name="__codelineno-0-149"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; if not result.valid:</span>
</span><span id="__span-0-150"><a id="__codelineno-0-150" name="__codelineno-0-150"></a><span style="color: #546E7A; font-style: italic">        ...     print(result.errors)</span>
</span><span id="__span-0-151"><a id="__codelineno-0-151" name="__codelineno-0-151"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-152"><a id="__codelineno-0-152" name="__codelineno-0-152"></a>    <span style="color: #EFF">result</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">ValidationResult</span><span style="color: #89DDFF">(</span><span style="color: #EFF">valid</span><span style="color: #89DDFF">=True)</span>
</span><span id="__span-0-153"><a id="__codelineno-0-153" name="__codelineno-0-153"></a>
</span><span id="__span-0-154"><a id="__codelineno-0-154" name="__codelineno-0-154"></a>    <span style="color: #546E7A; font-style: italic"># Check for missing required features</span>
</span><span id="__span-0-155"><a id="__codelineno-0-155" name="__codelineno-0-155"></a>    <span style="color: #EFF">required</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">schema</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get_required_features</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-156"><a id="__codelineno-0-156" name="__codelineno-0-156"></a>    <span style="color: #EFF">missing</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[</span><span style="color: #EFF">f</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">f</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">required</span> <span style="color: #BB80B3">if</span> <span style="color: #EFF">f</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-157"><a id="__codelineno-0-157" name="__codelineno-0-157"></a>
</span><span id="__span-0-158"><a id="__codelineno-0-158" name="__codelineno-0-158"></a>    <span style="color: #BB80B3">for</span> <span style="color: #EFF">feature</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">missing</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-159"><a id="__codelineno-0-159" name="__codelineno-0-159"></a>        <span style="color: #EFF">result</span><span style="color: #89DDFF">.</span><span style="color: #EFF">add_missing_feature</span><span style="color: #89DDFF">(</span><span style="color: #EFF">feature</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-160"><a id="__codelineno-0-160" name="__codelineno-0-160"></a>
</span><span id="__span-0-161"><a id="__codelineno-0-161" name="__codelineno-0-161"></a>    <span style="color: #546E7A; font-style: italic"># Check data types for present features</span>
</span><span id="__span-0-162"><a id="__codelineno-0-162" name="__codelineno-0-162"></a>    <span style="color: #BB80B3">for</span> <span style="color: #EFF">feature_name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">schema</span><span style="color: #89DDFF">.</span><span style="color: #EFF">features</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">():</span>
</span><span id="__span-0-163"><a id="__codelineno-0-163" name="__codelineno-0-163"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">feature_name</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-164"><a id="__codelineno-0-164" name="__codelineno-0-164"></a>            <span style="color: #EFF">actual_dtype</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">[</span><span style="color: #EFF">feature_name</span><span style="color: #89DDFF">].</span><span style="color: #EFF">dtype</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-165"><a id="__codelineno-0-165" name="__codelineno-0-165"></a>            <span style="color: #EFF">expected_dtype</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">dtype</span>
</span><span id="__span-0-166"><a id="__codelineno-0-166" name="__codelineno-0-166"></a>
</span><span id="__span-0-167"><a id="__codelineno-0-167" name="__codelineno-0-167"></a>            <span style="color: #546E7A; font-style: italic"># Check for type mismatches (allow some flexibility)</span>
</span><span id="__span-0-168"><a id="__codelineno-0-168" name="__codelineno-0-168"></a>            <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_dtypes_compatible</span><span style="color: #89DDFF">(</span><span style="color: #EFF">actual_dtype</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">expected_dtype</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-169"><a id="__codelineno-0-169" name="__codelineno-0-169"></a>                <span style="color: #EFF">result</span><span style="color: #89DDFF">.</span><span style="color: #EFF">add_type_mismatch</span><span style="color: #89DDFF">(</span><span style="color: #EFF">feature_name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">expected_dtype</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">actual_dtype</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-170"><a id="__codelineno-0-170" name="__codelineno-0-170"></a>
</span><span id="__span-0-171"><a id="__codelineno-0-171" name="__codelineno-0-171"></a>    <span style="color: #546E7A; font-style: italic"># Warn about optional missing features</span>
</span><span id="__span-0-172"><a id="__codelineno-0-172" name="__codelineno-0-172"></a>    <span style="color: #EFF">optional</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">set</span><span style="color: #89DDFF">(</span><span style="color: #EFF">schema</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get_feature_names</span><span style="color: #89DDFF">())</span> <span style="color: #89DDFF">-</span> <span style="color: #82AAFF">set</span><span style="color: #89DDFF">(</span><span style="color: #EFF">required</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-173"><a id="__codelineno-0-173" name="__codelineno-0-173"></a>    <span style="color: #EFF">missing_optional</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[</span><span style="color: #EFF">f</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">f</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">optional</span> <span style="color: #BB80B3">if</span> <span style="color: #EFF">f</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-174"><a id="__codelineno-0-174" name="__codelineno-0-174"></a>
</span><span id="__span-0-175"><a id="__codelineno-0-175" name="__codelineno-0-175"></a>    <span style="color: #BB80B3">for</span> <span style="color: #EFF">feature</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">missing_optional</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-176"><a id="__codelineno-0-176" name="__codelineno-0-176"></a>        <span style="color: #EFF">result</span><span style="color: #89DDFF">.</span><span style="color: #EFF">add_warning</span><span style="color: #89DDFF">(</span><span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Optional feature &#39;</span><span style="color: #89DDFF">{</span><span style="color: #EFF">feature</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&#39; is missing&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-177"><a id="__codelineno-0-177" name="__codelineno-0-177"></a>
</span><span id="__span-0-178"><a id="__codelineno-0-178" name="__codelineno-0-178"></a>    <span style="color: #BB80B3">if</span> <span style="color: #EFF">raise_on_error</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #EFF">result</span><span style="color: #89DDFF">.</span><span style="color: #EFF">valid</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-179"><a id="__codelineno-0-179" name="__codelineno-0-179"></a>        <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">(</span><span style="color: #EFF">result</span><span style="color: #89DDFF">))</span>
</span><span id="__span-0-180"><a id="__codelineno-0-180" name="__codelineno-0-180"></a>
</span><span id="__span-0-181"><a id="__codelineno-0-181" name="__codelineno-0-181"></a>    <span style="color: #BB80B3">return</span> <span style="color: #EFF">result</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="healthchain.io.containers.Document" class="doc doc-heading">
            <code>Document</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseDocument


  
      dataclass
   (healthchain.io.containers.base.BaseDocument)" href="#healthchain.io.containers.base.BaseDocument">BaseDocument</a></code></p>



        <p>Main document container for processing textual and clinical data in HealthChain.</p>
<p>The Document class is the primary structure used throughout annotation and analytics
pipelines, accumulating transformations, extractions, and results from each stage. It
seamlessly integrates raw text, NLP annotations, FHIR resources, clinical decision
support (CDS) results, and ML model outputs in one object.</p>


<details class="features" open>
  <summary>Features</summary>
  <ul>
<li>Accepts text, FHIR Bundles/resources, or lists of FHIR resources as input.</li>
<li>Provides basic tokenization and supports integration with NLP models (spaCy, transformers).</li>
<li>Stores and manipulates clinical FHIR data via the .fhir property (access to bundles, problem lists, meds, allergies, etc.).</li>
<li>Encapsulates CDS Hooks-style decision support cards and suggested actions via the .cds property.</li>
<li>Stores outputs from external ML/LLM models: HuggingFace, LangChain, etc.</li>
</ul>
</details>

<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">ATTRIBUTE</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.Document.nlp">nlp</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>NLP output (tokens, entities, embeddings, spaCy doc)</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-internal" title="NlpAnnotations


  
      dataclass
   (healthchain.io.containers.document.NlpAnnotations)" href="#healthchain.io.containers.document.NlpAnnotations">NlpAnnotations</a></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.Document.fhir">fhir</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>FHIR resources and context (problem list, medication, allergy, etc.)</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-internal" title="FhirData


  
      dataclass
   (healthchain.io.containers.document.FhirData)" href="#healthchain.io.containers.document.FhirData">FhirData</a></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.Document.cds">cds</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Clinical decision support (cards and actions)</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-internal" title="CdsAnnotations


  
      dataclass
   (healthchain.io.containers.document.CdsAnnotations)" href="#healthchain.io.containers.document.CdsAnnotations">CdsAnnotations</a></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.Document.models">models</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Results from ML/LLM models (HuggingFace, LangChain, etc.)</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-internal" title="ModelOutputs


  
      dataclass
   (healthchain.io.containers.document.ModelOutputs)" href="#healthchain.io.containers.document.ModelOutputs">ModelOutputs</a></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.Document.text">text</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>The text content of the document (if available).</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.Document.data">data</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>The original input supplied (raw text, Bundle, resource, or list of resources)</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<details class="usage-example" open>
  <summary>Usage example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>doc = Document(data="Patient has hypertension")
doc.nlp._tokens
['Patient', 'has', 'hypertension']
doc.fhir.problem_list = [Condition(...)]
doc.cds.cards = [Card(...)]
doc.models.huggingface_results = ...
for token in doc:
...     print(token)</p>
</blockquote>
</blockquote>
</blockquote>
</details>

<details class="inherits-from" open>
  <summary>Inherits from</summary>
  <p>BaseDocument</p>
</details>







              <details class="mkdocstrings-source">
                <summary>Source code in <code>healthchain/io/containers/document.py</code></summary>
                <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-688">688</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-689">689</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-690">690</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-691">691</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-692">692</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-693">693</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-694">694</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-695">695</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-696">696</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-697">697</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-698">698</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-699">699</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-700">700</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-701">701</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-702">702</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-703">703</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-704">704</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-705">705</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-706">706</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-707">707</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-708">708</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-709">709</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-710">710</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-711">711</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-712">712</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-713">713</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-714">714</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-715">715</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-716">716</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-717">717</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-718">718</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-719">719</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-720">720</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-721">721</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-722">722</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-723">723</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-724">724</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-725">725</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-726">726</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-727">727</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-728">728</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-729">729</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-730">730</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-731">731</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-732">732</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-733">733</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-734">734</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-735">735</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-736">736</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-737">737</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-738">738</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-739">739</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-740">740</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-741">741</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-742">742</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-743">743</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-744">744</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-745">745</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-746">746</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-747">747</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-748">748</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-749">749</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-750">750</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-751">751</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-752">752</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-753">753</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-754">754</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-755">755</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-756">756</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-757">757</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-758">758</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-759">759</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-760">760</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-761">761</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-762">762</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-763">763</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-764">764</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-765">765</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-766">766</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-767">767</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-768">768</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-769">769</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-770">770</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-771">771</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-772">772</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-773">773</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-774">774</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-775">775</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-776">776</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-777">777</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-778">778</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-779">779</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-780">780</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-781">781</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-782">782</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-783">783</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-784">784</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-785">785</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-786">786</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-787">787</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-788">788</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-789">789</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-790">790</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-791">791</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-792">792</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-793">793</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-794">794</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-795">795</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-796">796</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-797">797</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-798">798</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-799">799</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-800">800</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-801">801</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-802">802</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-803">803</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-804">804</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-805">805</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-806">806</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-807">807</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-808">808</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-809">809</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-810">810</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-811">811</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-812">812</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-813">813</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-814">814</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-815">815</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-816">816</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-817">817</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-818">818</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-819">819</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-820">820</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-821">821</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-822">822</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-823">823</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-824">824</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-825">825</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-826">826</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-827">827</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-828">828</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-829">829</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-830">830</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-831">831</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-832">832</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-833">833</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-834">834</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-835">835</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-836">836</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-837">837</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-838">838</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-839">839</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-840">840</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-841">841</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-842">842</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-843">843</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-844">844</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-845">845</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-846">846</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-847">847</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-848">848</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-849">849</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-850">850</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-851">851</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-852">852</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-853">853</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-854">854</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-855">855</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-856">856</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-857">857</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-858">858</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-859">859</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-860">860</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-861">861</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-862">862</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-863">863</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-864">864</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-865">865</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-866">866</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-867">867</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-868">868</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-869">869</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-870">870</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-871">871</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-872">872</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-873">873</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-874">874</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-875">875</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-876">876</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-877">877</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-878">878</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-879">879</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-880">880</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-881">881</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-882">882</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-883">883</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-884">884</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-885">885</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-886">886</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-887">887</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-888">888</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-889">889</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-890">890</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-891">891</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-892">892</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-893">893</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-894">894</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-895">895</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-896">896</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-897">897</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-898">898</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-899">899</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-900">900</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-901">901</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-902">902</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-903">903</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-904">904</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-905">905</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-906">906</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-907">907</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-908">908</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-909">909</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-910">910</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-911">911</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-688"><a id="__codelineno-0-688" name="__codelineno-0-688"></a><span style="color: #82AAFF">@dataclass</span>
</span><span id="__span-0-689"><a id="__codelineno-0-689" name="__codelineno-0-689"></a><span style="color: #BB80B3">class</span><span style="color: #EFF"> </span><span style="color: #FFCB6B">Document</span><span style="color: #89DDFF">(</span><span style="color: #EFF">BaseDocument</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-690"><a id="__codelineno-0-690" name="__codelineno-0-690"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-691"><a id="__codelineno-0-691" name="__codelineno-0-691"></a><span style="color: #546E7A; font-style: italic">    Main document container for processing textual and clinical data in HealthChain.</span>
</span><span id="__span-0-692"><a id="__codelineno-0-692" name="__codelineno-0-692"></a>
</span><span id="__span-0-693"><a id="__codelineno-0-693" name="__codelineno-0-693"></a><span style="color: #546E7A; font-style: italic">    The Document class is the primary structure used throughout annotation and analytics</span>
</span><span id="__span-0-694"><a id="__codelineno-0-694" name="__codelineno-0-694"></a><span style="color: #546E7A; font-style: italic">    pipelines, accumulating transformations, extractions, and results from each stage. It</span>
</span><span id="__span-0-695"><a id="__codelineno-0-695" name="__codelineno-0-695"></a><span style="color: #546E7A; font-style: italic">    seamlessly integrates raw text, NLP annotations, FHIR resources, clinical decision</span>
</span><span id="__span-0-696"><a id="__codelineno-0-696" name="__codelineno-0-696"></a><span style="color: #546E7A; font-style: italic">    support (CDS) results, and ML model outputs in one object.</span>
</span><span id="__span-0-697"><a id="__codelineno-0-697" name="__codelineno-0-697"></a>
</span><span id="__span-0-698"><a id="__codelineno-0-698" name="__codelineno-0-698"></a><span style="color: #546E7A; font-style: italic">    Features:</span>
</span><span id="__span-0-699"><a id="__codelineno-0-699" name="__codelineno-0-699"></a><span style="color: #546E7A; font-style: italic">        - Accepts text, FHIR Bundles/resources, or lists of FHIR resources as input.</span>
</span><span id="__span-0-700"><a id="__codelineno-0-700" name="__codelineno-0-700"></a><span style="color: #546E7A; font-style: italic">        - Provides basic tokenization and supports integration with NLP models (spaCy, transformers).</span>
</span><span id="__span-0-701"><a id="__codelineno-0-701" name="__codelineno-0-701"></a><span style="color: #546E7A; font-style: italic">        - Stores and manipulates clinical FHIR data via the .fhir property (access to bundles, problem lists, meds, allergies, etc.).</span>
</span><span id="__span-0-702"><a id="__codelineno-0-702" name="__codelineno-0-702"></a><span style="color: #546E7A; font-style: italic">        - Encapsulates CDS Hooks-style decision support cards and suggested actions via the .cds property.</span>
</span><span id="__span-0-703"><a id="__codelineno-0-703" name="__codelineno-0-703"></a><span style="color: #546E7A; font-style: italic">        - Stores outputs from external ML/LLM models: HuggingFace, LangChain, etc.</span>
</span><span id="__span-0-704"><a id="__codelineno-0-704" name="__codelineno-0-704"></a>
</span><span id="__span-0-705"><a id="__codelineno-0-705" name="__codelineno-0-705"></a><span style="color: #546E7A; font-style: italic">    Attributes:</span>
</span><span id="__span-0-706"><a id="__codelineno-0-706" name="__codelineno-0-706"></a><span style="color: #546E7A; font-style: italic">        nlp (NlpAnnotations): NLP output (tokens, entities, embeddings, spaCy doc)</span>
</span><span id="__span-0-707"><a id="__codelineno-0-707" name="__codelineno-0-707"></a><span style="color: #546E7A; font-style: italic">        fhir (FhirData): FHIR resources and context (problem list, medication, allergy, etc.)</span>
</span><span id="__span-0-708"><a id="__codelineno-0-708" name="__codelineno-0-708"></a><span style="color: #546E7A; font-style: italic">        cds (CdsAnnotations): Clinical decision support (cards and actions)</span>
</span><span id="__span-0-709"><a id="__codelineno-0-709" name="__codelineno-0-709"></a><span style="color: #546E7A; font-style: italic">        models (ModelOutputs): Results from ML/LLM models (HuggingFace, LangChain, etc.)</span>
</span><span id="__span-0-710"><a id="__codelineno-0-710" name="__codelineno-0-710"></a><span style="color: #546E7A; font-style: italic">        text (str): The text content of the document (if available).</span>
</span><span id="__span-0-711"><a id="__codelineno-0-711" name="__codelineno-0-711"></a><span style="color: #546E7A; font-style: italic">        data: The original input supplied (raw text, Bundle, resource, or list of resources)</span>
</span><span id="__span-0-712"><a id="__codelineno-0-712" name="__codelineno-0-712"></a>
</span><span id="__span-0-713"><a id="__codelineno-0-713" name="__codelineno-0-713"></a><span style="color: #546E7A; font-style: italic">    Usage example:</span>
</span><span id="__span-0-714"><a id="__codelineno-0-714" name="__codelineno-0-714"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; doc = Document(data=&quot;Patient has hypertension&quot;)</span>
</span><span id="__span-0-715"><a id="__codelineno-0-715" name="__codelineno-0-715"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; doc.nlp._tokens</span>
</span><span id="__span-0-716"><a id="__codelineno-0-716" name="__codelineno-0-716"></a><span style="color: #546E7A; font-style: italic">        [&#39;Patient&#39;, &#39;has&#39;, &#39;hypertension&#39;]</span>
</span><span id="__span-0-717"><a id="__codelineno-0-717" name="__codelineno-0-717"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; doc.fhir.problem_list = [Condition(...)]</span>
</span><span id="__span-0-718"><a id="__codelineno-0-718" name="__codelineno-0-718"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; doc.cds.cards = [Card(...)]</span>
</span><span id="__span-0-719"><a id="__codelineno-0-719" name="__codelineno-0-719"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; doc.models.huggingface_results = ...</span>
</span><span id="__span-0-720"><a id="__codelineno-0-720" name="__codelineno-0-720"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; for token in doc:</span>
</span><span id="__span-0-721"><a id="__codelineno-0-721" name="__codelineno-0-721"></a><span style="color: #546E7A; font-style: italic">        ...     print(token)</span>
</span><span id="__span-0-722"><a id="__codelineno-0-722" name="__codelineno-0-722"></a>
</span><span id="__span-0-723"><a id="__codelineno-0-723" name="__codelineno-0-723"></a><span style="color: #546E7A; font-style: italic">    Inherits from:</span>
</span><span id="__span-0-724"><a id="__codelineno-0-724" name="__codelineno-0-724"></a><span style="color: #546E7A; font-style: italic">        BaseDocument</span>
</span><span id="__span-0-725"><a id="__codelineno-0-725" name="__codelineno-0-725"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-726"><a id="__codelineno-0-726" name="__codelineno-0-726"></a>
</span><span id="__span-0-727"><a id="__codelineno-0-727" name="__codelineno-0-727"></a>    <span style="color: #EFF">_nlp</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">NlpAnnotations</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">field</span><span style="color: #89DDFF">(</span><span style="color: #EFF">default_factory</span><span style="color: #89DDFF">=</span><span style="color: #EFF">NlpAnnotations</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-728"><a id="__codelineno-0-728" name="__codelineno-0-728"></a>    <span style="color: #EFF">_fhir</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">FhirData</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">field</span><span style="color: #89DDFF">(</span><span style="color: #EFF">default_factory</span><span style="color: #89DDFF">=</span><span style="color: #EFF">FhirData</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-729"><a id="__codelineno-0-729" name="__codelineno-0-729"></a>    <span style="color: #EFF">_cds</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">CdsAnnotations</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">field</span><span style="color: #89DDFF">(</span><span style="color: #EFF">default_factory</span><span style="color: #89DDFF">=</span><span style="color: #EFF">CdsAnnotations</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-730"><a id="__codelineno-0-730" name="__codelineno-0-730"></a>    <span style="color: #EFF">_models</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">ModelOutputs</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">field</span><span style="color: #89DDFF">(</span><span style="color: #EFF">default_factory</span><span style="color: #89DDFF">=</span><span style="color: #EFF">ModelOutputs</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-731"><a id="__codelineno-0-731" name="__codelineno-0-731"></a>
</span><span id="__span-0-732"><a id="__codelineno-0-732" name="__codelineno-0-732"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-733"><a id="__codelineno-0-733" name="__codelineno-0-733"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">nlp</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">NlpAnnotations</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-734"><a id="__codelineno-0-734" name="__codelineno-0-734"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_nlp</span>
</span><span id="__span-0-735"><a id="__codelineno-0-735" name="__codelineno-0-735"></a>
</span><span id="__span-0-736"><a id="__codelineno-0-736" name="__codelineno-0-736"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-737"><a id="__codelineno-0-737" name="__codelineno-0-737"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">fhir</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">FhirData</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-738"><a id="__codelineno-0-738" name="__codelineno-0-738"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_fhir</span>
</span><span id="__span-0-739"><a id="__codelineno-0-739" name="__codelineno-0-739"></a>
</span><span id="__span-0-740"><a id="__codelineno-0-740" name="__codelineno-0-740"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-741"><a id="__codelineno-0-741" name="__codelineno-0-741"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">cds</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">CdsAnnotations</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-742"><a id="__codelineno-0-742" name="__codelineno-0-742"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_cds</span>
</span><span id="__span-0-743"><a id="__codelineno-0-743" name="__codelineno-0-743"></a>
</span><span id="__span-0-744"><a id="__codelineno-0-744" name="__codelineno-0-744"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-745"><a id="__codelineno-0-745" name="__codelineno-0-745"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">models</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">ModelOutputs</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-746"><a id="__codelineno-0-746" name="__codelineno-0-746"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_models</span>
</span><span id="__span-0-747"><a id="__codelineno-0-747" name="__codelineno-0-747"></a>
</span><span id="__span-0-748"><a id="__codelineno-0-748" name="__codelineno-0-748"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">__post_init__</span><span style="color: #89DDFF">(self):</span>
</span><span id="__span-0-749"><a id="__codelineno-0-749" name="__codelineno-0-749"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-750"><a id="__codelineno-0-750" name="__codelineno-0-750"></a><span style="color: #546E7A; font-style: italic">        Post-initialization setup to process textual or FHIR data.</span>
</span><span id="__span-0-751"><a id="__codelineno-0-751" name="__codelineno-0-751"></a>
</span><span id="__span-0-752"><a id="__codelineno-0-752" name="__codelineno-0-752"></a><span style="color: #546E7A; font-style: italic">        - If input data is a FHIR Bundle, stores it and extracts OperationOutcome and Provenance resources.</span>
</span><span id="__span-0-753"><a id="__codelineno-0-753" name="__codelineno-0-753"></a><span style="color: #546E7A; font-style: italic">        - If input data is a list of FHIR resources, wraps them in a Bundle.</span>
</span><span id="__span-0-754"><a id="__codelineno-0-754" name="__codelineno-0-754"></a><span style="color: #546E7A; font-style: italic">        - For text input, sets .text field accordingly.</span>
</span><span id="__span-0-755"><a id="__codelineno-0-755" name="__codelineno-0-755"></a><span style="color: #546E7A; font-style: italic">        - Performs basic whitespace tokenization if necessary.</span>
</span><span id="__span-0-756"><a id="__codelineno-0-756" name="__codelineno-0-756"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-757"><a id="__codelineno-0-757" name="__codelineno-0-757"></a>        <span style="color: #82AAFF">super</span><span style="color: #89DDFF">().</span><span style="color: #EFF">__post_init__</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-758"><a id="__codelineno-0-758" name="__codelineno-0-758"></a>
</span><span id="__span-0-759"><a id="__codelineno-0-759" name="__codelineno-0-759"></a>        <span style="color: #546E7A; font-style: italic"># Handle FHIR Bundle data</span>
</span><span id="__span-0-760"><a id="__codelineno-0-760" name="__codelineno-0-760"></a>        <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Bundle</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-761"><a id="__codelineno-0-761" name="__codelineno-0-761"></a>            <span style="color: #89DDFF">self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_bundle</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span>
</span><span id="__span-0-762"><a id="__codelineno-0-762" name="__codelineno-0-762"></a>
</span><span id="__span-0-763"><a id="__codelineno-0-763" name="__codelineno-0-763"></a>            <span style="color: #546E7A; font-style: italic"># Extract OperationOutcome resources (operation results/errors)</span>
</span><span id="__span-0-764"><a id="__codelineno-0-764" name="__codelineno-0-764"></a>            <span style="color: #EFF">outcomes</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">extract_resources</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_bundle</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;OperationOutcome&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-765"><a id="__codelineno-0-765" name="__codelineno-0-765"></a>            <span style="color: #BB80B3">if</span> <span style="color: #EFF">outcomes</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-766"><a id="__codelineno-0-766" name="__codelineno-0-766"></a>                <span style="color: #89DDFF">self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_operation_outcomes</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">outcomes</span>
</span><span id="__span-0-767"><a id="__codelineno-0-767" name="__codelineno-0-767"></a>
</span><span id="__span-0-768"><a id="__codelineno-0-768" name="__codelineno-0-768"></a>            <span style="color: #546E7A; font-style: italic"># Extract Provenance resources (data lineage/origin)</span>
</span><span id="__span-0-769"><a id="__codelineno-0-769" name="__codelineno-0-769"></a>            <span style="color: #EFF">provenances</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">extract_resources</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_bundle</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;Provenance&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-770"><a id="__codelineno-0-770" name="__codelineno-0-770"></a>            <span style="color: #BB80B3">if</span> <span style="color: #EFF">provenances</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-771"><a id="__codelineno-0-771" name="__codelineno-0-771"></a>                <span style="color: #89DDFF">self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_provenances</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">provenances</span>
</span><span id="__span-0-772"><a id="__codelineno-0-772" name="__codelineno-0-772"></a>
</span><span id="__span-0-773"><a id="__codelineno-0-773" name="__codelineno-0-773"></a>            <span style="color: #89DDFF">self.</span><span style="color: #EFF">text</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;&quot;</span>  <span style="color: #546E7A; font-style: italic"># No text content for bundle-only documents</span>
</span><span id="__span-0-774"><a id="__codelineno-0-774" name="__codelineno-0-774"></a>        <span style="color: #546E7A; font-style: italic"># Handle list of FHIR resources</span>
</span><span id="__span-0-775"><a id="__codelineno-0-775" name="__codelineno-0-775"></a>        <span style="color: #BB80B3">elif</span> <span style="color: #89DDFF">(</span>
</span><span id="__span-0-776"><a id="__codelineno-0-776" name="__codelineno-0-776"></a>            <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-777"><a id="__codelineno-0-777" name="__codelineno-0-777"></a>            <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span>
</span><span id="__span-0-778"><a id="__codelineno-0-778" name="__codelineno-0-778"></a>            <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">[</span><span style="color: #F78C6C">0</span><span style="color: #89DDFF">],</span> <span style="color: #EFF">Resource</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-779"><a id="__codelineno-0-779" name="__codelineno-0-779"></a>        <span style="color: #89DDFF">):</span>
</span><span id="__span-0-780"><a id="__codelineno-0-780" name="__codelineno-0-780"></a>            <span style="color: #89DDFF">self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_bundle</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">create_bundle</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-781"><a id="__codelineno-0-781" name="__codelineno-0-781"></a>            <span style="color: #BB80B3">for</span> <span style="color: #EFF">resource</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-782"><a id="__codelineno-0-782" name="__codelineno-0-782"></a>                <span style="color: #EFF">add_resource</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_bundle</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">resource</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-783"><a id="__codelineno-0-783" name="__codelineno-0-783"></a>            <span style="color: #89DDFF">self.</span><span style="color: #EFF">text</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;&quot;</span>  <span style="color: #546E7A; font-style: italic"># No text content for resource-only documents</span>
</span><span id="__span-0-784"><a id="__codelineno-0-784" name="__codelineno-0-784"></a>        <span style="color: #BB80B3">else</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-785"><a id="__codelineno-0-785" name="__codelineno-0-785"></a>            <span style="color: #546E7A; font-style: italic"># Handle text data</span>
</span><span id="__span-0-786"><a id="__codelineno-0-786" name="__codelineno-0-786"></a>            <span style="color: #89DDFF">self.</span><span style="color: #EFF">text</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span> <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #BB80B3">else</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-787"><a id="__codelineno-0-787" name="__codelineno-0-787"></a>
</span><span id="__span-0-788"><a id="__codelineno-0-788" name="__codelineno-0-788"></a>        <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_tokens</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-789"><a id="__codelineno-0-789" name="__codelineno-0-789"></a>            <span style="color: #89DDFF">self.</span><span style="color: #EFF">_nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_tokens</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">.</span><span style="color: #EFF">split</span><span style="color: #89DDFF">()</span>  <span style="color: #546E7A; font-style: italic"># Basic tokenization if not provided</span>
</span><span id="__span-0-790"><a id="__codelineno-0-790" name="__codelineno-0-790"></a>
</span><span id="__span-0-791"><a id="__codelineno-0-791" name="__codelineno-0-791"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">word_count</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">int</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-792"><a id="__codelineno-0-792" name="__codelineno-0-792"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-793"><a id="__codelineno-0-793" name="__codelineno-0-793"></a><span style="color: #546E7A; font-style: italic">        Return the number of word tokens in the document.</span>
</span><span id="__span-0-794"><a id="__codelineno-0-794" name="__codelineno-0-794"></a>
</span><span id="__span-0-795"><a id="__codelineno-0-795" name="__codelineno-0-795"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-796"><a id="__codelineno-0-796" name="__codelineno-0-796"></a><span style="color: #546E7A; font-style: italic">            int: The count of tokenized words in the document.</span>
</span><span id="__span-0-797"><a id="__codelineno-0-797" name="__codelineno-0-797"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-798"><a id="__codelineno-0-798" name="__codelineno-0-798"></a>        <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_tokens</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-799"><a id="__codelineno-0-799" name="__codelineno-0-799"></a>
</span><span id="__span-0-800"><a id="__codelineno-0-800" name="__codelineno-0-800"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">update_problem_list_from_nlp</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-801"><a id="__codelineno-0-801" name="__codelineno-0-801"></a>        <span style="color: #89DDFF">self,</span>
</span><span id="__span-0-802"><a id="__codelineno-0-802" name="__codelineno-0-802"></a>        <span style="color: #EFF">patient_ref</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;Patient/123&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-803"><a id="__codelineno-0-803" name="__codelineno-0-803"></a>        <span style="color: #EFF">coding_system</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;http://snomed.info/sct&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-804"><a id="__codelineno-0-804" name="__codelineno-0-804"></a>        <span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;cui&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-805"><a id="__codelineno-0-805" name="__codelineno-0-805"></a>    <span style="color: #89DDFF">):</span>
</span><span id="__span-0-806"><a id="__codelineno-0-806" name="__codelineno-0-806"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-807"><a id="__codelineno-0-807" name="__codelineno-0-807"></a><span style="color: #546E7A; font-style: italic">        Populate or update the problem list using entities extracted via NLP.</span>
</span><span id="__span-0-808"><a id="__codelineno-0-808" name="__codelineno-0-808"></a>
</span><span id="__span-0-809"><a id="__codelineno-0-809" name="__codelineno-0-809"></a><span style="color: #546E7A; font-style: italic">        This method looks for entities with associated medical codes and creates FHIR Condition</span>
</span><span id="__span-0-810"><a id="__codelineno-0-810" name="__codelineno-0-810"></a><span style="color: #546E7A; font-style: italic">        resources from them. It supports a two-step process:</span>
</span><span id="__span-0-811"><a id="__codelineno-0-811" name="__codelineno-0-811"></a><span style="color: #546E7A; font-style: italic">        1. NER: Extract entities from text (spaCy, HuggingFace, etc.)</span>
</span><span id="__span-0-812"><a id="__codelineno-0-812" name="__codelineno-0-812"></a><span style="color: #546E7A; font-style: italic">        2. Entity Linking: Add medical codes to those entities</span>
</span><span id="__span-0-813"><a id="__codelineno-0-813" name="__codelineno-0-813"></a><span style="color: #546E7A; font-style: italic">        3. Problem List Creation: Convert linked entities to FHIR conditions (this method)</span>
</span><span id="__span-0-814"><a id="__codelineno-0-814" name="__codelineno-0-814"></a>
</span><span id="__span-0-815"><a id="__codelineno-0-815" name="__codelineno-0-815"></a><span style="color: #546E7A; font-style: italic">        The method extracts from:</span>
</span><span id="__span-0-816"><a id="__codelineno-0-816" name="__codelineno-0-816"></a><span style="color: #546E7A; font-style: italic">        1. spaCy entities with extension attributes (e.g., ent._.cui)</span>
</span><span id="__span-0-817"><a id="__codelineno-0-817" name="__codelineno-0-817"></a><span style="color: #546E7A; font-style: italic">        2. Generic entities in the NLP annotations container (framework-agnostic)</span>
</span><span id="__span-0-818"><a id="__codelineno-0-818" name="__codelineno-0-818"></a>
</span><span id="__span-0-819"><a id="__codelineno-0-819" name="__codelineno-0-819"></a><span style="color: #546E7A; font-style: italic">        TODO: make this more generic and support other resource types</span>
</span><span id="__span-0-820"><a id="__codelineno-0-820" name="__codelineno-0-820"></a>
</span><span id="__span-0-821"><a id="__codelineno-0-821" name="__codelineno-0-821"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-822"><a id="__codelineno-0-822" name="__codelineno-0-822"></a><span style="color: #546E7A; font-style: italic">            patient_ref: FHIR reference to the patient (default: &quot;Patient/123&quot;)</span>
</span><span id="__span-0-823"><a id="__codelineno-0-823" name="__codelineno-0-823"></a><span style="color: #546E7A; font-style: italic">            coding_system: Coding system URI for the conditions (default: SNOMED CT)</span>
</span><span id="__span-0-824"><a id="__codelineno-0-824" name="__codelineno-0-824"></a><span style="color: #546E7A; font-style: italic">            code_attribute: Name of the attribute containing the medical code (default: &quot;cui&quot;)</span>
</span><span id="__span-0-825"><a id="__codelineno-0-825" name="__codelineno-0-825"></a>
</span><span id="__span-0-826"><a id="__codelineno-0-826" name="__codelineno-0-826"></a><span style="color: #546E7A; font-style: italic">        Notes:</span>
</span><span id="__span-0-827"><a id="__codelineno-0-827" name="__codelineno-0-827"></a><span style="color: #546E7A; font-style: italic">            - Preserves any existing problem list Conditions.</span>
</span><span id="__span-0-828"><a id="__codelineno-0-828" name="__codelineno-0-828"></a><span style="color: #546E7A; font-style: italic">            - Supports framework-agnostic extraction (spaCy and dict entities).</span>
</span><span id="__span-0-829"><a id="__codelineno-0-829" name="__codelineno-0-829"></a><span style="color: #546E7A; font-style: italic">            - For spaCy, looks for entity extension attribute (e.g. ent._.cui).</span>
</span><span id="__span-0-830"><a id="__codelineno-0-830" name="__codelineno-0-830"></a><span style="color: #546E7A; font-style: italic">            - For non-spaCy, expects codes as dict keys (ent[&quot;cui&quot;], etc.).</span>
</span><span id="__span-0-831"><a id="__codelineno-0-831" name="__codelineno-0-831"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-832"><a id="__codelineno-0-832" name="__codelineno-0-832"></a>        <span style="color: #546E7A; font-style: italic"># Start with existing conditions to preserve them</span>
</span><span id="__span-0-833"><a id="__codelineno-0-833" name="__codelineno-0-833"></a>        <span style="color: #EFF">existing_conditions</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">problem_list</span><span style="color: #89DDFF">.</span><span style="color: #EFF">copy</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-834"><a id="__codelineno-0-834" name="__codelineno-0-834"></a>        <span style="color: #EFF">new_conditions</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[]</span>
</span><span id="__span-0-835"><a id="__codelineno-0-835" name="__codelineno-0-835"></a>
</span><span id="__span-0-836"><a id="__codelineno-0-836" name="__codelineno-0-836"></a>        <span style="color: #546E7A; font-style: italic"># 1. Extract from spaCy entities (if available)</span>
</span><span id="__span-0-837"><a id="__codelineno-0-837" name="__codelineno-0-837"></a>        <span style="color: #BB80B3">if</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_spacy_doc</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_spacy_doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">ents</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-838"><a id="__codelineno-0-838" name="__codelineno-0-838"></a>            <span style="color: #BB80B3">for</span> <span style="color: #EFF">ent</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_spacy_doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">ents</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-839"><a id="__codelineno-0-839" name="__codelineno-0-839"></a>                <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #EFF">Span</span><span style="color: #89DDFF">.</span><span style="color: #EFF">has_extension</span><span style="color: #89DDFF">(</span><span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-840"><a id="__codelineno-0-840" name="__codelineno-0-840"></a>                    <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">debug</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-841"><a id="__codelineno-0-841" name="__codelineno-0-841"></a>                        <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Extension &#39;</span><span style="color: #89DDFF">{</span><span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&#39; not found for spaCy entity </span><span style="color: #89DDFF">{</span><span style="color: #EFF">ent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-842"><a id="__codelineno-0-842" name="__codelineno-0-842"></a>                    <span style="color: #89DDFF">)</span>
</span><span id="__span-0-843"><a id="__codelineno-0-843" name="__codelineno-0-843"></a>                    <span style="color: #BB80B3">continue</span>
</span><span id="__span-0-844"><a id="__codelineno-0-844" name="__codelineno-0-844"></a>
</span><span id="__span-0-845"><a id="__codelineno-0-845" name="__codelineno-0-845"></a>                <span style="color: #EFF">code_value</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">getattr</span><span style="color: #89DDFF">(</span><span style="color: #EFF">ent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">None)</span>
</span><span id="__span-0-846"><a id="__codelineno-0-846" name="__codelineno-0-846"></a>                <span style="color: #BB80B3">if</span> <span style="color: #EFF">code_value</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-847"><a id="__codelineno-0-847" name="__codelineno-0-847"></a>                    <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">debug</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-848"><a id="__codelineno-0-848" name="__codelineno-0-848"></a>                        <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;No </span><span style="color: #89DDFF">{</span><span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D"> found for spaCy entity </span><span style="color: #89DDFF">{</span><span style="color: #EFF">ent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-849"><a id="__codelineno-0-849" name="__codelineno-0-849"></a>                    <span style="color: #89DDFF">)</span>
</span><span id="__span-0-850"><a id="__codelineno-0-850" name="__codelineno-0-850"></a>                    <span style="color: #BB80B3">continue</span>
</span><span id="__span-0-851"><a id="__codelineno-0-851" name="__codelineno-0-851"></a>
</span><span id="__span-0-852"><a id="__codelineno-0-852" name="__codelineno-0-852"></a>                <span style="color: #EFF">condition</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">create_condition</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-853"><a id="__codelineno-0-853" name="__codelineno-0-853"></a>                    <span style="color: #EFF">subject</span><span style="color: #89DDFF">=</span><span style="color: #EFF">patient_ref</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-854"><a id="__codelineno-0-854" name="__codelineno-0-854"></a>                    <span style="color: #EFF">code</span><span style="color: #89DDFF">=</span><span style="color: #EFF">code_value</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-855"><a id="__codelineno-0-855" name="__codelineno-0-855"></a>                    <span style="color: #EFF">display</span><span style="color: #89DDFF">=</span><span style="color: #EFF">ent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-856"><a id="__codelineno-0-856" name="__codelineno-0-856"></a>                    <span style="color: #EFF">system</span><span style="color: #89DDFF">=</span><span style="color: #EFF">coding_system</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-857"><a id="__codelineno-0-857" name="__codelineno-0-857"></a>                <span style="color: #89DDFF">)</span>
</span><span id="__span-0-858"><a id="__codelineno-0-858" name="__codelineno-0-858"></a>                <span style="color: #EFF">set_condition_category</span><span style="color: #89DDFF">(</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;problem-list-item&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-859"><a id="__codelineno-0-859" name="__codelineno-0-859"></a>                <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">debug</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-860"><a id="__codelineno-0-860" name="__codelineno-0-860"></a>                    <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Adding condition from spaCy: </span><span style="color: #89DDFF">{</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">.</span><span style="color: #EFF">model_dump</span><span style="color: #89DDFF">(</span><span style="color: #EFF">exclude_none</span><span style="color: #89DDFF">=True)}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-861"><a id="__codelineno-0-861" name="__codelineno-0-861"></a>                <span style="color: #89DDFF">)</span>
</span><span id="__span-0-862"><a id="__codelineno-0-862" name="__codelineno-0-862"></a>                <span style="color: #EFF">new_conditions</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-863"><a id="__codelineno-0-863" name="__codelineno-0-863"></a>
</span><span id="__span-0-864"><a id="__codelineno-0-864" name="__codelineno-0-864"></a>        <span style="color: #546E7A; font-style: italic"># 2. Extract from generic NLP entities (framework-agnostic)</span>
</span><span id="__span-0-865"><a id="__codelineno-0-865" name="__codelineno-0-865"></a>        <span style="color: #EFF">generic_entities</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get_entities</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-866"><a id="__codelineno-0-866" name="__codelineno-0-866"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">generic_entities</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-867"><a id="__codelineno-0-867" name="__codelineno-0-867"></a>            <span style="color: #BB80B3">for</span> <span style="color: #EFF">ent_dict</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">generic_entities</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-868"><a id="__codelineno-0-868" name="__codelineno-0-868"></a>                <span style="color: #546E7A; font-style: italic"># Skip if no linked code</span>
</span><span id="__span-0-869"><a id="__codelineno-0-869" name="__codelineno-0-869"></a>                <span style="color: #EFF">code_value</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">ent_dict</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-870"><a id="__codelineno-0-870" name="__codelineno-0-870"></a>                <span style="color: #BB80B3">if</span> <span style="color: #EFF">code_value</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-871"><a id="__codelineno-0-871" name="__codelineno-0-871"></a>                    <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">debug</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-872"><a id="__codelineno-0-872" name="__codelineno-0-872"></a>                        <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;No </span><span style="color: #89DDFF">{</span><span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D"> found for entity </span><span style="color: #89DDFF">{</span><span style="color: #EFF">ent_dict</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&#39;text&#39;</span><span style="color: #89DDFF">,</span><span style="color: #EFF"> </span><span style="color: #C3E88D">&#39;unknown&#39;</span><span style="color: #89DDFF">)}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-873"><a id="__codelineno-0-873" name="__codelineno-0-873"></a>                    <span style="color: #89DDFF">)</span>
</span><span id="__span-0-874"><a id="__codelineno-0-874" name="__codelineno-0-874"></a>                    <span style="color: #BB80B3">continue</span>
</span><span id="__span-0-875"><a id="__codelineno-0-875" name="__codelineno-0-875"></a>
</span><span id="__span-0-876"><a id="__codelineno-0-876" name="__codelineno-0-876"></a>                <span style="color: #EFF">entity_text</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">ent_dict</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;text&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;unknown&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-877"><a id="__codelineno-0-877" name="__codelineno-0-877"></a>
</span><span id="__span-0-878"><a id="__codelineno-0-878" name="__codelineno-0-878"></a>                <span style="color: #EFF">condition</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">create_condition</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-879"><a id="__codelineno-0-879" name="__codelineno-0-879"></a>                    <span style="color: #EFF">subject</span><span style="color: #89DDFF">=</span><span style="color: #EFF">patient_ref</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-880"><a id="__codelineno-0-880" name="__codelineno-0-880"></a>                    <span style="color: #EFF">code</span><span style="color: #89DDFF">=</span><span style="color: #EFF">code_value</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-881"><a id="__codelineno-0-881" name="__codelineno-0-881"></a>                    <span style="color: #EFF">display</span><span style="color: #89DDFF">=</span><span style="color: #EFF">entity_text</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-882"><a id="__codelineno-0-882" name="__codelineno-0-882"></a>                    <span style="color: #EFF">system</span><span style="color: #89DDFF">=</span><span style="color: #EFF">coding_system</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-883"><a id="__codelineno-0-883" name="__codelineno-0-883"></a>                <span style="color: #89DDFF">)</span>
</span><span id="__span-0-884"><a id="__codelineno-0-884" name="__codelineno-0-884"></a>                <span style="color: #EFF">set_condition_category</span><span style="color: #89DDFF">(</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;problem-list-item&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-885"><a id="__codelineno-0-885" name="__codelineno-0-885"></a>                <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">debug</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-886"><a id="__codelineno-0-886" name="__codelineno-0-886"></a>                    <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Adding condition from entities: </span><span style="color: #89DDFF">{</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">.</span><span style="color: #EFF">model_dump</span><span style="color: #89DDFF">(</span><span style="color: #EFF">exclude_none</span><span style="color: #89DDFF">=True)}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-887"><a id="__codelineno-0-887" name="__codelineno-0-887"></a>                <span style="color: #89DDFF">)</span>
</span><span id="__span-0-888"><a id="__codelineno-0-888" name="__codelineno-0-888"></a>                <span style="color: #EFF">new_conditions</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-889"><a id="__codelineno-0-889" name="__codelineno-0-889"></a>
</span><span id="__span-0-890"><a id="__codelineno-0-890" name="__codelineno-0-890"></a>        <span style="color: #546E7A; font-style: italic"># Update problem list with combined conditions (replace to avoid duplication)</span>
</span><span id="__span-0-891"><a id="__codelineno-0-891" name="__codelineno-0-891"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">new_conditions</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-892"><a id="__codelineno-0-892" name="__codelineno-0-892"></a>            <span style="color: #EFF">all_conditions</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">existing_conditions</span> <span style="color: #89DDFF">+</span> <span style="color: #EFF">new_conditions</span>
</span><span id="__span-0-893"><a id="__codelineno-0-893" name="__codelineno-0-893"></a>            <span style="color: #89DDFF">self.</span><span style="color: #EFF">fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">add_resources</span><span style="color: #89DDFF">(</span><span style="color: #EFF">all_conditions</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;Condition&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">replace</span><span style="color: #89DDFF">=True)</span>
</span><span id="__span-0-894"><a id="__codelineno-0-894" name="__codelineno-0-894"></a>
</span><span id="__span-0-895"><a id="__codelineno-0-895" name="__codelineno-0-895"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">__iter__</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Iterator</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-896"><a id="__codelineno-0-896" name="__codelineno-0-896"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-897"><a id="__codelineno-0-897" name="__codelineno-0-897"></a><span style="color: #546E7A; font-style: italic">        Iterate through the document&#39;s tokens.</span>
</span><span id="__span-0-898"><a id="__codelineno-0-898" name="__codelineno-0-898"></a>
</span><span id="__span-0-899"><a id="__codelineno-0-899" name="__codelineno-0-899"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-900"><a id="__codelineno-0-900" name="__codelineno-0-900"></a><span style="color: #546E7A; font-style: italic">            Iterator[str]: Iterator over the document tokens.</span>
</span><span id="__span-0-901"><a id="__codelineno-0-901" name="__codelineno-0-901"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-902"><a id="__codelineno-0-902" name="__codelineno-0-902"></a>        <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">iter</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_tokens</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-903"><a id="__codelineno-0-903" name="__codelineno-0-903"></a>
</span><span id="__span-0-904"><a id="__codelineno-0-904" name="__codelineno-0-904"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">__len__</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">int</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-905"><a id="__codelineno-0-905" name="__codelineno-0-905"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-906"><a id="__codelineno-0-906" name="__codelineno-0-906"></a><span style="color: #546E7A; font-style: italic">        Return the length of the document&#39;s text.</span>
</span><span id="__span-0-907"><a id="__codelineno-0-907" name="__codelineno-0-907"></a>
</span><span id="__span-0-908"><a id="__codelineno-0-908" name="__codelineno-0-908"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-909"><a id="__codelineno-0-909" name="__codelineno-0-909"></a><span style="color: #546E7A; font-style: italic">            int: Character length of the document text.</span>
</span><span id="__span-0-910"><a id="__codelineno-0-910" name="__codelineno-0-910"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-911"><a id="__codelineno-0-911" name="__codelineno-0-911"></a>        <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">)</span>
</span></code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="healthchain.io.containers.Document.__iter__" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #82AAFF">__iter__</span><span style="color: #89DDFF">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Iterate through the document's tokens.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.Iterator">Iterator</span>[<span title="str">str</span>]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Iterator[str]: Iterator over the document tokens.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/document.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-895">895</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-896">896</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-897">897</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-898">898</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-899">899</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-900">900</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-901">901</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-902">902</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-895"><a id="__codelineno-0-895" name="__codelineno-0-895"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">__iter__</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Iterator</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-896"><a id="__codelineno-0-896" name="__codelineno-0-896"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-897"><a id="__codelineno-0-897" name="__codelineno-0-897"></a><span style="color: #546E7A; font-style: italic">    Iterate through the document&#39;s tokens.</span>
</span><span id="__span-0-898"><a id="__codelineno-0-898" name="__codelineno-0-898"></a>
</span><span id="__span-0-899"><a id="__codelineno-0-899" name="__codelineno-0-899"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-900"><a id="__codelineno-0-900" name="__codelineno-0-900"></a><span style="color: #546E7A; font-style: italic">        Iterator[str]: Iterator over the document tokens.</span>
</span><span id="__span-0-901"><a id="__codelineno-0-901" name="__codelineno-0-901"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-902"><a id="__codelineno-0-902" name="__codelineno-0-902"></a>    <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">iter</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_tokens</span><span style="color: #89DDFF">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="healthchain.io.containers.Document.__len__" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #82AAFF">__len__</span><span style="color: #89DDFF">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Return the length of the document's text.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>int</code>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Character length of the document text.</p>
              </div>
                <p>
                  <span class="doc-returns-annotation">
                    <b>TYPE:</b>
                      <code><span title="int">int</span></code>
                  </span>
                </p>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/document.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-904">904</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-905">905</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-906">906</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-907">907</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-908">908</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-909">909</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-910">910</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-911">911</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-904"><a id="__codelineno-0-904" name="__codelineno-0-904"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">__len__</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">int</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-905"><a id="__codelineno-0-905" name="__codelineno-0-905"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-906"><a id="__codelineno-0-906" name="__codelineno-0-906"></a><span style="color: #546E7A; font-style: italic">    Return the length of the document&#39;s text.</span>
</span><span id="__span-0-907"><a id="__codelineno-0-907" name="__codelineno-0-907"></a>
</span><span id="__span-0-908"><a id="__codelineno-0-908" name="__codelineno-0-908"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-909"><a id="__codelineno-0-909" name="__codelineno-0-909"></a><span style="color: #546E7A; font-style: italic">        int: Character length of the document text.</span>
</span><span id="__span-0-910"><a id="__codelineno-0-910" name="__codelineno-0-910"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-911"><a id="__codelineno-0-911" name="__codelineno-0-911"></a>    <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="healthchain.io.containers.Document.__post_init__" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">__post_init__</span><span style="color: #89DDFF">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Post-initialization setup to process textual or FHIR data.</p>
<ul>
<li>If input data is a FHIR Bundle, stores it and extracts OperationOutcome and Provenance resources.</li>
<li>If input data is a list of FHIR resources, wraps them in a Bundle.</li>
<li>For text input, sets .text field accordingly.</li>
<li>Performs basic whitespace tokenization if necessary.</li>
</ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/document.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-748">748</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-749">749</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-750">750</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-751">751</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-752">752</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-753">753</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-754">754</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-755">755</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-756">756</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-757">757</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-758">758</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-759">759</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-760">760</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-761">761</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-762">762</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-763">763</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-764">764</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-765">765</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-766">766</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-767">767</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-768">768</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-769">769</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-770">770</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-771">771</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-772">772</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-773">773</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-774">774</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-775">775</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-776">776</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-777">777</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-778">778</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-779">779</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-780">780</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-781">781</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-782">782</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-783">783</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-784">784</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-785">785</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-786">786</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-787">787</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-788">788</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-789">789</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-748"><a id="__codelineno-0-748" name="__codelineno-0-748"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">__post_init__</span><span style="color: #89DDFF">(self):</span>
</span><span id="__span-0-749"><a id="__codelineno-0-749" name="__codelineno-0-749"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-750"><a id="__codelineno-0-750" name="__codelineno-0-750"></a><span style="color: #546E7A; font-style: italic">    Post-initialization setup to process textual or FHIR data.</span>
</span><span id="__span-0-751"><a id="__codelineno-0-751" name="__codelineno-0-751"></a>
</span><span id="__span-0-752"><a id="__codelineno-0-752" name="__codelineno-0-752"></a><span style="color: #546E7A; font-style: italic">    - If input data is a FHIR Bundle, stores it and extracts OperationOutcome and Provenance resources.</span>
</span><span id="__span-0-753"><a id="__codelineno-0-753" name="__codelineno-0-753"></a><span style="color: #546E7A; font-style: italic">    - If input data is a list of FHIR resources, wraps them in a Bundle.</span>
</span><span id="__span-0-754"><a id="__codelineno-0-754" name="__codelineno-0-754"></a><span style="color: #546E7A; font-style: italic">    - For text input, sets .text field accordingly.</span>
</span><span id="__span-0-755"><a id="__codelineno-0-755" name="__codelineno-0-755"></a><span style="color: #546E7A; font-style: italic">    - Performs basic whitespace tokenization if necessary.</span>
</span><span id="__span-0-756"><a id="__codelineno-0-756" name="__codelineno-0-756"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-757"><a id="__codelineno-0-757" name="__codelineno-0-757"></a>    <span style="color: #82AAFF">super</span><span style="color: #89DDFF">().</span><span style="color: #EFF">__post_init__</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-758"><a id="__codelineno-0-758" name="__codelineno-0-758"></a>
</span><span id="__span-0-759"><a id="__codelineno-0-759" name="__codelineno-0-759"></a>    <span style="color: #546E7A; font-style: italic"># Handle FHIR Bundle data</span>
</span><span id="__span-0-760"><a id="__codelineno-0-760" name="__codelineno-0-760"></a>    <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Bundle</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-761"><a id="__codelineno-0-761" name="__codelineno-0-761"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_bundle</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span>
</span><span id="__span-0-762"><a id="__codelineno-0-762" name="__codelineno-0-762"></a>
</span><span id="__span-0-763"><a id="__codelineno-0-763" name="__codelineno-0-763"></a>        <span style="color: #546E7A; font-style: italic"># Extract OperationOutcome resources (operation results/errors)</span>
</span><span id="__span-0-764"><a id="__codelineno-0-764" name="__codelineno-0-764"></a>        <span style="color: #EFF">outcomes</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">extract_resources</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_bundle</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;OperationOutcome&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-765"><a id="__codelineno-0-765" name="__codelineno-0-765"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">outcomes</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-766"><a id="__codelineno-0-766" name="__codelineno-0-766"></a>            <span style="color: #89DDFF">self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_operation_outcomes</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">outcomes</span>
</span><span id="__span-0-767"><a id="__codelineno-0-767" name="__codelineno-0-767"></a>
</span><span id="__span-0-768"><a id="__codelineno-0-768" name="__codelineno-0-768"></a>        <span style="color: #546E7A; font-style: italic"># Extract Provenance resources (data lineage/origin)</span>
</span><span id="__span-0-769"><a id="__codelineno-0-769" name="__codelineno-0-769"></a>        <span style="color: #EFF">provenances</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">extract_resources</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_bundle</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;Provenance&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-770"><a id="__codelineno-0-770" name="__codelineno-0-770"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">provenances</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-771"><a id="__codelineno-0-771" name="__codelineno-0-771"></a>            <span style="color: #89DDFF">self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_provenances</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">provenances</span>
</span><span id="__span-0-772"><a id="__codelineno-0-772" name="__codelineno-0-772"></a>
</span><span id="__span-0-773"><a id="__codelineno-0-773" name="__codelineno-0-773"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">text</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;&quot;</span>  <span style="color: #546E7A; font-style: italic"># No text content for bundle-only documents</span>
</span><span id="__span-0-774"><a id="__codelineno-0-774" name="__codelineno-0-774"></a>    <span style="color: #546E7A; font-style: italic"># Handle list of FHIR resources</span>
</span><span id="__span-0-775"><a id="__codelineno-0-775" name="__codelineno-0-775"></a>    <span style="color: #BB80B3">elif</span> <span style="color: #89DDFF">(</span>
</span><span id="__span-0-776"><a id="__codelineno-0-776" name="__codelineno-0-776"></a>        <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-777"><a id="__codelineno-0-777" name="__codelineno-0-777"></a>        <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span>
</span><span id="__span-0-778"><a id="__codelineno-0-778" name="__codelineno-0-778"></a>        <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">[</span><span style="color: #F78C6C">0</span><span style="color: #89DDFF">],</span> <span style="color: #EFF">Resource</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-779"><a id="__codelineno-0-779" name="__codelineno-0-779"></a>    <span style="color: #89DDFF">):</span>
</span><span id="__span-0-780"><a id="__codelineno-0-780" name="__codelineno-0-780"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_bundle</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">create_bundle</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-781"><a id="__codelineno-0-781" name="__codelineno-0-781"></a>        <span style="color: #BB80B3">for</span> <span style="color: #EFF">resource</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-782"><a id="__codelineno-0-782" name="__codelineno-0-782"></a>            <span style="color: #EFF">add_resource</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_bundle</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">resource</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-783"><a id="__codelineno-0-783" name="__codelineno-0-783"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">text</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;&quot;</span>  <span style="color: #546E7A; font-style: italic"># No text content for resource-only documents</span>
</span><span id="__span-0-784"><a id="__codelineno-0-784" name="__codelineno-0-784"></a>    <span style="color: #BB80B3">else</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-785"><a id="__codelineno-0-785" name="__codelineno-0-785"></a>        <span style="color: #546E7A; font-style: italic"># Handle text data</span>
</span><span id="__span-0-786"><a id="__codelineno-0-786" name="__codelineno-0-786"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">text</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span> <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #BB80B3">else</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-787"><a id="__codelineno-0-787" name="__codelineno-0-787"></a>
</span><span id="__span-0-788"><a id="__codelineno-0-788" name="__codelineno-0-788"></a>    <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_tokens</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-789"><a id="__codelineno-0-789" name="__codelineno-0-789"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">_nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_tokens</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">.</span><span style="color: #EFF">split</span><span style="color: #89DDFF">()</span>  <span style="color: #546E7A; font-style: italic"># Basic tokenization if not provided</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="healthchain.io.containers.Document.update_problem_list_from_nlp" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">update_problem_list_from_nlp</span><span style="color: #89DDFF">(</span><span style="color: #EFF">patient_ref</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&#39;Patient/123&#39;</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">coding_system</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&#39;http://snomed.info/sct&#39;</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&#39;cui&#39;</span><span style="color: #89DDFF">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Populate or update the problem list using entities extracted via NLP.</p>
<p>This method looks for entities with associated medical codes and creates FHIR Condition
resources from them. It supports a two-step process:
1. NER: Extract entities from text (spaCy, HuggingFace, etc.)
2. Entity Linking: Add medical codes to those entities
3. Problem List Creation: Convert linked entities to FHIR conditions (this method)</p>
<p>The method extracts from:
1. spaCy entities with extension attributes (e.g., ent._.cui)
2. Generic entities in the NLP annotations container (framework-agnostic)</p>
<p>TODO: make this more generic and support other resource types</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>patient_ref</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>FHIR reference to the patient (default: "Patient/123")</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#39;Patient/123&#39;</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>coding_system</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Coding system URI for the conditions (default: SNOMED CT)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#39;http://snomed.info/sct&#39;</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>code_attribute</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Name of the attribute containing the medical code (default: "cui")</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#39;cui&#39;</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<details class="notes" open>
  <summary>Notes</summary>
  <ul>
<li>Preserves any existing problem list Conditions.</li>
<li>Supports framework-agnostic extraction (spaCy and dict entities).</li>
<li>For spaCy, looks for entity extension attribute (e.g. ent._.cui).</li>
<li>For non-spaCy, expects codes as dict keys (ent["cui"], etc.).</li>
</ul>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/document.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-800">800</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-801">801</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-802">802</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-803">803</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-804">804</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-805">805</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-806">806</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-807">807</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-808">808</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-809">809</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-810">810</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-811">811</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-812">812</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-813">813</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-814">814</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-815">815</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-816">816</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-817">817</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-818">818</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-819">819</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-820">820</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-821">821</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-822">822</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-823">823</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-824">824</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-825">825</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-826">826</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-827">827</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-828">828</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-829">829</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-830">830</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-831">831</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-832">832</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-833">833</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-834">834</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-835">835</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-836">836</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-837">837</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-838">838</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-839">839</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-840">840</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-841">841</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-842">842</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-843">843</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-844">844</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-845">845</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-846">846</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-847">847</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-848">848</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-849">849</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-850">850</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-851">851</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-852">852</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-853">853</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-854">854</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-855">855</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-856">856</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-857">857</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-858">858</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-859">859</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-860">860</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-861">861</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-862">862</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-863">863</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-864">864</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-865">865</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-866">866</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-867">867</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-868">868</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-869">869</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-870">870</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-871">871</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-872">872</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-873">873</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-874">874</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-875">875</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-876">876</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-877">877</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-878">878</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-879">879</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-880">880</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-881">881</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-882">882</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-883">883</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-884">884</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-885">885</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-886">886</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-887">887</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-888">888</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-889">889</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-890">890</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-891">891</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-892">892</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-893">893</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-800"><a id="__codelineno-0-800" name="__codelineno-0-800"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">update_problem_list_from_nlp</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-801"><a id="__codelineno-0-801" name="__codelineno-0-801"></a>    <span style="color: #89DDFF">self,</span>
</span><span id="__span-0-802"><a id="__codelineno-0-802" name="__codelineno-0-802"></a>    <span style="color: #EFF">patient_ref</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;Patient/123&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-803"><a id="__codelineno-0-803" name="__codelineno-0-803"></a>    <span style="color: #EFF">coding_system</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;http://snomed.info/sct&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-804"><a id="__codelineno-0-804" name="__codelineno-0-804"></a>    <span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;cui&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-805"><a id="__codelineno-0-805" name="__codelineno-0-805"></a><span style="color: #89DDFF">):</span>
</span><span id="__span-0-806"><a id="__codelineno-0-806" name="__codelineno-0-806"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-807"><a id="__codelineno-0-807" name="__codelineno-0-807"></a><span style="color: #546E7A; font-style: italic">    Populate or update the problem list using entities extracted via NLP.</span>
</span><span id="__span-0-808"><a id="__codelineno-0-808" name="__codelineno-0-808"></a>
</span><span id="__span-0-809"><a id="__codelineno-0-809" name="__codelineno-0-809"></a><span style="color: #546E7A; font-style: italic">    This method looks for entities with associated medical codes and creates FHIR Condition</span>
</span><span id="__span-0-810"><a id="__codelineno-0-810" name="__codelineno-0-810"></a><span style="color: #546E7A; font-style: italic">    resources from them. It supports a two-step process:</span>
</span><span id="__span-0-811"><a id="__codelineno-0-811" name="__codelineno-0-811"></a><span style="color: #546E7A; font-style: italic">    1. NER: Extract entities from text (spaCy, HuggingFace, etc.)</span>
</span><span id="__span-0-812"><a id="__codelineno-0-812" name="__codelineno-0-812"></a><span style="color: #546E7A; font-style: italic">    2. Entity Linking: Add medical codes to those entities</span>
</span><span id="__span-0-813"><a id="__codelineno-0-813" name="__codelineno-0-813"></a><span style="color: #546E7A; font-style: italic">    3. Problem List Creation: Convert linked entities to FHIR conditions (this method)</span>
</span><span id="__span-0-814"><a id="__codelineno-0-814" name="__codelineno-0-814"></a>
</span><span id="__span-0-815"><a id="__codelineno-0-815" name="__codelineno-0-815"></a><span style="color: #546E7A; font-style: italic">    The method extracts from:</span>
</span><span id="__span-0-816"><a id="__codelineno-0-816" name="__codelineno-0-816"></a><span style="color: #546E7A; font-style: italic">    1. spaCy entities with extension attributes (e.g., ent._.cui)</span>
</span><span id="__span-0-817"><a id="__codelineno-0-817" name="__codelineno-0-817"></a><span style="color: #546E7A; font-style: italic">    2. Generic entities in the NLP annotations container (framework-agnostic)</span>
</span><span id="__span-0-818"><a id="__codelineno-0-818" name="__codelineno-0-818"></a>
</span><span id="__span-0-819"><a id="__codelineno-0-819" name="__codelineno-0-819"></a><span style="color: #546E7A; font-style: italic">    TODO: make this more generic and support other resource types</span>
</span><span id="__span-0-820"><a id="__codelineno-0-820" name="__codelineno-0-820"></a>
</span><span id="__span-0-821"><a id="__codelineno-0-821" name="__codelineno-0-821"></a><span style="color: #546E7A; font-style: italic">    Args:</span>
</span><span id="__span-0-822"><a id="__codelineno-0-822" name="__codelineno-0-822"></a><span style="color: #546E7A; font-style: italic">        patient_ref: FHIR reference to the patient (default: &quot;Patient/123&quot;)</span>
</span><span id="__span-0-823"><a id="__codelineno-0-823" name="__codelineno-0-823"></a><span style="color: #546E7A; font-style: italic">        coding_system: Coding system URI for the conditions (default: SNOMED CT)</span>
</span><span id="__span-0-824"><a id="__codelineno-0-824" name="__codelineno-0-824"></a><span style="color: #546E7A; font-style: italic">        code_attribute: Name of the attribute containing the medical code (default: &quot;cui&quot;)</span>
</span><span id="__span-0-825"><a id="__codelineno-0-825" name="__codelineno-0-825"></a>
</span><span id="__span-0-826"><a id="__codelineno-0-826" name="__codelineno-0-826"></a><span style="color: #546E7A; font-style: italic">    Notes:</span>
</span><span id="__span-0-827"><a id="__codelineno-0-827" name="__codelineno-0-827"></a><span style="color: #546E7A; font-style: italic">        - Preserves any existing problem list Conditions.</span>
</span><span id="__span-0-828"><a id="__codelineno-0-828" name="__codelineno-0-828"></a><span style="color: #546E7A; font-style: italic">        - Supports framework-agnostic extraction (spaCy and dict entities).</span>
</span><span id="__span-0-829"><a id="__codelineno-0-829" name="__codelineno-0-829"></a><span style="color: #546E7A; font-style: italic">        - For spaCy, looks for entity extension attribute (e.g. ent._.cui).</span>
</span><span id="__span-0-830"><a id="__codelineno-0-830" name="__codelineno-0-830"></a><span style="color: #546E7A; font-style: italic">        - For non-spaCy, expects codes as dict keys (ent[&quot;cui&quot;], etc.).</span>
</span><span id="__span-0-831"><a id="__codelineno-0-831" name="__codelineno-0-831"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-832"><a id="__codelineno-0-832" name="__codelineno-0-832"></a>    <span style="color: #546E7A; font-style: italic"># Start with existing conditions to preserve them</span>
</span><span id="__span-0-833"><a id="__codelineno-0-833" name="__codelineno-0-833"></a>    <span style="color: #EFF">existing_conditions</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">problem_list</span><span style="color: #89DDFF">.</span><span style="color: #EFF">copy</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-834"><a id="__codelineno-0-834" name="__codelineno-0-834"></a>    <span style="color: #EFF">new_conditions</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[]</span>
</span><span id="__span-0-835"><a id="__codelineno-0-835" name="__codelineno-0-835"></a>
</span><span id="__span-0-836"><a id="__codelineno-0-836" name="__codelineno-0-836"></a>    <span style="color: #546E7A; font-style: italic"># 1. Extract from spaCy entities (if available)</span>
</span><span id="__span-0-837"><a id="__codelineno-0-837" name="__codelineno-0-837"></a>    <span style="color: #BB80B3">if</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_spacy_doc</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_spacy_doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">ents</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-838"><a id="__codelineno-0-838" name="__codelineno-0-838"></a>        <span style="color: #BB80B3">for</span> <span style="color: #EFF">ent</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_spacy_doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">ents</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-839"><a id="__codelineno-0-839" name="__codelineno-0-839"></a>            <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #EFF">Span</span><span style="color: #89DDFF">.</span><span style="color: #EFF">has_extension</span><span style="color: #89DDFF">(</span><span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-840"><a id="__codelineno-0-840" name="__codelineno-0-840"></a>                <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">debug</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-841"><a id="__codelineno-0-841" name="__codelineno-0-841"></a>                    <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Extension &#39;</span><span style="color: #89DDFF">{</span><span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&#39; not found for spaCy entity </span><span style="color: #89DDFF">{</span><span style="color: #EFF">ent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-842"><a id="__codelineno-0-842" name="__codelineno-0-842"></a>                <span style="color: #89DDFF">)</span>
</span><span id="__span-0-843"><a id="__codelineno-0-843" name="__codelineno-0-843"></a>                <span style="color: #BB80B3">continue</span>
</span><span id="__span-0-844"><a id="__codelineno-0-844" name="__codelineno-0-844"></a>
</span><span id="__span-0-845"><a id="__codelineno-0-845" name="__codelineno-0-845"></a>            <span style="color: #EFF">code_value</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">getattr</span><span style="color: #89DDFF">(</span><span style="color: #EFF">ent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">None)</span>
</span><span id="__span-0-846"><a id="__codelineno-0-846" name="__codelineno-0-846"></a>            <span style="color: #BB80B3">if</span> <span style="color: #EFF">code_value</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-847"><a id="__codelineno-0-847" name="__codelineno-0-847"></a>                <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">debug</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-848"><a id="__codelineno-0-848" name="__codelineno-0-848"></a>                    <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;No </span><span style="color: #89DDFF">{</span><span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D"> found for spaCy entity </span><span style="color: #89DDFF">{</span><span style="color: #EFF">ent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-849"><a id="__codelineno-0-849" name="__codelineno-0-849"></a>                <span style="color: #89DDFF">)</span>
</span><span id="__span-0-850"><a id="__codelineno-0-850" name="__codelineno-0-850"></a>                <span style="color: #BB80B3">continue</span>
</span><span id="__span-0-851"><a id="__codelineno-0-851" name="__codelineno-0-851"></a>
</span><span id="__span-0-852"><a id="__codelineno-0-852" name="__codelineno-0-852"></a>            <span style="color: #EFF">condition</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">create_condition</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-853"><a id="__codelineno-0-853" name="__codelineno-0-853"></a>                <span style="color: #EFF">subject</span><span style="color: #89DDFF">=</span><span style="color: #EFF">patient_ref</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-854"><a id="__codelineno-0-854" name="__codelineno-0-854"></a>                <span style="color: #EFF">code</span><span style="color: #89DDFF">=</span><span style="color: #EFF">code_value</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-855"><a id="__codelineno-0-855" name="__codelineno-0-855"></a>                <span style="color: #EFF">display</span><span style="color: #89DDFF">=</span><span style="color: #EFF">ent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-856"><a id="__codelineno-0-856" name="__codelineno-0-856"></a>                <span style="color: #EFF">system</span><span style="color: #89DDFF">=</span><span style="color: #EFF">coding_system</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-857"><a id="__codelineno-0-857" name="__codelineno-0-857"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-858"><a id="__codelineno-0-858" name="__codelineno-0-858"></a>            <span style="color: #EFF">set_condition_category</span><span style="color: #89DDFF">(</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;problem-list-item&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-859"><a id="__codelineno-0-859" name="__codelineno-0-859"></a>            <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">debug</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-860"><a id="__codelineno-0-860" name="__codelineno-0-860"></a>                <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Adding condition from spaCy: </span><span style="color: #89DDFF">{</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">.</span><span style="color: #EFF">model_dump</span><span style="color: #89DDFF">(</span><span style="color: #EFF">exclude_none</span><span style="color: #89DDFF">=True)}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-861"><a id="__codelineno-0-861" name="__codelineno-0-861"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-862"><a id="__codelineno-0-862" name="__codelineno-0-862"></a>            <span style="color: #EFF">new_conditions</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-863"><a id="__codelineno-0-863" name="__codelineno-0-863"></a>
</span><span id="__span-0-864"><a id="__codelineno-0-864" name="__codelineno-0-864"></a>    <span style="color: #546E7A; font-style: italic"># 2. Extract from generic NLP entities (framework-agnostic)</span>
</span><span id="__span-0-865"><a id="__codelineno-0-865" name="__codelineno-0-865"></a>    <span style="color: #EFF">generic_entities</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get_entities</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-866"><a id="__codelineno-0-866" name="__codelineno-0-866"></a>    <span style="color: #BB80B3">if</span> <span style="color: #EFF">generic_entities</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-867"><a id="__codelineno-0-867" name="__codelineno-0-867"></a>        <span style="color: #BB80B3">for</span> <span style="color: #EFF">ent_dict</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">generic_entities</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-868"><a id="__codelineno-0-868" name="__codelineno-0-868"></a>            <span style="color: #546E7A; font-style: italic"># Skip if no linked code</span>
</span><span id="__span-0-869"><a id="__codelineno-0-869" name="__codelineno-0-869"></a>            <span style="color: #EFF">code_value</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">ent_dict</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-870"><a id="__codelineno-0-870" name="__codelineno-0-870"></a>            <span style="color: #BB80B3">if</span> <span style="color: #EFF">code_value</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-871"><a id="__codelineno-0-871" name="__codelineno-0-871"></a>                <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">debug</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-872"><a id="__codelineno-0-872" name="__codelineno-0-872"></a>                    <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;No </span><span style="color: #89DDFF">{</span><span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D"> found for entity </span><span style="color: #89DDFF">{</span><span style="color: #EFF">ent_dict</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&#39;text&#39;</span><span style="color: #89DDFF">,</span><span style="color: #EFF"> </span><span style="color: #C3E88D">&#39;unknown&#39;</span><span style="color: #89DDFF">)}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-873"><a id="__codelineno-0-873" name="__codelineno-0-873"></a>                <span style="color: #89DDFF">)</span>
</span><span id="__span-0-874"><a id="__codelineno-0-874" name="__codelineno-0-874"></a>                <span style="color: #BB80B3">continue</span>
</span><span id="__span-0-875"><a id="__codelineno-0-875" name="__codelineno-0-875"></a>
</span><span id="__span-0-876"><a id="__codelineno-0-876" name="__codelineno-0-876"></a>            <span style="color: #EFF">entity_text</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">ent_dict</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;text&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;unknown&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-877"><a id="__codelineno-0-877" name="__codelineno-0-877"></a>
</span><span id="__span-0-878"><a id="__codelineno-0-878" name="__codelineno-0-878"></a>            <span style="color: #EFF">condition</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">create_condition</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-879"><a id="__codelineno-0-879" name="__codelineno-0-879"></a>                <span style="color: #EFF">subject</span><span style="color: #89DDFF">=</span><span style="color: #EFF">patient_ref</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-880"><a id="__codelineno-0-880" name="__codelineno-0-880"></a>                <span style="color: #EFF">code</span><span style="color: #89DDFF">=</span><span style="color: #EFF">code_value</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-881"><a id="__codelineno-0-881" name="__codelineno-0-881"></a>                <span style="color: #EFF">display</span><span style="color: #89DDFF">=</span><span style="color: #EFF">entity_text</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-882"><a id="__codelineno-0-882" name="__codelineno-0-882"></a>                <span style="color: #EFF">system</span><span style="color: #89DDFF">=</span><span style="color: #EFF">coding_system</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-883"><a id="__codelineno-0-883" name="__codelineno-0-883"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-884"><a id="__codelineno-0-884" name="__codelineno-0-884"></a>            <span style="color: #EFF">set_condition_category</span><span style="color: #89DDFF">(</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;problem-list-item&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-885"><a id="__codelineno-0-885" name="__codelineno-0-885"></a>            <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">debug</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-886"><a id="__codelineno-0-886" name="__codelineno-0-886"></a>                <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Adding condition from entities: </span><span style="color: #89DDFF">{</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">.</span><span style="color: #EFF">model_dump</span><span style="color: #89DDFF">(</span><span style="color: #EFF">exclude_none</span><span style="color: #89DDFF">=True)}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-887"><a id="__codelineno-0-887" name="__codelineno-0-887"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-888"><a id="__codelineno-0-888" name="__codelineno-0-888"></a>            <span style="color: #EFF">new_conditions</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-889"><a id="__codelineno-0-889" name="__codelineno-0-889"></a>
</span><span id="__span-0-890"><a id="__codelineno-0-890" name="__codelineno-0-890"></a>    <span style="color: #546E7A; font-style: italic"># Update problem list with combined conditions (replace to avoid duplication)</span>
</span><span id="__span-0-891"><a id="__codelineno-0-891" name="__codelineno-0-891"></a>    <span style="color: #BB80B3">if</span> <span style="color: #EFF">new_conditions</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-892"><a id="__codelineno-0-892" name="__codelineno-0-892"></a>        <span style="color: #EFF">all_conditions</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">existing_conditions</span> <span style="color: #89DDFF">+</span> <span style="color: #EFF">new_conditions</span>
</span><span id="__span-0-893"><a id="__codelineno-0-893" name="__codelineno-0-893"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">add_resources</span><span style="color: #89DDFF">(</span><span style="color: #EFF">all_conditions</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;Condition&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">replace</span><span style="color: #89DDFF">=True)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="healthchain.io.containers.Document.word_count" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">word_count</span><span style="color: #89DDFF">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Return the number of word tokens in the document.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>int</code>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>The count of tokenized words in the document.</p>
              </div>
                <p>
                  <span class="doc-returns-annotation">
                    <b>TYPE:</b>
                      <code><span title="int">int</span></code>
                  </span>
                </p>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/document.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-791">791</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-792">792</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-793">793</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-794">794</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-795">795</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-796">796</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-797">797</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-798">798</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-791"><a id="__codelineno-0-791" name="__codelineno-0-791"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">word_count</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">int</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-792"><a id="__codelineno-0-792" name="__codelineno-0-792"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-793"><a id="__codelineno-0-793" name="__codelineno-0-793"></a><span style="color: #546E7A; font-style: italic">    Return the number of word tokens in the document.</span>
</span><span id="__span-0-794"><a id="__codelineno-0-794" name="__codelineno-0-794"></a>
</span><span id="__span-0-795"><a id="__codelineno-0-795" name="__codelineno-0-795"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-796"><a id="__codelineno-0-796" name="__codelineno-0-796"></a><span style="color: #546E7A; font-style: italic">        int: The count of tokenized words in the document.</span>
</span><span id="__span-0-797"><a id="__codelineno-0-797" name="__codelineno-0-797"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-798"><a id="__codelineno-0-798" name="__codelineno-0-798"></a>    <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_tokens</span><span style="color: #89DDFF">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="healthchain.io.containers.FeatureSchema" class="doc doc-heading">
            <code>FeatureSchema</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>



        <p>Schema defining how to extract features from FHIR resources.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
                <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-62"> 62</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-63"> 63</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-64"> 64</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-65"> 65</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-66"> 66</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-67"> 67</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-68"> 68</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-69"> 69</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-70"> 70</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-71"> 71</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-72"> 72</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-73"> 73</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-74"> 74</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-75"> 75</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-76"> 76</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-77"> 77</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-78"> 78</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-79"> 79</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-80"> 80</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-81"> 81</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-82"> 82</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-83"> 83</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-84"> 84</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-85"> 85</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-86"> 86</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-87"> 87</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-88"> 88</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-89"> 89</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-90"> 90</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-91"> 91</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-92"> 92</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-93"> 93</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-94"> 94</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-95"> 95</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-96"> 96</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-97"> 97</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-98"> 98</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-99"> 99</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-100">100</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-101">101</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-102">102</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-103">103</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-104">104</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-105">105</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-106">106</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-107">107</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-108">108</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-109">109</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-110">110</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-111">111</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-112">112</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-113">113</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-114">114</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-115">115</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-116">116</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-117">117</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-118">118</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-119">119</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-120">120</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-121">121</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-122">122</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-123">123</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-124">124</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-125">125</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-126">126</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-127">127</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-128">128</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-129">129</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-130">130</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-131">131</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-132">132</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-133">133</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-134">134</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-135">135</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-136">136</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-137">137</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-138">138</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-139">139</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-140">140</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-141">141</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-142">142</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-143">143</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-144">144</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-145">145</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-146">146</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-147">147</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-148">148</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-149">149</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-150">150</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-151">151</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-152">152</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-153">153</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-154">154</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-155">155</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-156">156</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-157">157</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-158">158</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-159">159</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-160">160</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-161">161</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-162">162</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-163">163</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-164">164</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-165">165</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-166">166</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-167">167</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-168">168</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-169">169</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-170">170</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-171">171</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-172">172</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-173">173</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-174">174</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-175">175</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-176">176</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-177">177</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-178">178</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-179">179</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-180">180</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-181">181</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-182">182</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-183">183</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-184">184</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-185">185</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-186">186</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-187">187</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-188">188</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-189">189</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-190">190</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-191">191</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-192">192</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-193">193</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-194">194</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-195">195</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-196">196</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-197">197</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-198">198</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-199">199</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-200">200</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-201">201</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-202">202</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-203">203</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-204">204</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-205">205</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-206">206</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-207">207</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-208">208</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-209">209</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-210">210</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-211">211</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-212">212</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-213">213</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-214">214</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-215">215</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-216">216</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-217">217</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-218">218</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-219">219</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-220">220</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-62"><a id="__codelineno-0-62" name="__codelineno-0-62"></a><span style="color: #BB80B3">class</span><span style="color: #EFF"> </span><span style="color: #FFCB6B">FeatureSchema</span><span style="color: #89DDFF">(</span><span style="color: #EFF">BaseModel</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-63"><a id="__codelineno-0-63" name="__codelineno-0-63"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Schema defining how to extract features from FHIR resources.&quot;&quot;&quot;</span>
</span><span id="__span-0-64"><a id="__codelineno-0-64" name="__codelineno-0-64"></a>
</span><span id="__span-0-65"><a id="__codelineno-0-65" name="__codelineno-0-65"></a>    <span style="color: #EFF">name</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span>
</span><span id="__span-0-66"><a id="__codelineno-0-66" name="__codelineno-0-66"></a>    <span style="color: #EFF">version</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span>
</span><span id="__span-0-67"><a id="__codelineno-0-67" name="__codelineno-0-67"></a>    <span style="color: #EFF">features</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">FeatureMapping</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">{}</span>
</span><span id="__span-0-68"><a id="__codelineno-0-68" name="__codelineno-0-68"></a>    <span style="color: #EFF">description</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-69"><a id="__codelineno-0-69" name="__codelineno-0-69"></a>    <span style="color: #EFF">model_info</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-70"><a id="__codelineno-0-70" name="__codelineno-0-70"></a>    <span style="color: #EFF">metadata</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-71"><a id="__codelineno-0-71" name="__codelineno-0-71"></a>
</span><span id="__span-0-72"><a id="__codelineno-0-72" name="__codelineno-0-72"></a>    <span style="color: #EFF">model_config</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">ConfigDict</span><span style="color: #89DDFF">(</span><span style="color: #EFF">extra</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&quot;allow&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-73"><a id="__codelineno-0-73" name="__codelineno-0-73"></a>
</span><span id="__span-0-74"><a id="__codelineno-0-74" name="__codelineno-0-74"></a>    <span style="color: #82AAFF">@field_validator</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;features&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mode</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&quot;before&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-75"><a id="__codelineno-0-75" name="__codelineno-0-75"></a>    <span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-76"><a id="__codelineno-0-76" name="__codelineno-0-76"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">convert_feature_dicts</span><span style="color: #89DDFF">(cls,</span> <span style="color: #EFF">v</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-77"><a id="__codelineno-0-77" name="__codelineno-0-77"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Convert feature dicts to FeatureMapping objects if needed.&quot;&quot;&quot;</span>
</span><span id="__span-0-78"><a id="__codelineno-0-78" name="__codelineno-0-78"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">v</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">v</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">dict</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-79"><a id="__codelineno-0-79" name="__codelineno-0-79"></a>            <span style="color: #546E7A; font-style: italic"># Check if values are dicts (need conversion) or already FeatureMapping</span>
</span><span id="__span-0-80"><a id="__codelineno-0-80" name="__codelineno-0-80"></a>            <span style="color: #BB80B3">if</span> <span style="color: #EFF">v</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #82AAFF">list</span><span style="color: #89DDFF">(</span><span style="color: #EFF">v</span><span style="color: #89DDFF">.</span><span style="color: #EFF">values</span><span style="color: #89DDFF">())[</span><span style="color: #F78C6C">0</span><span style="color: #89DDFF">],</span> <span style="color: #82AAFF">dict</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-81"><a id="__codelineno-0-81" name="__codelineno-0-81"></a>                <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-82"><a id="__codelineno-0-82" name="__codelineno-0-82"></a>                    <span style="color: #EFF">name</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">FeatureMapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">from_dict</span><span style="color: #89DDFF">(</span><span style="color: #EFF">name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-83"><a id="__codelineno-0-83" name="__codelineno-0-83"></a>                    <span style="color: #BB80B3">for</span> <span style="color: #EFF">name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">v</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-84"><a id="__codelineno-0-84" name="__codelineno-0-84"></a>                <span style="color: #89DDFF">}</span>
</span><span id="__span-0-85"><a id="__codelineno-0-85" name="__codelineno-0-85"></a>        <span style="color: #BB80B3">return</span> <span style="color: #EFF">v</span>
</span><span id="__span-0-86"><a id="__codelineno-0-86" name="__codelineno-0-86"></a>
</span><span id="__span-0-87"><a id="__codelineno-0-87" name="__codelineno-0-87"></a>    <span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-88"><a id="__codelineno-0-88" name="__codelineno-0-88"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">from_yaml</span><span style="color: #89DDFF">(cls,</span> <span style="color: #EFF">path</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Union</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;FeatureSchema&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-89"><a id="__codelineno-0-89" name="__codelineno-0-89"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Load schema from a YAML file.</span>
</span><span id="__span-0-90"><a id="__codelineno-0-90" name="__codelineno-0-90"></a>
</span><span id="__span-0-91"><a id="__codelineno-0-91" name="__codelineno-0-91"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-92"><a id="__codelineno-0-92" name="__codelineno-0-92"></a><span style="color: #546E7A; font-style: italic">            path: Path to the YAML file</span>
</span><span id="__span-0-93"><a id="__codelineno-0-93" name="__codelineno-0-93"></a>
</span><span id="__span-0-94"><a id="__codelineno-0-94" name="__codelineno-0-94"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-95"><a id="__codelineno-0-95" name="__codelineno-0-95"></a><span style="color: #546E7A; font-style: italic">            FeatureSchema instance</span>
</span><span id="__span-0-96"><a id="__codelineno-0-96" name="__codelineno-0-96"></a>
</span><span id="__span-0-97"><a id="__codelineno-0-97" name="__codelineno-0-97"></a><span style="color: #546E7A; font-style: italic">        Example:</span>
</span><span id="__span-0-98"><a id="__codelineno-0-98" name="__codelineno-0-98"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; schema = FeatureSchema.from_yaml(&quot;configs/features/sepsis_vitals.yaml&quot;)</span>
</span><span id="__span-0-99"><a id="__codelineno-0-99" name="__codelineno-0-99"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-100"><a id="__codelineno-0-100" name="__codelineno-0-100"></a>        <span style="color: #EFF">path</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-101"><a id="__codelineno-0-101" name="__codelineno-0-101"></a>        <span style="color: #BB80B3">with</span> <span style="color: #82AAFF">open</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;r&quot;</span><span style="color: #89DDFF">)</span> <span style="color: #BB80B3">as</span> <span style="color: #EFF">f</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-102"><a id="__codelineno-0-102" name="__codelineno-0-102"></a>            <span style="color: #EFF">data</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">yaml</span><span style="color: #89DDFF">.</span><span style="color: #EFF">safe_load</span><span style="color: #89DDFF">(</span><span style="color: #EFF">f</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-103"><a id="__codelineno-0-103" name="__codelineno-0-103"></a>
</span><span id="__span-0-104"><a id="__codelineno-0-104" name="__codelineno-0-104"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">cls.</span><span style="color: #EFF">model_validate</span><span style="color: #89DDFF">(</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-105"><a id="__codelineno-0-105" name="__codelineno-0-105"></a>
</span><span id="__span-0-106"><a id="__codelineno-0-106" name="__codelineno-0-106"></a>    <span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-107"><a id="__codelineno-0-107" name="__codelineno-0-107"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">from_dict</span><span style="color: #89DDFF">(cls,</span> <span style="color: #EFF">data</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;FeatureSchema&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-108"><a id="__codelineno-0-108" name="__codelineno-0-108"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Create a FeatureSchema from a dictionary.</span>
</span><span id="__span-0-109"><a id="__codelineno-0-109" name="__codelineno-0-109"></a>
</span><span id="__span-0-110"><a id="__codelineno-0-110" name="__codelineno-0-110"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-111"><a id="__codelineno-0-111" name="__codelineno-0-111"></a><span style="color: #546E7A; font-style: italic">            data: Dictionary containing schema configuration</span>
</span><span id="__span-0-112"><a id="__codelineno-0-112" name="__codelineno-0-112"></a>
</span><span id="__span-0-113"><a id="__codelineno-0-113" name="__codelineno-0-113"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-114"><a id="__codelineno-0-114" name="__codelineno-0-114"></a><span style="color: #546E7A; font-style: italic">            FeatureSchema instance</span>
</span><span id="__span-0-115"><a id="__codelineno-0-115" name="__codelineno-0-115"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-116"><a id="__codelineno-0-116" name="__codelineno-0-116"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">cls.</span><span style="color: #EFF">model_validate</span><span style="color: #89DDFF">(</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-117"><a id="__codelineno-0-117" name="__codelineno-0-117"></a>
</span><span id="__span-0-118"><a id="__codelineno-0-118" name="__codelineno-0-118"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">to_dict</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-119"><a id="__codelineno-0-119" name="__codelineno-0-119"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Convert schema to dictionary format.</span>
</span><span id="__span-0-120"><a id="__codelineno-0-120" name="__codelineno-0-120"></a>
</span><span id="__span-0-121"><a id="__codelineno-0-121" name="__codelineno-0-121"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-122"><a id="__codelineno-0-122" name="__codelineno-0-122"></a><span style="color: #546E7A; font-style: italic">            Dictionary representation of the schema</span>
</span><span id="__span-0-123"><a id="__codelineno-0-123" name="__codelineno-0-123"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-124"><a id="__codelineno-0-124" name="__codelineno-0-124"></a>        <span style="color: #EFF">result</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-125"><a id="__codelineno-0-125" name="__codelineno-0-125"></a>            <span style="color: #C3E88D">&quot;name&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">name</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-126"><a id="__codelineno-0-126" name="__codelineno-0-126"></a>            <span style="color: #C3E88D">&quot;version&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">version</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-127"><a id="__codelineno-0-127" name="__codelineno-0-127"></a>            <span style="color: #C3E88D">&quot;description&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">description</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-128"><a id="__codelineno-0-128" name="__codelineno-0-128"></a>            <span style="color: #C3E88D">&quot;model_info&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">model_info</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-129"><a id="__codelineno-0-129" name="__codelineno-0-129"></a>            <span style="color: #C3E88D">&quot;features&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-130"><a id="__codelineno-0-130" name="__codelineno-0-130"></a>                <span style="color: #EFF">name</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-131"><a id="__codelineno-0-131" name="__codelineno-0-131"></a>                    <span style="color: #EFF">k</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">v</span>
</span><span id="__span-0-132"><a id="__codelineno-0-132" name="__codelineno-0-132"></a>                    <span style="color: #BB80B3">for</span> <span style="color: #EFF">k</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">v</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">model_dump</span><span style="color: #89DDFF">().</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-133"><a id="__codelineno-0-133" name="__codelineno-0-133"></a>                    <span style="color: #BB80B3">if</span> <span style="color: #EFF">k</span> <span style="color: #89DDFF">!=</span> <span style="color: #C3E88D">&quot;name&quot;</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #EFF">v</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-134"><a id="__codelineno-0-134" name="__codelineno-0-134"></a>                <span style="color: #89DDFF">}</span>
</span><span id="__span-0-135"><a id="__codelineno-0-135" name="__codelineno-0-135"></a>                <span style="color: #BB80B3">for</span> <span style="color: #EFF">name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">features</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-136"><a id="__codelineno-0-136" name="__codelineno-0-136"></a>            <span style="color: #89DDFF">},</span>
</span><span id="__span-0-137"><a id="__codelineno-0-137" name="__codelineno-0-137"></a>        <span style="color: #89DDFF">}</span>
</span><span id="__span-0-138"><a id="__codelineno-0-138" name="__codelineno-0-138"></a>        <span style="color: #BB80B3">if</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">metadata</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-139"><a id="__codelineno-0-139" name="__codelineno-0-139"></a>            <span style="color: #EFF">result</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;metadata&quot;</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">metadata</span>
</span><span id="__span-0-140"><a id="__codelineno-0-140" name="__codelineno-0-140"></a>        <span style="color: #BB80B3">return</span> <span style="color: #EFF">result</span>
</span><span id="__span-0-141"><a id="__codelineno-0-141" name="__codelineno-0-141"></a>
</span><span id="__span-0-142"><a id="__codelineno-0-142" name="__codelineno-0-142"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">to_yaml</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">path</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Union</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-143"><a id="__codelineno-0-143" name="__codelineno-0-143"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Save schema to a YAML file.</span>
</span><span id="__span-0-144"><a id="__codelineno-0-144" name="__codelineno-0-144"></a>
</span><span id="__span-0-145"><a id="__codelineno-0-145" name="__codelineno-0-145"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-146"><a id="__codelineno-0-146" name="__codelineno-0-146"></a><span style="color: #546E7A; font-style: italic">            path: Path where the YAML file will be saved</span>
</span><span id="__span-0-147"><a id="__codelineno-0-147" name="__codelineno-0-147"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-148"><a id="__codelineno-0-148" name="__codelineno-0-148"></a>        <span style="color: #EFF">path</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-149"><a id="__codelineno-0-149" name="__codelineno-0-149"></a>        <span style="color: #EFF">path</span><span style="color: #89DDFF">.</span><span style="color: #EFF">parent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">mkdir</span><span style="color: #89DDFF">(</span><span style="color: #EFF">parents</span><span style="color: #89DDFF">=True,</span> <span style="color: #EFF">exist_ok</span><span style="color: #89DDFF">=True)</span>
</span><span id="__span-0-150"><a id="__codelineno-0-150" name="__codelineno-0-150"></a>
</span><span id="__span-0-151"><a id="__codelineno-0-151" name="__codelineno-0-151"></a>        <span style="color: #BB80B3">with</span> <span style="color: #82AAFF">open</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;w&quot;</span><span style="color: #89DDFF">)</span> <span style="color: #BB80B3">as</span> <span style="color: #EFF">f</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-152"><a id="__codelineno-0-152" name="__codelineno-0-152"></a>            <span style="color: #EFF">yaml</span><span style="color: #89DDFF">.</span><span style="color: #EFF">dump</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">to_dict</span><span style="color: #89DDFF">(),</span> <span style="color: #EFF">f</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">default_flow_style</span><span style="color: #89DDFF">=False,</span> <span style="color: #EFF">sort_keys</span><span style="color: #89DDFF">=False)</span>
</span><span id="__span-0-153"><a id="__codelineno-0-153" name="__codelineno-0-153"></a>
</span><span id="__span-0-154"><a id="__codelineno-0-154" name="__codelineno-0-154"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_feature_names</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-155"><a id="__codelineno-0-155" name="__codelineno-0-155"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get list of feature names in order.</span>
</span><span id="__span-0-156"><a id="__codelineno-0-156" name="__codelineno-0-156"></a>
</span><span id="__span-0-157"><a id="__codelineno-0-157" name="__codelineno-0-157"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-158"><a id="__codelineno-0-158" name="__codelineno-0-158"></a><span style="color: #546E7A; font-style: italic">            List of feature names</span>
</span><span id="__span-0-159"><a id="__codelineno-0-159" name="__codelineno-0-159"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-160"><a id="__codelineno-0-160" name="__codelineno-0-160"></a>        <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">features</span><span style="color: #89DDFF">.</span><span style="color: #EFF">keys</span><span style="color: #89DDFF">())</span>
</span><span id="__span-0-161"><a id="__codelineno-0-161" name="__codelineno-0-161"></a>
</span><span id="__span-0-162"><a id="__codelineno-0-162" name="__codelineno-0-162"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_required_features</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-163"><a id="__codelineno-0-163" name="__codelineno-0-163"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get list of required feature names.</span>
</span><span id="__span-0-164"><a id="__codelineno-0-164" name="__codelineno-0-164"></a>
</span><span id="__span-0-165"><a id="__codelineno-0-165" name="__codelineno-0-165"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-166"><a id="__codelineno-0-166" name="__codelineno-0-166"></a><span style="color: #546E7A; font-style: italic">            List of required feature names</span>
</span><span id="__span-0-167"><a id="__codelineno-0-167" name="__codelineno-0-167"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-168"><a id="__codelineno-0-168" name="__codelineno-0-168"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">[</span><span style="color: #EFF">name</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">features</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()</span> <span style="color: #BB80B3">if</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">required</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-169"><a id="__codelineno-0-169" name="__codelineno-0-169"></a>
</span><span id="__span-0-170"><a id="__codelineno-0-170" name="__codelineno-0-170"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_features_by_resource</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">resource_type</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">FeatureMapping</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-171"><a id="__codelineno-0-171" name="__codelineno-0-171"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get all features mapped to a specific FHIR resource type.</span>
</span><span id="__span-0-172"><a id="__codelineno-0-172" name="__codelineno-0-172"></a>
</span><span id="__span-0-173"><a id="__codelineno-0-173" name="__codelineno-0-173"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-174"><a id="__codelineno-0-174" name="__codelineno-0-174"></a><span style="color: #546E7A; font-style: italic">            resource_type: FHIR resource type (e.g., &quot;Observation&quot;, &quot;Patient&quot;)</span>
</span><span id="__span-0-175"><a id="__codelineno-0-175" name="__codelineno-0-175"></a>
</span><span id="__span-0-176"><a id="__codelineno-0-176" name="__codelineno-0-176"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-177"><a id="__codelineno-0-177" name="__codelineno-0-177"></a><span style="color: #546E7A; font-style: italic">            Dictionary of features for the specified resource type</span>
</span><span id="__span-0-178"><a id="__codelineno-0-178" name="__codelineno-0-178"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-179"><a id="__codelineno-0-179" name="__codelineno-0-179"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-180"><a id="__codelineno-0-180" name="__codelineno-0-180"></a>            <span style="color: #EFF">name</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">mapping</span>
</span><span id="__span-0-181"><a id="__codelineno-0-181" name="__codelineno-0-181"></a>            <span style="color: #BB80B3">for</span> <span style="color: #EFF">name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">features</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-182"><a id="__codelineno-0-182" name="__codelineno-0-182"></a>            <span style="color: #BB80B3">if</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">fhir_resource</span> <span style="color: #89DDFF">==</span> <span style="color: #EFF">resource_type</span>
</span><span id="__span-0-183"><a id="__codelineno-0-183" name="__codelineno-0-183"></a>        <span style="color: #89DDFF">}</span>
</span><span id="__span-0-184"><a id="__codelineno-0-184" name="__codelineno-0-184"></a>
</span><span id="__span-0-185"><a id="__codelineno-0-185" name="__codelineno-0-185"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_observation_codes</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">FeatureMapping</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-186"><a id="__codelineno-0-186" name="__codelineno-0-186"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get all Observation features with their codes.</span>
</span><span id="__span-0-187"><a id="__codelineno-0-187" name="__codelineno-0-187"></a>
</span><span id="__span-0-188"><a id="__codelineno-0-188" name="__codelineno-0-188"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-189"><a id="__codelineno-0-189" name="__codelineno-0-189"></a><span style="color: #546E7A; font-style: italic">            Dictionary mapping codes to feature mappings</span>
</span><span id="__span-0-190"><a id="__codelineno-0-190" name="__codelineno-0-190"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-191"><a id="__codelineno-0-191" name="__codelineno-0-191"></a>        <span style="color: #EFF">observations</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">get_features_by_resource</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;Observation&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-192"><a id="__codelineno-0-192" name="__codelineno-0-192"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-193"><a id="__codelineno-0-193" name="__codelineno-0-193"></a>            <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">code</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">mapping</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">observations</span><span style="color: #89DDFF">.</span><span style="color: #EFF">values</span><span style="color: #89DDFF">()</span> <span style="color: #BB80B3">if</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">code</span>
</span><span id="__span-0-194"><a id="__codelineno-0-194" name="__codelineno-0-194"></a>        <span style="color: #89DDFF">}</span>
</span><span id="__span-0-195"><a id="__codelineno-0-195" name="__codelineno-0-195"></a>
</span><span id="__span-0-196"><a id="__codelineno-0-196" name="__codelineno-0-196"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">validate_dataframe_columns</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">columns</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-197"><a id="__codelineno-0-197" name="__codelineno-0-197"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Validate that a DataFrame has the expected columns.</span>
</span><span id="__span-0-198"><a id="__codelineno-0-198" name="__codelineno-0-198"></a>
</span><span id="__span-0-199"><a id="__codelineno-0-199" name="__codelineno-0-199"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-200"><a id="__codelineno-0-200" name="__codelineno-0-200"></a><span style="color: #546E7A; font-style: italic">            columns: List of column names from a DataFrame</span>
</span><span id="__span-0-201"><a id="__codelineno-0-201" name="__codelineno-0-201"></a>
</span><span id="__span-0-202"><a id="__codelineno-0-202" name="__codelineno-0-202"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-203"><a id="__codelineno-0-203" name="__codelineno-0-203"></a><span style="color: #546E7A; font-style: italic">            Dictionary with validation results:</span>
</span><span id="__span-0-204"><a id="__codelineno-0-204" name="__codelineno-0-204"></a><span style="color: #546E7A; font-style: italic">                - valid: bool</span>
</span><span id="__span-0-205"><a id="__codelineno-0-205" name="__codelineno-0-205"></a><span style="color: #546E7A; font-style: italic">                - missing_required: List of missing required features</span>
</span><span id="__span-0-206"><a id="__codelineno-0-206" name="__codelineno-0-206"></a><span style="color: #546E7A; font-style: italic">                - unexpected: List of unexpected columns</span>
</span><span id="__span-0-207"><a id="__codelineno-0-207" name="__codelineno-0-207"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-208"><a id="__codelineno-0-208" name="__codelineno-0-208"></a>        <span style="color: #EFF">expected</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">set</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">get_feature_names</span><span style="color: #89DDFF">())</span>
</span><span id="__span-0-209"><a id="__codelineno-0-209" name="__codelineno-0-209"></a>        <span style="color: #EFF">actual</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">set</span><span style="color: #89DDFF">(</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-210"><a id="__codelineno-0-210" name="__codelineno-0-210"></a>        <span style="color: #EFF">required</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">set</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">get_required_features</span><span style="color: #89DDFF">())</span>
</span><span id="__span-0-211"><a id="__codelineno-0-211" name="__codelineno-0-211"></a>
</span><span id="__span-0-212"><a id="__codelineno-0-212" name="__codelineno-0-212"></a>        <span style="color: #EFF">missing_required</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">(</span><span style="color: #EFF">required</span> <span style="color: #89DDFF">-</span> <span style="color: #EFF">actual</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-213"><a id="__codelineno-0-213" name="__codelineno-0-213"></a>        <span style="color: #EFF">unexpected</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">(</span><span style="color: #EFF">actual</span> <span style="color: #89DDFF">-</span> <span style="color: #EFF">expected</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-214"><a id="__codelineno-0-214" name="__codelineno-0-214"></a>
</span><span id="__span-0-215"><a id="__codelineno-0-215" name="__codelineno-0-215"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-216"><a id="__codelineno-0-216" name="__codelineno-0-216"></a>            <span style="color: #C3E88D">&quot;valid&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(</span><span style="color: #EFF">missing_required</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">==</span> <span style="color: #F78C6C">0</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-217"><a id="__codelineno-0-217" name="__codelineno-0-217"></a>            <span style="color: #C3E88D">&quot;missing_required&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">missing_required</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-218"><a id="__codelineno-0-218" name="__codelineno-0-218"></a>            <span style="color: #C3E88D">&quot;unexpected&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">unexpected</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-219"><a id="__codelineno-0-219" name="__codelineno-0-219"></a>            <span style="color: #C3E88D">&quot;missing_optional&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">((</span><span style="color: #EFF">expected</span> <span style="color: #89DDFF">-</span> <span style="color: #EFF">required</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-</span> <span style="color: #EFF">actual</span><span style="color: #89DDFF">),</span>
</span><span id="__span-0-220"><a id="__codelineno-0-220" name="__codelineno-0-220"></a>        <span style="color: #89DDFF">}</span>
</span></code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="healthchain.io.containers.FeatureSchema.convert_feature_dicts" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">convert_feature_dicts</span><span style="color: #89DDFF">(</span><span style="color: #EFF">v</span><span style="color: #89DDFF">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Convert feature dicts to FeatureMapping objects if needed.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-74">74</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-75">75</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-76">76</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-77">77</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-78">78</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-79">79</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-80">80</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-81">81</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-82">82</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-83">83</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-84">84</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-85">85</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-74"><a id="__codelineno-0-74" name="__codelineno-0-74"></a><span style="color: #82AAFF">@field_validator</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;features&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mode</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&quot;before&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-75"><a id="__codelineno-0-75" name="__codelineno-0-75"></a><span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-76"><a id="__codelineno-0-76" name="__codelineno-0-76"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">convert_feature_dicts</span><span style="color: #89DDFF">(cls,</span> <span style="color: #EFF">v</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-77"><a id="__codelineno-0-77" name="__codelineno-0-77"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Convert feature dicts to FeatureMapping objects if needed.&quot;&quot;&quot;</span>
</span><span id="__span-0-78"><a id="__codelineno-0-78" name="__codelineno-0-78"></a>    <span style="color: #BB80B3">if</span> <span style="color: #EFF">v</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">v</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">dict</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-79"><a id="__codelineno-0-79" name="__codelineno-0-79"></a>        <span style="color: #546E7A; font-style: italic"># Check if values are dicts (need conversion) or already FeatureMapping</span>
</span><span id="__span-0-80"><a id="__codelineno-0-80" name="__codelineno-0-80"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">v</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #82AAFF">list</span><span style="color: #89DDFF">(</span><span style="color: #EFF">v</span><span style="color: #89DDFF">.</span><span style="color: #EFF">values</span><span style="color: #89DDFF">())[</span><span style="color: #F78C6C">0</span><span style="color: #89DDFF">],</span> <span style="color: #82AAFF">dict</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-81"><a id="__codelineno-0-81" name="__codelineno-0-81"></a>            <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-82"><a id="__codelineno-0-82" name="__codelineno-0-82"></a>                <span style="color: #EFF">name</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">FeatureMapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">from_dict</span><span style="color: #89DDFF">(</span><span style="color: #EFF">name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-83"><a id="__codelineno-0-83" name="__codelineno-0-83"></a>                <span style="color: #BB80B3">for</span> <span style="color: #EFF">name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">v</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-84"><a id="__codelineno-0-84" name="__codelineno-0-84"></a>            <span style="color: #89DDFF">}</span>
</span><span id="__span-0-85"><a id="__codelineno-0-85" name="__codelineno-0-85"></a>    <span style="color: #BB80B3">return</span> <span style="color: #EFF">v</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="healthchain.io.containers.FeatureSchema.from_dict" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">from_dict</span><span style="color: #89DDFF">(</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Create a FeatureSchema from a dictionary.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Dictionary containing schema configuration</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="FeatureSchema (healthchain.io.containers.featureschema.FeatureSchema)" href="#healthchain.io.containers.featureschema.FeatureSchema">FeatureSchema</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>FeatureSchema instance</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-106">106</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-107">107</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-108">108</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-109">109</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-110">110</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-111">111</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-112">112</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-113">113</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-114">114</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-115">115</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-116">116</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-106"><a id="__codelineno-0-106" name="__codelineno-0-106"></a><span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-107"><a id="__codelineno-0-107" name="__codelineno-0-107"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">from_dict</span><span style="color: #89DDFF">(cls,</span> <span style="color: #EFF">data</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;FeatureSchema&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-108"><a id="__codelineno-0-108" name="__codelineno-0-108"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Create a FeatureSchema from a dictionary.</span>
</span><span id="__span-0-109"><a id="__codelineno-0-109" name="__codelineno-0-109"></a>
</span><span id="__span-0-110"><a id="__codelineno-0-110" name="__codelineno-0-110"></a><span style="color: #546E7A; font-style: italic">    Args:</span>
</span><span id="__span-0-111"><a id="__codelineno-0-111" name="__codelineno-0-111"></a><span style="color: #546E7A; font-style: italic">        data: Dictionary containing schema configuration</span>
</span><span id="__span-0-112"><a id="__codelineno-0-112" name="__codelineno-0-112"></a>
</span><span id="__span-0-113"><a id="__codelineno-0-113" name="__codelineno-0-113"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-114"><a id="__codelineno-0-114" name="__codelineno-0-114"></a><span style="color: #546E7A; font-style: italic">        FeatureSchema instance</span>
</span><span id="__span-0-115"><a id="__codelineno-0-115" name="__codelineno-0-115"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-116"><a id="__codelineno-0-116" name="__codelineno-0-116"></a>    <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">cls.</span><span style="color: #EFF">model_validate</span><span style="color: #89DDFF">(</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="healthchain.io.containers.FeatureSchema.from_yaml" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">from_yaml</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Load schema from a YAML file.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Path to the YAML file</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="pathlib.Path">Path</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="FeatureSchema (healthchain.io.containers.featureschema.FeatureSchema)" href="#healthchain.io.containers.featureschema.FeatureSchema">FeatureSchema</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>FeatureSchema instance</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>schema = FeatureSchema.from_yaml("configs/features/sepsis_vitals.yaml")</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-87"> 87</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-88"> 88</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-89"> 89</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-90"> 90</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-91"> 91</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-92"> 92</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-93"> 93</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-94"> 94</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-95"> 95</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-96"> 96</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-97"> 97</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-98"> 98</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-99"> 99</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-100">100</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-101">101</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-102">102</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-103">103</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-104">104</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-87"><a id="__codelineno-0-87" name="__codelineno-0-87"></a><span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-88"><a id="__codelineno-0-88" name="__codelineno-0-88"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">from_yaml</span><span style="color: #89DDFF">(cls,</span> <span style="color: #EFF">path</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Union</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;FeatureSchema&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-89"><a id="__codelineno-0-89" name="__codelineno-0-89"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Load schema from a YAML file.</span>
</span><span id="__span-0-90"><a id="__codelineno-0-90" name="__codelineno-0-90"></a>
</span><span id="__span-0-91"><a id="__codelineno-0-91" name="__codelineno-0-91"></a><span style="color: #546E7A; font-style: italic">    Args:</span>
</span><span id="__span-0-92"><a id="__codelineno-0-92" name="__codelineno-0-92"></a><span style="color: #546E7A; font-style: italic">        path: Path to the YAML file</span>
</span><span id="__span-0-93"><a id="__codelineno-0-93" name="__codelineno-0-93"></a>
</span><span id="__span-0-94"><a id="__codelineno-0-94" name="__codelineno-0-94"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-95"><a id="__codelineno-0-95" name="__codelineno-0-95"></a><span style="color: #546E7A; font-style: italic">        FeatureSchema instance</span>
</span><span id="__span-0-96"><a id="__codelineno-0-96" name="__codelineno-0-96"></a>
</span><span id="__span-0-97"><a id="__codelineno-0-97" name="__codelineno-0-97"></a><span style="color: #546E7A; font-style: italic">    Example:</span>
</span><span id="__span-0-98"><a id="__codelineno-0-98" name="__codelineno-0-98"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; schema = FeatureSchema.from_yaml(&quot;configs/features/sepsis_vitals.yaml&quot;)</span>
</span><span id="__span-0-99"><a id="__codelineno-0-99" name="__codelineno-0-99"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-100"><a id="__codelineno-0-100" name="__codelineno-0-100"></a>    <span style="color: #EFF">path</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-101"><a id="__codelineno-0-101" name="__codelineno-0-101"></a>    <span style="color: #BB80B3">with</span> <span style="color: #82AAFF">open</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;r&quot;</span><span style="color: #89DDFF">)</span> <span style="color: #BB80B3">as</span> <span style="color: #EFF">f</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-102"><a id="__codelineno-0-102" name="__codelineno-0-102"></a>        <span style="color: #EFF">data</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">yaml</span><span style="color: #89DDFF">.</span><span style="color: #EFF">safe_load</span><span style="color: #89DDFF">(</span><span style="color: #EFF">f</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-103"><a id="__codelineno-0-103" name="__codelineno-0-103"></a>
</span><span id="__span-0-104"><a id="__codelineno-0-104" name="__codelineno-0-104"></a>    <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">cls.</span><span style="color: #EFF">model_validate</span><span style="color: #89DDFF">(</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="healthchain.io.containers.FeatureSchema.get_feature_names" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">get_feature_names</span><span style="color: #89DDFF">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Get list of feature names in order.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>List of feature names</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-154">154</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-155">155</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-156">156</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-157">157</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-158">158</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-159">159</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-160">160</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-154"><a id="__codelineno-0-154" name="__codelineno-0-154"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_feature_names</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-155"><a id="__codelineno-0-155" name="__codelineno-0-155"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get list of feature names in order.</span>
</span><span id="__span-0-156"><a id="__codelineno-0-156" name="__codelineno-0-156"></a>
</span><span id="__span-0-157"><a id="__codelineno-0-157" name="__codelineno-0-157"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-158"><a id="__codelineno-0-158" name="__codelineno-0-158"></a><span style="color: #546E7A; font-style: italic">        List of feature names</span>
</span><span id="__span-0-159"><a id="__codelineno-0-159" name="__codelineno-0-159"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-160"><a id="__codelineno-0-160" name="__codelineno-0-160"></a>    <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">features</span><span style="color: #89DDFF">.</span><span style="color: #EFF">keys</span><span style="color: #89DDFF">())</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="healthchain.io.containers.FeatureSchema.get_features_by_resource" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">get_features_by_resource</span><span style="color: #89DDFF">(</span><span style="color: #EFF">resource_type</span><span style="color: #89DDFF">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Get all features mapped to a specific FHIR resource type.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>resource_type</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>FHIR resource type (e.g., "Observation", "Patient")</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <a class="autorefs autorefs-internal" title="FeatureMapping (healthchain.io.containers.featureschema.FeatureMapping)" href="#healthchain.io.containers.featureschema.FeatureMapping">FeatureMapping</a>]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Dictionary of features for the specified resource type</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-170">170</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-171">171</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-172">172</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-173">173</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-174">174</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-175">175</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-176">176</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-177">177</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-178">178</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-179">179</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-180">180</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-181">181</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-182">182</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-183">183</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-170"><a id="__codelineno-0-170" name="__codelineno-0-170"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_features_by_resource</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">resource_type</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">FeatureMapping</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-171"><a id="__codelineno-0-171" name="__codelineno-0-171"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get all features mapped to a specific FHIR resource type.</span>
</span><span id="__span-0-172"><a id="__codelineno-0-172" name="__codelineno-0-172"></a>
</span><span id="__span-0-173"><a id="__codelineno-0-173" name="__codelineno-0-173"></a><span style="color: #546E7A; font-style: italic">    Args:</span>
</span><span id="__span-0-174"><a id="__codelineno-0-174" name="__codelineno-0-174"></a><span style="color: #546E7A; font-style: italic">        resource_type: FHIR resource type (e.g., &quot;Observation&quot;, &quot;Patient&quot;)</span>
</span><span id="__span-0-175"><a id="__codelineno-0-175" name="__codelineno-0-175"></a>
</span><span id="__span-0-176"><a id="__codelineno-0-176" name="__codelineno-0-176"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-177"><a id="__codelineno-0-177" name="__codelineno-0-177"></a><span style="color: #546E7A; font-style: italic">        Dictionary of features for the specified resource type</span>
</span><span id="__span-0-178"><a id="__codelineno-0-178" name="__codelineno-0-178"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-179"><a id="__codelineno-0-179" name="__codelineno-0-179"></a>    <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-180"><a id="__codelineno-0-180" name="__codelineno-0-180"></a>        <span style="color: #EFF">name</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">mapping</span>
</span><span id="__span-0-181"><a id="__codelineno-0-181" name="__codelineno-0-181"></a>        <span style="color: #BB80B3">for</span> <span style="color: #EFF">name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">features</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-182"><a id="__codelineno-0-182" name="__codelineno-0-182"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">fhir_resource</span> <span style="color: #89DDFF">==</span> <span style="color: #EFF">resource_type</span>
</span><span id="__span-0-183"><a id="__codelineno-0-183" name="__codelineno-0-183"></a>    <span style="color: #89DDFF">}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="healthchain.io.containers.FeatureSchema.get_observation_codes" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">get_observation_codes</span><span style="color: #89DDFF">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Get all Observation features with their codes.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <a class="autorefs autorefs-internal" title="FeatureMapping (healthchain.io.containers.featureschema.FeatureMapping)" href="#healthchain.io.containers.featureschema.FeatureMapping">FeatureMapping</a>]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Dictionary mapping codes to feature mappings</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-185">185</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-186">186</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-187">187</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-188">188</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-189">189</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-190">190</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-191">191</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-192">192</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-193">193</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-194">194</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-185"><a id="__codelineno-0-185" name="__codelineno-0-185"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_observation_codes</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">FeatureMapping</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-186"><a id="__codelineno-0-186" name="__codelineno-0-186"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get all Observation features with their codes.</span>
</span><span id="__span-0-187"><a id="__codelineno-0-187" name="__codelineno-0-187"></a>
</span><span id="__span-0-188"><a id="__codelineno-0-188" name="__codelineno-0-188"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-189"><a id="__codelineno-0-189" name="__codelineno-0-189"></a><span style="color: #546E7A; font-style: italic">        Dictionary mapping codes to feature mappings</span>
</span><span id="__span-0-190"><a id="__codelineno-0-190" name="__codelineno-0-190"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-191"><a id="__codelineno-0-191" name="__codelineno-0-191"></a>    <span style="color: #EFF">observations</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">get_features_by_resource</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;Observation&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-192"><a id="__codelineno-0-192" name="__codelineno-0-192"></a>    <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-193"><a id="__codelineno-0-193" name="__codelineno-0-193"></a>        <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">code</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">mapping</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">observations</span><span style="color: #89DDFF">.</span><span style="color: #EFF">values</span><span style="color: #89DDFF">()</span> <span style="color: #BB80B3">if</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">code</span>
</span><span id="__span-0-194"><a id="__codelineno-0-194" name="__codelineno-0-194"></a>    <span style="color: #89DDFF">}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="healthchain.io.containers.FeatureSchema.get_required_features" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">get_required_features</span><span style="color: #89DDFF">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Get list of required feature names.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>List of required feature names</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-162">162</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-163">163</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-164">164</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-165">165</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-166">166</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-167">167</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-168">168</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-162"><a id="__codelineno-0-162" name="__codelineno-0-162"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_required_features</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-163"><a id="__codelineno-0-163" name="__codelineno-0-163"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get list of required feature names.</span>
</span><span id="__span-0-164"><a id="__codelineno-0-164" name="__codelineno-0-164"></a>
</span><span id="__span-0-165"><a id="__codelineno-0-165" name="__codelineno-0-165"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-166"><a id="__codelineno-0-166" name="__codelineno-0-166"></a><span style="color: #546E7A; font-style: italic">        List of required feature names</span>
</span><span id="__span-0-167"><a id="__codelineno-0-167" name="__codelineno-0-167"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-168"><a id="__codelineno-0-168" name="__codelineno-0-168"></a>    <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">[</span><span style="color: #EFF">name</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">features</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()</span> <span style="color: #BB80B3">if</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">required</span><span style="color: #89DDFF">]</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="healthchain.io.containers.FeatureSchema.to_dict" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">to_dict</span><span style="color: #89DDFF">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Convert schema to dictionary format.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Dictionary representation of the schema</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-118">118</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-119">119</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-120">120</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-121">121</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-122">122</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-123">123</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-124">124</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-125">125</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-126">126</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-127">127</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-128">128</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-129">129</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-130">130</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-131">131</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-132">132</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-133">133</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-134">134</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-135">135</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-136">136</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-137">137</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-138">138</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-139">139</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-140">140</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-118"><a id="__codelineno-0-118" name="__codelineno-0-118"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">to_dict</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-119"><a id="__codelineno-0-119" name="__codelineno-0-119"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Convert schema to dictionary format.</span>
</span><span id="__span-0-120"><a id="__codelineno-0-120" name="__codelineno-0-120"></a>
</span><span id="__span-0-121"><a id="__codelineno-0-121" name="__codelineno-0-121"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-122"><a id="__codelineno-0-122" name="__codelineno-0-122"></a><span style="color: #546E7A; font-style: italic">        Dictionary representation of the schema</span>
</span><span id="__span-0-123"><a id="__codelineno-0-123" name="__codelineno-0-123"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-124"><a id="__codelineno-0-124" name="__codelineno-0-124"></a>    <span style="color: #EFF">result</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-125"><a id="__codelineno-0-125" name="__codelineno-0-125"></a>        <span style="color: #C3E88D">&quot;name&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">name</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-126"><a id="__codelineno-0-126" name="__codelineno-0-126"></a>        <span style="color: #C3E88D">&quot;version&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">version</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-127"><a id="__codelineno-0-127" name="__codelineno-0-127"></a>        <span style="color: #C3E88D">&quot;description&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">description</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-128"><a id="__codelineno-0-128" name="__codelineno-0-128"></a>        <span style="color: #C3E88D">&quot;model_info&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">model_info</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-129"><a id="__codelineno-0-129" name="__codelineno-0-129"></a>        <span style="color: #C3E88D">&quot;features&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-130"><a id="__codelineno-0-130" name="__codelineno-0-130"></a>            <span style="color: #EFF">name</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-131"><a id="__codelineno-0-131" name="__codelineno-0-131"></a>                <span style="color: #EFF">k</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">v</span>
</span><span id="__span-0-132"><a id="__codelineno-0-132" name="__codelineno-0-132"></a>                <span style="color: #BB80B3">for</span> <span style="color: #EFF">k</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">v</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">model_dump</span><span style="color: #89DDFF">().</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-133"><a id="__codelineno-0-133" name="__codelineno-0-133"></a>                <span style="color: #BB80B3">if</span> <span style="color: #EFF">k</span> <span style="color: #89DDFF">!=</span> <span style="color: #C3E88D">&quot;name&quot;</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #EFF">v</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-134"><a id="__codelineno-0-134" name="__codelineno-0-134"></a>            <span style="color: #89DDFF">}</span>
</span><span id="__span-0-135"><a id="__codelineno-0-135" name="__codelineno-0-135"></a>            <span style="color: #BB80B3">for</span> <span style="color: #EFF">name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">features</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-136"><a id="__codelineno-0-136" name="__codelineno-0-136"></a>        <span style="color: #89DDFF">},</span>
</span><span id="__span-0-137"><a id="__codelineno-0-137" name="__codelineno-0-137"></a>    <span style="color: #89DDFF">}</span>
</span><span id="__span-0-138"><a id="__codelineno-0-138" name="__codelineno-0-138"></a>    <span style="color: #BB80B3">if</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">metadata</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-139"><a id="__codelineno-0-139" name="__codelineno-0-139"></a>        <span style="color: #EFF">result</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;metadata&quot;</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">metadata</span>
</span><span id="__span-0-140"><a id="__codelineno-0-140" name="__codelineno-0-140"></a>    <span style="color: #BB80B3">return</span> <span style="color: #EFF">result</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="healthchain.io.containers.FeatureSchema.to_yaml" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">to_yaml</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Save schema to a YAML file.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Path where the YAML file will be saved</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="pathlib.Path">Path</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-142">142</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-143">143</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-144">144</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-145">145</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-146">146</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-147">147</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-148">148</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-149">149</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-150">150</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-151">151</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-152">152</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-142"><a id="__codelineno-0-142" name="__codelineno-0-142"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">to_yaml</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">path</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Union</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-143"><a id="__codelineno-0-143" name="__codelineno-0-143"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Save schema to a YAML file.</span>
</span><span id="__span-0-144"><a id="__codelineno-0-144" name="__codelineno-0-144"></a>
</span><span id="__span-0-145"><a id="__codelineno-0-145" name="__codelineno-0-145"></a><span style="color: #546E7A; font-style: italic">    Args:</span>
</span><span id="__span-0-146"><a id="__codelineno-0-146" name="__codelineno-0-146"></a><span style="color: #546E7A; font-style: italic">        path: Path where the YAML file will be saved</span>
</span><span id="__span-0-147"><a id="__codelineno-0-147" name="__codelineno-0-147"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-148"><a id="__codelineno-0-148" name="__codelineno-0-148"></a>    <span style="color: #EFF">path</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-149"><a id="__codelineno-0-149" name="__codelineno-0-149"></a>    <span style="color: #EFF">path</span><span style="color: #89DDFF">.</span><span style="color: #EFF">parent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">mkdir</span><span style="color: #89DDFF">(</span><span style="color: #EFF">parents</span><span style="color: #89DDFF">=True,</span> <span style="color: #EFF">exist_ok</span><span style="color: #89DDFF">=True)</span>
</span><span id="__span-0-150"><a id="__codelineno-0-150" name="__codelineno-0-150"></a>
</span><span id="__span-0-151"><a id="__codelineno-0-151" name="__codelineno-0-151"></a>    <span style="color: #BB80B3">with</span> <span style="color: #82AAFF">open</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;w&quot;</span><span style="color: #89DDFF">)</span> <span style="color: #BB80B3">as</span> <span style="color: #EFF">f</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-152"><a id="__codelineno-0-152" name="__codelineno-0-152"></a>        <span style="color: #EFF">yaml</span><span style="color: #89DDFF">.</span><span style="color: #EFF">dump</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">to_dict</span><span style="color: #89DDFF">(),</span> <span style="color: #EFF">f</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">default_flow_style</span><span style="color: #89DDFF">=False,</span> <span style="color: #EFF">sort_keys</span><span style="color: #89DDFF">=False)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="healthchain.io.containers.FeatureSchema.validate_dataframe_columns" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">validate_dataframe_columns</span><span style="color: #89DDFF">(</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Validate that a DataFrame has the expected columns.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>columns</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>List of column names from a DataFrame</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Dictionary with validation results:
- valid: bool
- missing_required: List of missing required features
- unexpected: List of unexpected columns</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-196">196</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-197">197</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-198">198</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-199">199</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-200">200</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-201">201</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-202">202</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-203">203</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-204">204</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-205">205</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-206">206</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-207">207</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-208">208</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-209">209</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-210">210</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-211">211</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-212">212</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-213">213</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-214">214</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-215">215</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-216">216</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-217">217</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-218">218</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-219">219</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-220">220</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-196"><a id="__codelineno-0-196" name="__codelineno-0-196"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">validate_dataframe_columns</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">columns</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-197"><a id="__codelineno-0-197" name="__codelineno-0-197"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Validate that a DataFrame has the expected columns.</span>
</span><span id="__span-0-198"><a id="__codelineno-0-198" name="__codelineno-0-198"></a>
</span><span id="__span-0-199"><a id="__codelineno-0-199" name="__codelineno-0-199"></a><span style="color: #546E7A; font-style: italic">    Args:</span>
</span><span id="__span-0-200"><a id="__codelineno-0-200" name="__codelineno-0-200"></a><span style="color: #546E7A; font-style: italic">        columns: List of column names from a DataFrame</span>
</span><span id="__span-0-201"><a id="__codelineno-0-201" name="__codelineno-0-201"></a>
</span><span id="__span-0-202"><a id="__codelineno-0-202" name="__codelineno-0-202"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-203"><a id="__codelineno-0-203" name="__codelineno-0-203"></a><span style="color: #546E7A; font-style: italic">        Dictionary with validation results:</span>
</span><span id="__span-0-204"><a id="__codelineno-0-204" name="__codelineno-0-204"></a><span style="color: #546E7A; font-style: italic">            - valid: bool</span>
</span><span id="__span-0-205"><a id="__codelineno-0-205" name="__codelineno-0-205"></a><span style="color: #546E7A; font-style: italic">            - missing_required: List of missing required features</span>
</span><span id="__span-0-206"><a id="__codelineno-0-206" name="__codelineno-0-206"></a><span style="color: #546E7A; font-style: italic">            - unexpected: List of unexpected columns</span>
</span><span id="__span-0-207"><a id="__codelineno-0-207" name="__codelineno-0-207"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-208"><a id="__codelineno-0-208" name="__codelineno-0-208"></a>    <span style="color: #EFF">expected</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">set</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">get_feature_names</span><span style="color: #89DDFF">())</span>
</span><span id="__span-0-209"><a id="__codelineno-0-209" name="__codelineno-0-209"></a>    <span style="color: #EFF">actual</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">set</span><span style="color: #89DDFF">(</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-210"><a id="__codelineno-0-210" name="__codelineno-0-210"></a>    <span style="color: #EFF">required</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">set</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">get_required_features</span><span style="color: #89DDFF">())</span>
</span><span id="__span-0-211"><a id="__codelineno-0-211" name="__codelineno-0-211"></a>
</span><span id="__span-0-212"><a id="__codelineno-0-212" name="__codelineno-0-212"></a>    <span style="color: #EFF">missing_required</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">(</span><span style="color: #EFF">required</span> <span style="color: #89DDFF">-</span> <span style="color: #EFF">actual</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-213"><a id="__codelineno-0-213" name="__codelineno-0-213"></a>    <span style="color: #EFF">unexpected</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">(</span><span style="color: #EFF">actual</span> <span style="color: #89DDFF">-</span> <span style="color: #EFF">expected</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-214"><a id="__codelineno-0-214" name="__codelineno-0-214"></a>
</span><span id="__span-0-215"><a id="__codelineno-0-215" name="__codelineno-0-215"></a>    <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-216"><a id="__codelineno-0-216" name="__codelineno-0-216"></a>        <span style="color: #C3E88D">&quot;valid&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(</span><span style="color: #EFF">missing_required</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">==</span> <span style="color: #F78C6C">0</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-217"><a id="__codelineno-0-217" name="__codelineno-0-217"></a>        <span style="color: #C3E88D">&quot;missing_required&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">missing_required</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-218"><a id="__codelineno-0-218" name="__codelineno-0-218"></a>        <span style="color: #C3E88D">&quot;unexpected&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">unexpected</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-219"><a id="__codelineno-0-219" name="__codelineno-0-219"></a>        <span style="color: #C3E88D">&quot;missing_optional&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">((</span><span style="color: #EFF">expected</span> <span style="color: #89DDFF">-</span> <span style="color: #EFF">required</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-</span> <span style="color: #EFF">actual</span><span style="color: #89DDFF">),</span>
</span><span id="__span-0-220"><a id="__codelineno-0-220" name="__codelineno-0-220"></a>    <span style="color: #89DDFF">}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>



<div class="doc doc-object doc-module">



<h2 id="healthchain.io.containers.base" class="doc doc-heading">
            <code>base</code>


</h2>

    <div class="doc doc-contents ">










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h3 id="healthchain.io.containers.base.BaseDocument" class="doc doc-heading">
            <code>BaseDocument</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="DataContainer


  
      dataclass
   (healthchain.io.containers.base.DataContainer)" href="#healthchain.io.containers.base.DataContainer">DataContainer</a>[<span title="str">str</span>]</code></p>



        <p>Base document container for raw text content.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>healthchain/io/containers/base.py</code></summary>
                <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-50">50</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-51">51</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-52">52</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-53">53</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-54">54</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-55">55</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-56">56</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-57">57</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-58">58</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-59">59</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-60">60</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-61">61</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50"></a><span style="color: #82AAFF">@dataclass</span>
</span><span id="__span-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51"></a><span style="color: #BB80B3">class</span><span style="color: #EFF"> </span><span style="color: #FFCB6B">BaseDocument</span><span style="color: #89DDFF">(</span><span style="color: #EFF">DataContainer</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]):</span>
</span><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Base document container for raw text content.&quot;&quot;&quot;</span>
</span><span id="__span-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53"></a>
</span><span id="__span-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54"></a>    <span style="color: #EFF">data</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span>
</span><span id="__span-0-55"><a id="__codelineno-0-55" name="__codelineno-0-55"></a>    <span style="color: #EFF">text</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">field</span><span style="color: #89DDFF">(</span><span style="color: #EFF">init</span><span style="color: #89DDFF">=False)</span>
</span><span id="__span-0-56"><a id="__codelineno-0-56" name="__codelineno-0-56"></a>
</span><span id="__span-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">__post_init__</span><span style="color: #89DDFF">(self):</span>
</span><span id="__span-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">text</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span>
</span><span id="__span-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59"></a>
</span><span id="__span-0-60"><a id="__codelineno-0-60" name="__codelineno-0-60"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">char_count</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">int</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-61"><a id="__codelineno-0-61" name="__codelineno-0-61"></a>        <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">)</span>
</span></code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="healthchain.io.containers.base.DataContainer" class="doc doc-heading">
            <code>DataContainer</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Generic">Generic</span>[<span title="healthchain.io.containers.base.T">T</span>]</code></p>



        <p>A generic container for data.</p>
<p>This class represents a container for data with a specific type T.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">ATTRIBUTE</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.base.DataContainer.data">data</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>The data stored in the container.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="healthchain.io.containers.base.T">T</span></code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">METHOD</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.base.DataContainer.to_dict">to_dict</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Converts the container's data to a dictionary.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.base.DataContainer.to_json">to_json</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Converts the container's data to a JSON string.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.base.DataContainer.from_dict">from_dict</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Dict[str, Any]) -&gt; "DataContainer":
Creates a DataContainer instance from a dictionary.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.base.DataContainer.from_json">from_json</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>str) -&gt; "DataContainer":
Creates a DataContainer instance from a JSON string.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>healthchain/io/containers/base.py</code></summary>
                <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-9"> 9</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-10">10</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-11">11</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-12">12</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-13">13</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-14">14</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-15">15</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-16">16</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-17">17</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-18">18</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-19">19</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-20">20</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-21">21</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-22">22</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-23">23</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-24">24</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-25">25</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-26">26</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-27">27</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-28">28</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-29">29</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-30">30</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-31">31</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-32">32</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-33">33</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-34">34</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-35">35</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-36">36</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-37">37</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-38">38</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-39">39</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-40">40</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-41">41</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-42">42</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-43">43</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-44">44</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-45">45</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-46">46</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-47">47</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9"></a><span style="color: #82AAFF">@dataclass</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10"></a><span style="color: #BB80B3">class</span><span style="color: #EFF"> </span><span style="color: #FFCB6B">DataContainer</span><span style="color: #89DDFF">(</span><span style="color: #EFF">Generic</span><span style="color: #89DDFF">[</span><span style="color: #EFF">T</span><span style="color: #89DDFF">]):</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12"></a><span style="color: #546E7A; font-style: italic">    A generic container for data.</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13"></a>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14"></a><span style="color: #546E7A; font-style: italic">    This class represents a container for data with a specific type T.</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15"></a>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16"></a><span style="color: #546E7A; font-style: italic">    Attributes:</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17"></a><span style="color: #546E7A; font-style: italic">        data (T): The data stored in the container.</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18"></a>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19"></a><span style="color: #546E7A; font-style: italic">    Methods:</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20"></a><span style="color: #546E7A; font-style: italic">        to_dict() -&gt; Dict[str, Any]:</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21"></a><span style="color: #546E7A; font-style: italic">            Converts the container&#39;s data to a dictionary.</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22"></a>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23"></a><span style="color: #546E7A; font-style: italic">        to_json() -&gt; str:</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24"></a><span style="color: #546E7A; font-style: italic">            Converts the container&#39;s data to a JSON string.</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25"></a>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26"></a><span style="color: #546E7A; font-style: italic">        from_dict(cls, data: Dict[str, Any]) -&gt; &quot;DataContainer&quot;:</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27"></a><span style="color: #546E7A; font-style: italic">            Creates a DataContainer instance from a dictionary.</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28"></a>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29"></a><span style="color: #546E7A; font-style: italic">        from_json(cls, json_str: str) -&gt; &quot;DataContainer&quot;:</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30"></a><span style="color: #546E7A; font-style: italic">            Creates a DataContainer instance from a JSON string.</span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32"></a>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33"></a>    <span style="color: #EFF">data</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">T</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34"></a>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">to_dict</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">{</span><span style="color: #EFF">k</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">v</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">k</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">v</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #82AAFF">__dict__</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()</span> <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #EFF">k</span><span style="color: #89DDFF">.</span><span style="color: #EFF">startswith</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;_&quot;</span><span style="color: #89DDFF">)}</span>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37"></a>
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">to_json</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39"></a>        <span style="color: #BB80B3">return</span> <span style="color: #EFF">json</span><span style="color: #89DDFF">.</span><span style="color: #EFF">dumps</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">to_dict</span><span style="color: #89DDFF">())</span>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40"></a>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41"></a>    <span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">from_dict</span><span style="color: #89DDFF">(cls,</span> <span style="color: #EFF">data</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;DataContainer&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">cls(**</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44"></a>
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45"></a>    <span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">from_json</span><span style="color: #89DDFF">(cls,</span> <span style="color: #EFF">json_str</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;DataContainer&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">cls.</span><span style="color: #EFF">from_dict</span><span style="color: #89DDFF">(</span><span style="color: #EFF">json</span><span style="color: #89DDFF">.</span><span style="color: #EFF">loads</span><span style="color: #89DDFF">(</span><span style="color: #EFF">json_str</span><span style="color: #89DDFF">))</span>
</span></code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">












  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="healthchain.io.containers.dataset" class="doc doc-heading">
            <code>dataset</code>


</h2>

    <div class="doc doc-contents ">










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h3 id="healthchain.io.containers.dataset.Dataset" class="doc doc-heading">
            <code>Dataset</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="DataContainer


  
      dataclass
   (healthchain.io.containers.base.DataContainer)" href="#healthchain.io.containers.base.DataContainer">DataContainer</a>[<span title="pandas.DataFrame">DataFrame</span>]</code></p>



        <p>A container for tabular data optimized for ML inference, lightweight wrapper around a pandas DataFrame.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">ATTRIBUTE</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.dataset.Dataset.data">data</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>The pandas DataFrame containing the dataset.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="healthchain.io.containers.base.T">T</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.dataset.Dataset.metadata">metadata</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Dict for storing pipeline results (predictions, probabilities, etc.)</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">METHOD</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.dataset.Dataset.from_csv">from_csv</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Load Dataset from CSV.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.dataset.Dataset.from_dict">from_dict</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Load Dataset from dict.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="from_fhir_bundle(bundle, schema, aggregation='mean')

  
      classmethod
   (healthchain.io.containers.dataset.Dataset.from_fhir_bundle)" href="#healthchain.io.containers.dataset.Dataset.from_fhir_bundle">from_fhir_bundle</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Create Dataset from FHIR Bundle and schema.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.dataset.Dataset.to_csv">to_csv</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Save Dataset to CSV.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="to_risk_assessment(outcome_code, outcome_display, outcome_system='http://hl7.org/fhir/sid/icd-10', model_name=None, model_version=None, high_threshold=0.7, moderate_threshold=0.4, predictions=None, probabilities=None) (healthchain.io.containers.dataset.Dataset.to_risk_assessment)" href="#healthchain.io.containers.dataset.Dataset.to_risk_assessment">to_risk_assessment</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Convert predictions to FHIR RiskAssessment.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>healthchain/io/containers/dataset.py</code></summary>
                <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-21"> 21</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-22"> 22</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-23"> 23</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-24"> 24</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-25"> 25</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-26"> 26</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-27"> 27</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-28"> 28</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-29"> 29</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-30"> 30</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-31"> 31</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-32"> 32</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-33"> 33</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-34"> 34</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-35"> 35</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-36"> 36</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-37"> 37</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-38"> 38</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-39"> 39</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-40"> 40</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-41"> 41</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-42"> 42</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-43"> 43</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-44"> 44</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-45"> 45</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-46"> 46</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-47"> 47</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-48"> 48</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-49"> 49</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-50"> 50</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-51"> 51</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-52"> 52</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-53"> 53</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-54"> 54</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-55"> 55</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-56"> 56</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-57"> 57</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-58"> 58</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-59"> 59</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-60"> 60</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-61"> 61</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-62"> 62</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-63"> 63</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-64"> 64</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-65"> 65</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-66"> 66</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-67"> 67</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-68"> 68</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-69"> 69</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-70"> 70</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-71"> 71</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-72"> 72</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-73"> 73</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-74"> 74</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-75"> 75</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-76"> 76</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-77"> 77</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-78"> 78</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-79"> 79</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-80"> 80</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-81"> 81</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-82"> 82</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-83"> 83</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-84"> 84</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-85"> 85</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-86"> 86</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-87"> 87</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-88"> 88</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-89"> 89</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-90"> 90</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-91"> 91</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-92"> 92</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-93"> 93</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-94"> 94</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-95"> 95</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-96"> 96</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-97"> 97</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-98"> 98</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-99"> 99</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-100">100</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-101">101</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-102">102</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-103">103</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-104">104</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-105">105</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-106">106</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-107">107</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-108">108</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-109">109</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-110">110</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-111">111</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-112">112</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-113">113</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-114">114</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-115">115</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-116">116</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-117">117</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-118">118</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-119">119</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-120">120</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-121">121</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-122">122</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-123">123</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-124">124</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-125">125</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-126">126</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-127">127</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-128">128</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-129">129</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-130">130</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-131">131</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-132">132</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-133">133</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-134">134</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-135">135</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-136">136</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-137">137</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-138">138</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-139">139</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-140">140</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-141">141</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-142">142</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-143">143</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-144">144</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-145">145</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-146">146</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-147">147</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-148">148</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-149">149</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-150">150</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-151">151</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-152">152</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-153">153</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-154">154</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-155">155</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-156">156</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-157">157</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-158">158</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-159">159</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-160">160</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-161">161</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-162">162</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-163">163</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-164">164</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-165">165</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-166">166</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-167">167</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-168">168</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-169">169</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-170">170</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-171">171</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-172">172</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-173">173</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-174">174</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-175">175</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-176">176</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-177">177</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-178">178</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-179">179</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-180">180</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-181">181</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-182">182</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-183">183</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-184">184</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-185">185</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-186">186</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-187">187</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-188">188</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-189">189</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-190">190</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-191">191</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-192">192</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-193">193</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-194">194</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-195">195</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-196">196</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-197">197</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-198">198</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-199">199</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-200">200</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-201">201</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-202">202</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-203">203</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-204">204</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-205">205</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-206">206</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-207">207</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-208">208</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-209">209</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-210">210</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-211">211</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-212">212</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-213">213</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-214">214</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-215">215</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-216">216</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-217">217</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-218">218</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-219">219</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-220">220</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-221">221</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-222">222</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-223">223</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-224">224</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-225">225</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-226">226</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-227">227</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-228">228</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-229">229</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-230">230</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-231">231</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-232">232</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-233">233</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-234">234</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-235">235</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-236">236</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-237">237</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-238">238</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-239">239</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-240">240</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-241">241</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-242">242</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-243">243</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-244">244</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-245">245</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-246">246</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-247">247</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-248">248</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-249">249</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-250">250</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-251">251</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-252">252</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-253">253</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-254">254</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-255">255</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-256">256</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-257">257</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-258">258</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-259">259</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-260">260</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-261">261</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-262">262</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-263">263</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-264">264</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-265">265</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-266">266</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-267">267</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-268">268</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-269">269</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-270">270</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-271">271</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-272">272</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-273">273</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-274">274</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-275">275</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-276">276</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-277">277</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-278">278</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-279">279</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-280">280</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-281">281</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-282">282</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-283">283</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-284">284</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-285">285</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-286">286</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-287">287</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-288">288</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-289">289</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-290">290</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-291">291</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-292">292</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-293">293</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-294">294</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-295">295</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-296">296</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-297">297</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-298">298</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-299">299</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-300">300</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-301">301</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-302">302</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-303">303</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-304">304</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-305">305</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-306">306</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-307">307</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-308">308</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-309">309</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-310">310</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-311">311</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-312">312</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-313">313</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-314">314</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-315">315</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-316">316</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-317">317</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-318">318</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-319">319</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-320">320</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21"></a><span style="color: #82AAFF">@dataclass</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22"></a><span style="color: #BB80B3">class</span><span style="color: #EFF"> </span><span style="color: #FFCB6B">Dataset</span><span style="color: #89DDFF">(</span><span style="color: #EFF">DataContainer</span><span style="color: #89DDFF">[</span><span style="color: #EFF">pd</span><span style="color: #89DDFF">.</span><span style="color: #EFF">DataFrame</span><span style="color: #89DDFF">]):</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24"></a><span style="color: #546E7A; font-style: italic">    A container for tabular data optimized for ML inference, lightweight wrapper around a pandas DataFrame.</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25"></a>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26"></a><span style="color: #546E7A; font-style: italic">    Attributes:</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27"></a><span style="color: #546E7A; font-style: italic">        data: The pandas DataFrame containing the dataset.</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28"></a><span style="color: #546E7A; font-style: italic">        metadata: Dict for storing pipeline results (predictions, probabilities, etc.)</span>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29"></a>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30"></a><span style="color: #546E7A; font-style: italic">    Methods:</span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31"></a><span style="color: #546E7A; font-style: italic">        from_csv: Load Dataset from CSV.</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32"></a><span style="color: #546E7A; font-style: italic">        from_dict: Load Dataset from dict.</span>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33"></a><span style="color: #546E7A; font-style: italic">        from_fhir_bundle: Create Dataset from FHIR Bundle and schema.</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34"></a><span style="color: #546E7A; font-style: italic">        to_csv: Save Dataset to CSV.</span>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35"></a><span style="color: #546E7A; font-style: italic">        to_risk_assessment: Convert predictions to FHIR RiskAssessment.</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37"></a>
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38"></a>    <span style="color: #EFF">metadata</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">field</span><span style="color: #89DDFF">(</span><span style="color: #EFF">default_factory</span><span style="color: #89DDFF">=</span><span style="color: #82AAFF">dict</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39"></a>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">__post_init__</span><span style="color: #89DDFF">(self):</span>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41"></a>        <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">pd</span><span style="color: #89DDFF">.</span><span style="color: #EFF">DataFrame</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42"></a>            <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">TypeError</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;data must be a pandas DataFrame&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43"></a>
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">columns</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46"></a>        <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47"></a>
</span><span id="__span-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-49"><a id="__codelineno-0-49" name="__codelineno-0-49"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">index</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">pd</span><span style="color: #89DDFF">.</span><span style="color: #EFF">Index</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">index</span>
</span><span id="__span-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51"></a>
</span><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">dtypes</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">{</span><span style="color: #EFF">col</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">(</span><span style="color: #EFF">dtype</span><span style="color: #89DDFF">)</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">col</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">dtype</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">dtypes</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()}</span>
</span><span id="__span-0-55"><a id="__codelineno-0-55" name="__codelineno-0-55"></a>
</span><span id="__span-0-56"><a id="__codelineno-0-56" name="__codelineno-0-56"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">column_count</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">int</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57"></a>        <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58"></a>
</span><span id="__span-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">row_count</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">int</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-60"><a id="__codelineno-0-60" name="__codelineno-0-60"></a>        <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-61"><a id="__codelineno-0-61" name="__codelineno-0-61"></a>
</span><span id="__span-0-62"><a id="__codelineno-0-62" name="__codelineno-0-62"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_dtype</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">column</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-63"><a id="__codelineno-0-63" name="__codelineno-0-63"></a>        <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">[</span><span style="color: #EFF">column</span><span style="color: #89DDFF">].</span><span style="color: #EFF">dtype</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-64"><a id="__codelineno-0-64" name="__codelineno-0-64"></a>
</span><span id="__span-0-65"><a id="__codelineno-0-65" name="__codelineno-0-65"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">__iter__</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Iterator</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-66"><a id="__codelineno-0-66" name="__codelineno-0-66"></a>        <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">iter</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-67"><a id="__codelineno-0-67" name="__codelineno-0-67"></a>
</span><span id="__span-0-68"><a id="__codelineno-0-68" name="__codelineno-0-68"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">__len__</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">int</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-69"><a id="__codelineno-0-69" name="__codelineno-0-69"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">row_count</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-70"><a id="__codelineno-0-70" name="__codelineno-0-70"></a>
</span><span id="__span-0-71"><a id="__codelineno-0-71" name="__codelineno-0-71"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">describe</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-72"><a id="__codelineno-0-72" name="__codelineno-0-72"></a>        <span style="color: #BB80B3">return</span> <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Dataset with </span><span style="color: #89DDFF">{self.</span><span style="color: #EFF">column_count</span><span style="color: #89DDFF">()}</span><span style="color: #C3E88D"> columns and </span><span style="color: #89DDFF">{self.</span><span style="color: #EFF">row_count</span><span style="color: #89DDFF">()}</span><span style="color: #C3E88D"> rows&quot;</span>
</span><span id="__span-0-73"><a id="__codelineno-0-73" name="__codelineno-0-73"></a>
</span><span id="__span-0-74"><a id="__codelineno-0-74" name="__codelineno-0-74"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">remove_column</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">name</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-75"><a id="__codelineno-0-75" name="__codelineno-0-75"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">drop</span><span style="color: #89DDFF">(</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">=[</span><span style="color: #EFF">name</span><span style="color: #89DDFF">],</span> <span style="color: #EFF">inplace</span><span style="color: #89DDFF">=True)</span>
</span><span id="__span-0-76"><a id="__codelineno-0-76" name="__codelineno-0-76"></a>
</span><span id="__span-0-77"><a id="__codelineno-0-77" name="__codelineno-0-77"></a>    <span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-78"><a id="__codelineno-0-78" name="__codelineno-0-78"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">from_csv</span><span style="color: #89DDFF">(cls,</span> <span style="color: #EFF">path</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">**</span><span style="color: #EFF">kwargs</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;Dataset&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-79"><a id="__codelineno-0-79" name="__codelineno-0-79"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">cls(</span><span style="color: #EFF">pd</span><span style="color: #89DDFF">.</span><span style="color: #EFF">read_csv</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">**</span><span style="color: #EFF">kwargs</span><span style="color: #89DDFF">))</span>
</span><span id="__span-0-80"><a id="__codelineno-0-80" name="__codelineno-0-80"></a>
</span><span id="__span-0-81"><a id="__codelineno-0-81" name="__codelineno-0-81"></a>    <span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-82"><a id="__codelineno-0-82" name="__codelineno-0-82"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">from_dict</span><span style="color: #89DDFF">(cls,</span> <span style="color: #EFF">data</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;Dataset&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-83"><a id="__codelineno-0-83" name="__codelineno-0-83"></a>        <span style="color: #EFF">df</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">pd</span><span style="color: #89DDFF">.</span><span style="color: #EFF">DataFrame</span><span style="color: #89DDFF">(</span><span style="color: #EFF">data</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;data&quot;</span><span style="color: #89DDFF">])</span>
</span><span id="__span-0-84"><a id="__codelineno-0-84" name="__codelineno-0-84"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">cls(</span><span style="color: #EFF">df</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-85"><a id="__codelineno-0-85" name="__codelineno-0-85"></a>
</span><span id="__span-0-86"><a id="__codelineno-0-86" name="__codelineno-0-86"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">to_csv</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">path</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">**</span><span style="color: #EFF">kwargs</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-87"><a id="__codelineno-0-87" name="__codelineno-0-87"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">to_csv</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">**</span><span style="color: #EFF">kwargs</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-88"><a id="__codelineno-0-88" name="__codelineno-0-88"></a>
</span><span id="__span-0-89"><a id="__codelineno-0-89" name="__codelineno-0-89"></a>    <span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-90"><a id="__codelineno-0-90" name="__codelineno-0-90"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">from_fhir_bundle</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-91"><a id="__codelineno-0-91" name="__codelineno-0-91"></a>        <span style="color: #89DDFF">cls,</span>
</span><span id="__span-0-92"><a id="__codelineno-0-92" name="__codelineno-0-92"></a>        <span style="color: #EFF">bundle</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Union</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Bundle</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]],</span>
</span><span id="__span-0-93"><a id="__codelineno-0-93" name="__codelineno-0-93"></a>        <span style="color: #EFF">schema</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Union</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">FeatureSchema</span><span style="color: #89DDFF">],</span>
</span><span id="__span-0-94"><a id="__codelineno-0-94" name="__codelineno-0-94"></a>        <span style="color: #EFF">aggregation</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;mean&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-95"><a id="__codelineno-0-95" name="__codelineno-0-95"></a>    <span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;Dataset&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-96"><a id="__codelineno-0-96" name="__codelineno-0-96"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Create Dataset from a FHIR Bundle using a feature schema.</span>
</span><span id="__span-0-97"><a id="__codelineno-0-97" name="__codelineno-0-97"></a>
</span><span id="__span-0-98"><a id="__codelineno-0-98" name="__codelineno-0-98"></a><span style="color: #546E7A; font-style: italic">        Extracts features from FHIR resources according to the schema specification,</span>
</span><span id="__span-0-99"><a id="__codelineno-0-99" name="__codelineno-0-99"></a><span style="color: #546E7A; font-style: italic">        converting FHIR data to a pandas DataFrame suitable for ML inference.</span>
</span><span id="__span-0-100"><a id="__codelineno-0-100" name="__codelineno-0-100"></a>
</span><span id="__span-0-101"><a id="__codelineno-0-101" name="__codelineno-0-101"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-102"><a id="__codelineno-0-102" name="__codelineno-0-102"></a><span style="color: #546E7A; font-style: italic">            bundle: FHIR Bundle resource (object or dict)</span>
</span><span id="__span-0-103"><a id="__codelineno-0-103" name="__codelineno-0-103"></a><span style="color: #546E7A; font-style: italic">            schema: FeatureSchema object, or path to YAML schema file</span>
</span><span id="__span-0-104"><a id="__codelineno-0-104" name="__codelineno-0-104"></a><span style="color: #546E7A; font-style: italic">            aggregation: How to aggregate multiple observation values (default: &quot;mean&quot;)</span>
</span><span id="__span-0-105"><a id="__codelineno-0-105" name="__codelineno-0-105"></a><span style="color: #546E7A; font-style: italic">                Options: &quot;mean&quot;, &quot;median&quot;, &quot;max&quot;, &quot;min&quot;, &quot;last&quot; (default: &quot;mean&quot;)</span>
</span><span id="__span-0-106"><a id="__codelineno-0-106" name="__codelineno-0-106"></a>
</span><span id="__span-0-107"><a id="__codelineno-0-107" name="__codelineno-0-107"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-108"><a id="__codelineno-0-108" name="__codelineno-0-108"></a><span style="color: #546E7A; font-style: italic">            Dataset container with extracted features</span>
</span><span id="__span-0-109"><a id="__codelineno-0-109" name="__codelineno-0-109"></a>
</span><span id="__span-0-110"><a id="__codelineno-0-110" name="__codelineno-0-110"></a><span style="color: #546E7A; font-style: italic">        Example:</span>
</span><span id="__span-0-111"><a id="__codelineno-0-111" name="__codelineno-0-111"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; from fhir.resources.bundle import Bundle</span>
</span><span id="__span-0-112"><a id="__codelineno-0-112" name="__codelineno-0-112"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; bundle = Bundle(**patient_data)</span>
</span><span id="__span-0-113"><a id="__codelineno-0-113" name="__codelineno-0-113"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; dataset = Dataset.from_fhir_bundle(</span>
</span><span id="__span-0-114"><a id="__codelineno-0-114" name="__codelineno-0-114"></a><span style="color: #546E7A; font-style: italic">            ...     bundle,</span>
</span><span id="__span-0-115"><a id="__codelineno-0-115" name="__codelineno-0-115"></a><span style="color: #546E7A; font-style: italic">            ...     schema=&quot;healthchain/configs/features/sepsis_vitals.yaml&quot;</span>
</span><span id="__span-0-116"><a id="__codelineno-0-116" name="__codelineno-0-116"></a><span style="color: #546E7A; font-style: italic">            ... )</span>
</span><span id="__span-0-117"><a id="__codelineno-0-117" name="__codelineno-0-117"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; df = dataset.data</span>
</span><span id="__span-0-118"><a id="__codelineno-0-118" name="__codelineno-0-118"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-119"><a id="__codelineno-0-119" name="__codelineno-0-119"></a>        <span style="color: #546E7A; font-style: italic"># Load schema if path provided</span>
</span><span id="__span-0-120"><a id="__codelineno-0-120" name="__codelineno-0-120"></a>        <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">schema</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">(</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">)):</span>
</span><span id="__span-0-121"><a id="__codelineno-0-121" name="__codelineno-0-121"></a>            <span style="color: #EFF">schema</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">FeatureSchema</span><span style="color: #89DDFF">.</span><span style="color: #EFF">from_yaml</span><span style="color: #89DDFF">(</span><span style="color: #EFF">schema</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-122"><a id="__codelineno-0-122" name="__codelineno-0-122"></a>
</span><span id="__span-0-123"><a id="__codelineno-0-123" name="__codelineno-0-123"></a>        <span style="color: #546E7A; font-style: italic"># Extract features using mapper</span>
</span><span id="__span-0-124"><a id="__codelineno-0-124" name="__codelineno-0-124"></a>        <span style="color: #EFF">mapper</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">FHIRFeatureMapper</span><span style="color: #89DDFF">(</span><span style="color: #EFF">schema</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-125"><a id="__codelineno-0-125" name="__codelineno-0-125"></a>        <span style="color: #EFF">df</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">mapper</span><span style="color: #89DDFF">.</span><span style="color: #EFF">extract_features</span><span style="color: #89DDFF">(</span><span style="color: #EFF">bundle</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">aggregation</span><span style="color: #89DDFF">=</span><span style="color: #EFF">aggregation</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-126"><a id="__codelineno-0-126" name="__codelineno-0-126"></a>
</span><span id="__span-0-127"><a id="__codelineno-0-127" name="__codelineno-0-127"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">cls(</span><span style="color: #EFF">df</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-128"><a id="__codelineno-0-128" name="__codelineno-0-128"></a>
</span><span id="__span-0-129"><a id="__codelineno-0-129" name="__codelineno-0-129"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">validate</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-130"><a id="__codelineno-0-130" name="__codelineno-0-130"></a>        <span style="color: #89DDFF">self,</span> <span style="color: #EFF">schema</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">FeatureSchema</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">raise_on_error</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">bool</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">False</span>
</span><span id="__span-0-131"><a id="__codelineno-0-131" name="__codelineno-0-131"></a>    <span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">ValidationResult</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-132"><a id="__codelineno-0-132" name="__codelineno-0-132"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Validate DataFrame against a feature schema.</span>
</span><span id="__span-0-133"><a id="__codelineno-0-133" name="__codelineno-0-133"></a>
</span><span id="__span-0-134"><a id="__codelineno-0-134" name="__codelineno-0-134"></a><span style="color: #546E7A; font-style: italic">        Checks that required features are present and have correct data types.</span>
</span><span id="__span-0-135"><a id="__codelineno-0-135" name="__codelineno-0-135"></a>
</span><span id="__span-0-136"><a id="__codelineno-0-136" name="__codelineno-0-136"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-137"><a id="__codelineno-0-137" name="__codelineno-0-137"></a><span style="color: #546E7A; font-style: italic">            schema: FeatureSchema to validate against</span>
</span><span id="__span-0-138"><a id="__codelineno-0-138" name="__codelineno-0-138"></a><span style="color: #546E7A; font-style: italic">            raise_on_error: Whether to raise exception on validation failure</span>
</span><span id="__span-0-139"><a id="__codelineno-0-139" name="__codelineno-0-139"></a>
</span><span id="__span-0-140"><a id="__codelineno-0-140" name="__codelineno-0-140"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-141"><a id="__codelineno-0-141" name="__codelineno-0-141"></a><span style="color: #546E7A; font-style: italic">            ValidationResult with validation status and details</span>
</span><span id="__span-0-142"><a id="__codelineno-0-142" name="__codelineno-0-142"></a>
</span><span id="__span-0-143"><a id="__codelineno-0-143" name="__codelineno-0-143"></a><span style="color: #546E7A; font-style: italic">        Raises:</span>
</span><span id="__span-0-144"><a id="__codelineno-0-144" name="__codelineno-0-144"></a><span style="color: #546E7A; font-style: italic">            ValueError: If raise_on_error is True and validation fails</span>
</span><span id="__span-0-145"><a id="__codelineno-0-145" name="__codelineno-0-145"></a>
</span><span id="__span-0-146"><a id="__codelineno-0-146" name="__codelineno-0-146"></a><span style="color: #546E7A; font-style: italic">        Example:</span>
</span><span id="__span-0-147"><a id="__codelineno-0-147" name="__codelineno-0-147"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; schema = FeatureSchema.from_yaml(&quot;configs/features/sepsis_vitals.yaml&quot;)</span>
</span><span id="__span-0-148"><a id="__codelineno-0-148" name="__codelineno-0-148"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; result = dataset.validate(schema)</span>
</span><span id="__span-0-149"><a id="__codelineno-0-149" name="__codelineno-0-149"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; if not result.valid:</span>
</span><span id="__span-0-150"><a id="__codelineno-0-150" name="__codelineno-0-150"></a><span style="color: #546E7A; font-style: italic">            ...     print(result.errors)</span>
</span><span id="__span-0-151"><a id="__codelineno-0-151" name="__codelineno-0-151"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-152"><a id="__codelineno-0-152" name="__codelineno-0-152"></a>        <span style="color: #EFF">result</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">ValidationResult</span><span style="color: #89DDFF">(</span><span style="color: #EFF">valid</span><span style="color: #89DDFF">=True)</span>
</span><span id="__span-0-153"><a id="__codelineno-0-153" name="__codelineno-0-153"></a>
</span><span id="__span-0-154"><a id="__codelineno-0-154" name="__codelineno-0-154"></a>        <span style="color: #546E7A; font-style: italic"># Check for missing required features</span>
</span><span id="__span-0-155"><a id="__codelineno-0-155" name="__codelineno-0-155"></a>        <span style="color: #EFF">required</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">schema</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get_required_features</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-156"><a id="__codelineno-0-156" name="__codelineno-0-156"></a>        <span style="color: #EFF">missing</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[</span><span style="color: #EFF">f</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">f</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">required</span> <span style="color: #BB80B3">if</span> <span style="color: #EFF">f</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-157"><a id="__codelineno-0-157" name="__codelineno-0-157"></a>
</span><span id="__span-0-158"><a id="__codelineno-0-158" name="__codelineno-0-158"></a>        <span style="color: #BB80B3">for</span> <span style="color: #EFF">feature</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">missing</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-159"><a id="__codelineno-0-159" name="__codelineno-0-159"></a>            <span style="color: #EFF">result</span><span style="color: #89DDFF">.</span><span style="color: #EFF">add_missing_feature</span><span style="color: #89DDFF">(</span><span style="color: #EFF">feature</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-160"><a id="__codelineno-0-160" name="__codelineno-0-160"></a>
</span><span id="__span-0-161"><a id="__codelineno-0-161" name="__codelineno-0-161"></a>        <span style="color: #546E7A; font-style: italic"># Check data types for present features</span>
</span><span id="__span-0-162"><a id="__codelineno-0-162" name="__codelineno-0-162"></a>        <span style="color: #BB80B3">for</span> <span style="color: #EFF">feature_name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">schema</span><span style="color: #89DDFF">.</span><span style="color: #EFF">features</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">():</span>
</span><span id="__span-0-163"><a id="__codelineno-0-163" name="__codelineno-0-163"></a>            <span style="color: #BB80B3">if</span> <span style="color: #EFF">feature_name</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-164"><a id="__codelineno-0-164" name="__codelineno-0-164"></a>                <span style="color: #EFF">actual_dtype</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">[</span><span style="color: #EFF">feature_name</span><span style="color: #89DDFF">].</span><span style="color: #EFF">dtype</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-165"><a id="__codelineno-0-165" name="__codelineno-0-165"></a>                <span style="color: #EFF">expected_dtype</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">dtype</span>
</span><span id="__span-0-166"><a id="__codelineno-0-166" name="__codelineno-0-166"></a>
</span><span id="__span-0-167"><a id="__codelineno-0-167" name="__codelineno-0-167"></a>                <span style="color: #546E7A; font-style: italic"># Check for type mismatches (allow some flexibility)</span>
</span><span id="__span-0-168"><a id="__codelineno-0-168" name="__codelineno-0-168"></a>                <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_dtypes_compatible</span><span style="color: #89DDFF">(</span><span style="color: #EFF">actual_dtype</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">expected_dtype</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-169"><a id="__codelineno-0-169" name="__codelineno-0-169"></a>                    <span style="color: #EFF">result</span><span style="color: #89DDFF">.</span><span style="color: #EFF">add_type_mismatch</span><span style="color: #89DDFF">(</span><span style="color: #EFF">feature_name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">expected_dtype</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">actual_dtype</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-170"><a id="__codelineno-0-170" name="__codelineno-0-170"></a>
</span><span id="__span-0-171"><a id="__codelineno-0-171" name="__codelineno-0-171"></a>        <span style="color: #546E7A; font-style: italic"># Warn about optional missing features</span>
</span><span id="__span-0-172"><a id="__codelineno-0-172" name="__codelineno-0-172"></a>        <span style="color: #EFF">optional</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">set</span><span style="color: #89DDFF">(</span><span style="color: #EFF">schema</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get_feature_names</span><span style="color: #89DDFF">())</span> <span style="color: #89DDFF">-</span> <span style="color: #82AAFF">set</span><span style="color: #89DDFF">(</span><span style="color: #EFF">required</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-173"><a id="__codelineno-0-173" name="__codelineno-0-173"></a>        <span style="color: #EFF">missing_optional</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[</span><span style="color: #EFF">f</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">f</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">optional</span> <span style="color: #BB80B3">if</span> <span style="color: #EFF">f</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-174"><a id="__codelineno-0-174" name="__codelineno-0-174"></a>
</span><span id="__span-0-175"><a id="__codelineno-0-175" name="__codelineno-0-175"></a>        <span style="color: #BB80B3">for</span> <span style="color: #EFF">feature</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">missing_optional</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-176"><a id="__codelineno-0-176" name="__codelineno-0-176"></a>            <span style="color: #EFF">result</span><span style="color: #89DDFF">.</span><span style="color: #EFF">add_warning</span><span style="color: #89DDFF">(</span><span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Optional feature &#39;</span><span style="color: #89DDFF">{</span><span style="color: #EFF">feature</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&#39; is missing&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-177"><a id="__codelineno-0-177" name="__codelineno-0-177"></a>
</span><span id="__span-0-178"><a id="__codelineno-0-178" name="__codelineno-0-178"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">raise_on_error</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #EFF">result</span><span style="color: #89DDFF">.</span><span style="color: #EFF">valid</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-179"><a id="__codelineno-0-179" name="__codelineno-0-179"></a>            <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">(</span><span style="color: #EFF">result</span><span style="color: #89DDFF">))</span>
</span><span id="__span-0-180"><a id="__codelineno-0-180" name="__codelineno-0-180"></a>
</span><span id="__span-0-181"><a id="__codelineno-0-181" name="__codelineno-0-181"></a>        <span style="color: #BB80B3">return</span> <span style="color: #EFF">result</span>
</span><span id="__span-0-182"><a id="__codelineno-0-182" name="__codelineno-0-182"></a>
</span><span id="__span-0-183"><a id="__codelineno-0-183" name="__codelineno-0-183"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">_dtypes_compatible</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">actual</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">expected</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">bool</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-184"><a id="__codelineno-0-184" name="__codelineno-0-184"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Check if actual dtype is compatible with expected dtype.</span>
</span><span id="__span-0-185"><a id="__codelineno-0-185" name="__codelineno-0-185"></a>
</span><span id="__span-0-186"><a id="__codelineno-0-186" name="__codelineno-0-186"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-187"><a id="__codelineno-0-187" name="__codelineno-0-187"></a><span style="color: #546E7A; font-style: italic">            actual: Actual dtype string</span>
</span><span id="__span-0-188"><a id="__codelineno-0-188" name="__codelineno-0-188"></a><span style="color: #546E7A; font-style: italic">            expected: Expected dtype string</span>
</span><span id="__span-0-189"><a id="__codelineno-0-189" name="__codelineno-0-189"></a>
</span><span id="__span-0-190"><a id="__codelineno-0-190" name="__codelineno-0-190"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-191"><a id="__codelineno-0-191" name="__codelineno-0-191"></a><span style="color: #546E7A; font-style: italic">            True if dtypes are compatible</span>
</span><span id="__span-0-192"><a id="__codelineno-0-192" name="__codelineno-0-192"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-193"><a id="__codelineno-0-193" name="__codelineno-0-193"></a>        <span style="color: #546E7A; font-style: italic"># Handle numeric types flexibly</span>
</span><span id="__span-0-194"><a id="__codelineno-0-194" name="__codelineno-0-194"></a>        <span style="color: #EFF">numeric_types</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">{</span><span style="color: #C3E88D">&quot;int64&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;int32&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;float64&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;float32&quot;</span><span style="color: #89DDFF">}</span>
</span><span id="__span-0-195"><a id="__codelineno-0-195" name="__codelineno-0-195"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">expected</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">numeric_types</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #EFF">actual</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">numeric_types</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-196"><a id="__codelineno-0-196" name="__codelineno-0-196"></a>            <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">True</span>
</span><span id="__span-0-197"><a id="__codelineno-0-197" name="__codelineno-0-197"></a>
</span><span id="__span-0-198"><a id="__codelineno-0-198" name="__codelineno-0-198"></a>        <span style="color: #546E7A; font-style: italic"># Exact match for non-numeric types</span>
</span><span id="__span-0-199"><a id="__codelineno-0-199" name="__codelineno-0-199"></a>        <span style="color: #BB80B3">return</span> <span style="color: #EFF">actual</span> <span style="color: #89DDFF">==</span> <span style="color: #EFF">expected</span>
</span><span id="__span-0-200"><a id="__codelineno-0-200" name="__codelineno-0-200"></a>
</span><span id="__span-0-201"><a id="__codelineno-0-201" name="__codelineno-0-201"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">to_risk_assessment</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-202"><a id="__codelineno-0-202" name="__codelineno-0-202"></a>        <span style="color: #89DDFF">self,</span>
</span><span id="__span-0-203"><a id="__codelineno-0-203" name="__codelineno-0-203"></a>        <span style="color: #EFF">outcome_code</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-204"><a id="__codelineno-0-204" name="__codelineno-0-204"></a>        <span style="color: #EFF">outcome_display</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-205"><a id="__codelineno-0-205" name="__codelineno-0-205"></a>        <span style="color: #EFF">outcome_system</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;http://hl7.org/fhir/sid/icd-10&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-206"><a id="__codelineno-0-206" name="__codelineno-0-206"></a>        <span style="color: #EFF">model_name</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None,</span>
</span><span id="__span-0-207"><a id="__codelineno-0-207" name="__codelineno-0-207"></a>        <span style="color: #EFF">model_version</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None,</span>
</span><span id="__span-0-208"><a id="__codelineno-0-208" name="__codelineno-0-208"></a>        <span style="color: #EFF">high_threshold</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">float</span> <span style="color: #89DDFF">=</span> <span style="color: #F78C6C">0.7</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-209"><a id="__codelineno-0-209" name="__codelineno-0-209"></a>        <span style="color: #EFF">moderate_threshold</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">float</span> <span style="color: #89DDFF">=</span> <span style="color: #F78C6C">0.4</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-210"><a id="__codelineno-0-210" name="__codelineno-0-210"></a>        <span style="color: #EFF">predictions</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">np</span><span style="color: #89DDFF">.</span><span style="color: #EFF">ndarray</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None,</span>
</span><span id="__span-0-211"><a id="__codelineno-0-211" name="__codelineno-0-211"></a>        <span style="color: #EFF">probabilities</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">np</span><span style="color: #89DDFF">.</span><span style="color: #EFF">ndarray</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None,</span>
</span><span id="__span-0-212"><a id="__codelineno-0-212" name="__codelineno-0-212"></a>    <span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">RiskAssessment</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-213"><a id="__codelineno-0-213" name="__codelineno-0-213"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Convert model predictions to FHIR RiskAssessment resources.</span>
</span><span id="__span-0-214"><a id="__codelineno-0-214" name="__codelineno-0-214"></a>
</span><span id="__span-0-215"><a id="__codelineno-0-215" name="__codelineno-0-215"></a><span style="color: #546E7A; font-style: italic">        Creates RiskAssessment resources from ML model output, suitable for</span>
</span><span id="__span-0-216"><a id="__codelineno-0-216" name="__codelineno-0-216"></a><span style="color: #546E7A; font-style: italic">        including in FHIR Bundles or sending to FHIR servers.</span>
</span><span id="__span-0-217"><a id="__codelineno-0-217" name="__codelineno-0-217"></a>
</span><span id="__span-0-218"><a id="__codelineno-0-218" name="__codelineno-0-218"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-219"><a id="__codelineno-0-219" name="__codelineno-0-219"></a><span style="color: #546E7A; font-style: italic">            outcome_code: Code for the predicted outcome (e.g., &quot;A41.9&quot; for sepsis)</span>
</span><span id="__span-0-220"><a id="__codelineno-0-220" name="__codelineno-0-220"></a><span style="color: #546E7A; font-style: italic">            outcome_display: Display text for the outcome (e.g., &quot;Sepsis&quot;)</span>
</span><span id="__span-0-221"><a id="__codelineno-0-221" name="__codelineno-0-221"></a><span style="color: #546E7A; font-style: italic">            outcome_system: Code system for the outcome (default: ICD-10)</span>
</span><span id="__span-0-222"><a id="__codelineno-0-222" name="__codelineno-0-222"></a><span style="color: #546E7A; font-style: italic">            model_name: Name of the ML model (optional)</span>
</span><span id="__span-0-223"><a id="__codelineno-0-223" name="__codelineno-0-223"></a><span style="color: #546E7A; font-style: italic">            model_version: Version of the ML model (optional)</span>
</span><span id="__span-0-224"><a id="__codelineno-0-224" name="__codelineno-0-224"></a><span style="color: #546E7A; font-style: italic">            high_threshold: Threshold for high risk (default: 0.7)</span>
</span><span id="__span-0-225"><a id="__codelineno-0-225" name="__codelineno-0-225"></a><span style="color: #546E7A; font-style: italic">            moderate_threshold: Threshold for moderate risk (default: 0.4)</span>
</span><span id="__span-0-226"><a id="__codelineno-0-226" name="__codelineno-0-226"></a><span style="color: #546E7A; font-style: italic">            predictions: Binary predictions array (0/1). Defaults to metadata[&quot;predictions&quot;]</span>
</span><span id="__span-0-227"><a id="__codelineno-0-227" name="__codelineno-0-227"></a><span style="color: #546E7A; font-style: italic">            probabilities: Probability scores array (0-1). Defaults to metadata[&quot;probabilities&quot;]</span>
</span><span id="__span-0-228"><a id="__codelineno-0-228" name="__codelineno-0-228"></a>
</span><span id="__span-0-229"><a id="__codelineno-0-229" name="__codelineno-0-229"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-230"><a id="__codelineno-0-230" name="__codelineno-0-230"></a><span style="color: #546E7A; font-style: italic">            List of RiskAssessment resources, one per patient</span>
</span><span id="__span-0-231"><a id="__codelineno-0-231" name="__codelineno-0-231"></a>
</span><span id="__span-0-232"><a id="__codelineno-0-232" name="__codelineno-0-232"></a><span style="color: #546E7A; font-style: italic">        Example:</span>
</span><span id="__span-0-233"><a id="__codelineno-0-233" name="__codelineno-0-233"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; risk_assessments = dataset.to_risk_assessment(</span>
</span><span id="__span-0-234"><a id="__codelineno-0-234" name="__codelineno-0-234"></a><span style="color: #546E7A; font-style: italic">            ...     outcome_code=&quot;A41.9&quot;,</span>
</span><span id="__span-0-235"><a id="__codelineno-0-235" name="__codelineno-0-235"></a><span style="color: #546E7A; font-style: italic">            ...     outcome_display=&quot;Sepsis, unspecified&quot;,</span>
</span><span id="__span-0-236"><a id="__codelineno-0-236" name="__codelineno-0-236"></a><span style="color: #546E7A; font-style: italic">            ...     model_name=&quot;RandomForest&quot;,</span>
</span><span id="__span-0-237"><a id="__codelineno-0-237" name="__codelineno-0-237"></a><span style="color: #546E7A; font-style: italic">            ...     model_version=&quot;1.0&quot;</span>
</span><span id="__span-0-238"><a id="__codelineno-0-238" name="__codelineno-0-238"></a><span style="color: #546E7A; font-style: italic">            ... )</span>
</span><span id="__span-0-239"><a id="__codelineno-0-239" name="__codelineno-0-239"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-240"><a id="__codelineno-0-240" name="__codelineno-0-240"></a>        <span style="color: #546E7A; font-style: italic"># Fall back to metadata if not provided</span>
</span><span id="__span-0-241"><a id="__codelineno-0-241" name="__codelineno-0-241"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">predictions</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-242"><a id="__codelineno-0-242" name="__codelineno-0-242"></a>            <span style="color: #EFF">predictions</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">metadata</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;predictions&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-243"><a id="__codelineno-0-243" name="__codelineno-0-243"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">probabilities</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-244"><a id="__codelineno-0-244" name="__codelineno-0-244"></a>            <span style="color: #EFF">probabilities</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">metadata</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;probabilities&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-245"><a id="__codelineno-0-245" name="__codelineno-0-245"></a>
</span><span id="__span-0-246"><a id="__codelineno-0-246" name="__codelineno-0-246"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">predictions</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None</span> <span style="color: #89DDFF; font-style: italic">or</span> <span style="color: #EFF">probabilities</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-247"><a id="__codelineno-0-247" name="__codelineno-0-247"></a>            <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-248"><a id="__codelineno-0-248" name="__codelineno-0-248"></a>                <span style="color: #C3E88D">&quot;predictions and probabilities must be provided or available in metadata&quot;</span>
</span><span id="__span-0-249"><a id="__codelineno-0-249" name="__codelineno-0-249"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-250"><a id="__codelineno-0-250" name="__codelineno-0-250"></a>
</span><span id="__span-0-251"><a id="__codelineno-0-251" name="__codelineno-0-251"></a>        <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(</span><span style="color: #EFF">predictions</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">!=</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-252"><a id="__codelineno-0-252" name="__codelineno-0-252"></a>            <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-253"><a id="__codelineno-0-253" name="__codelineno-0-253"></a>                <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Predictions length (</span><span style="color: #89DDFF">{</span><span style="color: #82AAFF">len</span><span style="color: #89DDFF">(</span><span style="color: #EFF">predictions</span><span style="color: #89DDFF">)}</span><span style="color: #C3E88D">) must match &quot;</span>
</span><span id="__span-0-254"><a id="__codelineno-0-254" name="__codelineno-0-254"></a>                <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;DataFrame length (</span><span style="color: #89DDFF">{</span><span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)}</span><span style="color: #C3E88D">)&quot;</span>
</span><span id="__span-0-255"><a id="__codelineno-0-255" name="__codelineno-0-255"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-256"><a id="__codelineno-0-256" name="__codelineno-0-256"></a>
</span><span id="__span-0-257"><a id="__codelineno-0-257" name="__codelineno-0-257"></a>        <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(</span><span style="color: #EFF">probabilities</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">!=</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-258"><a id="__codelineno-0-258" name="__codelineno-0-258"></a>            <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-259"><a id="__codelineno-0-259" name="__codelineno-0-259"></a>                <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Probabilities length (</span><span style="color: #89DDFF">{</span><span style="color: #82AAFF">len</span><span style="color: #89DDFF">(</span><span style="color: #EFF">probabilities</span><span style="color: #89DDFF">)}</span><span style="color: #C3E88D">) must match &quot;</span>
</span><span id="__span-0-260"><a id="__codelineno-0-260" name="__codelineno-0-260"></a>                <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;DataFrame length (</span><span style="color: #89DDFF">{</span><span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)}</span><span style="color: #C3E88D">)&quot;</span>
</span><span id="__span-0-261"><a id="__codelineno-0-261" name="__codelineno-0-261"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-262"><a id="__codelineno-0-262" name="__codelineno-0-262"></a>
</span><span id="__span-0-263"><a id="__codelineno-0-263" name="__codelineno-0-263"></a>        <span style="color: #EFF">risk_assessments</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[]</span>
</span><span id="__span-0-264"><a id="__codelineno-0-264" name="__codelineno-0-264"></a>
</span><span id="__span-0-265"><a id="__codelineno-0-265" name="__codelineno-0-265"></a>        <span style="color: #546E7A; font-style: italic"># Get patient references</span>
</span><span id="__span-0-266"><a id="__codelineno-0-266" name="__codelineno-0-266"></a>        <span style="color: #BB80B3">if</span> <span style="color: #C3E88D">&quot;patient_ref&quot;</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-267"><a id="__codelineno-0-267" name="__codelineno-0-267"></a>            <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;DataFrame must have &#39;patient_ref&#39; column&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-268"><a id="__codelineno-0-268" name="__codelineno-0-268"></a>
</span><span id="__span-0-269"><a id="__codelineno-0-269" name="__codelineno-0-269"></a>        <span style="color: #BB80B3">for</span> <span style="color: #EFF">idx</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">row</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">iterrows</span><span style="color: #89DDFF">():</span>
</span><span id="__span-0-270"><a id="__codelineno-0-270" name="__codelineno-0-270"></a>            <span style="color: #EFF">patient_ref</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">row</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;patient_ref&quot;</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-271"><a id="__codelineno-0-271" name="__codelineno-0-271"></a>            <span style="color: #EFF">prediction</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">int</span><span style="color: #89DDFF">(</span><span style="color: #EFF">predictions</span><span style="color: #89DDFF">[</span><span style="color: #EFF">idx</span><span style="color: #89DDFF">])</span>
</span><span id="__span-0-272"><a id="__codelineno-0-272" name="__codelineno-0-272"></a>            <span style="color: #EFF">probability</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">float</span><span style="color: #89DDFF">(</span><span style="color: #EFF">probabilities</span><span style="color: #89DDFF">[</span><span style="color: #EFF">idx</span><span style="color: #89DDFF">])</span>
</span><span id="__span-0-273"><a id="__codelineno-0-273" name="__codelineno-0-273"></a>
</span><span id="__span-0-274"><a id="__codelineno-0-274" name="__codelineno-0-274"></a>            <span style="color: #546E7A; font-style: italic"># Determine qualitative risk</span>
</span><span id="__span-0-275"><a id="__codelineno-0-275" name="__codelineno-0-275"></a>            <span style="color: #BB80B3">if</span> <span style="color: #EFF">probability</span> <span style="color: #89DDFF">&gt;=</span> <span style="color: #EFF">high_threshold</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-276"><a id="__codelineno-0-276" name="__codelineno-0-276"></a>                <span style="color: #EFF">qualitative_risk</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;high&quot;</span>
</span><span id="__span-0-277"><a id="__codelineno-0-277" name="__codelineno-0-277"></a>            <span style="color: #BB80B3">elif</span> <span style="color: #EFF">probability</span> <span style="color: #89DDFF">&gt;=</span> <span style="color: #EFF">moderate_threshold</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-278"><a id="__codelineno-0-278" name="__codelineno-0-278"></a>                <span style="color: #EFF">qualitative_risk</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;moderate&quot;</span>
</span><span id="__span-0-279"><a id="__codelineno-0-279" name="__codelineno-0-279"></a>            <span style="color: #BB80B3">else</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-280"><a id="__codelineno-0-280" name="__codelineno-0-280"></a>                <span style="color: #EFF">qualitative_risk</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;low&quot;</span>
</span><span id="__span-0-281"><a id="__codelineno-0-281" name="__codelineno-0-281"></a>
</span><span id="__span-0-282"><a id="__codelineno-0-282" name="__codelineno-0-282"></a>            <span style="color: #546E7A; font-style: italic"># Build prediction dict</span>
</span><span id="__span-0-283"><a id="__codelineno-0-283" name="__codelineno-0-283"></a>            <span style="color: #EFF">prediction_dict</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-284"><a id="__codelineno-0-284" name="__codelineno-0-284"></a>                <span style="color: #C3E88D">&quot;outcome&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-285"><a id="__codelineno-0-285" name="__codelineno-0-285"></a>                    <span style="color: #C3E88D">&quot;code&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">outcome_code</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-286"><a id="__codelineno-0-286" name="__codelineno-0-286"></a>                    <span style="color: #C3E88D">&quot;display&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">outcome_display</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-287"><a id="__codelineno-0-287" name="__codelineno-0-287"></a>                    <span style="color: #C3E88D">&quot;system&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">outcome_system</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-288"><a id="__codelineno-0-288" name="__codelineno-0-288"></a>                <span style="color: #89DDFF">},</span>
</span><span id="__span-0-289"><a id="__codelineno-0-289" name="__codelineno-0-289"></a>                <span style="color: #C3E88D">&quot;probability&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">probability</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-290"><a id="__codelineno-0-290" name="__codelineno-0-290"></a>                <span style="color: #C3E88D">&quot;qualitative_risk&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">qualitative_risk</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-291"><a id="__codelineno-0-291" name="__codelineno-0-291"></a>            <span style="color: #89DDFF">}</span>
</span><span id="__span-0-292"><a id="__codelineno-0-292" name="__codelineno-0-292"></a>
</span><span id="__span-0-293"><a id="__codelineno-0-293" name="__codelineno-0-293"></a>            <span style="color: #546E7A; font-style: italic"># Create method CodeableConcept if model info provided</span>
</span><span id="__span-0-294"><a id="__codelineno-0-294" name="__codelineno-0-294"></a>            <span style="color: #EFF">method</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-295"><a id="__codelineno-0-295" name="__codelineno-0-295"></a>            <span style="color: #BB80B3">if</span> <span style="color: #EFF">model_name</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-296"><a id="__codelineno-0-296" name="__codelineno-0-296"></a>                <span style="color: #EFF">method</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">create_single_codeable_concept</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-297"><a id="__codelineno-0-297" name="__codelineno-0-297"></a>                    <span style="color: #EFF">code</span><span style="color: #89DDFF">=</span><span style="color: #EFF">model_name</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-298"><a id="__codelineno-0-298" name="__codelineno-0-298"></a>                    <span style="color: #EFF">display</span><span style="color: #89DDFF">=</span><span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;</span><span style="color: #89DDFF">{</span><span style="color: #EFF">model_name</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D"> v</span><span style="color: #89DDFF">{</span><span style="color: #EFF">model_version</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-299"><a id="__codelineno-0-299" name="__codelineno-0-299"></a>                    <span style="color: #BB80B3">if</span> <span style="color: #EFF">model_version</span>
</span><span id="__span-0-300"><a id="__codelineno-0-300" name="__codelineno-0-300"></a>                    <span style="color: #BB80B3">else</span> <span style="color: #EFF">model_name</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-301"><a id="__codelineno-0-301" name="__codelineno-0-301"></a>                    <span style="color: #EFF">system</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&quot;https://healthchain.github.io/ml-models&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-302"><a id="__codelineno-0-302" name="__codelineno-0-302"></a>                <span style="color: #89DDFF">)</span>
</span><span id="__span-0-303"><a id="__codelineno-0-303" name="__codelineno-0-303"></a>
</span><span id="__span-0-304"><a id="__codelineno-0-304" name="__codelineno-0-304"></a>            <span style="color: #546E7A; font-style: italic"># Create comment with prediction details</span>
</span><span id="__span-0-305"><a id="__codelineno-0-305" name="__codelineno-0-305"></a>            <span style="color: #EFF">comment</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">(</span>
</span><span id="__span-0-306"><a id="__codelineno-0-306" name="__codelineno-0-306"></a>                <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;ML prediction: </span><span style="color: #89DDFF">{</span><span style="color: #C3E88D">&#39;Positive&#39;</span><span style="color: #EFF"> </span><span style="color: #BB80B3">if</span><span style="color: #EFF"> prediction </span><span style="color: #89DDFF">==</span><span style="color: #EFF"> </span><span style="color: #F78C6C">1</span><span style="color: #EFF"> </span><span style="color: #BB80B3">else</span><span style="color: #EFF"> </span><span style="color: #C3E88D">&#39;Negative&#39;</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D"> &quot;</span>
</span><span id="__span-0-307"><a id="__codelineno-0-307" name="__codelineno-0-307"></a>                <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;(probability: </span><span style="color: #89DDFF">{</span><span style="color: #EFF">probability</span><span style="color: #89DDFF">:</span><span style="color: #C3E88D">.2%</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">, risk: </span><span style="color: #89DDFF">{</span><span style="color: #EFF">qualitative_risk</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">)&quot;</span>
</span><span id="__span-0-308"><a id="__codelineno-0-308" name="__codelineno-0-308"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-309"><a id="__codelineno-0-309" name="__codelineno-0-309"></a>
</span><span id="__span-0-310"><a id="__codelineno-0-310" name="__codelineno-0-310"></a>            <span style="color: #546E7A; font-style: italic"># Create RiskAssessment</span>
</span><span id="__span-0-311"><a id="__codelineno-0-311" name="__codelineno-0-311"></a>            <span style="color: #EFF">risk_assessment</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">create_risk_assessment_from_prediction</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-312"><a id="__codelineno-0-312" name="__codelineno-0-312"></a>                <span style="color: #EFF">subject</span><span style="color: #89DDFF">=</span><span style="color: #EFF">patient_ref</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-313"><a id="__codelineno-0-313" name="__codelineno-0-313"></a>                <span style="color: #EFF">prediction</span><span style="color: #89DDFF">=</span><span style="color: #EFF">prediction_dict</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-314"><a id="__codelineno-0-314" name="__codelineno-0-314"></a>                <span style="color: #EFF">method</span><span style="color: #89DDFF">=</span><span style="color: #EFF">method</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-315"><a id="__codelineno-0-315" name="__codelineno-0-315"></a>                <span style="color: #EFF">comment</span><span style="color: #89DDFF">=</span><span style="color: #EFF">comment</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-316"><a id="__codelineno-0-316" name="__codelineno-0-316"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-317"><a id="__codelineno-0-317" name="__codelineno-0-317"></a>
</span><span id="__span-0-318"><a id="__codelineno-0-318" name="__codelineno-0-318"></a>            <span style="color: #EFF">risk_assessments</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">risk_assessment</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-319"><a id="__codelineno-0-319" name="__codelineno-0-319"></a>
</span><span id="__span-0-320"><a id="__codelineno-0-320" name="__codelineno-0-320"></a>        <span style="color: #BB80B3">return</span> <span style="color: #EFF">risk_assessments</span>
</span></code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.dataset.Dataset.from_fhir_bundle" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">from_fhir_bundle</span><span style="color: #89DDFF">(</span><span style="color: #EFF">bundle</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">schema</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">aggregation</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&#39;mean&#39;</span><span style="color: #89DDFF">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Create Dataset from a FHIR Bundle using a feature schema.</p>
<p>Extracts features from FHIR resources according to the schema specification,
converting FHIR data to a pandas DataFrame suitable for ML inference.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>bundle</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>FHIR Bundle resource (object or dict)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[<span title="fhir.resources.bundle.Bundle">Bundle</span>, <span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>schema</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>FeatureSchema object, or path to YAML schema file</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="pathlib.Path">Path</span>, <a class="autorefs autorefs-internal" title="FeatureSchema (healthchain.io.containers.featureschema.FeatureSchema)" href="#healthchain.io.containers.featureschema.FeatureSchema">FeatureSchema</a>]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>aggregation</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>How to aggregate multiple observation values (default: "mean")
Options: "mean", "median", "max", "min", "last" (default: "mean")</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#39;mean&#39;</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="Dataset


  
      dataclass
   (healthchain.io.containers.dataset.Dataset)" href="#healthchain.io.containers.dataset.Dataset">Dataset</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Dataset container with extracted features</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>from fhir.resources.bundle import Bundle
bundle = Bundle(**patient_data)
dataset = Dataset.from_fhir_bundle(
...     bundle,
...     schema="healthchain/configs/features/sepsis_vitals.yaml"
... )
df = dataset.data</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/dataset.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-89"> 89</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-90"> 90</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-91"> 91</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-92"> 92</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-93"> 93</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-94"> 94</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-95"> 95</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-96"> 96</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-97"> 97</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-98"> 98</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-99"> 99</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-100">100</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-101">101</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-102">102</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-103">103</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-104">104</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-105">105</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-106">106</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-107">107</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-108">108</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-109">109</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-110">110</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-111">111</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-112">112</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-113">113</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-114">114</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-115">115</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-116">116</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-117">117</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-118">118</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-119">119</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-120">120</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-121">121</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-122">122</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-123">123</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-124">124</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-125">125</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-126">126</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-127">127</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-89"><a id="__codelineno-0-89" name="__codelineno-0-89"></a><span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-90"><a id="__codelineno-0-90" name="__codelineno-0-90"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">from_fhir_bundle</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-91"><a id="__codelineno-0-91" name="__codelineno-0-91"></a>    <span style="color: #89DDFF">cls,</span>
</span><span id="__span-0-92"><a id="__codelineno-0-92" name="__codelineno-0-92"></a>    <span style="color: #EFF">bundle</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Union</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Bundle</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]],</span>
</span><span id="__span-0-93"><a id="__codelineno-0-93" name="__codelineno-0-93"></a>    <span style="color: #EFF">schema</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Union</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">FeatureSchema</span><span style="color: #89DDFF">],</span>
</span><span id="__span-0-94"><a id="__codelineno-0-94" name="__codelineno-0-94"></a>    <span style="color: #EFF">aggregation</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;mean&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-95"><a id="__codelineno-0-95" name="__codelineno-0-95"></a><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;Dataset&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-96"><a id="__codelineno-0-96" name="__codelineno-0-96"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Create Dataset from a FHIR Bundle using a feature schema.</span>
</span><span id="__span-0-97"><a id="__codelineno-0-97" name="__codelineno-0-97"></a>
</span><span id="__span-0-98"><a id="__codelineno-0-98" name="__codelineno-0-98"></a><span style="color: #546E7A; font-style: italic">    Extracts features from FHIR resources according to the schema specification,</span>
</span><span id="__span-0-99"><a id="__codelineno-0-99" name="__codelineno-0-99"></a><span style="color: #546E7A; font-style: italic">    converting FHIR data to a pandas DataFrame suitable for ML inference.</span>
</span><span id="__span-0-100"><a id="__codelineno-0-100" name="__codelineno-0-100"></a>
</span><span id="__span-0-101"><a id="__codelineno-0-101" name="__codelineno-0-101"></a><span style="color: #546E7A; font-style: italic">    Args:</span>
</span><span id="__span-0-102"><a id="__codelineno-0-102" name="__codelineno-0-102"></a><span style="color: #546E7A; font-style: italic">        bundle: FHIR Bundle resource (object or dict)</span>
</span><span id="__span-0-103"><a id="__codelineno-0-103" name="__codelineno-0-103"></a><span style="color: #546E7A; font-style: italic">        schema: FeatureSchema object, or path to YAML schema file</span>
</span><span id="__span-0-104"><a id="__codelineno-0-104" name="__codelineno-0-104"></a><span style="color: #546E7A; font-style: italic">        aggregation: How to aggregate multiple observation values (default: &quot;mean&quot;)</span>
</span><span id="__span-0-105"><a id="__codelineno-0-105" name="__codelineno-0-105"></a><span style="color: #546E7A; font-style: italic">            Options: &quot;mean&quot;, &quot;median&quot;, &quot;max&quot;, &quot;min&quot;, &quot;last&quot; (default: &quot;mean&quot;)</span>
</span><span id="__span-0-106"><a id="__codelineno-0-106" name="__codelineno-0-106"></a>
</span><span id="__span-0-107"><a id="__codelineno-0-107" name="__codelineno-0-107"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-108"><a id="__codelineno-0-108" name="__codelineno-0-108"></a><span style="color: #546E7A; font-style: italic">        Dataset container with extracted features</span>
</span><span id="__span-0-109"><a id="__codelineno-0-109" name="__codelineno-0-109"></a>
</span><span id="__span-0-110"><a id="__codelineno-0-110" name="__codelineno-0-110"></a><span style="color: #546E7A; font-style: italic">    Example:</span>
</span><span id="__span-0-111"><a id="__codelineno-0-111" name="__codelineno-0-111"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; from fhir.resources.bundle import Bundle</span>
</span><span id="__span-0-112"><a id="__codelineno-0-112" name="__codelineno-0-112"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; bundle = Bundle(**patient_data)</span>
</span><span id="__span-0-113"><a id="__codelineno-0-113" name="__codelineno-0-113"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; dataset = Dataset.from_fhir_bundle(</span>
</span><span id="__span-0-114"><a id="__codelineno-0-114" name="__codelineno-0-114"></a><span style="color: #546E7A; font-style: italic">        ...     bundle,</span>
</span><span id="__span-0-115"><a id="__codelineno-0-115" name="__codelineno-0-115"></a><span style="color: #546E7A; font-style: italic">        ...     schema=&quot;healthchain/configs/features/sepsis_vitals.yaml&quot;</span>
</span><span id="__span-0-116"><a id="__codelineno-0-116" name="__codelineno-0-116"></a><span style="color: #546E7A; font-style: italic">        ... )</span>
</span><span id="__span-0-117"><a id="__codelineno-0-117" name="__codelineno-0-117"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; df = dataset.data</span>
</span><span id="__span-0-118"><a id="__codelineno-0-118" name="__codelineno-0-118"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-119"><a id="__codelineno-0-119" name="__codelineno-0-119"></a>    <span style="color: #546E7A; font-style: italic"># Load schema if path provided</span>
</span><span id="__span-0-120"><a id="__codelineno-0-120" name="__codelineno-0-120"></a>    <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">schema</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">(</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">)):</span>
</span><span id="__span-0-121"><a id="__codelineno-0-121" name="__codelineno-0-121"></a>        <span style="color: #EFF">schema</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">FeatureSchema</span><span style="color: #89DDFF">.</span><span style="color: #EFF">from_yaml</span><span style="color: #89DDFF">(</span><span style="color: #EFF">schema</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-122"><a id="__codelineno-0-122" name="__codelineno-0-122"></a>
</span><span id="__span-0-123"><a id="__codelineno-0-123" name="__codelineno-0-123"></a>    <span style="color: #546E7A; font-style: italic"># Extract features using mapper</span>
</span><span id="__span-0-124"><a id="__codelineno-0-124" name="__codelineno-0-124"></a>    <span style="color: #EFF">mapper</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">FHIRFeatureMapper</span><span style="color: #89DDFF">(</span><span style="color: #EFF">schema</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-125"><a id="__codelineno-0-125" name="__codelineno-0-125"></a>    <span style="color: #EFF">df</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">mapper</span><span style="color: #89DDFF">.</span><span style="color: #EFF">extract_features</span><span style="color: #89DDFF">(</span><span style="color: #EFF">bundle</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">aggregation</span><span style="color: #89DDFF">=</span><span style="color: #EFF">aggregation</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-126"><a id="__codelineno-0-126" name="__codelineno-0-126"></a>
</span><span id="__span-0-127"><a id="__codelineno-0-127" name="__codelineno-0-127"></a>    <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">cls(</span><span style="color: #EFF">df</span><span style="color: #89DDFF">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.dataset.Dataset.to_risk_assessment" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">to_risk_assessment</span><span style="color: #89DDFF">(</span><span style="color: #EFF">outcome_code</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">outcome_display</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">outcome_system</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&#39;http://hl7.org/fhir/sid/icd-10&#39;</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">model_name</span><span style="color: #89DDFF">=None,</span> <span style="color: #EFF">model_version</span><span style="color: #89DDFF">=None,</span> <span style="color: #EFF">high_threshold</span><span style="color: #89DDFF">=</span><span style="color: #F78C6C">0.7</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">moderate_threshold</span><span style="color: #89DDFF">=</span><span style="color: #F78C6C">0.4</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">predictions</span><span style="color: #89DDFF">=None,</span> <span style="color: #EFF">probabilities</span><span style="color: #89DDFF">=None)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Convert model predictions to FHIR RiskAssessment resources.</p>
<p>Creates RiskAssessment resources from ML model output, suitable for
including in FHIR Bundles or sending to FHIR servers.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>outcome_code</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Code for the predicted outcome (e.g., "A41.9" for sepsis)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>outcome_display</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Display text for the outcome (e.g., "Sepsis")</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>outcome_system</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Code system for the outcome (default: ICD-10)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#39;http://hl7.org/fhir/sid/icd-10&#39;</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>model_name</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Name of the ML model (optional)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>model_version</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Version of the ML model (optional)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>high_threshold</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Threshold for high risk (default: 0.7)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="float">float</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>0.7</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>moderate_threshold</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Threshold for moderate risk (default: 0.4)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="float">float</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>0.4</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>predictions</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Binary predictions array (0/1). Defaults to metadata["predictions"]</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="numpy.ndarray">ndarray</span>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>probabilities</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Probability scores array (0-1). Defaults to metadata["probabilities"]</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="numpy.ndarray">ndarray</span>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.List">List</span>[<span title="fhir.resources.riskassessment.RiskAssessment">RiskAssessment</span>]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>List of RiskAssessment resources, one per patient</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>risk_assessments = dataset.to_risk_assessment(
...     outcome_code="A41.9",
...     outcome_display="Sepsis, unspecified",
...     model_name="RandomForest",
...     model_version="1.0"
... )</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/dataset.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-201">201</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-202">202</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-203">203</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-204">204</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-205">205</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-206">206</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-207">207</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-208">208</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-209">209</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-210">210</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-211">211</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-212">212</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-213">213</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-214">214</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-215">215</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-216">216</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-217">217</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-218">218</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-219">219</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-220">220</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-221">221</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-222">222</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-223">223</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-224">224</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-225">225</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-226">226</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-227">227</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-228">228</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-229">229</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-230">230</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-231">231</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-232">232</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-233">233</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-234">234</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-235">235</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-236">236</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-237">237</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-238">238</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-239">239</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-240">240</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-241">241</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-242">242</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-243">243</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-244">244</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-245">245</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-246">246</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-247">247</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-248">248</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-249">249</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-250">250</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-251">251</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-252">252</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-253">253</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-254">254</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-255">255</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-256">256</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-257">257</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-258">258</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-259">259</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-260">260</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-261">261</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-262">262</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-263">263</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-264">264</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-265">265</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-266">266</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-267">267</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-268">268</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-269">269</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-270">270</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-271">271</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-272">272</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-273">273</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-274">274</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-275">275</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-276">276</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-277">277</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-278">278</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-279">279</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-280">280</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-281">281</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-282">282</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-283">283</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-284">284</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-285">285</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-286">286</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-287">287</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-288">288</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-289">289</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-290">290</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-291">291</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-292">292</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-293">293</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-294">294</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-295">295</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-296">296</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-297">297</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-298">298</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-299">299</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-300">300</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-301">301</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-302">302</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-303">303</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-304">304</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-305">305</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-306">306</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-307">307</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-308">308</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-309">309</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-310">310</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-311">311</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-312">312</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-313">313</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-314">314</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-315">315</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-316">316</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-317">317</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-318">318</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-319">319</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-320">320</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-201"><a id="__codelineno-0-201" name="__codelineno-0-201"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">to_risk_assessment</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-202"><a id="__codelineno-0-202" name="__codelineno-0-202"></a>    <span style="color: #89DDFF">self,</span>
</span><span id="__span-0-203"><a id="__codelineno-0-203" name="__codelineno-0-203"></a>    <span style="color: #EFF">outcome_code</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-204"><a id="__codelineno-0-204" name="__codelineno-0-204"></a>    <span style="color: #EFF">outcome_display</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-205"><a id="__codelineno-0-205" name="__codelineno-0-205"></a>    <span style="color: #EFF">outcome_system</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;http://hl7.org/fhir/sid/icd-10&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-206"><a id="__codelineno-0-206" name="__codelineno-0-206"></a>    <span style="color: #EFF">model_name</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None,</span>
</span><span id="__span-0-207"><a id="__codelineno-0-207" name="__codelineno-0-207"></a>    <span style="color: #EFF">model_version</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None,</span>
</span><span id="__span-0-208"><a id="__codelineno-0-208" name="__codelineno-0-208"></a>    <span style="color: #EFF">high_threshold</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">float</span> <span style="color: #89DDFF">=</span> <span style="color: #F78C6C">0.7</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-209"><a id="__codelineno-0-209" name="__codelineno-0-209"></a>    <span style="color: #EFF">moderate_threshold</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">float</span> <span style="color: #89DDFF">=</span> <span style="color: #F78C6C">0.4</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-210"><a id="__codelineno-0-210" name="__codelineno-0-210"></a>    <span style="color: #EFF">predictions</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">np</span><span style="color: #89DDFF">.</span><span style="color: #EFF">ndarray</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None,</span>
</span><span id="__span-0-211"><a id="__codelineno-0-211" name="__codelineno-0-211"></a>    <span style="color: #EFF">probabilities</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">np</span><span style="color: #89DDFF">.</span><span style="color: #EFF">ndarray</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None,</span>
</span><span id="__span-0-212"><a id="__codelineno-0-212" name="__codelineno-0-212"></a><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">RiskAssessment</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-213"><a id="__codelineno-0-213" name="__codelineno-0-213"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Convert model predictions to FHIR RiskAssessment resources.</span>
</span><span id="__span-0-214"><a id="__codelineno-0-214" name="__codelineno-0-214"></a>
</span><span id="__span-0-215"><a id="__codelineno-0-215" name="__codelineno-0-215"></a><span style="color: #546E7A; font-style: italic">    Creates RiskAssessment resources from ML model output, suitable for</span>
</span><span id="__span-0-216"><a id="__codelineno-0-216" name="__codelineno-0-216"></a><span style="color: #546E7A; font-style: italic">    including in FHIR Bundles or sending to FHIR servers.</span>
</span><span id="__span-0-217"><a id="__codelineno-0-217" name="__codelineno-0-217"></a>
</span><span id="__span-0-218"><a id="__codelineno-0-218" name="__codelineno-0-218"></a><span style="color: #546E7A; font-style: italic">    Args:</span>
</span><span id="__span-0-219"><a id="__codelineno-0-219" name="__codelineno-0-219"></a><span style="color: #546E7A; font-style: italic">        outcome_code: Code for the predicted outcome (e.g., &quot;A41.9&quot; for sepsis)</span>
</span><span id="__span-0-220"><a id="__codelineno-0-220" name="__codelineno-0-220"></a><span style="color: #546E7A; font-style: italic">        outcome_display: Display text for the outcome (e.g., &quot;Sepsis&quot;)</span>
</span><span id="__span-0-221"><a id="__codelineno-0-221" name="__codelineno-0-221"></a><span style="color: #546E7A; font-style: italic">        outcome_system: Code system for the outcome (default: ICD-10)</span>
</span><span id="__span-0-222"><a id="__codelineno-0-222" name="__codelineno-0-222"></a><span style="color: #546E7A; font-style: italic">        model_name: Name of the ML model (optional)</span>
</span><span id="__span-0-223"><a id="__codelineno-0-223" name="__codelineno-0-223"></a><span style="color: #546E7A; font-style: italic">        model_version: Version of the ML model (optional)</span>
</span><span id="__span-0-224"><a id="__codelineno-0-224" name="__codelineno-0-224"></a><span style="color: #546E7A; font-style: italic">        high_threshold: Threshold for high risk (default: 0.7)</span>
</span><span id="__span-0-225"><a id="__codelineno-0-225" name="__codelineno-0-225"></a><span style="color: #546E7A; font-style: italic">        moderate_threshold: Threshold for moderate risk (default: 0.4)</span>
</span><span id="__span-0-226"><a id="__codelineno-0-226" name="__codelineno-0-226"></a><span style="color: #546E7A; font-style: italic">        predictions: Binary predictions array (0/1). Defaults to metadata[&quot;predictions&quot;]</span>
</span><span id="__span-0-227"><a id="__codelineno-0-227" name="__codelineno-0-227"></a><span style="color: #546E7A; font-style: italic">        probabilities: Probability scores array (0-1). Defaults to metadata[&quot;probabilities&quot;]</span>
</span><span id="__span-0-228"><a id="__codelineno-0-228" name="__codelineno-0-228"></a>
</span><span id="__span-0-229"><a id="__codelineno-0-229" name="__codelineno-0-229"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-230"><a id="__codelineno-0-230" name="__codelineno-0-230"></a><span style="color: #546E7A; font-style: italic">        List of RiskAssessment resources, one per patient</span>
</span><span id="__span-0-231"><a id="__codelineno-0-231" name="__codelineno-0-231"></a>
</span><span id="__span-0-232"><a id="__codelineno-0-232" name="__codelineno-0-232"></a><span style="color: #546E7A; font-style: italic">    Example:</span>
</span><span id="__span-0-233"><a id="__codelineno-0-233" name="__codelineno-0-233"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; risk_assessments = dataset.to_risk_assessment(</span>
</span><span id="__span-0-234"><a id="__codelineno-0-234" name="__codelineno-0-234"></a><span style="color: #546E7A; font-style: italic">        ...     outcome_code=&quot;A41.9&quot;,</span>
</span><span id="__span-0-235"><a id="__codelineno-0-235" name="__codelineno-0-235"></a><span style="color: #546E7A; font-style: italic">        ...     outcome_display=&quot;Sepsis, unspecified&quot;,</span>
</span><span id="__span-0-236"><a id="__codelineno-0-236" name="__codelineno-0-236"></a><span style="color: #546E7A; font-style: italic">        ...     model_name=&quot;RandomForest&quot;,</span>
</span><span id="__span-0-237"><a id="__codelineno-0-237" name="__codelineno-0-237"></a><span style="color: #546E7A; font-style: italic">        ...     model_version=&quot;1.0&quot;</span>
</span><span id="__span-0-238"><a id="__codelineno-0-238" name="__codelineno-0-238"></a><span style="color: #546E7A; font-style: italic">        ... )</span>
</span><span id="__span-0-239"><a id="__codelineno-0-239" name="__codelineno-0-239"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-240"><a id="__codelineno-0-240" name="__codelineno-0-240"></a>    <span style="color: #546E7A; font-style: italic"># Fall back to metadata if not provided</span>
</span><span id="__span-0-241"><a id="__codelineno-0-241" name="__codelineno-0-241"></a>    <span style="color: #BB80B3">if</span> <span style="color: #EFF">predictions</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-242"><a id="__codelineno-0-242" name="__codelineno-0-242"></a>        <span style="color: #EFF">predictions</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">metadata</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;predictions&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-243"><a id="__codelineno-0-243" name="__codelineno-0-243"></a>    <span style="color: #BB80B3">if</span> <span style="color: #EFF">probabilities</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-244"><a id="__codelineno-0-244" name="__codelineno-0-244"></a>        <span style="color: #EFF">probabilities</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">metadata</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;probabilities&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-245"><a id="__codelineno-0-245" name="__codelineno-0-245"></a>
</span><span id="__span-0-246"><a id="__codelineno-0-246" name="__codelineno-0-246"></a>    <span style="color: #BB80B3">if</span> <span style="color: #EFF">predictions</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None</span> <span style="color: #89DDFF; font-style: italic">or</span> <span style="color: #EFF">probabilities</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-247"><a id="__codelineno-0-247" name="__codelineno-0-247"></a>        <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-248"><a id="__codelineno-0-248" name="__codelineno-0-248"></a>            <span style="color: #C3E88D">&quot;predictions and probabilities must be provided or available in metadata&quot;</span>
</span><span id="__span-0-249"><a id="__codelineno-0-249" name="__codelineno-0-249"></a>        <span style="color: #89DDFF">)</span>
</span><span id="__span-0-250"><a id="__codelineno-0-250" name="__codelineno-0-250"></a>
</span><span id="__span-0-251"><a id="__codelineno-0-251" name="__codelineno-0-251"></a>    <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(</span><span style="color: #EFF">predictions</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">!=</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-252"><a id="__codelineno-0-252" name="__codelineno-0-252"></a>        <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-253"><a id="__codelineno-0-253" name="__codelineno-0-253"></a>            <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Predictions length (</span><span style="color: #89DDFF">{</span><span style="color: #82AAFF">len</span><span style="color: #89DDFF">(</span><span style="color: #EFF">predictions</span><span style="color: #89DDFF">)}</span><span style="color: #C3E88D">) must match &quot;</span>
</span><span id="__span-0-254"><a id="__codelineno-0-254" name="__codelineno-0-254"></a>            <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;DataFrame length (</span><span style="color: #89DDFF">{</span><span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)}</span><span style="color: #C3E88D">)&quot;</span>
</span><span id="__span-0-255"><a id="__codelineno-0-255" name="__codelineno-0-255"></a>        <span style="color: #89DDFF">)</span>
</span><span id="__span-0-256"><a id="__codelineno-0-256" name="__codelineno-0-256"></a>
</span><span id="__span-0-257"><a id="__codelineno-0-257" name="__codelineno-0-257"></a>    <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(</span><span style="color: #EFF">probabilities</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">!=</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-258"><a id="__codelineno-0-258" name="__codelineno-0-258"></a>        <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-259"><a id="__codelineno-0-259" name="__codelineno-0-259"></a>            <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Probabilities length (</span><span style="color: #89DDFF">{</span><span style="color: #82AAFF">len</span><span style="color: #89DDFF">(</span><span style="color: #EFF">probabilities</span><span style="color: #89DDFF">)}</span><span style="color: #C3E88D">) must match &quot;</span>
</span><span id="__span-0-260"><a id="__codelineno-0-260" name="__codelineno-0-260"></a>            <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;DataFrame length (</span><span style="color: #89DDFF">{</span><span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)}</span><span style="color: #C3E88D">)&quot;</span>
</span><span id="__span-0-261"><a id="__codelineno-0-261" name="__codelineno-0-261"></a>        <span style="color: #89DDFF">)</span>
</span><span id="__span-0-262"><a id="__codelineno-0-262" name="__codelineno-0-262"></a>
</span><span id="__span-0-263"><a id="__codelineno-0-263" name="__codelineno-0-263"></a>    <span style="color: #EFF">risk_assessments</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[]</span>
</span><span id="__span-0-264"><a id="__codelineno-0-264" name="__codelineno-0-264"></a>
</span><span id="__span-0-265"><a id="__codelineno-0-265" name="__codelineno-0-265"></a>    <span style="color: #546E7A; font-style: italic"># Get patient references</span>
</span><span id="__span-0-266"><a id="__codelineno-0-266" name="__codelineno-0-266"></a>    <span style="color: #BB80B3">if</span> <span style="color: #C3E88D">&quot;patient_ref&quot;</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-267"><a id="__codelineno-0-267" name="__codelineno-0-267"></a>        <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;DataFrame must have &#39;patient_ref&#39; column&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-268"><a id="__codelineno-0-268" name="__codelineno-0-268"></a>
</span><span id="__span-0-269"><a id="__codelineno-0-269" name="__codelineno-0-269"></a>    <span style="color: #BB80B3">for</span> <span style="color: #EFF">idx</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">row</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">iterrows</span><span style="color: #89DDFF">():</span>
</span><span id="__span-0-270"><a id="__codelineno-0-270" name="__codelineno-0-270"></a>        <span style="color: #EFF">patient_ref</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">row</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;patient_ref&quot;</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-271"><a id="__codelineno-0-271" name="__codelineno-0-271"></a>        <span style="color: #EFF">prediction</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">int</span><span style="color: #89DDFF">(</span><span style="color: #EFF">predictions</span><span style="color: #89DDFF">[</span><span style="color: #EFF">idx</span><span style="color: #89DDFF">])</span>
</span><span id="__span-0-272"><a id="__codelineno-0-272" name="__codelineno-0-272"></a>        <span style="color: #EFF">probability</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">float</span><span style="color: #89DDFF">(</span><span style="color: #EFF">probabilities</span><span style="color: #89DDFF">[</span><span style="color: #EFF">idx</span><span style="color: #89DDFF">])</span>
</span><span id="__span-0-273"><a id="__codelineno-0-273" name="__codelineno-0-273"></a>
</span><span id="__span-0-274"><a id="__codelineno-0-274" name="__codelineno-0-274"></a>        <span style="color: #546E7A; font-style: italic"># Determine qualitative risk</span>
</span><span id="__span-0-275"><a id="__codelineno-0-275" name="__codelineno-0-275"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">probability</span> <span style="color: #89DDFF">&gt;=</span> <span style="color: #EFF">high_threshold</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-276"><a id="__codelineno-0-276" name="__codelineno-0-276"></a>            <span style="color: #EFF">qualitative_risk</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;high&quot;</span>
</span><span id="__span-0-277"><a id="__codelineno-0-277" name="__codelineno-0-277"></a>        <span style="color: #BB80B3">elif</span> <span style="color: #EFF">probability</span> <span style="color: #89DDFF">&gt;=</span> <span style="color: #EFF">moderate_threshold</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-278"><a id="__codelineno-0-278" name="__codelineno-0-278"></a>            <span style="color: #EFF">qualitative_risk</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;moderate&quot;</span>
</span><span id="__span-0-279"><a id="__codelineno-0-279" name="__codelineno-0-279"></a>        <span style="color: #BB80B3">else</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-280"><a id="__codelineno-0-280" name="__codelineno-0-280"></a>            <span style="color: #EFF">qualitative_risk</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;low&quot;</span>
</span><span id="__span-0-281"><a id="__codelineno-0-281" name="__codelineno-0-281"></a>
</span><span id="__span-0-282"><a id="__codelineno-0-282" name="__codelineno-0-282"></a>        <span style="color: #546E7A; font-style: italic"># Build prediction dict</span>
</span><span id="__span-0-283"><a id="__codelineno-0-283" name="__codelineno-0-283"></a>        <span style="color: #EFF">prediction_dict</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-284"><a id="__codelineno-0-284" name="__codelineno-0-284"></a>            <span style="color: #C3E88D">&quot;outcome&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-285"><a id="__codelineno-0-285" name="__codelineno-0-285"></a>                <span style="color: #C3E88D">&quot;code&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">outcome_code</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-286"><a id="__codelineno-0-286" name="__codelineno-0-286"></a>                <span style="color: #C3E88D">&quot;display&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">outcome_display</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-287"><a id="__codelineno-0-287" name="__codelineno-0-287"></a>                <span style="color: #C3E88D">&quot;system&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">outcome_system</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-288"><a id="__codelineno-0-288" name="__codelineno-0-288"></a>            <span style="color: #89DDFF">},</span>
</span><span id="__span-0-289"><a id="__codelineno-0-289" name="__codelineno-0-289"></a>            <span style="color: #C3E88D">&quot;probability&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">probability</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-290"><a id="__codelineno-0-290" name="__codelineno-0-290"></a>            <span style="color: #C3E88D">&quot;qualitative_risk&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">qualitative_risk</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-291"><a id="__codelineno-0-291" name="__codelineno-0-291"></a>        <span style="color: #89DDFF">}</span>
</span><span id="__span-0-292"><a id="__codelineno-0-292" name="__codelineno-0-292"></a>
</span><span id="__span-0-293"><a id="__codelineno-0-293" name="__codelineno-0-293"></a>        <span style="color: #546E7A; font-style: italic"># Create method CodeableConcept if model info provided</span>
</span><span id="__span-0-294"><a id="__codelineno-0-294" name="__codelineno-0-294"></a>        <span style="color: #EFF">method</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-295"><a id="__codelineno-0-295" name="__codelineno-0-295"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">model_name</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-296"><a id="__codelineno-0-296" name="__codelineno-0-296"></a>            <span style="color: #EFF">method</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">create_single_codeable_concept</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-297"><a id="__codelineno-0-297" name="__codelineno-0-297"></a>                <span style="color: #EFF">code</span><span style="color: #89DDFF">=</span><span style="color: #EFF">model_name</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-298"><a id="__codelineno-0-298" name="__codelineno-0-298"></a>                <span style="color: #EFF">display</span><span style="color: #89DDFF">=</span><span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;</span><span style="color: #89DDFF">{</span><span style="color: #EFF">model_name</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D"> v</span><span style="color: #89DDFF">{</span><span style="color: #EFF">model_version</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-299"><a id="__codelineno-0-299" name="__codelineno-0-299"></a>                <span style="color: #BB80B3">if</span> <span style="color: #EFF">model_version</span>
</span><span id="__span-0-300"><a id="__codelineno-0-300" name="__codelineno-0-300"></a>                <span style="color: #BB80B3">else</span> <span style="color: #EFF">model_name</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-301"><a id="__codelineno-0-301" name="__codelineno-0-301"></a>                <span style="color: #EFF">system</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&quot;https://healthchain.github.io/ml-models&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-302"><a id="__codelineno-0-302" name="__codelineno-0-302"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-303"><a id="__codelineno-0-303" name="__codelineno-0-303"></a>
</span><span id="__span-0-304"><a id="__codelineno-0-304" name="__codelineno-0-304"></a>        <span style="color: #546E7A; font-style: italic"># Create comment with prediction details</span>
</span><span id="__span-0-305"><a id="__codelineno-0-305" name="__codelineno-0-305"></a>        <span style="color: #EFF">comment</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">(</span>
</span><span id="__span-0-306"><a id="__codelineno-0-306" name="__codelineno-0-306"></a>            <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;ML prediction: </span><span style="color: #89DDFF">{</span><span style="color: #C3E88D">&#39;Positive&#39;</span><span style="color: #EFF"> </span><span style="color: #BB80B3">if</span><span style="color: #EFF"> prediction </span><span style="color: #89DDFF">==</span><span style="color: #EFF"> </span><span style="color: #F78C6C">1</span><span style="color: #EFF"> </span><span style="color: #BB80B3">else</span><span style="color: #EFF"> </span><span style="color: #C3E88D">&#39;Negative&#39;</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D"> &quot;</span>
</span><span id="__span-0-307"><a id="__codelineno-0-307" name="__codelineno-0-307"></a>            <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;(probability: </span><span style="color: #89DDFF">{</span><span style="color: #EFF">probability</span><span style="color: #89DDFF">:</span><span style="color: #C3E88D">.2%</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">, risk: </span><span style="color: #89DDFF">{</span><span style="color: #EFF">qualitative_risk</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">)&quot;</span>
</span><span id="__span-0-308"><a id="__codelineno-0-308" name="__codelineno-0-308"></a>        <span style="color: #89DDFF">)</span>
</span><span id="__span-0-309"><a id="__codelineno-0-309" name="__codelineno-0-309"></a>
</span><span id="__span-0-310"><a id="__codelineno-0-310" name="__codelineno-0-310"></a>        <span style="color: #546E7A; font-style: italic"># Create RiskAssessment</span>
</span><span id="__span-0-311"><a id="__codelineno-0-311" name="__codelineno-0-311"></a>        <span style="color: #EFF">risk_assessment</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">create_risk_assessment_from_prediction</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-312"><a id="__codelineno-0-312" name="__codelineno-0-312"></a>            <span style="color: #EFF">subject</span><span style="color: #89DDFF">=</span><span style="color: #EFF">patient_ref</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-313"><a id="__codelineno-0-313" name="__codelineno-0-313"></a>            <span style="color: #EFF">prediction</span><span style="color: #89DDFF">=</span><span style="color: #EFF">prediction_dict</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-314"><a id="__codelineno-0-314" name="__codelineno-0-314"></a>            <span style="color: #EFF">method</span><span style="color: #89DDFF">=</span><span style="color: #EFF">method</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-315"><a id="__codelineno-0-315" name="__codelineno-0-315"></a>            <span style="color: #EFF">comment</span><span style="color: #89DDFF">=</span><span style="color: #EFF">comment</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-316"><a id="__codelineno-0-316" name="__codelineno-0-316"></a>        <span style="color: #89DDFF">)</span>
</span><span id="__span-0-317"><a id="__codelineno-0-317" name="__codelineno-0-317"></a>
</span><span id="__span-0-318"><a id="__codelineno-0-318" name="__codelineno-0-318"></a>        <span style="color: #EFF">risk_assessments</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">risk_assessment</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-319"><a id="__codelineno-0-319" name="__codelineno-0-319"></a>
</span><span id="__span-0-320"><a id="__codelineno-0-320" name="__codelineno-0-320"></a>    <span style="color: #BB80B3">return</span> <span style="color: #EFF">risk_assessments</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.dataset.Dataset.validate" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">validate</span><span style="color: #89DDFF">(</span><span style="color: #EFF">schema</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">raise_on_error</span><span style="color: #89DDFF">=False)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Validate DataFrame against a feature schema.</p>
<p>Checks that required features are present and have correct data types.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>schema</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>FeatureSchema to validate against</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-internal" title="FeatureSchema (healthchain.io.containers.featureschema.FeatureSchema)" href="#healthchain.io.containers.featureschema.FeatureSchema">FeatureSchema</a></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>raise_on_error</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Whether to raise exception on validation failure</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="bool">bool</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="healthchain.io.types.ValidationResult">ValidationResult</span></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>ValidationResult with validation status and details</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RAISES</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code><span title="ValueError">ValueError</span></code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <p>If raise_on_error is True and validation fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>schema = FeatureSchema.from_yaml("configs/features/sepsis_vitals.yaml")
result = dataset.validate(schema)
if not result.valid:
...     print(result.errors)</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/dataset.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-129">129</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-130">130</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-131">131</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-132">132</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-133">133</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-134">134</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-135">135</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-136">136</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-137">137</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-138">138</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-139">139</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-140">140</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-141">141</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-142">142</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-143">143</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-144">144</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-145">145</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-146">146</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-147">147</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-148">148</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-149">149</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-150">150</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-151">151</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-152">152</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-153">153</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-154">154</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-155">155</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-156">156</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-157">157</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-158">158</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-159">159</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-160">160</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-161">161</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-162">162</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-163">163</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-164">164</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-165">165</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-166">166</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-167">167</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-168">168</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-169">169</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-170">170</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-171">171</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-172">172</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-173">173</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-174">174</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-175">175</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-176">176</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-177">177</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-178">178</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-179">179</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-180">180</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-181">181</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-129"><a id="__codelineno-0-129" name="__codelineno-0-129"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">validate</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-130"><a id="__codelineno-0-130" name="__codelineno-0-130"></a>    <span style="color: #89DDFF">self,</span> <span style="color: #EFF">schema</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">FeatureSchema</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">raise_on_error</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">bool</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">False</span>
</span><span id="__span-0-131"><a id="__codelineno-0-131" name="__codelineno-0-131"></a><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">ValidationResult</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-132"><a id="__codelineno-0-132" name="__codelineno-0-132"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Validate DataFrame against a feature schema.</span>
</span><span id="__span-0-133"><a id="__codelineno-0-133" name="__codelineno-0-133"></a>
</span><span id="__span-0-134"><a id="__codelineno-0-134" name="__codelineno-0-134"></a><span style="color: #546E7A; font-style: italic">    Checks that required features are present and have correct data types.</span>
</span><span id="__span-0-135"><a id="__codelineno-0-135" name="__codelineno-0-135"></a>
</span><span id="__span-0-136"><a id="__codelineno-0-136" name="__codelineno-0-136"></a><span style="color: #546E7A; font-style: italic">    Args:</span>
</span><span id="__span-0-137"><a id="__codelineno-0-137" name="__codelineno-0-137"></a><span style="color: #546E7A; font-style: italic">        schema: FeatureSchema to validate against</span>
</span><span id="__span-0-138"><a id="__codelineno-0-138" name="__codelineno-0-138"></a><span style="color: #546E7A; font-style: italic">        raise_on_error: Whether to raise exception on validation failure</span>
</span><span id="__span-0-139"><a id="__codelineno-0-139" name="__codelineno-0-139"></a>
</span><span id="__span-0-140"><a id="__codelineno-0-140" name="__codelineno-0-140"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-141"><a id="__codelineno-0-141" name="__codelineno-0-141"></a><span style="color: #546E7A; font-style: italic">        ValidationResult with validation status and details</span>
</span><span id="__span-0-142"><a id="__codelineno-0-142" name="__codelineno-0-142"></a>
</span><span id="__span-0-143"><a id="__codelineno-0-143" name="__codelineno-0-143"></a><span style="color: #546E7A; font-style: italic">    Raises:</span>
</span><span id="__span-0-144"><a id="__codelineno-0-144" name="__codelineno-0-144"></a><span style="color: #546E7A; font-style: italic">        ValueError: If raise_on_error is True and validation fails</span>
</span><span id="__span-0-145"><a id="__codelineno-0-145" name="__codelineno-0-145"></a>
</span><span id="__span-0-146"><a id="__codelineno-0-146" name="__codelineno-0-146"></a><span style="color: #546E7A; font-style: italic">    Example:</span>
</span><span id="__span-0-147"><a id="__codelineno-0-147" name="__codelineno-0-147"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; schema = FeatureSchema.from_yaml(&quot;configs/features/sepsis_vitals.yaml&quot;)</span>
</span><span id="__span-0-148"><a id="__codelineno-0-148" name="__codelineno-0-148"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; result = dataset.validate(schema)</span>
</span><span id="__span-0-149"><a id="__codelineno-0-149" name="__codelineno-0-149"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; if not result.valid:</span>
</span><span id="__span-0-150"><a id="__codelineno-0-150" name="__codelineno-0-150"></a><span style="color: #546E7A; font-style: italic">        ...     print(result.errors)</span>
</span><span id="__span-0-151"><a id="__codelineno-0-151" name="__codelineno-0-151"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-152"><a id="__codelineno-0-152" name="__codelineno-0-152"></a>    <span style="color: #EFF">result</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">ValidationResult</span><span style="color: #89DDFF">(</span><span style="color: #EFF">valid</span><span style="color: #89DDFF">=True)</span>
</span><span id="__span-0-153"><a id="__codelineno-0-153" name="__codelineno-0-153"></a>
</span><span id="__span-0-154"><a id="__codelineno-0-154" name="__codelineno-0-154"></a>    <span style="color: #546E7A; font-style: italic"># Check for missing required features</span>
</span><span id="__span-0-155"><a id="__codelineno-0-155" name="__codelineno-0-155"></a>    <span style="color: #EFF">required</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">schema</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get_required_features</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-156"><a id="__codelineno-0-156" name="__codelineno-0-156"></a>    <span style="color: #EFF">missing</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[</span><span style="color: #EFF">f</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">f</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">required</span> <span style="color: #BB80B3">if</span> <span style="color: #EFF">f</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-157"><a id="__codelineno-0-157" name="__codelineno-0-157"></a>
</span><span id="__span-0-158"><a id="__codelineno-0-158" name="__codelineno-0-158"></a>    <span style="color: #BB80B3">for</span> <span style="color: #EFF">feature</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">missing</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-159"><a id="__codelineno-0-159" name="__codelineno-0-159"></a>        <span style="color: #EFF">result</span><span style="color: #89DDFF">.</span><span style="color: #EFF">add_missing_feature</span><span style="color: #89DDFF">(</span><span style="color: #EFF">feature</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-160"><a id="__codelineno-0-160" name="__codelineno-0-160"></a>
</span><span id="__span-0-161"><a id="__codelineno-0-161" name="__codelineno-0-161"></a>    <span style="color: #546E7A; font-style: italic"># Check data types for present features</span>
</span><span id="__span-0-162"><a id="__codelineno-0-162" name="__codelineno-0-162"></a>    <span style="color: #BB80B3">for</span> <span style="color: #EFF">feature_name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">schema</span><span style="color: #89DDFF">.</span><span style="color: #EFF">features</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">():</span>
</span><span id="__span-0-163"><a id="__codelineno-0-163" name="__codelineno-0-163"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">feature_name</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-164"><a id="__codelineno-0-164" name="__codelineno-0-164"></a>            <span style="color: #EFF">actual_dtype</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">[</span><span style="color: #EFF">feature_name</span><span style="color: #89DDFF">].</span><span style="color: #EFF">dtype</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-165"><a id="__codelineno-0-165" name="__codelineno-0-165"></a>            <span style="color: #EFF">expected_dtype</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">dtype</span>
</span><span id="__span-0-166"><a id="__codelineno-0-166" name="__codelineno-0-166"></a>
</span><span id="__span-0-167"><a id="__codelineno-0-167" name="__codelineno-0-167"></a>            <span style="color: #546E7A; font-style: italic"># Check for type mismatches (allow some flexibility)</span>
</span><span id="__span-0-168"><a id="__codelineno-0-168" name="__codelineno-0-168"></a>            <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_dtypes_compatible</span><span style="color: #89DDFF">(</span><span style="color: #EFF">actual_dtype</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">expected_dtype</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-169"><a id="__codelineno-0-169" name="__codelineno-0-169"></a>                <span style="color: #EFF">result</span><span style="color: #89DDFF">.</span><span style="color: #EFF">add_type_mismatch</span><span style="color: #89DDFF">(</span><span style="color: #EFF">feature_name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">expected_dtype</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">actual_dtype</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-170"><a id="__codelineno-0-170" name="__codelineno-0-170"></a>
</span><span id="__span-0-171"><a id="__codelineno-0-171" name="__codelineno-0-171"></a>    <span style="color: #546E7A; font-style: italic"># Warn about optional missing features</span>
</span><span id="__span-0-172"><a id="__codelineno-0-172" name="__codelineno-0-172"></a>    <span style="color: #EFF">optional</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">set</span><span style="color: #89DDFF">(</span><span style="color: #EFF">schema</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get_feature_names</span><span style="color: #89DDFF">())</span> <span style="color: #89DDFF">-</span> <span style="color: #82AAFF">set</span><span style="color: #89DDFF">(</span><span style="color: #EFF">required</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-173"><a id="__codelineno-0-173" name="__codelineno-0-173"></a>    <span style="color: #EFF">missing_optional</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[</span><span style="color: #EFF">f</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">f</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">optional</span> <span style="color: #BB80B3">if</span> <span style="color: #EFF">f</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">.</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-174"><a id="__codelineno-0-174" name="__codelineno-0-174"></a>
</span><span id="__span-0-175"><a id="__codelineno-0-175" name="__codelineno-0-175"></a>    <span style="color: #BB80B3">for</span> <span style="color: #EFF">feature</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">missing_optional</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-176"><a id="__codelineno-0-176" name="__codelineno-0-176"></a>        <span style="color: #EFF">result</span><span style="color: #89DDFF">.</span><span style="color: #EFF">add_warning</span><span style="color: #89DDFF">(</span><span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Optional feature &#39;</span><span style="color: #89DDFF">{</span><span style="color: #EFF">feature</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&#39; is missing&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-177"><a id="__codelineno-0-177" name="__codelineno-0-177"></a>
</span><span id="__span-0-178"><a id="__codelineno-0-178" name="__codelineno-0-178"></a>    <span style="color: #BB80B3">if</span> <span style="color: #EFF">raise_on_error</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #EFF">result</span><span style="color: #89DDFF">.</span><span style="color: #EFF">valid</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-179"><a id="__codelineno-0-179" name="__codelineno-0-179"></a>        <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">(</span><span style="color: #EFF">result</span><span style="color: #89DDFF">))</span>
</span><span id="__span-0-180"><a id="__codelineno-0-180" name="__codelineno-0-180"></a>
</span><span id="__span-0-181"><a id="__codelineno-0-181" name="__codelineno-0-181"></a>    <span style="color: #BB80B3">return</span> <span style="color: #EFF">result</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="healthchain.io.containers.document" class="doc doc-heading">
            <code>document</code>


</h2>

    <div class="doc doc-contents ">










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h3 id="healthchain.io.containers.document.CdsAnnotations" class="doc doc-heading">
            <code>CdsAnnotations</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">



        <p>Container for Clinical Decision Support (CDS) results.</p>
<p>This class stores and manages outputs from clinical decision support systems,
including CDS Hooks cards and suggested clinical actions. The cards contain
recommendations, warnings, and other decision support content that can be
displayed to clinicians. Actions represent specific clinical tasks or
interventions that are suggested based on the analysis.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">ATTRIBUTE</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.document.CdsAnnotations._cards">_cards</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>CDS Hooks cards containing clinical
recommendations, warnings, or other decision support content.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="Card (healthchain.models.responses.Card)" href="../sandbox/#healthchain.models.responses.cdsresponse.Card">Card</a>]]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.document.CdsAnnotations._actions">_actions</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Suggested clinical actions that
could be taken based on the CDS analysis.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="Action (healthchain.models.responses.Action)" href="../sandbox/#healthchain.models.responses.cdsresponse.Action">Action</a>]]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>cds = CdsAnnotations()
cds.cards = [Card(summary="Consider aspirin")]
cds.actions = [Action(type="create", description="Order aspirin")]</p>
</blockquote>
</blockquote>
</blockquote>
</details>







              <details class="mkdocstrings-source">
                <summary>Source code in <code>healthchain/io/containers/document.py</code></summary>
                <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-601">601</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-602">602</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-603">603</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-604">604</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-605">605</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-606">606</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-607">607</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-608">608</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-609">609</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-610">610</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-611">611</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-612">612</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-613">613</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-614">614</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-615">615</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-616">616</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-617">617</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-618">618</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-619">619</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-620">620</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-621">621</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-622">622</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-623">623</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-624">624</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-625">625</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-626">626</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-627">627</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-628">628</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-629">629</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-630">630</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-631">631</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-632">632</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-633">633</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-634">634</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-635">635</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-636">636</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-637">637</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-638">638</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-639">639</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-640">640</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-641">641</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-642">642</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-643">643</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-644">644</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-645">645</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-646">646</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-647">647</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-648">648</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-649">649</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-650">650</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-651">651</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-652">652</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-653">653</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-654">654</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-655">655</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-656">656</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-657">657</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-658">658</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-659">659</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-660">660</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-661">661</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-662">662</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-663">663</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-664">664</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-665">665</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-666">666</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-667">667</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-668">668</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-669">669</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-670">670</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-671">671</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-672">672</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-673">673</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-674">674</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-675">675</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-676">676</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-677">677</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-678">678</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-679">679</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-680">680</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-681">681</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-682">682</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-683">683</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-684">684</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-685">685</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-601"><a id="__codelineno-0-601" name="__codelineno-0-601"></a><span style="color: #82AAFF">@dataclass</span>
</span><span id="__span-0-602"><a id="__codelineno-0-602" name="__codelineno-0-602"></a><span style="color: #BB80B3">class</span><span style="color: #EFF"> </span><span style="color: #FFCB6B">CdsAnnotations</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-603"><a id="__codelineno-0-603" name="__codelineno-0-603"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-604"><a id="__codelineno-0-604" name="__codelineno-0-604"></a><span style="color: #546E7A; font-style: italic">    Container for Clinical Decision Support (CDS) results.</span>
</span><span id="__span-0-605"><a id="__codelineno-0-605" name="__codelineno-0-605"></a>
</span><span id="__span-0-606"><a id="__codelineno-0-606" name="__codelineno-0-606"></a><span style="color: #546E7A; font-style: italic">    This class stores and manages outputs from clinical decision support systems,</span>
</span><span id="__span-0-607"><a id="__codelineno-0-607" name="__codelineno-0-607"></a><span style="color: #546E7A; font-style: italic">    including CDS Hooks cards and suggested clinical actions. The cards contain</span>
</span><span id="__span-0-608"><a id="__codelineno-0-608" name="__codelineno-0-608"></a><span style="color: #546E7A; font-style: italic">    recommendations, warnings, and other decision support content that can be</span>
</span><span id="__span-0-609"><a id="__codelineno-0-609" name="__codelineno-0-609"></a><span style="color: #546E7A; font-style: italic">    displayed to clinicians. Actions represent specific clinical tasks or</span>
</span><span id="__span-0-610"><a id="__codelineno-0-610" name="__codelineno-0-610"></a><span style="color: #546E7A; font-style: italic">    interventions that are suggested based on the analysis.</span>
</span><span id="__span-0-611"><a id="__codelineno-0-611" name="__codelineno-0-611"></a>
</span><span id="__span-0-612"><a id="__codelineno-0-612" name="__codelineno-0-612"></a><span style="color: #546E7A; font-style: italic">    Attributes:</span>
</span><span id="__span-0-613"><a id="__codelineno-0-613" name="__codelineno-0-613"></a><span style="color: #546E7A; font-style: italic">        _cards (Optional[List[Card]]): CDS Hooks cards containing clinical</span>
</span><span id="__span-0-614"><a id="__codelineno-0-614" name="__codelineno-0-614"></a><span style="color: #546E7A; font-style: italic">            recommendations, warnings, or other decision support content.</span>
</span><span id="__span-0-615"><a id="__codelineno-0-615" name="__codelineno-0-615"></a><span style="color: #546E7A; font-style: italic">        _actions (Optional[List[Action]]): Suggested clinical actions that</span>
</span><span id="__span-0-616"><a id="__codelineno-0-616" name="__codelineno-0-616"></a><span style="color: #546E7A; font-style: italic">            could be taken based on the CDS analysis.</span>
</span><span id="__span-0-617"><a id="__codelineno-0-617" name="__codelineno-0-617"></a>
</span><span id="__span-0-618"><a id="__codelineno-0-618" name="__codelineno-0-618"></a><span style="color: #546E7A; font-style: italic">    Example:</span>
</span><span id="__span-0-619"><a id="__codelineno-0-619" name="__codelineno-0-619"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; cds = CdsAnnotations()</span>
</span><span id="__span-0-620"><a id="__codelineno-0-620" name="__codelineno-0-620"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; cds.cards = [Card(summary=&quot;Consider aspirin&quot;)]</span>
</span><span id="__span-0-621"><a id="__codelineno-0-621" name="__codelineno-0-621"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; cds.actions = [Action(type=&quot;create&quot;, description=&quot;Order aspirin&quot;)]</span>
</span><span id="__span-0-622"><a id="__codelineno-0-622" name="__codelineno-0-622"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-623"><a id="__codelineno-0-623" name="__codelineno-0-623"></a>
</span><span id="__span-0-624"><a id="__codelineno-0-624" name="__codelineno-0-624"></a>    <span style="color: #EFF">_cards</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Card</span><span style="color: #89DDFF">]]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-625"><a id="__codelineno-0-625" name="__codelineno-0-625"></a>    <span style="color: #EFF">_actions</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Action</span><span style="color: #89DDFF">]]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-626"><a id="__codelineno-0-626" name="__codelineno-0-626"></a>
</span><span id="__span-0-627"><a id="__codelineno-0-627" name="__codelineno-0-627"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-628"><a id="__codelineno-0-628" name="__codelineno-0-628"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">cards</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Card</span><span style="color: #89DDFF">]]:</span>
</span><span id="__span-0-629"><a id="__codelineno-0-629" name="__codelineno-0-629"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get the current list of CDS Hooks cards.&quot;&quot;&quot;</span>
</span><span id="__span-0-630"><a id="__codelineno-0-630" name="__codelineno-0-630"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_cards</span>
</span><span id="__span-0-631"><a id="__codelineno-0-631" name="__codelineno-0-631"></a>
</span><span id="__span-0-632"><a id="__codelineno-0-632" name="__codelineno-0-632"></a>    <span style="color: #82AAFF">@cards</span><span style="color: #89DDFF">.</span><span style="color: #EFF">setter</span>
</span><span id="__span-0-633"><a id="__codelineno-0-633" name="__codelineno-0-633"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">cards</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">cards</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Union</span><span style="color: #89DDFF">[</span><span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Card</span><span style="color: #89DDFF">],</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]]])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-634"><a id="__codelineno-0-634" name="__codelineno-0-634"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-635"><a id="__codelineno-0-635" name="__codelineno-0-635"></a><span style="color: #546E7A; font-style: italic">        Set CDS Hooks cards, converting from dictionaries if needed.</span>
</span><span id="__span-0-636"><a id="__codelineno-0-636" name="__codelineno-0-636"></a>
</span><span id="__span-0-637"><a id="__codelineno-0-637" name="__codelineno-0-637"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-638"><a id="__codelineno-0-638" name="__codelineno-0-638"></a><span style="color: #546E7A; font-style: italic">            cards: List of Card objects or dictionaries that can be converted to Cards.</span>
</span><span id="__span-0-639"><a id="__codelineno-0-639" name="__codelineno-0-639"></a>
</span><span id="__span-0-640"><a id="__codelineno-0-640" name="__codelineno-0-640"></a><span style="color: #546E7A; font-style: italic">        Raises:</span>
</span><span id="__span-0-641"><a id="__codelineno-0-641" name="__codelineno-0-641"></a><span style="color: #546E7A; font-style: italic">            ValueError: If cards list is empty or has invalid format.</span>
</span><span id="__span-0-642"><a id="__codelineno-0-642" name="__codelineno-0-642"></a><span style="color: #546E7A; font-style: italic">            TypeError: If cards are neither Card objects nor dictionaries.</span>
</span><span id="__span-0-643"><a id="__codelineno-0-643" name="__codelineno-0-643"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-644"><a id="__codelineno-0-644" name="__codelineno-0-644"></a>        <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #EFF">cards</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-645"><a id="__codelineno-0-645" name="__codelineno-0-645"></a>            <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;Cards must be provided as a list!&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-646"><a id="__codelineno-0-646" name="__codelineno-0-646"></a>
</span><span id="__span-0-647"><a id="__codelineno-0-647" name="__codelineno-0-647"></a>        <span style="color: #BB80B3">try</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-648"><a id="__codelineno-0-648" name="__codelineno-0-648"></a>            <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">cards</span><span style="color: #89DDFF">[</span><span style="color: #F78C6C">0</span><span style="color: #89DDFF">],</span> <span style="color: #82AAFF">dict</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-649"><a id="__codelineno-0-649" name="__codelineno-0-649"></a>                <span style="color: #89DDFF">self.</span><span style="color: #EFF">_cards</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[</span><span style="color: #EFF">Card</span><span style="color: #89DDFF">(**</span><span style="color: #EFF">card</span><span style="color: #89DDFF">)</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">card</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">cards</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-650"><a id="__codelineno-0-650" name="__codelineno-0-650"></a>            <span style="color: #BB80B3">elif</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">cards</span><span style="color: #89DDFF">[</span><span style="color: #F78C6C">0</span><span style="color: #89DDFF">],</span> <span style="color: #EFF">Card</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-651"><a id="__codelineno-0-651" name="__codelineno-0-651"></a>                <span style="color: #89DDFF">self.</span><span style="color: #EFF">_cards</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">cards</span>
</span><span id="__span-0-652"><a id="__codelineno-0-652" name="__codelineno-0-652"></a>            <span style="color: #BB80B3">else</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-653"><a id="__codelineno-0-653" name="__codelineno-0-653"></a>                <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">TypeError</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;Cards must be either Card objects or dictionaries&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-654"><a id="__codelineno-0-654" name="__codelineno-0-654"></a>        <span style="color: #BB80B3">except</span> <span style="color: #89DDFF">(</span><span style="color: #FFCB6B">IndexError</span><span style="color: #89DDFF">,</span> <span style="color: #FFCB6B">KeyError</span><span style="color: #89DDFF">)</span> <span style="color: #BB80B3">as</span> <span style="color: #EFF">e</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-655"><a id="__codelineno-0-655" name="__codelineno-0-655"></a>            <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;Invalid card format&quot;</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF; font-style: italic">from</span><span style="color: #EFF"> </span><span style="color: #FFCB6B">e</span>
</span><span id="__span-0-656"><a id="__codelineno-0-656" name="__codelineno-0-656"></a>
</span><span id="__span-0-657"><a id="__codelineno-0-657" name="__codelineno-0-657"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-658"><a id="__codelineno-0-658" name="__codelineno-0-658"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">actions</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Action</span><span style="color: #89DDFF">]]:</span>
</span><span id="__span-0-659"><a id="__codelineno-0-659" name="__codelineno-0-659"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get the current list of suggested clinical actions.&quot;&quot;&quot;</span>
</span><span id="__span-0-660"><a id="__codelineno-0-660" name="__codelineno-0-660"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_actions</span>
</span><span id="__span-0-661"><a id="__codelineno-0-661" name="__codelineno-0-661"></a>
</span><span id="__span-0-662"><a id="__codelineno-0-662" name="__codelineno-0-662"></a>    <span style="color: #82AAFF">@actions</span><span style="color: #89DDFF">.</span><span style="color: #EFF">setter</span>
</span><span id="__span-0-663"><a id="__codelineno-0-663" name="__codelineno-0-663"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">actions</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">actions</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Union</span><span style="color: #89DDFF">[</span><span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Action</span><span style="color: #89DDFF">],</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]]])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-664"><a id="__codelineno-0-664" name="__codelineno-0-664"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-665"><a id="__codelineno-0-665" name="__codelineno-0-665"></a><span style="color: #546E7A; font-style: italic">        Set suggested clinical actions, converting from dictionaries if needed.</span>
</span><span id="__span-0-666"><a id="__codelineno-0-666" name="__codelineno-0-666"></a>
</span><span id="__span-0-667"><a id="__codelineno-0-667" name="__codelineno-0-667"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-668"><a id="__codelineno-0-668" name="__codelineno-0-668"></a><span style="color: #546E7A; font-style: italic">            actions: List of Action objects or dictionaries that can be converted to Actions.</span>
</span><span id="__span-0-669"><a id="__codelineno-0-669" name="__codelineno-0-669"></a>
</span><span id="__span-0-670"><a id="__codelineno-0-670" name="__codelineno-0-670"></a><span style="color: #546E7A; font-style: italic">        Raises:</span>
</span><span id="__span-0-671"><a id="__codelineno-0-671" name="__codelineno-0-671"></a><span style="color: #546E7A; font-style: italic">            ValueError: If actions list is empty or has invalid format.</span>
</span><span id="__span-0-672"><a id="__codelineno-0-672" name="__codelineno-0-672"></a><span style="color: #546E7A; font-style: italic">            TypeError: If actions are neither Action objects nor dictionaries.</span>
</span><span id="__span-0-673"><a id="__codelineno-0-673" name="__codelineno-0-673"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-674"><a id="__codelineno-0-674" name="__codelineno-0-674"></a>        <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #EFF">actions</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-675"><a id="__codelineno-0-675" name="__codelineno-0-675"></a>            <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;Actions must be provided as a list!&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-676"><a id="__codelineno-0-676" name="__codelineno-0-676"></a>
</span><span id="__span-0-677"><a id="__codelineno-0-677" name="__codelineno-0-677"></a>        <span style="color: #BB80B3">try</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-678"><a id="__codelineno-0-678" name="__codelineno-0-678"></a>            <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">actions</span><span style="color: #89DDFF">[</span><span style="color: #F78C6C">0</span><span style="color: #89DDFF">],</span> <span style="color: #82AAFF">dict</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-679"><a id="__codelineno-0-679" name="__codelineno-0-679"></a>                <span style="color: #89DDFF">self.</span><span style="color: #EFF">_actions</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[</span><span style="color: #EFF">Action</span><span style="color: #89DDFF">(**</span><span style="color: #EFF">action</span><span style="color: #89DDFF">)</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">action</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">actions</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-680"><a id="__codelineno-0-680" name="__codelineno-0-680"></a>            <span style="color: #BB80B3">elif</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">actions</span><span style="color: #89DDFF">[</span><span style="color: #F78C6C">0</span><span style="color: #89DDFF">],</span> <span style="color: #EFF">Action</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-681"><a id="__codelineno-0-681" name="__codelineno-0-681"></a>                <span style="color: #89DDFF">self.</span><span style="color: #EFF">_actions</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">actions</span>
</span><span id="__span-0-682"><a id="__codelineno-0-682" name="__codelineno-0-682"></a>            <span style="color: #BB80B3">else</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-683"><a id="__codelineno-0-683" name="__codelineno-0-683"></a>                <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">TypeError</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;Actions must be either Action objects or dictionaries&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-684"><a id="__codelineno-0-684" name="__codelineno-0-684"></a>        <span style="color: #BB80B3">except</span> <span style="color: #89DDFF">(</span><span style="color: #FFCB6B">IndexError</span><span style="color: #89DDFF">,</span> <span style="color: #FFCB6B">KeyError</span><span style="color: #89DDFF">)</span> <span style="color: #BB80B3">as</span> <span style="color: #EFF">e</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-685"><a id="__codelineno-0-685" name="__codelineno-0-685"></a>            <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;Invalid action format&quot;</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF; font-style: italic">from</span><span style="color: #EFF"> </span><span style="color: #FFCB6B">e</span>
</span></code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="healthchain.io.containers.document.CdsAnnotations.actions" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">actions</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get the current list of suggested clinical actions.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="healthchain.io.containers.document.CdsAnnotations.cards" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">cards</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get the current list of CDS Hooks cards.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="healthchain.io.containers.document.Document" class="doc doc-heading">
            <code>Document</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="BaseDocument


  
      dataclass
   (healthchain.io.containers.base.BaseDocument)" href="#healthchain.io.containers.base.BaseDocument">BaseDocument</a></code></p>



        <p>Main document container for processing textual and clinical data in HealthChain.</p>
<p>The Document class is the primary structure used throughout annotation and analytics
pipelines, accumulating transformations, extractions, and results from each stage. It
seamlessly integrates raw text, NLP annotations, FHIR resources, clinical decision
support (CDS) results, and ML model outputs in one object.</p>


<details class="features" open>
  <summary>Features</summary>
  <ul>
<li>Accepts text, FHIR Bundles/resources, or lists of FHIR resources as input.</li>
<li>Provides basic tokenization and supports integration with NLP models (spaCy, transformers).</li>
<li>Stores and manipulates clinical FHIR data via the .fhir property (access to bundles, problem lists, meds, allergies, etc.).</li>
<li>Encapsulates CDS Hooks-style decision support cards and suggested actions via the .cds property.</li>
<li>Stores outputs from external ML/LLM models: HuggingFace, LangChain, etc.</li>
</ul>
</details>

<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">ATTRIBUTE</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.document.Document.nlp">nlp</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>NLP output (tokens, entities, embeddings, spaCy doc)</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-internal" title="NlpAnnotations


  
      dataclass
   (healthchain.io.containers.document.NlpAnnotations)" href="#healthchain.io.containers.document.NlpAnnotations">NlpAnnotations</a></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.document.Document.fhir">fhir</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>FHIR resources and context (problem list, medication, allergy, etc.)</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-internal" title="FhirData


  
      dataclass
   (healthchain.io.containers.document.FhirData)" href="#healthchain.io.containers.document.FhirData">FhirData</a></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.document.Document.cds">cds</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Clinical decision support (cards and actions)</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-internal" title="CdsAnnotations


  
      dataclass
   (healthchain.io.containers.document.CdsAnnotations)" href="#healthchain.io.containers.document.CdsAnnotations">CdsAnnotations</a></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.document.Document.models">models</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Results from ML/LLM models (HuggingFace, LangChain, etc.)</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><a class="autorefs autorefs-internal" title="ModelOutputs


  
      dataclass
   (healthchain.io.containers.document.ModelOutputs)" href="#healthchain.io.containers.document.ModelOutputs">ModelOutputs</a></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.document.Document.text">text</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>The text content of the document (if available).</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.document.Document.data">data</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>The original input supplied (raw text, Bundle, resource, or list of resources)</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<details class="usage-example" open>
  <summary>Usage example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>doc = Document(data="Patient has hypertension")
doc.nlp._tokens
['Patient', 'has', 'hypertension']
doc.fhir.problem_list = [Condition(...)]
doc.cds.cards = [Card(...)]
doc.models.huggingface_results = ...
for token in doc:
...     print(token)</p>
</blockquote>
</blockquote>
</blockquote>
</details>

<details class="inherits-from" open>
  <summary>Inherits from</summary>
  <p>BaseDocument</p>
</details>







              <details class="mkdocstrings-source">
                <summary>Source code in <code>healthchain/io/containers/document.py</code></summary>
                <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-688">688</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-689">689</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-690">690</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-691">691</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-692">692</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-693">693</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-694">694</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-695">695</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-696">696</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-697">697</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-698">698</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-699">699</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-700">700</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-701">701</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-702">702</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-703">703</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-704">704</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-705">705</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-706">706</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-707">707</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-708">708</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-709">709</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-710">710</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-711">711</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-712">712</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-713">713</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-714">714</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-715">715</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-716">716</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-717">717</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-718">718</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-719">719</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-720">720</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-721">721</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-722">722</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-723">723</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-724">724</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-725">725</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-726">726</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-727">727</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-728">728</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-729">729</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-730">730</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-731">731</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-732">732</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-733">733</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-734">734</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-735">735</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-736">736</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-737">737</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-738">738</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-739">739</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-740">740</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-741">741</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-742">742</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-743">743</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-744">744</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-745">745</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-746">746</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-747">747</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-748">748</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-749">749</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-750">750</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-751">751</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-752">752</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-753">753</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-754">754</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-755">755</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-756">756</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-757">757</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-758">758</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-759">759</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-760">760</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-761">761</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-762">762</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-763">763</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-764">764</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-765">765</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-766">766</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-767">767</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-768">768</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-769">769</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-770">770</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-771">771</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-772">772</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-773">773</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-774">774</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-775">775</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-776">776</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-777">777</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-778">778</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-779">779</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-780">780</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-781">781</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-782">782</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-783">783</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-784">784</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-785">785</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-786">786</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-787">787</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-788">788</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-789">789</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-790">790</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-791">791</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-792">792</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-793">793</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-794">794</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-795">795</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-796">796</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-797">797</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-798">798</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-799">799</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-800">800</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-801">801</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-802">802</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-803">803</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-804">804</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-805">805</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-806">806</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-807">807</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-808">808</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-809">809</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-810">810</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-811">811</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-812">812</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-813">813</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-814">814</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-815">815</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-816">816</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-817">817</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-818">818</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-819">819</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-820">820</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-821">821</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-822">822</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-823">823</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-824">824</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-825">825</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-826">826</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-827">827</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-828">828</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-829">829</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-830">830</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-831">831</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-832">832</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-833">833</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-834">834</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-835">835</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-836">836</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-837">837</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-838">838</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-839">839</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-840">840</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-841">841</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-842">842</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-843">843</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-844">844</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-845">845</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-846">846</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-847">847</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-848">848</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-849">849</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-850">850</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-851">851</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-852">852</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-853">853</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-854">854</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-855">855</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-856">856</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-857">857</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-858">858</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-859">859</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-860">860</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-861">861</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-862">862</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-863">863</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-864">864</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-865">865</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-866">866</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-867">867</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-868">868</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-869">869</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-870">870</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-871">871</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-872">872</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-873">873</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-874">874</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-875">875</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-876">876</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-877">877</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-878">878</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-879">879</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-880">880</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-881">881</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-882">882</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-883">883</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-884">884</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-885">885</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-886">886</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-887">887</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-888">888</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-889">889</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-890">890</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-891">891</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-892">892</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-893">893</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-894">894</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-895">895</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-896">896</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-897">897</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-898">898</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-899">899</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-900">900</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-901">901</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-902">902</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-903">903</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-904">904</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-905">905</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-906">906</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-907">907</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-908">908</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-909">909</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-910">910</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-911">911</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-688"><a id="__codelineno-0-688" name="__codelineno-0-688"></a><span style="color: #82AAFF">@dataclass</span>
</span><span id="__span-0-689"><a id="__codelineno-0-689" name="__codelineno-0-689"></a><span style="color: #BB80B3">class</span><span style="color: #EFF"> </span><span style="color: #FFCB6B">Document</span><span style="color: #89DDFF">(</span><span style="color: #EFF">BaseDocument</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-690"><a id="__codelineno-0-690" name="__codelineno-0-690"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-691"><a id="__codelineno-0-691" name="__codelineno-0-691"></a><span style="color: #546E7A; font-style: italic">    Main document container for processing textual and clinical data in HealthChain.</span>
</span><span id="__span-0-692"><a id="__codelineno-0-692" name="__codelineno-0-692"></a>
</span><span id="__span-0-693"><a id="__codelineno-0-693" name="__codelineno-0-693"></a><span style="color: #546E7A; font-style: italic">    The Document class is the primary structure used throughout annotation and analytics</span>
</span><span id="__span-0-694"><a id="__codelineno-0-694" name="__codelineno-0-694"></a><span style="color: #546E7A; font-style: italic">    pipelines, accumulating transformations, extractions, and results from each stage. It</span>
</span><span id="__span-0-695"><a id="__codelineno-0-695" name="__codelineno-0-695"></a><span style="color: #546E7A; font-style: italic">    seamlessly integrates raw text, NLP annotations, FHIR resources, clinical decision</span>
</span><span id="__span-0-696"><a id="__codelineno-0-696" name="__codelineno-0-696"></a><span style="color: #546E7A; font-style: italic">    support (CDS) results, and ML model outputs in one object.</span>
</span><span id="__span-0-697"><a id="__codelineno-0-697" name="__codelineno-0-697"></a>
</span><span id="__span-0-698"><a id="__codelineno-0-698" name="__codelineno-0-698"></a><span style="color: #546E7A; font-style: italic">    Features:</span>
</span><span id="__span-0-699"><a id="__codelineno-0-699" name="__codelineno-0-699"></a><span style="color: #546E7A; font-style: italic">        - Accepts text, FHIR Bundles/resources, or lists of FHIR resources as input.</span>
</span><span id="__span-0-700"><a id="__codelineno-0-700" name="__codelineno-0-700"></a><span style="color: #546E7A; font-style: italic">        - Provides basic tokenization and supports integration with NLP models (spaCy, transformers).</span>
</span><span id="__span-0-701"><a id="__codelineno-0-701" name="__codelineno-0-701"></a><span style="color: #546E7A; font-style: italic">        - Stores and manipulates clinical FHIR data via the .fhir property (access to bundles, problem lists, meds, allergies, etc.).</span>
</span><span id="__span-0-702"><a id="__codelineno-0-702" name="__codelineno-0-702"></a><span style="color: #546E7A; font-style: italic">        - Encapsulates CDS Hooks-style decision support cards and suggested actions via the .cds property.</span>
</span><span id="__span-0-703"><a id="__codelineno-0-703" name="__codelineno-0-703"></a><span style="color: #546E7A; font-style: italic">        - Stores outputs from external ML/LLM models: HuggingFace, LangChain, etc.</span>
</span><span id="__span-0-704"><a id="__codelineno-0-704" name="__codelineno-0-704"></a>
</span><span id="__span-0-705"><a id="__codelineno-0-705" name="__codelineno-0-705"></a><span style="color: #546E7A; font-style: italic">    Attributes:</span>
</span><span id="__span-0-706"><a id="__codelineno-0-706" name="__codelineno-0-706"></a><span style="color: #546E7A; font-style: italic">        nlp (NlpAnnotations): NLP output (tokens, entities, embeddings, spaCy doc)</span>
</span><span id="__span-0-707"><a id="__codelineno-0-707" name="__codelineno-0-707"></a><span style="color: #546E7A; font-style: italic">        fhir (FhirData): FHIR resources and context (problem list, medication, allergy, etc.)</span>
</span><span id="__span-0-708"><a id="__codelineno-0-708" name="__codelineno-0-708"></a><span style="color: #546E7A; font-style: italic">        cds (CdsAnnotations): Clinical decision support (cards and actions)</span>
</span><span id="__span-0-709"><a id="__codelineno-0-709" name="__codelineno-0-709"></a><span style="color: #546E7A; font-style: italic">        models (ModelOutputs): Results from ML/LLM models (HuggingFace, LangChain, etc.)</span>
</span><span id="__span-0-710"><a id="__codelineno-0-710" name="__codelineno-0-710"></a><span style="color: #546E7A; font-style: italic">        text (str): The text content of the document (if available).</span>
</span><span id="__span-0-711"><a id="__codelineno-0-711" name="__codelineno-0-711"></a><span style="color: #546E7A; font-style: italic">        data: The original input supplied (raw text, Bundle, resource, or list of resources)</span>
</span><span id="__span-0-712"><a id="__codelineno-0-712" name="__codelineno-0-712"></a>
</span><span id="__span-0-713"><a id="__codelineno-0-713" name="__codelineno-0-713"></a><span style="color: #546E7A; font-style: italic">    Usage example:</span>
</span><span id="__span-0-714"><a id="__codelineno-0-714" name="__codelineno-0-714"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; doc = Document(data=&quot;Patient has hypertension&quot;)</span>
</span><span id="__span-0-715"><a id="__codelineno-0-715" name="__codelineno-0-715"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; doc.nlp._tokens</span>
</span><span id="__span-0-716"><a id="__codelineno-0-716" name="__codelineno-0-716"></a><span style="color: #546E7A; font-style: italic">        [&#39;Patient&#39;, &#39;has&#39;, &#39;hypertension&#39;]</span>
</span><span id="__span-0-717"><a id="__codelineno-0-717" name="__codelineno-0-717"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; doc.fhir.problem_list = [Condition(...)]</span>
</span><span id="__span-0-718"><a id="__codelineno-0-718" name="__codelineno-0-718"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; doc.cds.cards = [Card(...)]</span>
</span><span id="__span-0-719"><a id="__codelineno-0-719" name="__codelineno-0-719"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; doc.models.huggingface_results = ...</span>
</span><span id="__span-0-720"><a id="__codelineno-0-720" name="__codelineno-0-720"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; for token in doc:</span>
</span><span id="__span-0-721"><a id="__codelineno-0-721" name="__codelineno-0-721"></a><span style="color: #546E7A; font-style: italic">        ...     print(token)</span>
</span><span id="__span-0-722"><a id="__codelineno-0-722" name="__codelineno-0-722"></a>
</span><span id="__span-0-723"><a id="__codelineno-0-723" name="__codelineno-0-723"></a><span style="color: #546E7A; font-style: italic">    Inherits from:</span>
</span><span id="__span-0-724"><a id="__codelineno-0-724" name="__codelineno-0-724"></a><span style="color: #546E7A; font-style: italic">        BaseDocument</span>
</span><span id="__span-0-725"><a id="__codelineno-0-725" name="__codelineno-0-725"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-726"><a id="__codelineno-0-726" name="__codelineno-0-726"></a>
</span><span id="__span-0-727"><a id="__codelineno-0-727" name="__codelineno-0-727"></a>    <span style="color: #EFF">_nlp</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">NlpAnnotations</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">field</span><span style="color: #89DDFF">(</span><span style="color: #EFF">default_factory</span><span style="color: #89DDFF">=</span><span style="color: #EFF">NlpAnnotations</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-728"><a id="__codelineno-0-728" name="__codelineno-0-728"></a>    <span style="color: #EFF">_fhir</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">FhirData</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">field</span><span style="color: #89DDFF">(</span><span style="color: #EFF">default_factory</span><span style="color: #89DDFF">=</span><span style="color: #EFF">FhirData</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-729"><a id="__codelineno-0-729" name="__codelineno-0-729"></a>    <span style="color: #EFF">_cds</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">CdsAnnotations</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">field</span><span style="color: #89DDFF">(</span><span style="color: #EFF">default_factory</span><span style="color: #89DDFF">=</span><span style="color: #EFF">CdsAnnotations</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-730"><a id="__codelineno-0-730" name="__codelineno-0-730"></a>    <span style="color: #EFF">_models</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">ModelOutputs</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">field</span><span style="color: #89DDFF">(</span><span style="color: #EFF">default_factory</span><span style="color: #89DDFF">=</span><span style="color: #EFF">ModelOutputs</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-731"><a id="__codelineno-0-731" name="__codelineno-0-731"></a>
</span><span id="__span-0-732"><a id="__codelineno-0-732" name="__codelineno-0-732"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-733"><a id="__codelineno-0-733" name="__codelineno-0-733"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">nlp</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">NlpAnnotations</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-734"><a id="__codelineno-0-734" name="__codelineno-0-734"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_nlp</span>
</span><span id="__span-0-735"><a id="__codelineno-0-735" name="__codelineno-0-735"></a>
</span><span id="__span-0-736"><a id="__codelineno-0-736" name="__codelineno-0-736"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-737"><a id="__codelineno-0-737" name="__codelineno-0-737"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">fhir</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">FhirData</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-738"><a id="__codelineno-0-738" name="__codelineno-0-738"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_fhir</span>
</span><span id="__span-0-739"><a id="__codelineno-0-739" name="__codelineno-0-739"></a>
</span><span id="__span-0-740"><a id="__codelineno-0-740" name="__codelineno-0-740"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-741"><a id="__codelineno-0-741" name="__codelineno-0-741"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">cds</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">CdsAnnotations</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-742"><a id="__codelineno-0-742" name="__codelineno-0-742"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_cds</span>
</span><span id="__span-0-743"><a id="__codelineno-0-743" name="__codelineno-0-743"></a>
</span><span id="__span-0-744"><a id="__codelineno-0-744" name="__codelineno-0-744"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-745"><a id="__codelineno-0-745" name="__codelineno-0-745"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">models</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">ModelOutputs</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-746"><a id="__codelineno-0-746" name="__codelineno-0-746"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_models</span>
</span><span id="__span-0-747"><a id="__codelineno-0-747" name="__codelineno-0-747"></a>
</span><span id="__span-0-748"><a id="__codelineno-0-748" name="__codelineno-0-748"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">__post_init__</span><span style="color: #89DDFF">(self):</span>
</span><span id="__span-0-749"><a id="__codelineno-0-749" name="__codelineno-0-749"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-750"><a id="__codelineno-0-750" name="__codelineno-0-750"></a><span style="color: #546E7A; font-style: italic">        Post-initialization setup to process textual or FHIR data.</span>
</span><span id="__span-0-751"><a id="__codelineno-0-751" name="__codelineno-0-751"></a>
</span><span id="__span-0-752"><a id="__codelineno-0-752" name="__codelineno-0-752"></a><span style="color: #546E7A; font-style: italic">        - If input data is a FHIR Bundle, stores it and extracts OperationOutcome and Provenance resources.</span>
</span><span id="__span-0-753"><a id="__codelineno-0-753" name="__codelineno-0-753"></a><span style="color: #546E7A; font-style: italic">        - If input data is a list of FHIR resources, wraps them in a Bundle.</span>
</span><span id="__span-0-754"><a id="__codelineno-0-754" name="__codelineno-0-754"></a><span style="color: #546E7A; font-style: italic">        - For text input, sets .text field accordingly.</span>
</span><span id="__span-0-755"><a id="__codelineno-0-755" name="__codelineno-0-755"></a><span style="color: #546E7A; font-style: italic">        - Performs basic whitespace tokenization if necessary.</span>
</span><span id="__span-0-756"><a id="__codelineno-0-756" name="__codelineno-0-756"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-757"><a id="__codelineno-0-757" name="__codelineno-0-757"></a>        <span style="color: #82AAFF">super</span><span style="color: #89DDFF">().</span><span style="color: #EFF">__post_init__</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-758"><a id="__codelineno-0-758" name="__codelineno-0-758"></a>
</span><span id="__span-0-759"><a id="__codelineno-0-759" name="__codelineno-0-759"></a>        <span style="color: #546E7A; font-style: italic"># Handle FHIR Bundle data</span>
</span><span id="__span-0-760"><a id="__codelineno-0-760" name="__codelineno-0-760"></a>        <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Bundle</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-761"><a id="__codelineno-0-761" name="__codelineno-0-761"></a>            <span style="color: #89DDFF">self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_bundle</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span>
</span><span id="__span-0-762"><a id="__codelineno-0-762" name="__codelineno-0-762"></a>
</span><span id="__span-0-763"><a id="__codelineno-0-763" name="__codelineno-0-763"></a>            <span style="color: #546E7A; font-style: italic"># Extract OperationOutcome resources (operation results/errors)</span>
</span><span id="__span-0-764"><a id="__codelineno-0-764" name="__codelineno-0-764"></a>            <span style="color: #EFF">outcomes</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">extract_resources</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_bundle</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;OperationOutcome&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-765"><a id="__codelineno-0-765" name="__codelineno-0-765"></a>            <span style="color: #BB80B3">if</span> <span style="color: #EFF">outcomes</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-766"><a id="__codelineno-0-766" name="__codelineno-0-766"></a>                <span style="color: #89DDFF">self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_operation_outcomes</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">outcomes</span>
</span><span id="__span-0-767"><a id="__codelineno-0-767" name="__codelineno-0-767"></a>
</span><span id="__span-0-768"><a id="__codelineno-0-768" name="__codelineno-0-768"></a>            <span style="color: #546E7A; font-style: italic"># Extract Provenance resources (data lineage/origin)</span>
</span><span id="__span-0-769"><a id="__codelineno-0-769" name="__codelineno-0-769"></a>            <span style="color: #EFF">provenances</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">extract_resources</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_bundle</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;Provenance&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-770"><a id="__codelineno-0-770" name="__codelineno-0-770"></a>            <span style="color: #BB80B3">if</span> <span style="color: #EFF">provenances</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-771"><a id="__codelineno-0-771" name="__codelineno-0-771"></a>                <span style="color: #89DDFF">self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_provenances</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">provenances</span>
</span><span id="__span-0-772"><a id="__codelineno-0-772" name="__codelineno-0-772"></a>
</span><span id="__span-0-773"><a id="__codelineno-0-773" name="__codelineno-0-773"></a>            <span style="color: #89DDFF">self.</span><span style="color: #EFF">text</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;&quot;</span>  <span style="color: #546E7A; font-style: italic"># No text content for bundle-only documents</span>
</span><span id="__span-0-774"><a id="__codelineno-0-774" name="__codelineno-0-774"></a>        <span style="color: #546E7A; font-style: italic"># Handle list of FHIR resources</span>
</span><span id="__span-0-775"><a id="__codelineno-0-775" name="__codelineno-0-775"></a>        <span style="color: #BB80B3">elif</span> <span style="color: #89DDFF">(</span>
</span><span id="__span-0-776"><a id="__codelineno-0-776" name="__codelineno-0-776"></a>            <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-777"><a id="__codelineno-0-777" name="__codelineno-0-777"></a>            <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span>
</span><span id="__span-0-778"><a id="__codelineno-0-778" name="__codelineno-0-778"></a>            <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">[</span><span style="color: #F78C6C">0</span><span style="color: #89DDFF">],</span> <span style="color: #EFF">Resource</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-779"><a id="__codelineno-0-779" name="__codelineno-0-779"></a>        <span style="color: #89DDFF">):</span>
</span><span id="__span-0-780"><a id="__codelineno-0-780" name="__codelineno-0-780"></a>            <span style="color: #89DDFF">self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_bundle</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">create_bundle</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-781"><a id="__codelineno-0-781" name="__codelineno-0-781"></a>            <span style="color: #BB80B3">for</span> <span style="color: #EFF">resource</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-782"><a id="__codelineno-0-782" name="__codelineno-0-782"></a>                <span style="color: #EFF">add_resource</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_bundle</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">resource</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-783"><a id="__codelineno-0-783" name="__codelineno-0-783"></a>            <span style="color: #89DDFF">self.</span><span style="color: #EFF">text</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;&quot;</span>  <span style="color: #546E7A; font-style: italic"># No text content for resource-only documents</span>
</span><span id="__span-0-784"><a id="__codelineno-0-784" name="__codelineno-0-784"></a>        <span style="color: #BB80B3">else</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-785"><a id="__codelineno-0-785" name="__codelineno-0-785"></a>            <span style="color: #546E7A; font-style: italic"># Handle text data</span>
</span><span id="__span-0-786"><a id="__codelineno-0-786" name="__codelineno-0-786"></a>            <span style="color: #89DDFF">self.</span><span style="color: #EFF">text</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span> <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #BB80B3">else</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-787"><a id="__codelineno-0-787" name="__codelineno-0-787"></a>
</span><span id="__span-0-788"><a id="__codelineno-0-788" name="__codelineno-0-788"></a>        <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_tokens</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-789"><a id="__codelineno-0-789" name="__codelineno-0-789"></a>            <span style="color: #89DDFF">self.</span><span style="color: #EFF">_nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_tokens</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">.</span><span style="color: #EFF">split</span><span style="color: #89DDFF">()</span>  <span style="color: #546E7A; font-style: italic"># Basic tokenization if not provided</span>
</span><span id="__span-0-790"><a id="__codelineno-0-790" name="__codelineno-0-790"></a>
</span><span id="__span-0-791"><a id="__codelineno-0-791" name="__codelineno-0-791"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">word_count</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">int</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-792"><a id="__codelineno-0-792" name="__codelineno-0-792"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-793"><a id="__codelineno-0-793" name="__codelineno-0-793"></a><span style="color: #546E7A; font-style: italic">        Return the number of word tokens in the document.</span>
</span><span id="__span-0-794"><a id="__codelineno-0-794" name="__codelineno-0-794"></a>
</span><span id="__span-0-795"><a id="__codelineno-0-795" name="__codelineno-0-795"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-796"><a id="__codelineno-0-796" name="__codelineno-0-796"></a><span style="color: #546E7A; font-style: italic">            int: The count of tokenized words in the document.</span>
</span><span id="__span-0-797"><a id="__codelineno-0-797" name="__codelineno-0-797"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-798"><a id="__codelineno-0-798" name="__codelineno-0-798"></a>        <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_tokens</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-799"><a id="__codelineno-0-799" name="__codelineno-0-799"></a>
</span><span id="__span-0-800"><a id="__codelineno-0-800" name="__codelineno-0-800"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">update_problem_list_from_nlp</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-801"><a id="__codelineno-0-801" name="__codelineno-0-801"></a>        <span style="color: #89DDFF">self,</span>
</span><span id="__span-0-802"><a id="__codelineno-0-802" name="__codelineno-0-802"></a>        <span style="color: #EFF">patient_ref</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;Patient/123&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-803"><a id="__codelineno-0-803" name="__codelineno-0-803"></a>        <span style="color: #EFF">coding_system</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;http://snomed.info/sct&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-804"><a id="__codelineno-0-804" name="__codelineno-0-804"></a>        <span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;cui&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-805"><a id="__codelineno-0-805" name="__codelineno-0-805"></a>    <span style="color: #89DDFF">):</span>
</span><span id="__span-0-806"><a id="__codelineno-0-806" name="__codelineno-0-806"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-807"><a id="__codelineno-0-807" name="__codelineno-0-807"></a><span style="color: #546E7A; font-style: italic">        Populate or update the problem list using entities extracted via NLP.</span>
</span><span id="__span-0-808"><a id="__codelineno-0-808" name="__codelineno-0-808"></a>
</span><span id="__span-0-809"><a id="__codelineno-0-809" name="__codelineno-0-809"></a><span style="color: #546E7A; font-style: italic">        This method looks for entities with associated medical codes and creates FHIR Condition</span>
</span><span id="__span-0-810"><a id="__codelineno-0-810" name="__codelineno-0-810"></a><span style="color: #546E7A; font-style: italic">        resources from them. It supports a two-step process:</span>
</span><span id="__span-0-811"><a id="__codelineno-0-811" name="__codelineno-0-811"></a><span style="color: #546E7A; font-style: italic">        1. NER: Extract entities from text (spaCy, HuggingFace, etc.)</span>
</span><span id="__span-0-812"><a id="__codelineno-0-812" name="__codelineno-0-812"></a><span style="color: #546E7A; font-style: italic">        2. Entity Linking: Add medical codes to those entities</span>
</span><span id="__span-0-813"><a id="__codelineno-0-813" name="__codelineno-0-813"></a><span style="color: #546E7A; font-style: italic">        3. Problem List Creation: Convert linked entities to FHIR conditions (this method)</span>
</span><span id="__span-0-814"><a id="__codelineno-0-814" name="__codelineno-0-814"></a>
</span><span id="__span-0-815"><a id="__codelineno-0-815" name="__codelineno-0-815"></a><span style="color: #546E7A; font-style: italic">        The method extracts from:</span>
</span><span id="__span-0-816"><a id="__codelineno-0-816" name="__codelineno-0-816"></a><span style="color: #546E7A; font-style: italic">        1. spaCy entities with extension attributes (e.g., ent._.cui)</span>
</span><span id="__span-0-817"><a id="__codelineno-0-817" name="__codelineno-0-817"></a><span style="color: #546E7A; font-style: italic">        2. Generic entities in the NLP annotations container (framework-agnostic)</span>
</span><span id="__span-0-818"><a id="__codelineno-0-818" name="__codelineno-0-818"></a>
</span><span id="__span-0-819"><a id="__codelineno-0-819" name="__codelineno-0-819"></a><span style="color: #546E7A; font-style: italic">        TODO: make this more generic and support other resource types</span>
</span><span id="__span-0-820"><a id="__codelineno-0-820" name="__codelineno-0-820"></a>
</span><span id="__span-0-821"><a id="__codelineno-0-821" name="__codelineno-0-821"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-822"><a id="__codelineno-0-822" name="__codelineno-0-822"></a><span style="color: #546E7A; font-style: italic">            patient_ref: FHIR reference to the patient (default: &quot;Patient/123&quot;)</span>
</span><span id="__span-0-823"><a id="__codelineno-0-823" name="__codelineno-0-823"></a><span style="color: #546E7A; font-style: italic">            coding_system: Coding system URI for the conditions (default: SNOMED CT)</span>
</span><span id="__span-0-824"><a id="__codelineno-0-824" name="__codelineno-0-824"></a><span style="color: #546E7A; font-style: italic">            code_attribute: Name of the attribute containing the medical code (default: &quot;cui&quot;)</span>
</span><span id="__span-0-825"><a id="__codelineno-0-825" name="__codelineno-0-825"></a>
</span><span id="__span-0-826"><a id="__codelineno-0-826" name="__codelineno-0-826"></a><span style="color: #546E7A; font-style: italic">        Notes:</span>
</span><span id="__span-0-827"><a id="__codelineno-0-827" name="__codelineno-0-827"></a><span style="color: #546E7A; font-style: italic">            - Preserves any existing problem list Conditions.</span>
</span><span id="__span-0-828"><a id="__codelineno-0-828" name="__codelineno-0-828"></a><span style="color: #546E7A; font-style: italic">            - Supports framework-agnostic extraction (spaCy and dict entities).</span>
</span><span id="__span-0-829"><a id="__codelineno-0-829" name="__codelineno-0-829"></a><span style="color: #546E7A; font-style: italic">            - For spaCy, looks for entity extension attribute (e.g. ent._.cui).</span>
</span><span id="__span-0-830"><a id="__codelineno-0-830" name="__codelineno-0-830"></a><span style="color: #546E7A; font-style: italic">            - For non-spaCy, expects codes as dict keys (ent[&quot;cui&quot;], etc.).</span>
</span><span id="__span-0-831"><a id="__codelineno-0-831" name="__codelineno-0-831"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-832"><a id="__codelineno-0-832" name="__codelineno-0-832"></a>        <span style="color: #546E7A; font-style: italic"># Start with existing conditions to preserve them</span>
</span><span id="__span-0-833"><a id="__codelineno-0-833" name="__codelineno-0-833"></a>        <span style="color: #EFF">existing_conditions</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">problem_list</span><span style="color: #89DDFF">.</span><span style="color: #EFF">copy</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-834"><a id="__codelineno-0-834" name="__codelineno-0-834"></a>        <span style="color: #EFF">new_conditions</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[]</span>
</span><span id="__span-0-835"><a id="__codelineno-0-835" name="__codelineno-0-835"></a>
</span><span id="__span-0-836"><a id="__codelineno-0-836" name="__codelineno-0-836"></a>        <span style="color: #546E7A; font-style: italic"># 1. Extract from spaCy entities (if available)</span>
</span><span id="__span-0-837"><a id="__codelineno-0-837" name="__codelineno-0-837"></a>        <span style="color: #BB80B3">if</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_spacy_doc</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_spacy_doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">ents</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-838"><a id="__codelineno-0-838" name="__codelineno-0-838"></a>            <span style="color: #BB80B3">for</span> <span style="color: #EFF">ent</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_spacy_doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">ents</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-839"><a id="__codelineno-0-839" name="__codelineno-0-839"></a>                <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #EFF">Span</span><span style="color: #89DDFF">.</span><span style="color: #EFF">has_extension</span><span style="color: #89DDFF">(</span><span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-840"><a id="__codelineno-0-840" name="__codelineno-0-840"></a>                    <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">debug</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-841"><a id="__codelineno-0-841" name="__codelineno-0-841"></a>                        <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Extension &#39;</span><span style="color: #89DDFF">{</span><span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&#39; not found for spaCy entity </span><span style="color: #89DDFF">{</span><span style="color: #EFF">ent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-842"><a id="__codelineno-0-842" name="__codelineno-0-842"></a>                    <span style="color: #89DDFF">)</span>
</span><span id="__span-0-843"><a id="__codelineno-0-843" name="__codelineno-0-843"></a>                    <span style="color: #BB80B3">continue</span>
</span><span id="__span-0-844"><a id="__codelineno-0-844" name="__codelineno-0-844"></a>
</span><span id="__span-0-845"><a id="__codelineno-0-845" name="__codelineno-0-845"></a>                <span style="color: #EFF">code_value</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">getattr</span><span style="color: #89DDFF">(</span><span style="color: #EFF">ent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">None)</span>
</span><span id="__span-0-846"><a id="__codelineno-0-846" name="__codelineno-0-846"></a>                <span style="color: #BB80B3">if</span> <span style="color: #EFF">code_value</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-847"><a id="__codelineno-0-847" name="__codelineno-0-847"></a>                    <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">debug</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-848"><a id="__codelineno-0-848" name="__codelineno-0-848"></a>                        <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;No </span><span style="color: #89DDFF">{</span><span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D"> found for spaCy entity </span><span style="color: #89DDFF">{</span><span style="color: #EFF">ent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-849"><a id="__codelineno-0-849" name="__codelineno-0-849"></a>                    <span style="color: #89DDFF">)</span>
</span><span id="__span-0-850"><a id="__codelineno-0-850" name="__codelineno-0-850"></a>                    <span style="color: #BB80B3">continue</span>
</span><span id="__span-0-851"><a id="__codelineno-0-851" name="__codelineno-0-851"></a>
</span><span id="__span-0-852"><a id="__codelineno-0-852" name="__codelineno-0-852"></a>                <span style="color: #EFF">condition</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">create_condition</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-853"><a id="__codelineno-0-853" name="__codelineno-0-853"></a>                    <span style="color: #EFF">subject</span><span style="color: #89DDFF">=</span><span style="color: #EFF">patient_ref</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-854"><a id="__codelineno-0-854" name="__codelineno-0-854"></a>                    <span style="color: #EFF">code</span><span style="color: #89DDFF">=</span><span style="color: #EFF">code_value</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-855"><a id="__codelineno-0-855" name="__codelineno-0-855"></a>                    <span style="color: #EFF">display</span><span style="color: #89DDFF">=</span><span style="color: #EFF">ent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-856"><a id="__codelineno-0-856" name="__codelineno-0-856"></a>                    <span style="color: #EFF">system</span><span style="color: #89DDFF">=</span><span style="color: #EFF">coding_system</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-857"><a id="__codelineno-0-857" name="__codelineno-0-857"></a>                <span style="color: #89DDFF">)</span>
</span><span id="__span-0-858"><a id="__codelineno-0-858" name="__codelineno-0-858"></a>                <span style="color: #EFF">set_condition_category</span><span style="color: #89DDFF">(</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;problem-list-item&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-859"><a id="__codelineno-0-859" name="__codelineno-0-859"></a>                <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">debug</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-860"><a id="__codelineno-0-860" name="__codelineno-0-860"></a>                    <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Adding condition from spaCy: </span><span style="color: #89DDFF">{</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">.</span><span style="color: #EFF">model_dump</span><span style="color: #89DDFF">(</span><span style="color: #EFF">exclude_none</span><span style="color: #89DDFF">=True)}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-861"><a id="__codelineno-0-861" name="__codelineno-0-861"></a>                <span style="color: #89DDFF">)</span>
</span><span id="__span-0-862"><a id="__codelineno-0-862" name="__codelineno-0-862"></a>                <span style="color: #EFF">new_conditions</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-863"><a id="__codelineno-0-863" name="__codelineno-0-863"></a>
</span><span id="__span-0-864"><a id="__codelineno-0-864" name="__codelineno-0-864"></a>        <span style="color: #546E7A; font-style: italic"># 2. Extract from generic NLP entities (framework-agnostic)</span>
</span><span id="__span-0-865"><a id="__codelineno-0-865" name="__codelineno-0-865"></a>        <span style="color: #EFF">generic_entities</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get_entities</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-866"><a id="__codelineno-0-866" name="__codelineno-0-866"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">generic_entities</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-867"><a id="__codelineno-0-867" name="__codelineno-0-867"></a>            <span style="color: #BB80B3">for</span> <span style="color: #EFF">ent_dict</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">generic_entities</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-868"><a id="__codelineno-0-868" name="__codelineno-0-868"></a>                <span style="color: #546E7A; font-style: italic"># Skip if no linked code</span>
</span><span id="__span-0-869"><a id="__codelineno-0-869" name="__codelineno-0-869"></a>                <span style="color: #EFF">code_value</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">ent_dict</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-870"><a id="__codelineno-0-870" name="__codelineno-0-870"></a>                <span style="color: #BB80B3">if</span> <span style="color: #EFF">code_value</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-871"><a id="__codelineno-0-871" name="__codelineno-0-871"></a>                    <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">debug</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-872"><a id="__codelineno-0-872" name="__codelineno-0-872"></a>                        <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;No </span><span style="color: #89DDFF">{</span><span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D"> found for entity </span><span style="color: #89DDFF">{</span><span style="color: #EFF">ent_dict</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&#39;text&#39;</span><span style="color: #89DDFF">,</span><span style="color: #EFF"> </span><span style="color: #C3E88D">&#39;unknown&#39;</span><span style="color: #89DDFF">)}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-873"><a id="__codelineno-0-873" name="__codelineno-0-873"></a>                    <span style="color: #89DDFF">)</span>
</span><span id="__span-0-874"><a id="__codelineno-0-874" name="__codelineno-0-874"></a>                    <span style="color: #BB80B3">continue</span>
</span><span id="__span-0-875"><a id="__codelineno-0-875" name="__codelineno-0-875"></a>
</span><span id="__span-0-876"><a id="__codelineno-0-876" name="__codelineno-0-876"></a>                <span style="color: #EFF">entity_text</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">ent_dict</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;text&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;unknown&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-877"><a id="__codelineno-0-877" name="__codelineno-0-877"></a>
</span><span id="__span-0-878"><a id="__codelineno-0-878" name="__codelineno-0-878"></a>                <span style="color: #EFF">condition</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">create_condition</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-879"><a id="__codelineno-0-879" name="__codelineno-0-879"></a>                    <span style="color: #EFF">subject</span><span style="color: #89DDFF">=</span><span style="color: #EFF">patient_ref</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-880"><a id="__codelineno-0-880" name="__codelineno-0-880"></a>                    <span style="color: #EFF">code</span><span style="color: #89DDFF">=</span><span style="color: #EFF">code_value</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-881"><a id="__codelineno-0-881" name="__codelineno-0-881"></a>                    <span style="color: #EFF">display</span><span style="color: #89DDFF">=</span><span style="color: #EFF">entity_text</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-882"><a id="__codelineno-0-882" name="__codelineno-0-882"></a>                    <span style="color: #EFF">system</span><span style="color: #89DDFF">=</span><span style="color: #EFF">coding_system</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-883"><a id="__codelineno-0-883" name="__codelineno-0-883"></a>                <span style="color: #89DDFF">)</span>
</span><span id="__span-0-884"><a id="__codelineno-0-884" name="__codelineno-0-884"></a>                <span style="color: #EFF">set_condition_category</span><span style="color: #89DDFF">(</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;problem-list-item&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-885"><a id="__codelineno-0-885" name="__codelineno-0-885"></a>                <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">debug</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-886"><a id="__codelineno-0-886" name="__codelineno-0-886"></a>                    <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Adding condition from entities: </span><span style="color: #89DDFF">{</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">.</span><span style="color: #EFF">model_dump</span><span style="color: #89DDFF">(</span><span style="color: #EFF">exclude_none</span><span style="color: #89DDFF">=True)}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-887"><a id="__codelineno-0-887" name="__codelineno-0-887"></a>                <span style="color: #89DDFF">)</span>
</span><span id="__span-0-888"><a id="__codelineno-0-888" name="__codelineno-0-888"></a>                <span style="color: #EFF">new_conditions</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-889"><a id="__codelineno-0-889" name="__codelineno-0-889"></a>
</span><span id="__span-0-890"><a id="__codelineno-0-890" name="__codelineno-0-890"></a>        <span style="color: #546E7A; font-style: italic"># Update problem list with combined conditions (replace to avoid duplication)</span>
</span><span id="__span-0-891"><a id="__codelineno-0-891" name="__codelineno-0-891"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">new_conditions</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-892"><a id="__codelineno-0-892" name="__codelineno-0-892"></a>            <span style="color: #EFF">all_conditions</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">existing_conditions</span> <span style="color: #89DDFF">+</span> <span style="color: #EFF">new_conditions</span>
</span><span id="__span-0-893"><a id="__codelineno-0-893" name="__codelineno-0-893"></a>            <span style="color: #89DDFF">self.</span><span style="color: #EFF">fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">add_resources</span><span style="color: #89DDFF">(</span><span style="color: #EFF">all_conditions</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;Condition&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">replace</span><span style="color: #89DDFF">=True)</span>
</span><span id="__span-0-894"><a id="__codelineno-0-894" name="__codelineno-0-894"></a>
</span><span id="__span-0-895"><a id="__codelineno-0-895" name="__codelineno-0-895"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">__iter__</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Iterator</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-896"><a id="__codelineno-0-896" name="__codelineno-0-896"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-897"><a id="__codelineno-0-897" name="__codelineno-0-897"></a><span style="color: #546E7A; font-style: italic">        Iterate through the document&#39;s tokens.</span>
</span><span id="__span-0-898"><a id="__codelineno-0-898" name="__codelineno-0-898"></a>
</span><span id="__span-0-899"><a id="__codelineno-0-899" name="__codelineno-0-899"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-900"><a id="__codelineno-0-900" name="__codelineno-0-900"></a><span style="color: #546E7A; font-style: italic">            Iterator[str]: Iterator over the document tokens.</span>
</span><span id="__span-0-901"><a id="__codelineno-0-901" name="__codelineno-0-901"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-902"><a id="__codelineno-0-902" name="__codelineno-0-902"></a>        <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">iter</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_tokens</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-903"><a id="__codelineno-0-903" name="__codelineno-0-903"></a>
</span><span id="__span-0-904"><a id="__codelineno-0-904" name="__codelineno-0-904"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">__len__</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">int</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-905"><a id="__codelineno-0-905" name="__codelineno-0-905"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-906"><a id="__codelineno-0-906" name="__codelineno-0-906"></a><span style="color: #546E7A; font-style: italic">        Return the length of the document&#39;s text.</span>
</span><span id="__span-0-907"><a id="__codelineno-0-907" name="__codelineno-0-907"></a>
</span><span id="__span-0-908"><a id="__codelineno-0-908" name="__codelineno-0-908"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-909"><a id="__codelineno-0-909" name="__codelineno-0-909"></a><span style="color: #546E7A; font-style: italic">            int: Character length of the document text.</span>
</span><span id="__span-0-910"><a id="__codelineno-0-910" name="__codelineno-0-910"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-911"><a id="__codelineno-0-911" name="__codelineno-0-911"></a>        <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">)</span>
</span></code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.document.Document.__iter__" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #82AAFF">__iter__</span><span style="color: #89DDFF">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Iterate through the document's tokens.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.Iterator">Iterator</span>[<span title="str">str</span>]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Iterator[str]: Iterator over the document tokens.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/document.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-895">895</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-896">896</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-897">897</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-898">898</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-899">899</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-900">900</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-901">901</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-902">902</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-895"><a id="__codelineno-0-895" name="__codelineno-0-895"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">__iter__</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Iterator</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-896"><a id="__codelineno-0-896" name="__codelineno-0-896"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-897"><a id="__codelineno-0-897" name="__codelineno-0-897"></a><span style="color: #546E7A; font-style: italic">    Iterate through the document&#39;s tokens.</span>
</span><span id="__span-0-898"><a id="__codelineno-0-898" name="__codelineno-0-898"></a>
</span><span id="__span-0-899"><a id="__codelineno-0-899" name="__codelineno-0-899"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-900"><a id="__codelineno-0-900" name="__codelineno-0-900"></a><span style="color: #546E7A; font-style: italic">        Iterator[str]: Iterator over the document tokens.</span>
</span><span id="__span-0-901"><a id="__codelineno-0-901" name="__codelineno-0-901"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-902"><a id="__codelineno-0-902" name="__codelineno-0-902"></a>    <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">iter</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_tokens</span><span style="color: #89DDFF">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.document.Document.__len__" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #82AAFF">__len__</span><span style="color: #89DDFF">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Return the length of the document's text.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>int</code>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Character length of the document text.</p>
              </div>
                <p>
                  <span class="doc-returns-annotation">
                    <b>TYPE:</b>
                      <code><span title="int">int</span></code>
                  </span>
                </p>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/document.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-904">904</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-905">905</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-906">906</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-907">907</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-908">908</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-909">909</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-910">910</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-911">911</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-904"><a id="__codelineno-0-904" name="__codelineno-0-904"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">__len__</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">int</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-905"><a id="__codelineno-0-905" name="__codelineno-0-905"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-906"><a id="__codelineno-0-906" name="__codelineno-0-906"></a><span style="color: #546E7A; font-style: italic">    Return the length of the document&#39;s text.</span>
</span><span id="__span-0-907"><a id="__codelineno-0-907" name="__codelineno-0-907"></a>
</span><span id="__span-0-908"><a id="__codelineno-0-908" name="__codelineno-0-908"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-909"><a id="__codelineno-0-909" name="__codelineno-0-909"></a><span style="color: #546E7A; font-style: italic">        int: Character length of the document text.</span>
</span><span id="__span-0-910"><a id="__codelineno-0-910" name="__codelineno-0-910"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-911"><a id="__codelineno-0-911" name="__codelineno-0-911"></a>    <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.document.Document.__post_init__" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">__post_init__</span><span style="color: #89DDFF">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Post-initialization setup to process textual or FHIR data.</p>
<ul>
<li>If input data is a FHIR Bundle, stores it and extracts OperationOutcome and Provenance resources.</li>
<li>If input data is a list of FHIR resources, wraps them in a Bundle.</li>
<li>For text input, sets .text field accordingly.</li>
<li>Performs basic whitespace tokenization if necessary.</li>
</ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/document.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-748">748</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-749">749</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-750">750</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-751">751</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-752">752</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-753">753</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-754">754</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-755">755</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-756">756</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-757">757</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-758">758</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-759">759</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-760">760</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-761">761</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-762">762</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-763">763</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-764">764</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-765">765</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-766">766</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-767">767</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-768">768</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-769">769</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-770">770</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-771">771</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-772">772</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-773">773</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-774">774</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-775">775</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-776">776</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-777">777</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-778">778</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-779">779</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-780">780</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-781">781</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-782">782</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-783">783</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-784">784</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-785">785</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-786">786</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-787">787</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-788">788</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-789">789</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-748"><a id="__codelineno-0-748" name="__codelineno-0-748"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">__post_init__</span><span style="color: #89DDFF">(self):</span>
</span><span id="__span-0-749"><a id="__codelineno-0-749" name="__codelineno-0-749"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-750"><a id="__codelineno-0-750" name="__codelineno-0-750"></a><span style="color: #546E7A; font-style: italic">    Post-initialization setup to process textual or FHIR data.</span>
</span><span id="__span-0-751"><a id="__codelineno-0-751" name="__codelineno-0-751"></a>
</span><span id="__span-0-752"><a id="__codelineno-0-752" name="__codelineno-0-752"></a><span style="color: #546E7A; font-style: italic">    - If input data is a FHIR Bundle, stores it and extracts OperationOutcome and Provenance resources.</span>
</span><span id="__span-0-753"><a id="__codelineno-0-753" name="__codelineno-0-753"></a><span style="color: #546E7A; font-style: italic">    - If input data is a list of FHIR resources, wraps them in a Bundle.</span>
</span><span id="__span-0-754"><a id="__codelineno-0-754" name="__codelineno-0-754"></a><span style="color: #546E7A; font-style: italic">    - For text input, sets .text field accordingly.</span>
</span><span id="__span-0-755"><a id="__codelineno-0-755" name="__codelineno-0-755"></a><span style="color: #546E7A; font-style: italic">    - Performs basic whitespace tokenization if necessary.</span>
</span><span id="__span-0-756"><a id="__codelineno-0-756" name="__codelineno-0-756"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-757"><a id="__codelineno-0-757" name="__codelineno-0-757"></a>    <span style="color: #82AAFF">super</span><span style="color: #89DDFF">().</span><span style="color: #EFF">__post_init__</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-758"><a id="__codelineno-0-758" name="__codelineno-0-758"></a>
</span><span id="__span-0-759"><a id="__codelineno-0-759" name="__codelineno-0-759"></a>    <span style="color: #546E7A; font-style: italic"># Handle FHIR Bundle data</span>
</span><span id="__span-0-760"><a id="__codelineno-0-760" name="__codelineno-0-760"></a>    <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Bundle</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-761"><a id="__codelineno-0-761" name="__codelineno-0-761"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_bundle</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span>
</span><span id="__span-0-762"><a id="__codelineno-0-762" name="__codelineno-0-762"></a>
</span><span id="__span-0-763"><a id="__codelineno-0-763" name="__codelineno-0-763"></a>        <span style="color: #546E7A; font-style: italic"># Extract OperationOutcome resources (operation results/errors)</span>
</span><span id="__span-0-764"><a id="__codelineno-0-764" name="__codelineno-0-764"></a>        <span style="color: #EFF">outcomes</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">extract_resources</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_bundle</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;OperationOutcome&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-765"><a id="__codelineno-0-765" name="__codelineno-0-765"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">outcomes</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-766"><a id="__codelineno-0-766" name="__codelineno-0-766"></a>            <span style="color: #89DDFF">self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_operation_outcomes</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">outcomes</span>
</span><span id="__span-0-767"><a id="__codelineno-0-767" name="__codelineno-0-767"></a>
</span><span id="__span-0-768"><a id="__codelineno-0-768" name="__codelineno-0-768"></a>        <span style="color: #546E7A; font-style: italic"># Extract Provenance resources (data lineage/origin)</span>
</span><span id="__span-0-769"><a id="__codelineno-0-769" name="__codelineno-0-769"></a>        <span style="color: #EFF">provenances</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">extract_resources</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_bundle</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;Provenance&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-770"><a id="__codelineno-0-770" name="__codelineno-0-770"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">provenances</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-771"><a id="__codelineno-0-771" name="__codelineno-0-771"></a>            <span style="color: #89DDFF">self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_provenances</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">provenances</span>
</span><span id="__span-0-772"><a id="__codelineno-0-772" name="__codelineno-0-772"></a>
</span><span id="__span-0-773"><a id="__codelineno-0-773" name="__codelineno-0-773"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">text</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;&quot;</span>  <span style="color: #546E7A; font-style: italic"># No text content for bundle-only documents</span>
</span><span id="__span-0-774"><a id="__codelineno-0-774" name="__codelineno-0-774"></a>    <span style="color: #546E7A; font-style: italic"># Handle list of FHIR resources</span>
</span><span id="__span-0-775"><a id="__codelineno-0-775" name="__codelineno-0-775"></a>    <span style="color: #BB80B3">elif</span> <span style="color: #89DDFF">(</span>
</span><span id="__span-0-776"><a id="__codelineno-0-776" name="__codelineno-0-776"></a>        <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-777"><a id="__codelineno-0-777" name="__codelineno-0-777"></a>        <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span>
</span><span id="__span-0-778"><a id="__codelineno-0-778" name="__codelineno-0-778"></a>        <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">[</span><span style="color: #F78C6C">0</span><span style="color: #89DDFF">],</span> <span style="color: #EFF">Resource</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-779"><a id="__codelineno-0-779" name="__codelineno-0-779"></a>    <span style="color: #89DDFF">):</span>
</span><span id="__span-0-780"><a id="__codelineno-0-780" name="__codelineno-0-780"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_bundle</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">create_bundle</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-781"><a id="__codelineno-0-781" name="__codelineno-0-781"></a>        <span style="color: #BB80B3">for</span> <span style="color: #EFF">resource</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-782"><a id="__codelineno-0-782" name="__codelineno-0-782"></a>            <span style="color: #EFF">add_resource</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_bundle</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">resource</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-783"><a id="__codelineno-0-783" name="__codelineno-0-783"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">text</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;&quot;</span>  <span style="color: #546E7A; font-style: italic"># No text content for resource-only documents</span>
</span><span id="__span-0-784"><a id="__codelineno-0-784" name="__codelineno-0-784"></a>    <span style="color: #BB80B3">else</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-785"><a id="__codelineno-0-785" name="__codelineno-0-785"></a>        <span style="color: #546E7A; font-style: italic"># Handle text data</span>
</span><span id="__span-0-786"><a id="__codelineno-0-786" name="__codelineno-0-786"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">text</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">data</span> <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #BB80B3">else</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-787"><a id="__codelineno-0-787" name="__codelineno-0-787"></a>
</span><span id="__span-0-788"><a id="__codelineno-0-788" name="__codelineno-0-788"></a>    <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_tokens</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-789"><a id="__codelineno-0-789" name="__codelineno-0-789"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">_nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_tokens</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">.</span><span style="color: #EFF">split</span><span style="color: #89DDFF">()</span>  <span style="color: #546E7A; font-style: italic"># Basic tokenization if not provided</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.document.Document.update_problem_list_from_nlp" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">update_problem_list_from_nlp</span><span style="color: #89DDFF">(</span><span style="color: #EFF">patient_ref</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&#39;Patient/123&#39;</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">coding_system</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&#39;http://snomed.info/sct&#39;</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&#39;cui&#39;</span><span style="color: #89DDFF">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Populate or update the problem list using entities extracted via NLP.</p>
<p>This method looks for entities with associated medical codes and creates FHIR Condition
resources from them. It supports a two-step process:
1. NER: Extract entities from text (spaCy, HuggingFace, etc.)
2. Entity Linking: Add medical codes to those entities
3. Problem List Creation: Convert linked entities to FHIR conditions (this method)</p>
<p>The method extracts from:
1. spaCy entities with extension attributes (e.g., ent._.cui)
2. Generic entities in the NLP annotations container (framework-agnostic)</p>
<p>TODO: make this more generic and support other resource types</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>patient_ref</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>FHIR reference to the patient (default: "Patient/123")</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#39;Patient/123&#39;</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>coding_system</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Coding system URI for the conditions (default: SNOMED CT)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#39;http://snomed.info/sct&#39;</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>code_attribute</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Name of the attribute containing the medical code (default: "cui")</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#39;cui&#39;</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<details class="notes" open>
  <summary>Notes</summary>
  <ul>
<li>Preserves any existing problem list Conditions.</li>
<li>Supports framework-agnostic extraction (spaCy and dict entities).</li>
<li>For spaCy, looks for entity extension attribute (e.g. ent._.cui).</li>
<li>For non-spaCy, expects codes as dict keys (ent["cui"], etc.).</li>
</ul>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/document.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-800">800</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-801">801</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-802">802</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-803">803</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-804">804</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-805">805</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-806">806</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-807">807</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-808">808</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-809">809</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-810">810</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-811">811</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-812">812</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-813">813</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-814">814</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-815">815</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-816">816</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-817">817</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-818">818</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-819">819</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-820">820</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-821">821</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-822">822</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-823">823</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-824">824</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-825">825</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-826">826</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-827">827</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-828">828</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-829">829</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-830">830</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-831">831</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-832">832</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-833">833</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-834">834</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-835">835</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-836">836</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-837">837</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-838">838</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-839">839</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-840">840</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-841">841</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-842">842</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-843">843</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-844">844</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-845">845</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-846">846</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-847">847</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-848">848</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-849">849</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-850">850</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-851">851</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-852">852</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-853">853</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-854">854</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-855">855</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-856">856</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-857">857</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-858">858</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-859">859</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-860">860</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-861">861</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-862">862</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-863">863</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-864">864</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-865">865</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-866">866</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-867">867</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-868">868</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-869">869</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-870">870</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-871">871</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-872">872</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-873">873</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-874">874</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-875">875</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-876">876</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-877">877</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-878">878</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-879">879</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-880">880</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-881">881</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-882">882</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-883">883</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-884">884</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-885">885</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-886">886</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-887">887</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-888">888</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-889">889</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-890">890</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-891">891</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-892">892</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-893">893</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-800"><a id="__codelineno-0-800" name="__codelineno-0-800"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">update_problem_list_from_nlp</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-801"><a id="__codelineno-0-801" name="__codelineno-0-801"></a>    <span style="color: #89DDFF">self,</span>
</span><span id="__span-0-802"><a id="__codelineno-0-802" name="__codelineno-0-802"></a>    <span style="color: #EFF">patient_ref</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;Patient/123&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-803"><a id="__codelineno-0-803" name="__codelineno-0-803"></a>    <span style="color: #EFF">coding_system</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;http://snomed.info/sct&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-804"><a id="__codelineno-0-804" name="__codelineno-0-804"></a>    <span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;cui&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-805"><a id="__codelineno-0-805" name="__codelineno-0-805"></a><span style="color: #89DDFF">):</span>
</span><span id="__span-0-806"><a id="__codelineno-0-806" name="__codelineno-0-806"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-807"><a id="__codelineno-0-807" name="__codelineno-0-807"></a><span style="color: #546E7A; font-style: italic">    Populate or update the problem list using entities extracted via NLP.</span>
</span><span id="__span-0-808"><a id="__codelineno-0-808" name="__codelineno-0-808"></a>
</span><span id="__span-0-809"><a id="__codelineno-0-809" name="__codelineno-0-809"></a><span style="color: #546E7A; font-style: italic">    This method looks for entities with associated medical codes and creates FHIR Condition</span>
</span><span id="__span-0-810"><a id="__codelineno-0-810" name="__codelineno-0-810"></a><span style="color: #546E7A; font-style: italic">    resources from them. It supports a two-step process:</span>
</span><span id="__span-0-811"><a id="__codelineno-0-811" name="__codelineno-0-811"></a><span style="color: #546E7A; font-style: italic">    1. NER: Extract entities from text (spaCy, HuggingFace, etc.)</span>
</span><span id="__span-0-812"><a id="__codelineno-0-812" name="__codelineno-0-812"></a><span style="color: #546E7A; font-style: italic">    2. Entity Linking: Add medical codes to those entities</span>
</span><span id="__span-0-813"><a id="__codelineno-0-813" name="__codelineno-0-813"></a><span style="color: #546E7A; font-style: italic">    3. Problem List Creation: Convert linked entities to FHIR conditions (this method)</span>
</span><span id="__span-0-814"><a id="__codelineno-0-814" name="__codelineno-0-814"></a>
</span><span id="__span-0-815"><a id="__codelineno-0-815" name="__codelineno-0-815"></a><span style="color: #546E7A; font-style: italic">    The method extracts from:</span>
</span><span id="__span-0-816"><a id="__codelineno-0-816" name="__codelineno-0-816"></a><span style="color: #546E7A; font-style: italic">    1. spaCy entities with extension attributes (e.g., ent._.cui)</span>
</span><span id="__span-0-817"><a id="__codelineno-0-817" name="__codelineno-0-817"></a><span style="color: #546E7A; font-style: italic">    2. Generic entities in the NLP annotations container (framework-agnostic)</span>
</span><span id="__span-0-818"><a id="__codelineno-0-818" name="__codelineno-0-818"></a>
</span><span id="__span-0-819"><a id="__codelineno-0-819" name="__codelineno-0-819"></a><span style="color: #546E7A; font-style: italic">    TODO: make this more generic and support other resource types</span>
</span><span id="__span-0-820"><a id="__codelineno-0-820" name="__codelineno-0-820"></a>
</span><span id="__span-0-821"><a id="__codelineno-0-821" name="__codelineno-0-821"></a><span style="color: #546E7A; font-style: italic">    Args:</span>
</span><span id="__span-0-822"><a id="__codelineno-0-822" name="__codelineno-0-822"></a><span style="color: #546E7A; font-style: italic">        patient_ref: FHIR reference to the patient (default: &quot;Patient/123&quot;)</span>
</span><span id="__span-0-823"><a id="__codelineno-0-823" name="__codelineno-0-823"></a><span style="color: #546E7A; font-style: italic">        coding_system: Coding system URI for the conditions (default: SNOMED CT)</span>
</span><span id="__span-0-824"><a id="__codelineno-0-824" name="__codelineno-0-824"></a><span style="color: #546E7A; font-style: italic">        code_attribute: Name of the attribute containing the medical code (default: &quot;cui&quot;)</span>
</span><span id="__span-0-825"><a id="__codelineno-0-825" name="__codelineno-0-825"></a>
</span><span id="__span-0-826"><a id="__codelineno-0-826" name="__codelineno-0-826"></a><span style="color: #546E7A; font-style: italic">    Notes:</span>
</span><span id="__span-0-827"><a id="__codelineno-0-827" name="__codelineno-0-827"></a><span style="color: #546E7A; font-style: italic">        - Preserves any existing problem list Conditions.</span>
</span><span id="__span-0-828"><a id="__codelineno-0-828" name="__codelineno-0-828"></a><span style="color: #546E7A; font-style: italic">        - Supports framework-agnostic extraction (spaCy and dict entities).</span>
</span><span id="__span-0-829"><a id="__codelineno-0-829" name="__codelineno-0-829"></a><span style="color: #546E7A; font-style: italic">        - For spaCy, looks for entity extension attribute (e.g. ent._.cui).</span>
</span><span id="__span-0-830"><a id="__codelineno-0-830" name="__codelineno-0-830"></a><span style="color: #546E7A; font-style: italic">        - For non-spaCy, expects codes as dict keys (ent[&quot;cui&quot;], etc.).</span>
</span><span id="__span-0-831"><a id="__codelineno-0-831" name="__codelineno-0-831"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-832"><a id="__codelineno-0-832" name="__codelineno-0-832"></a>    <span style="color: #546E7A; font-style: italic"># Start with existing conditions to preserve them</span>
</span><span id="__span-0-833"><a id="__codelineno-0-833" name="__codelineno-0-833"></a>    <span style="color: #EFF">existing_conditions</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">problem_list</span><span style="color: #89DDFF">.</span><span style="color: #EFF">copy</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-834"><a id="__codelineno-0-834" name="__codelineno-0-834"></a>    <span style="color: #EFF">new_conditions</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[]</span>
</span><span id="__span-0-835"><a id="__codelineno-0-835" name="__codelineno-0-835"></a>
</span><span id="__span-0-836"><a id="__codelineno-0-836" name="__codelineno-0-836"></a>    <span style="color: #546E7A; font-style: italic"># 1. Extract from spaCy entities (if available)</span>
</span><span id="__span-0-837"><a id="__codelineno-0-837" name="__codelineno-0-837"></a>    <span style="color: #BB80B3">if</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_spacy_doc</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_spacy_doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">ents</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-838"><a id="__codelineno-0-838" name="__codelineno-0-838"></a>        <span style="color: #BB80B3">for</span> <span style="color: #EFF">ent</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_spacy_doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">ents</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-839"><a id="__codelineno-0-839" name="__codelineno-0-839"></a>            <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #EFF">Span</span><span style="color: #89DDFF">.</span><span style="color: #EFF">has_extension</span><span style="color: #89DDFF">(</span><span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-840"><a id="__codelineno-0-840" name="__codelineno-0-840"></a>                <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">debug</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-841"><a id="__codelineno-0-841" name="__codelineno-0-841"></a>                    <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Extension &#39;</span><span style="color: #89DDFF">{</span><span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&#39; not found for spaCy entity </span><span style="color: #89DDFF">{</span><span style="color: #EFF">ent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-842"><a id="__codelineno-0-842" name="__codelineno-0-842"></a>                <span style="color: #89DDFF">)</span>
</span><span id="__span-0-843"><a id="__codelineno-0-843" name="__codelineno-0-843"></a>                <span style="color: #BB80B3">continue</span>
</span><span id="__span-0-844"><a id="__codelineno-0-844" name="__codelineno-0-844"></a>
</span><span id="__span-0-845"><a id="__codelineno-0-845" name="__codelineno-0-845"></a>            <span style="color: #EFF">code_value</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">getattr</span><span style="color: #89DDFF">(</span><span style="color: #EFF">ent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">None)</span>
</span><span id="__span-0-846"><a id="__codelineno-0-846" name="__codelineno-0-846"></a>            <span style="color: #BB80B3">if</span> <span style="color: #EFF">code_value</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-847"><a id="__codelineno-0-847" name="__codelineno-0-847"></a>                <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">debug</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-848"><a id="__codelineno-0-848" name="__codelineno-0-848"></a>                    <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;No </span><span style="color: #89DDFF">{</span><span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D"> found for spaCy entity </span><span style="color: #89DDFF">{</span><span style="color: #EFF">ent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-849"><a id="__codelineno-0-849" name="__codelineno-0-849"></a>                <span style="color: #89DDFF">)</span>
</span><span id="__span-0-850"><a id="__codelineno-0-850" name="__codelineno-0-850"></a>                <span style="color: #BB80B3">continue</span>
</span><span id="__span-0-851"><a id="__codelineno-0-851" name="__codelineno-0-851"></a>
</span><span id="__span-0-852"><a id="__codelineno-0-852" name="__codelineno-0-852"></a>            <span style="color: #EFF">condition</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">create_condition</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-853"><a id="__codelineno-0-853" name="__codelineno-0-853"></a>                <span style="color: #EFF">subject</span><span style="color: #89DDFF">=</span><span style="color: #EFF">patient_ref</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-854"><a id="__codelineno-0-854" name="__codelineno-0-854"></a>                <span style="color: #EFF">code</span><span style="color: #89DDFF">=</span><span style="color: #EFF">code_value</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-855"><a id="__codelineno-0-855" name="__codelineno-0-855"></a>                <span style="color: #EFF">display</span><span style="color: #89DDFF">=</span><span style="color: #EFF">ent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-856"><a id="__codelineno-0-856" name="__codelineno-0-856"></a>                <span style="color: #EFF">system</span><span style="color: #89DDFF">=</span><span style="color: #EFF">coding_system</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-857"><a id="__codelineno-0-857" name="__codelineno-0-857"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-858"><a id="__codelineno-0-858" name="__codelineno-0-858"></a>            <span style="color: #EFF">set_condition_category</span><span style="color: #89DDFF">(</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;problem-list-item&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-859"><a id="__codelineno-0-859" name="__codelineno-0-859"></a>            <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">debug</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-860"><a id="__codelineno-0-860" name="__codelineno-0-860"></a>                <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Adding condition from spaCy: </span><span style="color: #89DDFF">{</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">.</span><span style="color: #EFF">model_dump</span><span style="color: #89DDFF">(</span><span style="color: #EFF">exclude_none</span><span style="color: #89DDFF">=True)}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-861"><a id="__codelineno-0-861" name="__codelineno-0-861"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-862"><a id="__codelineno-0-862" name="__codelineno-0-862"></a>            <span style="color: #EFF">new_conditions</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-863"><a id="__codelineno-0-863" name="__codelineno-0-863"></a>
</span><span id="__span-0-864"><a id="__codelineno-0-864" name="__codelineno-0-864"></a>    <span style="color: #546E7A; font-style: italic"># 2. Extract from generic NLP entities (framework-agnostic)</span>
</span><span id="__span-0-865"><a id="__codelineno-0-865" name="__codelineno-0-865"></a>    <span style="color: #EFF">generic_entities</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get_entities</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-866"><a id="__codelineno-0-866" name="__codelineno-0-866"></a>    <span style="color: #BB80B3">if</span> <span style="color: #EFF">generic_entities</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-867"><a id="__codelineno-0-867" name="__codelineno-0-867"></a>        <span style="color: #BB80B3">for</span> <span style="color: #EFF">ent_dict</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">generic_entities</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-868"><a id="__codelineno-0-868" name="__codelineno-0-868"></a>            <span style="color: #546E7A; font-style: italic"># Skip if no linked code</span>
</span><span id="__span-0-869"><a id="__codelineno-0-869" name="__codelineno-0-869"></a>            <span style="color: #EFF">code_value</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">ent_dict</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-870"><a id="__codelineno-0-870" name="__codelineno-0-870"></a>            <span style="color: #BB80B3">if</span> <span style="color: #EFF">code_value</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-871"><a id="__codelineno-0-871" name="__codelineno-0-871"></a>                <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">debug</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-872"><a id="__codelineno-0-872" name="__codelineno-0-872"></a>                    <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;No </span><span style="color: #89DDFF">{</span><span style="color: #EFF">code_attribute</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D"> found for entity </span><span style="color: #89DDFF">{</span><span style="color: #EFF">ent_dict</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&#39;text&#39;</span><span style="color: #89DDFF">,</span><span style="color: #EFF"> </span><span style="color: #C3E88D">&#39;unknown&#39;</span><span style="color: #89DDFF">)}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-873"><a id="__codelineno-0-873" name="__codelineno-0-873"></a>                <span style="color: #89DDFF">)</span>
</span><span id="__span-0-874"><a id="__codelineno-0-874" name="__codelineno-0-874"></a>                <span style="color: #BB80B3">continue</span>
</span><span id="__span-0-875"><a id="__codelineno-0-875" name="__codelineno-0-875"></a>
</span><span id="__span-0-876"><a id="__codelineno-0-876" name="__codelineno-0-876"></a>            <span style="color: #EFF">entity_text</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">ent_dict</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;text&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;unknown&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-877"><a id="__codelineno-0-877" name="__codelineno-0-877"></a>
</span><span id="__span-0-878"><a id="__codelineno-0-878" name="__codelineno-0-878"></a>            <span style="color: #EFF">condition</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">create_condition</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-879"><a id="__codelineno-0-879" name="__codelineno-0-879"></a>                <span style="color: #EFF">subject</span><span style="color: #89DDFF">=</span><span style="color: #EFF">patient_ref</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-880"><a id="__codelineno-0-880" name="__codelineno-0-880"></a>                <span style="color: #EFF">code</span><span style="color: #89DDFF">=</span><span style="color: #EFF">code_value</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-881"><a id="__codelineno-0-881" name="__codelineno-0-881"></a>                <span style="color: #EFF">display</span><span style="color: #89DDFF">=</span><span style="color: #EFF">entity_text</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-882"><a id="__codelineno-0-882" name="__codelineno-0-882"></a>                <span style="color: #EFF">system</span><span style="color: #89DDFF">=</span><span style="color: #EFF">coding_system</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-883"><a id="__codelineno-0-883" name="__codelineno-0-883"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-884"><a id="__codelineno-0-884" name="__codelineno-0-884"></a>            <span style="color: #EFF">set_condition_category</span><span style="color: #89DDFF">(</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;problem-list-item&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-885"><a id="__codelineno-0-885" name="__codelineno-0-885"></a>            <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">debug</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-886"><a id="__codelineno-0-886" name="__codelineno-0-886"></a>                <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Adding condition from entities: </span><span style="color: #89DDFF">{</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">.</span><span style="color: #EFF">model_dump</span><span style="color: #89DDFF">(</span><span style="color: #EFF">exclude_none</span><span style="color: #89DDFF">=True)}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-887"><a id="__codelineno-0-887" name="__codelineno-0-887"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-888"><a id="__codelineno-0-888" name="__codelineno-0-888"></a>            <span style="color: #EFF">new_conditions</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">condition</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-889"><a id="__codelineno-0-889" name="__codelineno-0-889"></a>
</span><span id="__span-0-890"><a id="__codelineno-0-890" name="__codelineno-0-890"></a>    <span style="color: #546E7A; font-style: italic"># Update problem list with combined conditions (replace to avoid duplication)</span>
</span><span id="__span-0-891"><a id="__codelineno-0-891" name="__codelineno-0-891"></a>    <span style="color: #BB80B3">if</span> <span style="color: #EFF">new_conditions</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-892"><a id="__codelineno-0-892" name="__codelineno-0-892"></a>        <span style="color: #EFF">all_conditions</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">existing_conditions</span> <span style="color: #89DDFF">+</span> <span style="color: #EFF">new_conditions</span>
</span><span id="__span-0-893"><a id="__codelineno-0-893" name="__codelineno-0-893"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">fhir</span><span style="color: #89DDFF">.</span><span style="color: #EFF">add_resources</span><span style="color: #89DDFF">(</span><span style="color: #EFF">all_conditions</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;Condition&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">replace</span><span style="color: #89DDFF">=True)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.document.Document.word_count" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">word_count</span><span style="color: #89DDFF">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Return the number of word tokens in the document.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>int</code>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>The count of tokenized words in the document.</p>
              </div>
                <p>
                  <span class="doc-returns-annotation">
                    <b>TYPE:</b>
                      <code><span title="int">int</span></code>
                  </span>
                </p>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/document.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-791">791</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-792">792</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-793">793</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-794">794</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-795">795</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-796">796</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-797">797</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-798">798</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-791"><a id="__codelineno-0-791" name="__codelineno-0-791"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">word_count</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">int</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-792"><a id="__codelineno-0-792" name="__codelineno-0-792"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-793"><a id="__codelineno-0-793" name="__codelineno-0-793"></a><span style="color: #546E7A; font-style: italic">    Return the number of word tokens in the document.</span>
</span><span id="__span-0-794"><a id="__codelineno-0-794" name="__codelineno-0-794"></a>
</span><span id="__span-0-795"><a id="__codelineno-0-795" name="__codelineno-0-795"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-796"><a id="__codelineno-0-796" name="__codelineno-0-796"></a><span style="color: #546E7A; font-style: italic">        int: The count of tokenized words in the document.</span>
</span><span id="__span-0-797"><a id="__codelineno-0-797" name="__codelineno-0-797"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-798"><a id="__codelineno-0-798" name="__codelineno-0-798"></a>    <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_nlp</span><span style="color: #89DDFF">.</span><span style="color: #EFF">_tokens</span><span style="color: #89DDFF">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="healthchain.io.containers.document.FhirData" class="doc doc-heading">
            <code>FhirData</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">



        <p>Container for FHIR resource data and its context.</p>
<p>Stores and manages clinical data in FHIR format.
Access document references within resources easily through convenience functions.</p>
<p>Also allows you to set common continuity of care lists,
such as a problem list, medication list, and allergy list.
These collections are accessible as properties of the class instance.</p>
<p>TODO: make problem, meds, allergy lists configurable</p>


<details class="properties" open>
  <summary>Properties</summary>
  <p>bundle: The FHIR bundle containing resources
prefetch_resources: Dictionary of CDS Hooks prefetch resources
problem_list: List of Condition resources
medication_list: List of MedicationStatement resources
allergy_list: List of AllergyIntolerance resources</p>
</details>

<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>fhir = FhirData()</p>
<h4 id="healthchain.io.containers.document.FhirData--add-prefetch-resources-from-cds-request">Add prefetch resources from CDS request</h4>
<p>fhir.prefetch_resources = {"patient": patient_resource}</p>
<h4 id="healthchain.io.containers.document.FhirData--add-document-to-bundle">Add document to bundle</h4>
<p>doc_id = fhir.add_document_reference(document)</p>
<h4 id="healthchain.io.containers.document.FhirData--get-document-with-relationships">Get document with relationships</h4>
<p>doc_family = fhir.get_document_reference_family(doc_id)</p>
<h4 id="healthchain.io.containers.document.FhirData--access-clinical-lists">Access clinical lists</h4>
<p>conditions = fhir.problem_list</p>
</blockquote>
</blockquote>
</blockquote>
</details>







              <details class="mkdocstrings-source">
                <summary>Source code in <code>healthchain/io/containers/document.py</code></summary>
                <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-213">213</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-214">214</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-215">215</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-216">216</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-217">217</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-218">218</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-219">219</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-220">220</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-221">221</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-222">222</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-223">223</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-224">224</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-225">225</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-226">226</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-227">227</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-228">228</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-229">229</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-230">230</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-231">231</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-232">232</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-233">233</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-234">234</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-235">235</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-236">236</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-237">237</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-238">238</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-239">239</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-240">240</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-241">241</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-242">242</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-243">243</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-244">244</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-245">245</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-246">246</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-247">247</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-248">248</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-249">249</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-250">250</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-251">251</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-252">252</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-253">253</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-254">254</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-255">255</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-256">256</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-257">257</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-258">258</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-259">259</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-260">260</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-261">261</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-262">262</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-263">263</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-264">264</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-265">265</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-266">266</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-267">267</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-268">268</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-269">269</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-270">270</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-271">271</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-272">272</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-273">273</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-274">274</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-275">275</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-276">276</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-277">277</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-278">278</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-279">279</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-280">280</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-281">281</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-282">282</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-283">283</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-284">284</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-285">285</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-286">286</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-287">287</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-288">288</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-289">289</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-290">290</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-291">291</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-292">292</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-293">293</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-294">294</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-295">295</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-296">296</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-297">297</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-298">298</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-299">299</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-300">300</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-301">301</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-302">302</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-303">303</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-304">304</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-305">305</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-306">306</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-307">307</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-308">308</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-309">309</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-310">310</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-311">311</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-312">312</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-313">313</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-314">314</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-315">315</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-316">316</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-317">317</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-318">318</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-319">319</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-320">320</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-321">321</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-322">322</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-323">323</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-324">324</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-325">325</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-326">326</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-327">327</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-328">328</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-329">329</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-330">330</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-331">331</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-332">332</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-333">333</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-334">334</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-335">335</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-336">336</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-337">337</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-338">338</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-339">339</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-340">340</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-341">341</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-342">342</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-343">343</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-344">344</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-345">345</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-346">346</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-347">347</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-348">348</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-349">349</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-350">350</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-351">351</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-352">352</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-353">353</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-354">354</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-355">355</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-356">356</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-357">357</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-358">358</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-359">359</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-360">360</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-361">361</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-362">362</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-363">363</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-364">364</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-365">365</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-366">366</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-367">367</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-368">368</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-369">369</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-370">370</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-371">371</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-372">372</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-373">373</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-374">374</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-375">375</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-376">376</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-377">377</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-378">378</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-379">379</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-380">380</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-381">381</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-382">382</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-383">383</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-384">384</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-385">385</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-386">386</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-387">387</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-388">388</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-389">389</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-390">390</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-391">391</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-392">392</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-393">393</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-394">394</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-395">395</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-396">396</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-397">397</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-398">398</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-399">399</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-400">400</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-401">401</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-402">402</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-403">403</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-404">404</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-405">405</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-406">406</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-407">407</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-408">408</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-409">409</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-410">410</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-411">411</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-412">412</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-413">413</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-414">414</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-415">415</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-416">416</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-417">417</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-418">418</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-419">419</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-420">420</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-421">421</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-422">422</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-423">423</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-424">424</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-425">425</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-426">426</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-427">427</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-428">428</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-429">429</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-430">430</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-431">431</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-432">432</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-433">433</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-434">434</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-435">435</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-436">436</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-437">437</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-438">438</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-439">439</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-440">440</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-441">441</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-442">442</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-443">443</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-444">444</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-445">445</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-446">446</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-447">447</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-448">448</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-449">449</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-450">450</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-451">451</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-452">452</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-453">453</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-454">454</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-455">455</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-456">456</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-457">457</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-458">458</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-459">459</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-460">460</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-461">461</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-462">462</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-463">463</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-464">464</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-465">465</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-466">466</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-467">467</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-468">468</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-469">469</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-470">470</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-471">471</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-472">472</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-473">473</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-474">474</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-475">475</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-476">476</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-477">477</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-478">478</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-479">479</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-480">480</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-481">481</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-482">482</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-483">483</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-484">484</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-485">485</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-486">486</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-487">487</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-488">488</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-489">489</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-490">490</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-491">491</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-492">492</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-493">493</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-494">494</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-495">495</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-496">496</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-497">497</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-498">498</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-499">499</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-500">500</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-501">501</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-502">502</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-503">503</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-504">504</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-505">505</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-506">506</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-507">507</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-508">508</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-509">509</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-510">510</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-511">511</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-512">512</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-513">513</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-514">514</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-515">515</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-516">516</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-517">517</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-518">518</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-519">519</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-520">520</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-521">521</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-522">522</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-523">523</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-524">524</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-525">525</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-526">526</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-527">527</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-528">528</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-529">529</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-530">530</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-531">531</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-532">532</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-533">533</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-534">534</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-535">535</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-536">536</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-537">537</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-538">538</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-539">539</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-540">540</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-541">541</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-542">542</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-543">543</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-544">544</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-545">545</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-546">546</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-547">547</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-548">548</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-549">549</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-550">550</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-551">551</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-552">552</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-553">553</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-554">554</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-555">555</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-556">556</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-557">557</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-558">558</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-559">559</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-560">560</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-561">561</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-562">562</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-563">563</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-564">564</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-565">565</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-566">566</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-567">567</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-568">568</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-569">569</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-570">570</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-571">571</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-572">572</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-573">573</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-574">574</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-575">575</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-576">576</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-577">577</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-578">578</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-579">579</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-580">580</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-581">581</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-582">582</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-583">583</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-584">584</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-585">585</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-586">586</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-587">587</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-588">588</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-589">589</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-590">590</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-591">591</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-592">592</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-593">593</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-594">594</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-595">595</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-596">596</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-597">597</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-598">598</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-213"><a id="__codelineno-0-213" name="__codelineno-0-213"></a><span style="color: #82AAFF">@dataclass</span>
</span><span id="__span-0-214"><a id="__codelineno-0-214" name="__codelineno-0-214"></a><span style="color: #BB80B3">class</span><span style="color: #EFF"> </span><span style="color: #FFCB6B">FhirData</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-215"><a id="__codelineno-0-215" name="__codelineno-0-215"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-216"><a id="__codelineno-0-216" name="__codelineno-0-216"></a><span style="color: #546E7A; font-style: italic">    Container for FHIR resource data and its context.</span>
</span><span id="__span-0-217"><a id="__codelineno-0-217" name="__codelineno-0-217"></a>
</span><span id="__span-0-218"><a id="__codelineno-0-218" name="__codelineno-0-218"></a><span style="color: #546E7A; font-style: italic">    Stores and manages clinical data in FHIR format.</span>
</span><span id="__span-0-219"><a id="__codelineno-0-219" name="__codelineno-0-219"></a><span style="color: #546E7A; font-style: italic">    Access document references within resources easily through convenience functions.</span>
</span><span id="__span-0-220"><a id="__codelineno-0-220" name="__codelineno-0-220"></a>
</span><span id="__span-0-221"><a id="__codelineno-0-221" name="__codelineno-0-221"></a><span style="color: #546E7A; font-style: italic">    Also allows you to set common continuity of care lists,</span>
</span><span id="__span-0-222"><a id="__codelineno-0-222" name="__codelineno-0-222"></a><span style="color: #546E7A; font-style: italic">    such as a problem list, medication list, and allergy list.</span>
</span><span id="__span-0-223"><a id="__codelineno-0-223" name="__codelineno-0-223"></a><span style="color: #546E7A; font-style: italic">    These collections are accessible as properties of the class instance.</span>
</span><span id="__span-0-224"><a id="__codelineno-0-224" name="__codelineno-0-224"></a>
</span><span id="__span-0-225"><a id="__codelineno-0-225" name="__codelineno-0-225"></a><span style="color: #546E7A; font-style: italic">    TODO: make problem, meds, allergy lists configurable</span>
</span><span id="__span-0-226"><a id="__codelineno-0-226" name="__codelineno-0-226"></a>
</span><span id="__span-0-227"><a id="__codelineno-0-227" name="__codelineno-0-227"></a><span style="color: #546E7A; font-style: italic">    Properties:</span>
</span><span id="__span-0-228"><a id="__codelineno-0-228" name="__codelineno-0-228"></a><span style="color: #546E7A; font-style: italic">        bundle: The FHIR bundle containing resources</span>
</span><span id="__span-0-229"><a id="__codelineno-0-229" name="__codelineno-0-229"></a><span style="color: #546E7A; font-style: italic">        prefetch_resources: Dictionary of CDS Hooks prefetch resources</span>
</span><span id="__span-0-230"><a id="__codelineno-0-230" name="__codelineno-0-230"></a><span style="color: #546E7A; font-style: italic">        problem_list: List of Condition resources</span>
</span><span id="__span-0-231"><a id="__codelineno-0-231" name="__codelineno-0-231"></a><span style="color: #546E7A; font-style: italic">        medication_list: List of MedicationStatement resources</span>
</span><span id="__span-0-232"><a id="__codelineno-0-232" name="__codelineno-0-232"></a><span style="color: #546E7A; font-style: italic">        allergy_list: List of AllergyIntolerance resources</span>
</span><span id="__span-0-233"><a id="__codelineno-0-233" name="__codelineno-0-233"></a>
</span><span id="__span-0-234"><a id="__codelineno-0-234" name="__codelineno-0-234"></a><span style="color: #546E7A; font-style: italic">    Example:</span>
</span><span id="__span-0-235"><a id="__codelineno-0-235" name="__codelineno-0-235"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; fhir = FhirData()</span>
</span><span id="__span-0-236"><a id="__codelineno-0-236" name="__codelineno-0-236"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; # Add prefetch resources from CDS request</span>
</span><span id="__span-0-237"><a id="__codelineno-0-237" name="__codelineno-0-237"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; fhir.prefetch_resources = {&quot;patient&quot;: patient_resource}</span>
</span><span id="__span-0-238"><a id="__codelineno-0-238" name="__codelineno-0-238"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; # Add document to bundle</span>
</span><span id="__span-0-239"><a id="__codelineno-0-239" name="__codelineno-0-239"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; doc_id = fhir.add_document_reference(document)</span>
</span><span id="__span-0-240"><a id="__codelineno-0-240" name="__codelineno-0-240"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; # Get document with relationships</span>
</span><span id="__span-0-241"><a id="__codelineno-0-241" name="__codelineno-0-241"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; doc_family = fhir.get_document_reference_family(doc_id)</span>
</span><span id="__span-0-242"><a id="__codelineno-0-242" name="__codelineno-0-242"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; # Access clinical lists</span>
</span><span id="__span-0-243"><a id="__codelineno-0-243" name="__codelineno-0-243"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; conditions = fhir.problem_list</span>
</span><span id="__span-0-244"><a id="__codelineno-0-244" name="__codelineno-0-244"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-245"><a id="__codelineno-0-245" name="__codelineno-0-245"></a>
</span><span id="__span-0-246"><a id="__codelineno-0-246" name="__codelineno-0-246"></a>    <span style="color: #EFF">_prefetch_resources</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Resource</span><span style="color: #89DDFF">]]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-247"><a id="__codelineno-0-247" name="__codelineno-0-247"></a>    <span style="color: #EFF">_bundle</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Bundle</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-248"><a id="__codelineno-0-248" name="__codelineno-0-248"></a>    <span style="color: #EFF">_operation_outcomes</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">OperationOutcome</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">field</span><span style="color: #89DDFF">(</span><span style="color: #EFF">default_factory</span><span style="color: #89DDFF">=</span><span style="color: #82AAFF">list</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-249"><a id="__codelineno-0-249" name="__codelineno-0-249"></a>    <span style="color: #EFF">_provenances</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Provenance</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">field</span><span style="color: #89DDFF">(</span><span style="color: #EFF">default_factory</span><span style="color: #89DDFF">=</span><span style="color: #82AAFF">list</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-250"><a id="__codelineno-0-250" name="__codelineno-0-250"></a>
</span><span id="__span-0-251"><a id="__codelineno-0-251" name="__codelineno-0-251"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-252"><a id="__codelineno-0-252" name="__codelineno-0-252"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">bundle</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Bundle</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-253"><a id="__codelineno-0-253" name="__codelineno-0-253"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Returns the FHIR Bundle if it exists.&quot;&quot;&quot;</span>
</span><span id="__span-0-254"><a id="__codelineno-0-254" name="__codelineno-0-254"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_bundle</span>
</span><span id="__span-0-255"><a id="__codelineno-0-255" name="__codelineno-0-255"></a>
</span><span id="__span-0-256"><a id="__codelineno-0-256" name="__codelineno-0-256"></a>    <span style="color: #82AAFF">@bundle</span><span style="color: #89DDFF">.</span><span style="color: #EFF">setter</span>
</span><span id="__span-0-257"><a id="__codelineno-0-257" name="__codelineno-0-257"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">bundle</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">bundle</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Bundle</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-258"><a id="__codelineno-0-258" name="__codelineno-0-258"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Sets the FHIR Bundle.</span>
</span><span id="__span-0-259"><a id="__codelineno-0-259" name="__codelineno-0-259"></a><span style="color: #546E7A; font-style: italic">        The bundle is a collection of FHIR resources.</span>
</span><span id="__span-0-260"><a id="__codelineno-0-260" name="__codelineno-0-260"></a><span style="color: #546E7A; font-style: italic">        See: https://www.hl7.org/fhir/bundle.html</span>
</span><span id="__span-0-261"><a id="__codelineno-0-261" name="__codelineno-0-261"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-262"><a id="__codelineno-0-262" name="__codelineno-0-262"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">_bundle</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">bundle</span>
</span><span id="__span-0-263"><a id="__codelineno-0-263" name="__codelineno-0-263"></a>
</span><span id="__span-0-264"><a id="__codelineno-0-264" name="__codelineno-0-264"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-265"><a id="__codelineno-0-265" name="__codelineno-0-265"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">prefetch_resources</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Resource</span><span style="color: #89DDFF">]]:</span>
</span><span id="__span-0-266"><a id="__codelineno-0-266" name="__codelineno-0-266"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Returns the prefetch FHIR resources.&quot;&quot;&quot;</span>
</span><span id="__span-0-267"><a id="__codelineno-0-267" name="__codelineno-0-267"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_prefetch_resources</span>
</span><span id="__span-0-268"><a id="__codelineno-0-268" name="__codelineno-0-268"></a>
</span><span id="__span-0-269"><a id="__codelineno-0-269" name="__codelineno-0-269"></a>    <span style="color: #82AAFF">@prefetch_resources</span><span style="color: #89DDFF">.</span><span style="color: #EFF">setter</span>
</span><span id="__span-0-270"><a id="__codelineno-0-270" name="__codelineno-0-270"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">prefetch_resources</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">resources</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Resource</span><span style="color: #89DDFF">]):</span>
</span><span id="__span-0-271"><a id="__codelineno-0-271" name="__codelineno-0-271"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Sets the prefetch FHIR resources from CDS service requests.&quot;&quot;&quot;</span>
</span><span id="__span-0-272"><a id="__codelineno-0-272" name="__codelineno-0-272"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">_prefetch_resources</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">resources</span>
</span><span id="__span-0-273"><a id="__codelineno-0-273" name="__codelineno-0-273"></a>
</span><span id="__span-0-274"><a id="__codelineno-0-274" name="__codelineno-0-274"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-275"><a id="__codelineno-0-275" name="__codelineno-0-275"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">operation_outcomes</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">OperationOutcome</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-276"><a id="__codelineno-0-276" name="__codelineno-0-276"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get extracted OperationOutcome resources separated from the bundle.&quot;&quot;&quot;</span>
</span><span id="__span-0-277"><a id="__codelineno-0-277" name="__codelineno-0-277"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_operation_outcomes</span>
</span><span id="__span-0-278"><a id="__codelineno-0-278" name="__codelineno-0-278"></a>
</span><span id="__span-0-279"><a id="__codelineno-0-279" name="__codelineno-0-279"></a>    <span style="color: #82AAFF">@operation_outcomes</span><span style="color: #89DDFF">.</span><span style="color: #EFF">setter</span>
</span><span id="__span-0-280"><a id="__codelineno-0-280" name="__codelineno-0-280"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">operation_outcomes</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">outcomes</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">OperationOutcome</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-281"><a id="__codelineno-0-281" name="__codelineno-0-281"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">_operation_outcomes</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">outcomes</span> <span style="color: #89DDFF; font-style: italic">or</span> <span style="color: #89DDFF">[]</span>
</span><span id="__span-0-282"><a id="__codelineno-0-282" name="__codelineno-0-282"></a>
</span><span id="__span-0-283"><a id="__codelineno-0-283" name="__codelineno-0-283"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-284"><a id="__codelineno-0-284" name="__codelineno-0-284"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">provenances</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Provenance</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-285"><a id="__codelineno-0-285" name="__codelineno-0-285"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get extracted Provenance resources separated from the bundle.&quot;&quot;&quot;</span>
</span><span id="__span-0-286"><a id="__codelineno-0-286" name="__codelineno-0-286"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_provenances</span>
</span><span id="__span-0-287"><a id="__codelineno-0-287" name="__codelineno-0-287"></a>
</span><span id="__span-0-288"><a id="__codelineno-0-288" name="__codelineno-0-288"></a>    <span style="color: #82AAFF">@provenances</span><span style="color: #89DDFF">.</span><span style="color: #EFF">setter</span>
</span><span id="__span-0-289"><a id="__codelineno-0-289" name="__codelineno-0-289"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">provenances</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">provenances</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Provenance</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-290"><a id="__codelineno-0-290" name="__codelineno-0-290"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">_provenances</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">provenances</span> <span style="color: #89DDFF; font-style: italic">or</span> <span style="color: #89DDFF">[]</span>
</span><span id="__span-0-291"><a id="__codelineno-0-291" name="__codelineno-0-291"></a>
</span><span id="__span-0-292"><a id="__codelineno-0-292" name="__codelineno-0-292"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-293"><a id="__codelineno-0-293" name="__codelineno-0-293"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">patient</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Patient</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-294"><a id="__codelineno-0-294" name="__codelineno-0-294"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get the first Patient resource from the bundle (convenience accessor).</span>
</span><span id="__span-0-295"><a id="__codelineno-0-295" name="__codelineno-0-295"></a>
</span><span id="__span-0-296"><a id="__codelineno-0-296" name="__codelineno-0-296"></a><span style="color: #546E7A; font-style: italic">        Returns None if no Patient resources are present in the bundle.</span>
</span><span id="__span-0-297"><a id="__codelineno-0-297" name="__codelineno-0-297"></a><span style="color: #546E7A; font-style: italic">        For bundles with multiple patients, use the patients property instead.</span>
</span><span id="__span-0-298"><a id="__codelineno-0-298" name="__codelineno-0-298"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-299"><a id="__codelineno-0-299" name="__codelineno-0-299"></a>        <span style="color: #EFF">patients</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">get_resources</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;Patient&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-300"><a id="__codelineno-0-300" name="__codelineno-0-300"></a>        <span style="color: #BB80B3">return</span> <span style="color: #EFF">patients</span><span style="color: #89DDFF">[</span><span style="color: #F78C6C">0</span><span style="color: #89DDFF">]</span> <span style="color: #BB80B3">if</span> <span style="color: #EFF">patients</span> <span style="color: #BB80B3">else</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-301"><a id="__codelineno-0-301" name="__codelineno-0-301"></a>
</span><span id="__span-0-302"><a id="__codelineno-0-302" name="__codelineno-0-302"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-303"><a id="__codelineno-0-303" name="__codelineno-0-303"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">patients</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Patient</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-304"><a id="__codelineno-0-304" name="__codelineno-0-304"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get all Patient resources from the bundle.</span>
</span><span id="__span-0-305"><a id="__codelineno-0-305" name="__codelineno-0-305"></a>
</span><span id="__span-0-306"><a id="__codelineno-0-306" name="__codelineno-0-306"></a><span style="color: #546E7A; font-style: italic">        Most bundles contain a single patient, but some queries (e.g., family history,</span>
</span><span id="__span-0-307"><a id="__codelineno-0-307" name="__codelineno-0-307"></a><span style="color: #546E7A; font-style: italic">        population queries) may return multiple patients. This property provides access</span>
</span><span id="__span-0-308"><a id="__codelineno-0-308" name="__codelineno-0-308"></a><span style="color: #546E7A; font-style: italic">        to all Patient resources without removing them from the bundle.</span>
</span><span id="__span-0-309"><a id="__codelineno-0-309" name="__codelineno-0-309"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-310"><a id="__codelineno-0-310" name="__codelineno-0-310"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">get_resources</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;Patient&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-311"><a id="__codelineno-0-311" name="__codelineno-0-311"></a>
</span><span id="__span-0-312"><a id="__codelineno-0-312" name="__codelineno-0-312"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-313"><a id="__codelineno-0-313" name="__codelineno-0-313"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">problem_list</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Condition</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-314"><a id="__codelineno-0-314" name="__codelineno-0-314"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get problem list from the bundle.</span>
</span><span id="__span-0-315"><a id="__codelineno-0-315" name="__codelineno-0-315"></a><span style="color: #546E7A; font-style: italic">        Problem list items are stored as Condition resources in the bundle.</span>
</span><span id="__span-0-316"><a id="__codelineno-0-316" name="__codelineno-0-316"></a><span style="color: #546E7A; font-style: italic">        See: https://www.hl7.org/fhir/condition.html</span>
</span><span id="__span-0-317"><a id="__codelineno-0-317" name="__codelineno-0-317"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-318"><a id="__codelineno-0-318" name="__codelineno-0-318"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">get_resources</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;Condition&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-319"><a id="__codelineno-0-319" name="__codelineno-0-319"></a>
</span><span id="__span-0-320"><a id="__codelineno-0-320" name="__codelineno-0-320"></a>    <span style="color: #82AAFF">@problem_list</span><span style="color: #89DDFF">.</span><span style="color: #EFF">setter</span>
</span><span id="__span-0-321"><a id="__codelineno-0-321" name="__codelineno-0-321"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">problem_list</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">value</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Union</span><span style="color: #89DDFF">[</span><span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Condition</span><span style="color: #89DDFF">],</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-322"><a id="__codelineno-0-322" name="__codelineno-0-322"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-323"><a id="__codelineno-0-323" name="__codelineno-0-323"></a><span style="color: #546E7A; font-style: italic">        Set problem list in the bundle.</span>
</span><span id="__span-0-324"><a id="__codelineno-0-324" name="__codelineno-0-324"></a>
</span><span id="__span-0-325"><a id="__codelineno-0-325" name="__codelineno-0-325"></a><span style="color: #546E7A; font-style: italic">        By default, this adds the provided conditions to any existing conditions in the bundle.</span>
</span><span id="__span-0-326"><a id="__codelineno-0-326" name="__codelineno-0-326"></a><span style="color: #546E7A; font-style: italic">        To replace existing conditions instead, pass a dictionary with &#39;resources&#39; and &#39;replace&#39; keys.</span>
</span><span id="__span-0-327"><a id="__codelineno-0-327" name="__codelineno-0-327"></a>
</span><span id="__span-0-328"><a id="__codelineno-0-328" name="__codelineno-0-328"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-329"><a id="__codelineno-0-329" name="__codelineno-0-329"></a><span style="color: #546E7A; font-style: italic">            value: Either a list of Condition resources (adds by default) or a dict with:</span>
</span><span id="__span-0-330"><a id="__codelineno-0-330" name="__codelineno-0-330"></a><span style="color: #546E7A; font-style: italic">                - &#39;resources&#39;: List of Condition resources</span>
</span><span id="__span-0-331"><a id="__codelineno-0-331" name="__codelineno-0-331"></a><span style="color: #546E7A; font-style: italic">                - &#39;replace&#39;: bool, whether to replace existing resources (default: False)</span>
</span><span id="__span-0-332"><a id="__codelineno-0-332" name="__codelineno-0-332"></a>
</span><span id="__span-0-333"><a id="__codelineno-0-333" name="__codelineno-0-333"></a><span style="color: #546E7A; font-style: italic">        Examples:</span>
</span><span id="__span-0-334"><a id="__codelineno-0-334" name="__codelineno-0-334"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; # Add to existing conditions (default behavior)</span>
</span><span id="__span-0-335"><a id="__codelineno-0-335" name="__codelineno-0-335"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; fhir.problem_list = [condition1, condition2]</span>
</span><span id="__span-0-336"><a id="__codelineno-0-336" name="__codelineno-0-336"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; # Replace existing conditions</span>
</span><span id="__span-0-337"><a id="__codelineno-0-337" name="__codelineno-0-337"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; fhir.problem_list = {&#39;resources&#39;: [condition1], &#39;replace&#39;: True}</span>
</span><span id="__span-0-338"><a id="__codelineno-0-338" name="__codelineno-0-338"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-339"><a id="__codelineno-0-339" name="__codelineno-0-339"></a>        <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">value</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">dict</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-340"><a id="__codelineno-0-340" name="__codelineno-0-340"></a>            <span style="color: #EFF">resources</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">value</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;resources&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">[])</span>
</span><span id="__span-0-341"><a id="__codelineno-0-341" name="__codelineno-0-341"></a>            <span style="color: #EFF">replace</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">value</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;replace&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">False)</span>
</span><span id="__span-0-342"><a id="__codelineno-0-342" name="__codelineno-0-342"></a>        <span style="color: #BB80B3">else</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-343"><a id="__codelineno-0-343" name="__codelineno-0-343"></a>            <span style="color: #EFF">resources</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">value</span>
</span><span id="__span-0-344"><a id="__codelineno-0-344" name="__codelineno-0-344"></a>            <span style="color: #EFF">replace</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">False</span>
</span><span id="__span-0-345"><a id="__codelineno-0-345" name="__codelineno-0-345"></a>
</span><span id="__span-0-346"><a id="__codelineno-0-346" name="__codelineno-0-346"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">add_resources</span><span style="color: #89DDFF">(</span><span style="color: #EFF">resources</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;Condition&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">replace</span><span style="color: #89DDFF">=</span><span style="color: #EFF">replace</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-347"><a id="__codelineno-0-347" name="__codelineno-0-347"></a>
</span><span id="__span-0-348"><a id="__codelineno-0-348" name="__codelineno-0-348"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-349"><a id="__codelineno-0-349" name="__codelineno-0-349"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">medication_list</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">MedicationStatement</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-350"><a id="__codelineno-0-350" name="__codelineno-0-350"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get medication list from the bundle.&quot;&quot;&quot;</span>
</span><span id="__span-0-351"><a id="__codelineno-0-351" name="__codelineno-0-351"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">get_resources</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;MedicationStatement&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-352"><a id="__codelineno-0-352" name="__codelineno-0-352"></a>
</span><span id="__span-0-353"><a id="__codelineno-0-353" name="__codelineno-0-353"></a>    <span style="color: #82AAFF">@medication_list</span><span style="color: #89DDFF">.</span><span style="color: #EFF">setter</span>
</span><span id="__span-0-354"><a id="__codelineno-0-354" name="__codelineno-0-354"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">medication_list</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-355"><a id="__codelineno-0-355" name="__codelineno-0-355"></a>        <span style="color: #89DDFF">self,</span> <span style="color: #EFF">value</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Union</span><span style="color: #89DDFF">[</span><span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">MedicationStatement</span><span style="color: #89DDFF">],</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]]</span>
</span><span id="__span-0-356"><a id="__codelineno-0-356" name="__codelineno-0-356"></a>    <span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-357"><a id="__codelineno-0-357" name="__codelineno-0-357"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-358"><a id="__codelineno-0-358" name="__codelineno-0-358"></a><span style="color: #546E7A; font-style: italic">        Set medication list in the bundle.</span>
</span><span id="__span-0-359"><a id="__codelineno-0-359" name="__codelineno-0-359"></a>
</span><span id="__span-0-360"><a id="__codelineno-0-360" name="__codelineno-0-360"></a><span style="color: #546E7A; font-style: italic">        By default, this adds the provided medications to any existing medications in the bundle.</span>
</span><span id="__span-0-361"><a id="__codelineno-0-361" name="__codelineno-0-361"></a><span style="color: #546E7A; font-style: italic">        To replace existing medications instead, pass a dictionary with &#39;resources&#39; and &#39;replace&#39; keys.</span>
</span><span id="__span-0-362"><a id="__codelineno-0-362" name="__codelineno-0-362"></a>
</span><span id="__span-0-363"><a id="__codelineno-0-363" name="__codelineno-0-363"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-364"><a id="__codelineno-0-364" name="__codelineno-0-364"></a><span style="color: #546E7A; font-style: italic">            value: Either a list of MedicationStatement resources (adds by default) or a dict with:</span>
</span><span id="__span-0-365"><a id="__codelineno-0-365" name="__codelineno-0-365"></a><span style="color: #546E7A; font-style: italic">                - &#39;resources&#39;: List of MedicationStatement resources</span>
</span><span id="__span-0-366"><a id="__codelineno-0-366" name="__codelineno-0-366"></a><span style="color: #546E7A; font-style: italic">                - &#39;replace&#39;: bool, whether to replace existing resources (default: False)</span>
</span><span id="__span-0-367"><a id="__codelineno-0-367" name="__codelineno-0-367"></a>
</span><span id="__span-0-368"><a id="__codelineno-0-368" name="__codelineno-0-368"></a><span style="color: #546E7A; font-style: italic">        Examples:</span>
</span><span id="__span-0-369"><a id="__codelineno-0-369" name="__codelineno-0-369"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; # Add to existing medications (default behavior)</span>
</span><span id="__span-0-370"><a id="__codelineno-0-370" name="__codelineno-0-370"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; fhir.medication_list = [medication1, medication2]</span>
</span><span id="__span-0-371"><a id="__codelineno-0-371" name="__codelineno-0-371"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; # Replace existing medications</span>
</span><span id="__span-0-372"><a id="__codelineno-0-372" name="__codelineno-0-372"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; fhir.medication_list = {&#39;resources&#39;: [medication1], &#39;replace&#39;: True}</span>
</span><span id="__span-0-373"><a id="__codelineno-0-373" name="__codelineno-0-373"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-374"><a id="__codelineno-0-374" name="__codelineno-0-374"></a>        <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">value</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">dict</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-375"><a id="__codelineno-0-375" name="__codelineno-0-375"></a>            <span style="color: #EFF">resources</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">value</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;resources&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">[])</span>
</span><span id="__span-0-376"><a id="__codelineno-0-376" name="__codelineno-0-376"></a>            <span style="color: #EFF">replace</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">value</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;replace&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">False)</span>
</span><span id="__span-0-377"><a id="__codelineno-0-377" name="__codelineno-0-377"></a>        <span style="color: #BB80B3">else</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-378"><a id="__codelineno-0-378" name="__codelineno-0-378"></a>            <span style="color: #EFF">resources</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">value</span>
</span><span id="__span-0-379"><a id="__codelineno-0-379" name="__codelineno-0-379"></a>            <span style="color: #EFF">replace</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">False</span>
</span><span id="__span-0-380"><a id="__codelineno-0-380" name="__codelineno-0-380"></a>
</span><span id="__span-0-381"><a id="__codelineno-0-381" name="__codelineno-0-381"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">add_resources</span><span style="color: #89DDFF">(</span><span style="color: #EFF">resources</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;MedicationStatement&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">replace</span><span style="color: #89DDFF">=</span><span style="color: #EFF">replace</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-382"><a id="__codelineno-0-382" name="__codelineno-0-382"></a>
</span><span id="__span-0-383"><a id="__codelineno-0-383" name="__codelineno-0-383"></a>    <span style="color: #82AAFF">@property</span>
</span><span id="__span-0-384"><a id="__codelineno-0-384" name="__codelineno-0-384"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">allergy_list</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">AllergyIntolerance</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-385"><a id="__codelineno-0-385" name="__codelineno-0-385"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get allergy list from the bundle.&quot;&quot;&quot;</span>
</span><span id="__span-0-386"><a id="__codelineno-0-386" name="__codelineno-0-386"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">get_resources</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;AllergyIntolerance&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-387"><a id="__codelineno-0-387" name="__codelineno-0-387"></a>
</span><span id="__span-0-388"><a id="__codelineno-0-388" name="__codelineno-0-388"></a>    <span style="color: #82AAFF">@allergy_list</span><span style="color: #89DDFF">.</span><span style="color: #EFF">setter</span>
</span><span id="__span-0-389"><a id="__codelineno-0-389" name="__codelineno-0-389"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">allergy_list</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-390"><a id="__codelineno-0-390" name="__codelineno-0-390"></a>        <span style="color: #89DDFF">self,</span> <span style="color: #EFF">value</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Union</span><span style="color: #89DDFF">[</span><span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">AllergyIntolerance</span><span style="color: #89DDFF">],</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]]</span>
</span><span id="__span-0-391"><a id="__codelineno-0-391" name="__codelineno-0-391"></a>    <span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-392"><a id="__codelineno-0-392" name="__codelineno-0-392"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-393"><a id="__codelineno-0-393" name="__codelineno-0-393"></a><span style="color: #546E7A; font-style: italic">        Set allergy list in the bundle.</span>
</span><span id="__span-0-394"><a id="__codelineno-0-394" name="__codelineno-0-394"></a>
</span><span id="__span-0-395"><a id="__codelineno-0-395" name="__codelineno-0-395"></a><span style="color: #546E7A; font-style: italic">        By default, this adds the provided allergies to any existing allergies in the bundle.</span>
</span><span id="__span-0-396"><a id="__codelineno-0-396" name="__codelineno-0-396"></a><span style="color: #546E7A; font-style: italic">        To replace existing allergies instead, pass a dictionary with &#39;resources&#39; and &#39;replace&#39; keys.</span>
</span><span id="__span-0-397"><a id="__codelineno-0-397" name="__codelineno-0-397"></a>
</span><span id="__span-0-398"><a id="__codelineno-0-398" name="__codelineno-0-398"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-399"><a id="__codelineno-0-399" name="__codelineno-0-399"></a><span style="color: #546E7A; font-style: italic">            value: Either a list of AllergyIntolerance resources (adds by default) or a dict with:</span>
</span><span id="__span-0-400"><a id="__codelineno-0-400" name="__codelineno-0-400"></a><span style="color: #546E7A; font-style: italic">                - &#39;resources&#39;: List of AllergyIntolerance resources</span>
</span><span id="__span-0-401"><a id="__codelineno-0-401" name="__codelineno-0-401"></a><span style="color: #546E7A; font-style: italic">                - &#39;replace&#39;: bool, whether to replace existing resources (default: False)</span>
</span><span id="__span-0-402"><a id="__codelineno-0-402" name="__codelineno-0-402"></a>
</span><span id="__span-0-403"><a id="__codelineno-0-403" name="__codelineno-0-403"></a><span style="color: #546E7A; font-style: italic">        Examples:</span>
</span><span id="__span-0-404"><a id="__codelineno-0-404" name="__codelineno-0-404"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; # Add to existing allergies (default behavior)</span>
</span><span id="__span-0-405"><a id="__codelineno-0-405" name="__codelineno-0-405"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; fhir.allergy_list = [allergy1, allergy2]</span>
</span><span id="__span-0-406"><a id="__codelineno-0-406" name="__codelineno-0-406"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; # Replace existing allergies</span>
</span><span id="__span-0-407"><a id="__codelineno-0-407" name="__codelineno-0-407"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; fhir.allergy_list = {&#39;resources&#39;: [allergy1], &#39;replace&#39;: True}</span>
</span><span id="__span-0-408"><a id="__codelineno-0-408" name="__codelineno-0-408"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-409"><a id="__codelineno-0-409" name="__codelineno-0-409"></a>        <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">value</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">dict</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-410"><a id="__codelineno-0-410" name="__codelineno-0-410"></a>            <span style="color: #EFF">resources</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">value</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;resources&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">[])</span>
</span><span id="__span-0-411"><a id="__codelineno-0-411" name="__codelineno-0-411"></a>            <span style="color: #EFF">replace</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">value</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;replace&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">False)</span>
</span><span id="__span-0-412"><a id="__codelineno-0-412" name="__codelineno-0-412"></a>        <span style="color: #BB80B3">else</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-413"><a id="__codelineno-0-413" name="__codelineno-0-413"></a>            <span style="color: #EFF">resources</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">value</span>
</span><span id="__span-0-414"><a id="__codelineno-0-414" name="__codelineno-0-414"></a>            <span style="color: #EFF">replace</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">False</span>
</span><span id="__span-0-415"><a id="__codelineno-0-415" name="__codelineno-0-415"></a>
</span><span id="__span-0-416"><a id="__codelineno-0-416" name="__codelineno-0-416"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">add_resources</span><span style="color: #89DDFF">(</span><span style="color: #EFF">resources</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;AllergyIntolerance&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">replace</span><span style="color: #89DDFF">=</span><span style="color: #EFF">replace</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-417"><a id="__codelineno-0-417" name="__codelineno-0-417"></a>
</span><span id="__span-0-418"><a id="__codelineno-0-418" name="__codelineno-0-418"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_prefetch_resources</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">key</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Any</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-419"><a id="__codelineno-0-419" name="__codelineno-0-419"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get resources of a specific type from the prefetch bundle.&quot;&quot;&quot;</span>
</span><span id="__span-0-420"><a id="__codelineno-0-420" name="__codelineno-0-420"></a>        <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_prefetch_resources</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-421"><a id="__codelineno-0-421" name="__codelineno-0-421"></a>            <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">[]</span>
</span><span id="__span-0-422"><a id="__codelineno-0-422" name="__codelineno-0-422"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_prefetch_resources</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #EFF">key</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">[])</span>
</span><span id="__span-0-423"><a id="__codelineno-0-423" name="__codelineno-0-423"></a>
</span><span id="__span-0-424"><a id="__codelineno-0-424" name="__codelineno-0-424"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_resources</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">resource_type</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Any</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-425"><a id="__codelineno-0-425" name="__codelineno-0-425"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get resources of a specific type from the working bundle.&quot;&quot;&quot;</span>
</span><span id="__span-0-426"><a id="__codelineno-0-426" name="__codelineno-0-426"></a>        <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_bundle</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-427"><a id="__codelineno-0-427" name="__codelineno-0-427"></a>            <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">[]</span>
</span><span id="__span-0-428"><a id="__codelineno-0-428" name="__codelineno-0-428"></a>        <span style="color: #BB80B3">return</span> <span style="color: #EFF">get_resources</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_bundle</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">resource_type</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-429"><a id="__codelineno-0-429" name="__codelineno-0-429"></a>
</span><span id="__span-0-430"><a id="__codelineno-0-430" name="__codelineno-0-430"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">add_resources</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-431"><a id="__codelineno-0-431" name="__codelineno-0-431"></a>        <span style="color: #89DDFF">self,</span> <span style="color: #EFF">resources</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Any</span><span style="color: #89DDFF">],</span> <span style="color: #EFF">resource_type</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">replace</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">bool</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">False</span>
</span><span id="__span-0-432"><a id="__codelineno-0-432" name="__codelineno-0-432"></a>    <span style="color: #89DDFF">):</span>
</span><span id="__span-0-433"><a id="__codelineno-0-433" name="__codelineno-0-433"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Add resources to the working bundle.&quot;&quot;&quot;</span>
</span><span id="__span-0-434"><a id="__codelineno-0-434" name="__codelineno-0-434"></a>        <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_bundle</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-435"><a id="__codelineno-0-435" name="__codelineno-0-435"></a>            <span style="color: #89DDFF">self.</span><span style="color: #EFF">_bundle</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">create_bundle</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-436"><a id="__codelineno-0-436" name="__codelineno-0-436"></a>        <span style="color: #EFF">set_resources</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_bundle</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">resources</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">resource_type</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">replace</span><span style="color: #89DDFF">=</span><span style="color: #EFF">replace</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-437"><a id="__codelineno-0-437" name="__codelineno-0-437"></a>
</span><span id="__span-0-438"><a id="__codelineno-0-438" name="__codelineno-0-438"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">add_document_reference</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-439"><a id="__codelineno-0-439" name="__codelineno-0-439"></a>        <span style="color: #89DDFF">self,</span>
</span><span id="__span-0-440"><a id="__codelineno-0-440" name="__codelineno-0-440"></a>        <span style="color: #EFF">document</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">DocumentReference</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-441"><a id="__codelineno-0-441" name="__codelineno-0-441"></a>        <span style="color: #EFF">parent_id</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None,</span>
</span><span id="__span-0-442"><a id="__codelineno-0-442" name="__codelineno-0-442"></a>        <span style="color: #EFF">relationship_type</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;transforms&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-443"><a id="__codelineno-0-443" name="__codelineno-0-443"></a>    <span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-444"><a id="__codelineno-0-444" name="__codelineno-0-444"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-445"><a id="__codelineno-0-445" name="__codelineno-0-445"></a><span style="color: #546E7A; font-style: italic">        Adds a DocumentReference resource to the FHIR bundle and establishes</span>
</span><span id="__span-0-446"><a id="__codelineno-0-446" name="__codelineno-0-446"></a><span style="color: #546E7A; font-style: italic">        relationships between documents if a parent_id is provided. The relationship is</span>
</span><span id="__span-0-447"><a id="__codelineno-0-447" name="__codelineno-0-447"></a><span style="color: #546E7A; font-style: italic">        tracked using the FHIR relatesTo element with a specified relationship type.</span>
</span><span id="__span-0-448"><a id="__codelineno-0-448" name="__codelineno-0-448"></a><span style="color: #546E7A; font-style: italic">        See: https://build.fhir.org/documentreference-definitions.html#DocumentReference.relatesTo</span>
</span><span id="__span-0-449"><a id="__codelineno-0-449" name="__codelineno-0-449"></a>
</span><span id="__span-0-450"><a id="__codelineno-0-450" name="__codelineno-0-450"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-451"><a id="__codelineno-0-451" name="__codelineno-0-451"></a><span style="color: #546E7A; font-style: italic">            document: The DocumentReference to add to the bundle</span>
</span><span id="__span-0-452"><a id="__codelineno-0-452" name="__codelineno-0-452"></a><span style="color: #546E7A; font-style: italic">            parent_id: Optional ID of the parent document. If provided, establishes a</span>
</span><span id="__span-0-453"><a id="__codelineno-0-453" name="__codelineno-0-453"></a><span style="color: #546E7A; font-style: italic">                relationship between this document and its parent.</span>
</span><span id="__span-0-454"><a id="__codelineno-0-454" name="__codelineno-0-454"></a><span style="color: #546E7A; font-style: italic">            relationship_type: The type of relationship to establish with the parent</span>
</span><span id="__span-0-455"><a id="__codelineno-0-455" name="__codelineno-0-455"></a><span style="color: #546E7A; font-style: italic">                document. Defaults to &quot;transforms&quot;. This is used in the FHIR relatesTo</span>
</span><span id="__span-0-456"><a id="__codelineno-0-456" name="__codelineno-0-456"></a><span style="color: #546E7A; font-style: italic">                element&#39;s code. See: http://hl7.org/fhir/valueset-document-relationship-type</span>
</span><span id="__span-0-457"><a id="__codelineno-0-457" name="__codelineno-0-457"></a>
</span><span id="__span-0-458"><a id="__codelineno-0-458" name="__codelineno-0-458"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-459"><a id="__codelineno-0-459" name="__codelineno-0-459"></a><span style="color: #546E7A; font-style: italic">            str: The ID of the added document. If the document had no ID, a new UUID-based</span>
</span><span id="__span-0-460"><a id="__codelineno-0-460" name="__codelineno-0-460"></a><span style="color: #546E7A; font-style: italic">                ID is generated.</span>
</span><span id="__span-0-461"><a id="__codelineno-0-461" name="__codelineno-0-461"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-462"><a id="__codelineno-0-462" name="__codelineno-0-462"></a>        <span style="color: #546E7A; font-style: italic"># Generate a consistent ID if not present</span>
</span><span id="__span-0-463"><a id="__codelineno-0-463" name="__codelineno-0-463"></a>        <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #EFF">document</span><span style="color: #89DDFF">.</span><span style="color: #EFF">id</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-464"><a id="__codelineno-0-464" name="__codelineno-0-464"></a>            <span style="color: #EFF">document</span><span style="color: #89DDFF">.</span><span style="color: #EFF">id</span> <span style="color: #89DDFF">=</span> <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;doc-</span><span style="color: #89DDFF">{</span><span style="color: #EFF">uuid4</span><span style="color: #89DDFF">()}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-465"><a id="__codelineno-0-465" name="__codelineno-0-465"></a>
</span><span id="__span-0-466"><a id="__codelineno-0-466" name="__codelineno-0-466"></a>        <span style="color: #546E7A; font-style: italic"># Add relationship metadata if there&#39;s a parent</span>
</span><span id="__span-0-467"><a id="__codelineno-0-467" name="__codelineno-0-467"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">parent_id</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-468"><a id="__codelineno-0-468" name="__codelineno-0-468"></a>            <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #82AAFF">hasattr</span><span style="color: #89DDFF">(</span><span style="color: #EFF">document</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;relatesTo&quot;</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF; font-style: italic">or</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #EFF">document</span><span style="color: #89DDFF">.</span><span style="color: #EFF">relatesTo</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-469"><a id="__codelineno-0-469" name="__codelineno-0-469"></a>                <span style="color: #EFF">document</span><span style="color: #89DDFF">.</span><span style="color: #EFF">relatesTo</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[]</span>
</span><span id="__span-0-470"><a id="__codelineno-0-470" name="__codelineno-0-470"></a>            <span style="color: #EFF">document</span><span style="color: #89DDFF">.</span><span style="color: #EFF">relatesTo</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-471"><a id="__codelineno-0-471" name="__codelineno-0-471"></a>                <span style="color: #EFF">DocumentReferenceRelatesTo</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-472"><a id="__codelineno-0-472" name="__codelineno-0-472"></a>                    <span style="color: #EFF">target</span><span style="color: #89DDFF">=</span><span style="color: #EFF">Reference</span><span style="color: #89DDFF">(</span><span style="color: #EFF">reference</span><span style="color: #89DDFF">=</span><span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;DocumentReference/</span><span style="color: #89DDFF">{</span><span style="color: #EFF">parent_id</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&quot;</span><span style="color: #89DDFF">),</span>
</span><span id="__span-0-473"><a id="__codelineno-0-473" name="__codelineno-0-473"></a>                    <span style="color: #EFF">code</span><span style="color: #89DDFF">=</span><span style="color: #EFF">create_single_codeable_concept</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-474"><a id="__codelineno-0-474" name="__codelineno-0-474"></a>                        <span style="color: #EFF">code</span><span style="color: #89DDFF">=</span><span style="color: #EFF">relationship_type</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-475"><a id="__codelineno-0-475" name="__codelineno-0-475"></a>                        <span style="color: #EFF">display</span><span style="color: #89DDFF">=</span><span style="color: #EFF">relationship_type</span><span style="color: #89DDFF">.</span><span style="color: #EFF">capitalize</span><span style="color: #89DDFF">(),</span>
</span><span id="__span-0-476"><a id="__codelineno-0-476" name="__codelineno-0-476"></a>                        <span style="color: #EFF">system</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&quot;http://hl7.org/fhir/ValueSet/document-relationship-type&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-477"><a id="__codelineno-0-477" name="__codelineno-0-477"></a>                    <span style="color: #89DDFF">),</span>
</span><span id="__span-0-478"><a id="__codelineno-0-478" name="__codelineno-0-478"></a>                <span style="color: #89DDFF">)</span>
</span><span id="__span-0-479"><a id="__codelineno-0-479" name="__codelineno-0-479"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-480"><a id="__codelineno-0-480" name="__codelineno-0-480"></a>
</span><span id="__span-0-481"><a id="__codelineno-0-481" name="__codelineno-0-481"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">add_resources</span><span style="color: #89DDFF">([</span><span style="color: #EFF">document</span><span style="color: #89DDFF">],</span> <span style="color: #C3E88D">&quot;DocumentReference&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">replace</span><span style="color: #89DDFF">=False)</span>
</span><span id="__span-0-482"><a id="__codelineno-0-482" name="__codelineno-0-482"></a>
</span><span id="__span-0-483"><a id="__codelineno-0-483" name="__codelineno-0-483"></a>        <span style="color: #BB80B3">return</span> <span style="color: #EFF">document</span><span style="color: #89DDFF">.</span><span style="color: #EFF">id</span>
</span><span id="__span-0-484"><a id="__codelineno-0-484" name="__codelineno-0-484"></a>
</span><span id="__span-0-485"><a id="__codelineno-0-485" name="__codelineno-0-485"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_document_references_readable</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-486"><a id="__codelineno-0-486" name="__codelineno-0-486"></a>        <span style="color: #89DDFF">self,</span> <span style="color: #EFF">include_data</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">bool</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">True,</span> <span style="color: #EFF">include_relationships</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">bool</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">True</span>
</span><span id="__span-0-487"><a id="__codelineno-0-487" name="__codelineno-0-487"></a>    <span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]]:</span>
</span><span id="__span-0-488"><a id="__codelineno-0-488" name="__codelineno-0-488"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-489"><a id="__codelineno-0-489" name="__codelineno-0-489"></a><span style="color: #546E7A; font-style: italic">        Get DocumentReferences resources with their content and optional relationship data</span>
</span><span id="__span-0-490"><a id="__codelineno-0-490" name="__codelineno-0-490"></a><span style="color: #546E7A; font-style: italic">        in a human-readable dictionary format.</span>
</span><span id="__span-0-491"><a id="__codelineno-0-491" name="__codelineno-0-491"></a>
</span><span id="__span-0-492"><a id="__codelineno-0-492" name="__codelineno-0-492"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-493"><a id="__codelineno-0-493" name="__codelineno-0-493"></a><span style="color: #546E7A; font-style: italic">            include_data: If True, decode and include the document data (default: True)</span>
</span><span id="__span-0-494"><a id="__codelineno-0-494" name="__codelineno-0-494"></a><span style="color: #546E7A; font-style: italic">            include_relationships: If True, include related document information (default: True)</span>
</span><span id="__span-0-495"><a id="__codelineno-0-495" name="__codelineno-0-495"></a>
</span><span id="__span-0-496"><a id="__codelineno-0-496" name="__codelineno-0-496"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-497"><a id="__codelineno-0-497" name="__codelineno-0-497"></a><span style="color: #546E7A; font-style: italic">            List of documents with metadata and optionally their content and relationships</span>
</span><span id="__span-0-498"><a id="__codelineno-0-498" name="__codelineno-0-498"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-499"><a id="__codelineno-0-499" name="__codelineno-0-499"></a>        <span style="color: #EFF">documents</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[]</span>
</span><span id="__span-0-500"><a id="__codelineno-0-500" name="__codelineno-0-500"></a>        <span style="color: #BB80B3">for</span> <span style="color: #EFF">doc</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">get_resources</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;DocumentReference&quot;</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-501"><a id="__codelineno-0-501" name="__codelineno-0-501"></a>            <span style="color: #EFF">doc_data</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-502"><a id="__codelineno-0-502" name="__codelineno-0-502"></a>                <span style="color: #C3E88D">&quot;id&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">id</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-503"><a id="__codelineno-0-503" name="__codelineno-0-503"></a>                <span style="color: #C3E88D">&quot;description&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">description</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-504"><a id="__codelineno-0-504" name="__codelineno-0-504"></a>                <span style="color: #C3E88D">&quot;status&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">status</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-505"><a id="__codelineno-0-505" name="__codelineno-0-505"></a>            <span style="color: #89DDFF">}</span>
</span><span id="__span-0-506"><a id="__codelineno-0-506" name="__codelineno-0-506"></a>
</span><span id="__span-0-507"><a id="__codelineno-0-507" name="__codelineno-0-507"></a>            <span style="color: #EFF">attachments</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">read_content_attachment</span><span style="color: #89DDFF">(</span><span style="color: #EFF">doc</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">include_data</span><span style="color: #89DDFF">=</span><span style="color: #EFF">include_data</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-508"><a id="__codelineno-0-508" name="__codelineno-0-508"></a>            <span style="color: #BB80B3">if</span> <span style="color: #EFF">attachments</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-509"><a id="__codelineno-0-509" name="__codelineno-0-509"></a>                <span style="color: #EFF">doc_data</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;attachments&quot;</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[]</span>
</span><span id="__span-0-510"><a id="__codelineno-0-510" name="__codelineno-0-510"></a>                <span style="color: #BB80B3">for</span> <span style="color: #EFF">attachment</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">attachments</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-511"><a id="__codelineno-0-511" name="__codelineno-0-511"></a>                    <span style="color: #BB80B3">if</span> <span style="color: #EFF">include_data</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-512"><a id="__codelineno-0-512" name="__codelineno-0-512"></a>                        <span style="color: #EFF">doc_data</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;attachments&quot;</span><span style="color: #89DDFF">].</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-513"><a id="__codelineno-0-513" name="__codelineno-0-513"></a>                            <span style="color: #89DDFF">{</span>
</span><span id="__span-0-514"><a id="__codelineno-0-514" name="__codelineno-0-514"></a>                                <span style="color: #C3E88D">&quot;data&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">attachment</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;data&quot;</span><span style="color: #89DDFF">),</span>
</span><span id="__span-0-515"><a id="__codelineno-0-515" name="__codelineno-0-515"></a>                                <span style="color: #C3E88D">&quot;metadata&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">attachment</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;metadata&quot;</span><span style="color: #89DDFF">),</span>
</span><span id="__span-0-516"><a id="__codelineno-0-516" name="__codelineno-0-516"></a>                            <span style="color: #89DDFF">}</span>
</span><span id="__span-0-517"><a id="__codelineno-0-517" name="__codelineno-0-517"></a>                        <span style="color: #89DDFF">)</span>
</span><span id="__span-0-518"><a id="__codelineno-0-518" name="__codelineno-0-518"></a>                    <span style="color: #BB80B3">else</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-519"><a id="__codelineno-0-519" name="__codelineno-0-519"></a>                        <span style="color: #EFF">doc_data</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;attachments&quot;</span><span style="color: #89DDFF">].</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-520"><a id="__codelineno-0-520" name="__codelineno-0-520"></a>                            <span style="color: #89DDFF">{</span><span style="color: #C3E88D">&quot;metadata&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">attachment</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;metadata&quot;</span><span style="color: #89DDFF">)}</span>
</span><span id="__span-0-521"><a id="__codelineno-0-521" name="__codelineno-0-521"></a>                        <span style="color: #89DDFF">)</span>
</span><span id="__span-0-522"><a id="__codelineno-0-522" name="__codelineno-0-522"></a>
</span><span id="__span-0-523"><a id="__codelineno-0-523" name="__codelineno-0-523"></a>            <span style="color: #BB80B3">if</span> <span style="color: #EFF">include_relationships</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-524"><a id="__codelineno-0-524" name="__codelineno-0-524"></a>                <span style="color: #EFF">family</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">get_document_reference_family</span><span style="color: #89DDFF">(</span><span style="color: #EFF">doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">id</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-525"><a id="__codelineno-0-525" name="__codelineno-0-525"></a>                <span style="color: #EFF">doc_data</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;relationships&quot;</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-526"><a id="__codelineno-0-526" name="__codelineno-0-526"></a>                    <span style="color: #C3E88D">&quot;parents&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">[</span>
</span><span id="__span-0-527"><a id="__codelineno-0-527" name="__codelineno-0-527"></a>                        <span style="color: #89DDFF">{</span><span style="color: #C3E88D">&quot;id&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">p</span><span style="color: #89DDFF">.</span><span style="color: #EFF">id</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;description&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">p</span><span style="color: #89DDFF">.</span><span style="color: #EFF">description</span><span style="color: #89DDFF">}</span>
</span><span id="__span-0-528"><a id="__codelineno-0-528" name="__codelineno-0-528"></a>                        <span style="color: #BB80B3">for</span> <span style="color: #EFF">p</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">family</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;parents&quot;</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-529"><a id="__codelineno-0-529" name="__codelineno-0-529"></a>                    <span style="color: #89DDFF">],</span>
</span><span id="__span-0-530"><a id="__codelineno-0-530" name="__codelineno-0-530"></a>                    <span style="color: #C3E88D">&quot;children&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">[</span>
</span><span id="__span-0-531"><a id="__codelineno-0-531" name="__codelineno-0-531"></a>                        <span style="color: #89DDFF">{</span><span style="color: #C3E88D">&quot;id&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">c</span><span style="color: #89DDFF">.</span><span style="color: #EFF">id</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;description&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">c</span><span style="color: #89DDFF">.</span><span style="color: #EFF">description</span><span style="color: #89DDFF">}</span>
</span><span id="__span-0-532"><a id="__codelineno-0-532" name="__codelineno-0-532"></a>                        <span style="color: #BB80B3">for</span> <span style="color: #EFF">c</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">family</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;children&quot;</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-533"><a id="__codelineno-0-533" name="__codelineno-0-533"></a>                    <span style="color: #89DDFF">],</span>
</span><span id="__span-0-534"><a id="__codelineno-0-534" name="__codelineno-0-534"></a>                    <span style="color: #C3E88D">&quot;siblings&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">[</span>
</span><span id="__span-0-535"><a id="__codelineno-0-535" name="__codelineno-0-535"></a>                        <span style="color: #89DDFF">{</span><span style="color: #C3E88D">&quot;id&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">s</span><span style="color: #89DDFF">.</span><span style="color: #EFF">id</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;description&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">s</span><span style="color: #89DDFF">.</span><span style="color: #EFF">description</span><span style="color: #89DDFF">}</span>
</span><span id="__span-0-536"><a id="__codelineno-0-536" name="__codelineno-0-536"></a>                        <span style="color: #BB80B3">for</span> <span style="color: #EFF">s</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">family</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;siblings&quot;</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-537"><a id="__codelineno-0-537" name="__codelineno-0-537"></a>                    <span style="color: #89DDFF">],</span>
</span><span id="__span-0-538"><a id="__codelineno-0-538" name="__codelineno-0-538"></a>                <span style="color: #89DDFF">}</span>
</span><span id="__span-0-539"><a id="__codelineno-0-539" name="__codelineno-0-539"></a>
</span><span id="__span-0-540"><a id="__codelineno-0-540" name="__codelineno-0-540"></a>            <span style="color: #EFF">documents</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">doc_data</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-541"><a id="__codelineno-0-541" name="__codelineno-0-541"></a>
</span><span id="__span-0-542"><a id="__codelineno-0-542" name="__codelineno-0-542"></a>        <span style="color: #BB80B3">return</span> <span style="color: #EFF">documents</span>
</span><span id="__span-0-543"><a id="__codelineno-0-543" name="__codelineno-0-543"></a>
</span><span id="__span-0-544"><a id="__codelineno-0-544" name="__codelineno-0-544"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_document_reference_family</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">document_id</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-545"><a id="__codelineno-0-545" name="__codelineno-0-545"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-546"><a id="__codelineno-0-546" name="__codelineno-0-546"></a><span style="color: #546E7A; font-style: italic">        Get a DocumentReference resource and all its related resources</span>
</span><span id="__span-0-547"><a id="__codelineno-0-547" name="__codelineno-0-547"></a><span style="color: #546E7A; font-style: italic">        based on the relatesTo element in the FHIR standard.</span>
</span><span id="__span-0-548"><a id="__codelineno-0-548" name="__codelineno-0-548"></a><span style="color: #546E7A; font-style: italic">        See: https://build.fhir.org/documentreference-definitions.html#DocumentReference.relatesTo</span>
</span><span id="__span-0-549"><a id="__codelineno-0-549" name="__codelineno-0-549"></a>
</span><span id="__span-0-550"><a id="__codelineno-0-550" name="__codelineno-0-550"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-551"><a id="__codelineno-0-551" name="__codelineno-0-551"></a><span style="color: #546E7A; font-style: italic">            document_id: ID of the DocumentReference resource to find relationships for</span>
</span><span id="__span-0-552"><a id="__codelineno-0-552" name="__codelineno-0-552"></a>
</span><span id="__span-0-553"><a id="__codelineno-0-553" name="__codelineno-0-553"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-554"><a id="__codelineno-0-554" name="__codelineno-0-554"></a><span style="color: #546E7A; font-style: italic">            Dict containing:</span>
</span><span id="__span-0-555"><a id="__codelineno-0-555" name="__codelineno-0-555"></a><span style="color: #546E7A; font-style: italic">                &#39;document&#39;: The requested DocumentReference resource</span>
</span><span id="__span-0-556"><a id="__codelineno-0-556" name="__codelineno-0-556"></a><span style="color: #546E7A; font-style: italic">                &#39;parents&#39;: List of parent DocumentReference resources</span>
</span><span id="__span-0-557"><a id="__codelineno-0-557" name="__codelineno-0-557"></a><span style="color: #546E7A; font-style: italic">                &#39;children&#39;: List of child DocumentReference resources</span>
</span><span id="__span-0-558"><a id="__codelineno-0-558" name="__codelineno-0-558"></a><span style="color: #546E7A; font-style: italic">                &#39;siblings&#39;: List of DocumentReference resources sharing the same parent</span>
</span><span id="__span-0-559"><a id="__codelineno-0-559" name="__codelineno-0-559"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-560"><a id="__codelineno-0-560" name="__codelineno-0-560"></a>        <span style="color: #EFF">documents</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">get_resources</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;DocumentReference&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-561"><a id="__codelineno-0-561" name="__codelineno-0-561"></a>        <span style="color: #EFF">family</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">{</span><span style="color: #C3E88D">&quot;document&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">None,</span> <span style="color: #C3E88D">&quot;parents&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">[],</span> <span style="color: #C3E88D">&quot;children&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">[],</span> <span style="color: #C3E88D">&quot;siblings&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">[]}</span>
</span><span id="__span-0-562"><a id="__codelineno-0-562" name="__codelineno-0-562"></a>
</span><span id="__span-0-563"><a id="__codelineno-0-563" name="__codelineno-0-563"></a>        <span style="color: #546E7A; font-style: italic"># Find the requested document</span>
</span><span id="__span-0-564"><a id="__codelineno-0-564" name="__codelineno-0-564"></a>        <span style="color: #EFF">target_doc</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">next</span><span style="color: #89DDFF">((</span><span style="color: #EFF">doc</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">doc</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">documents</span> <span style="color: #BB80B3">if</span> <span style="color: #EFF">doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">id</span> <span style="color: #89DDFF">==</span> <span style="color: #EFF">document_id</span><span style="color: #89DDFF">),</span> <span style="color: #89DDFF">None)</span>
</span><span id="__span-0-565"><a id="__codelineno-0-565" name="__codelineno-0-565"></a>        <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #EFF">target_doc</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-566"><a id="__codelineno-0-566" name="__codelineno-0-566"></a>            <span style="color: #BB80B3">return</span> <span style="color: #EFF">family</span>
</span><span id="__span-0-567"><a id="__codelineno-0-567" name="__codelineno-0-567"></a>
</span><span id="__span-0-568"><a id="__codelineno-0-568" name="__codelineno-0-568"></a>        <span style="color: #EFF">family</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;document&quot;</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">target_doc</span>
</span><span id="__span-0-569"><a id="__codelineno-0-569" name="__codelineno-0-569"></a>
</span><span id="__span-0-570"><a id="__codelineno-0-570" name="__codelineno-0-570"></a>        <span style="color: #546E7A; font-style: italic"># Find direct relationships</span>
</span><span id="__span-0-571"><a id="__codelineno-0-571" name="__codelineno-0-571"></a>        <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">hasattr</span><span style="color: #89DDFF">(</span><span style="color: #EFF">target_doc</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;relatesTo&quot;</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #EFF">target_doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">relatesTo</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-572"><a id="__codelineno-0-572" name="__codelineno-0-572"></a>            <span style="color: #546E7A; font-style: italic"># Find parents from target&#39;s relationships</span>
</span><span id="__span-0-573"><a id="__codelineno-0-573" name="__codelineno-0-573"></a>            <span style="color: #BB80B3">for</span> <span style="color: #EFF">relation</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">target_doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">relatesTo</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-574"><a id="__codelineno-0-574" name="__codelineno-0-574"></a>                <span style="color: #EFF">parent_ref</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">relation</span><span style="color: #89DDFF">.</span><span style="color: #EFF">target</span><span style="color: #89DDFF">.</span><span style="color: #EFF">reference</span>
</span><span id="__span-0-575"><a id="__codelineno-0-575" name="__codelineno-0-575"></a>                <span style="color: #EFF">parent_id</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">parent_ref</span><span style="color: #89DDFF">.</span><span style="color: #EFF">split</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;/&quot;</span><span style="color: #89DDFF">)[-</span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-576"><a id="__codelineno-0-576" name="__codelineno-0-576"></a>                <span style="color: #EFF">parent</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">next</span><span style="color: #89DDFF">((</span><span style="color: #EFF">doc</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">doc</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">documents</span> <span style="color: #BB80B3">if</span> <span style="color: #EFF">doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">id</span> <span style="color: #89DDFF">==</span> <span style="color: #EFF">parent_id</span><span style="color: #89DDFF">),</span> <span style="color: #89DDFF">None)</span>
</span><span id="__span-0-577"><a id="__codelineno-0-577" name="__codelineno-0-577"></a>                <span style="color: #BB80B3">if</span> <span style="color: #EFF">parent</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-578"><a id="__codelineno-0-578" name="__codelineno-0-578"></a>                    <span style="color: #EFF">family</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;parents&quot;</span><span style="color: #89DDFF">].</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">parent</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-579"><a id="__codelineno-0-579" name="__codelineno-0-579"></a>
</span><span id="__span-0-580"><a id="__codelineno-0-580" name="__codelineno-0-580"></a>        <span style="color: #546E7A; font-style: italic"># Find children and siblings</span>
</span><span id="__span-0-581"><a id="__codelineno-0-581" name="__codelineno-0-581"></a>        <span style="color: #BB80B3">for</span> <span style="color: #EFF">doc</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">documents</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-582"><a id="__codelineno-0-582" name="__codelineno-0-582"></a>            <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #82AAFF">hasattr</span><span style="color: #89DDFF">(</span><span style="color: #EFF">doc</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;relatesTo&quot;</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF; font-style: italic">or</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #EFF">doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">relatesTo</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-583"><a id="__codelineno-0-583" name="__codelineno-0-583"></a>                <span style="color: #BB80B3">continue</span>
</span><span id="__span-0-584"><a id="__codelineno-0-584" name="__codelineno-0-584"></a>
</span><span id="__span-0-585"><a id="__codelineno-0-585" name="__codelineno-0-585"></a>            <span style="color: #BB80B3">for</span> <span style="color: #EFF">relation</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">relatesTo</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-586"><a id="__codelineno-0-586" name="__codelineno-0-586"></a>                <span style="color: #EFF">target_ref</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">relation</span><span style="color: #89DDFF">.</span><span style="color: #EFF">target</span><span style="color: #89DDFF">.</span><span style="color: #EFF">reference</span>
</span><span id="__span-0-587"><a id="__codelineno-0-587" name="__codelineno-0-587"></a>                <span style="color: #EFF">related_id</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">target_ref</span><span style="color: #89DDFF">.</span><span style="color: #EFF">split</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;/&quot;</span><span style="color: #89DDFF">)[-</span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-588"><a id="__codelineno-0-588" name="__codelineno-0-588"></a>
</span><span id="__span-0-589"><a id="__codelineno-0-589" name="__codelineno-0-589"></a>                <span style="color: #546E7A; font-style: italic"># Check if this doc is a child of our target</span>
</span><span id="__span-0-590"><a id="__codelineno-0-590" name="__codelineno-0-590"></a>                <span style="color: #BB80B3">if</span> <span style="color: #EFF">related_id</span> <span style="color: #89DDFF">==</span> <span style="color: #EFF">document_id</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-591"><a id="__codelineno-0-591" name="__codelineno-0-591"></a>                    <span style="color: #EFF">family</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;children&quot;</span><span style="color: #89DDFF">].</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">doc</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-592"><a id="__codelineno-0-592" name="__codelineno-0-592"></a>
</span><span id="__span-0-593"><a id="__codelineno-0-593" name="__codelineno-0-593"></a>                <span style="color: #546E7A; font-style: italic"># For siblings, check if they share the same parent</span>
</span><span id="__span-0-594"><a id="__codelineno-0-594" name="__codelineno-0-594"></a>                <span style="color: #BB80B3">elif</span> <span style="color: #EFF">family</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;parents&quot;</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #EFF">related_id</span> <span style="color: #89DDFF">==</span> <span style="color: #EFF">family</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;parents&quot;</span><span style="color: #89DDFF">][</span><span style="color: #F78C6C">0</span><span style="color: #89DDFF">].</span><span style="color: #EFF">id</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-595"><a id="__codelineno-0-595" name="__codelineno-0-595"></a>                    <span style="color: #BB80B3">if</span> <span style="color: #EFF">doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">id</span> <span style="color: #89DDFF">!=</span> <span style="color: #EFF">document_id</span><span style="color: #89DDFF">:</span>  <span style="color: #546E7A; font-style: italic"># Don&#39;t include self as sibling</span>
</span><span id="__span-0-596"><a id="__codelineno-0-596" name="__codelineno-0-596"></a>                        <span style="color: #EFF">family</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;siblings&quot;</span><span style="color: #89DDFF">].</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">doc</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-597"><a id="__codelineno-0-597" name="__codelineno-0-597"></a>
</span><span id="__span-0-598"><a id="__codelineno-0-598" name="__codelineno-0-598"></a>        <span style="color: #BB80B3">return</span> <span style="color: #EFF">family</span>
</span></code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="healthchain.io.containers.document.FhirData.allergy_list" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">allergy_list</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get allergy list from the bundle.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="healthchain.io.containers.document.FhirData.bundle" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">bundle</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Returns the FHIR Bundle if it exists.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="healthchain.io.containers.document.FhirData.medication_list" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">medication_list</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get medication list from the bundle.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="healthchain.io.containers.document.FhirData.operation_outcomes" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">operation_outcomes</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get extracted OperationOutcome resources separated from the bundle.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="healthchain.io.containers.document.FhirData.patient" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">patient</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get the first Patient resource from the bundle (convenience accessor).</p>
<p>Returns None if no Patient resources are present in the bundle.
For bundles with multiple patients, use the patients property instead.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="healthchain.io.containers.document.FhirData.patients" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">patients</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get all Patient resources from the bundle.</p>
<p>Most bundles contain a single patient, but some queries (e.g., family history,
population queries) may return multiple patients. This property provides access
to all Patient resources without removing them from the bundle.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="healthchain.io.containers.document.FhirData.prefetch_resources" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">prefetch_resources</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Returns the prefetch FHIR resources.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="healthchain.io.containers.document.FhirData.problem_list" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">problem_list</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get problem list from the bundle.
Problem list items are stored as Condition resources in the bundle.
See: https://www.hl7.org/fhir/condition.html</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="healthchain.io.containers.document.FhirData.provenances" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">provenances</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get extracted Provenance resources separated from the bundle.</p>

    </div>

</div>




<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.document.FhirData.add_document_reference" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">add_document_reference</span><span style="color: #89DDFF">(</span><span style="color: #EFF">document</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">parent_id</span><span style="color: #89DDFF">=None,</span> <span style="color: #EFF">relationship_type</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&#39;transforms&#39;</span><span style="color: #89DDFF">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Adds a DocumentReference resource to the FHIR bundle and establishes
relationships between documents if a parent_id is provided. The relationship is
tracked using the FHIR relatesTo element with a specified relationship type.
See: https://build.fhir.org/documentreference-definitions.html#DocumentReference.relatesTo</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>document</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The DocumentReference to add to the bundle</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="fhir.resources.documentreference.DocumentReference">DocumentReference</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>parent_id</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Optional ID of the parent document. If provided, establishes a
relationship between this document and its parent.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>relationship_type</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The type of relationship to establish with the parent
document. Defaults to "transforms". This is used in the FHIR relatesTo
element's code. See: http://hl7.org/fhir/valueset-document-relationship-type</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#39;transforms&#39;</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>str</code>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>The ID of the added document. If the document had no ID, a new UUID-based
ID is generated.</p>
              </div>
                <p>
                  <span class="doc-returns-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
                </p>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/document.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-438">438</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-439">439</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-440">440</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-441">441</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-442">442</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-443">443</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-444">444</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-445">445</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-446">446</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-447">447</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-448">448</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-449">449</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-450">450</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-451">451</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-452">452</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-453">453</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-454">454</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-455">455</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-456">456</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-457">457</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-458">458</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-459">459</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-460">460</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-461">461</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-462">462</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-463">463</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-464">464</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-465">465</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-466">466</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-467">467</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-468">468</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-469">469</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-470">470</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-471">471</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-472">472</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-473">473</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-474">474</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-475">475</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-476">476</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-477">477</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-478">478</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-479">479</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-480">480</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-481">481</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-482">482</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-483">483</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-438"><a id="__codelineno-0-438" name="__codelineno-0-438"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">add_document_reference</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-439"><a id="__codelineno-0-439" name="__codelineno-0-439"></a>    <span style="color: #89DDFF">self,</span>
</span><span id="__span-0-440"><a id="__codelineno-0-440" name="__codelineno-0-440"></a>    <span style="color: #EFF">document</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">DocumentReference</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-441"><a id="__codelineno-0-441" name="__codelineno-0-441"></a>    <span style="color: #EFF">parent_id</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None,</span>
</span><span id="__span-0-442"><a id="__codelineno-0-442" name="__codelineno-0-442"></a>    <span style="color: #EFF">relationship_type</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;transforms&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-443"><a id="__codelineno-0-443" name="__codelineno-0-443"></a><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-444"><a id="__codelineno-0-444" name="__codelineno-0-444"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-445"><a id="__codelineno-0-445" name="__codelineno-0-445"></a><span style="color: #546E7A; font-style: italic">    Adds a DocumentReference resource to the FHIR bundle and establishes</span>
</span><span id="__span-0-446"><a id="__codelineno-0-446" name="__codelineno-0-446"></a><span style="color: #546E7A; font-style: italic">    relationships between documents if a parent_id is provided. The relationship is</span>
</span><span id="__span-0-447"><a id="__codelineno-0-447" name="__codelineno-0-447"></a><span style="color: #546E7A; font-style: italic">    tracked using the FHIR relatesTo element with a specified relationship type.</span>
</span><span id="__span-0-448"><a id="__codelineno-0-448" name="__codelineno-0-448"></a><span style="color: #546E7A; font-style: italic">    See: https://build.fhir.org/documentreference-definitions.html#DocumentReference.relatesTo</span>
</span><span id="__span-0-449"><a id="__codelineno-0-449" name="__codelineno-0-449"></a>
</span><span id="__span-0-450"><a id="__codelineno-0-450" name="__codelineno-0-450"></a><span style="color: #546E7A; font-style: italic">    Args:</span>
</span><span id="__span-0-451"><a id="__codelineno-0-451" name="__codelineno-0-451"></a><span style="color: #546E7A; font-style: italic">        document: The DocumentReference to add to the bundle</span>
</span><span id="__span-0-452"><a id="__codelineno-0-452" name="__codelineno-0-452"></a><span style="color: #546E7A; font-style: italic">        parent_id: Optional ID of the parent document. If provided, establishes a</span>
</span><span id="__span-0-453"><a id="__codelineno-0-453" name="__codelineno-0-453"></a><span style="color: #546E7A; font-style: italic">            relationship between this document and its parent.</span>
</span><span id="__span-0-454"><a id="__codelineno-0-454" name="__codelineno-0-454"></a><span style="color: #546E7A; font-style: italic">        relationship_type: The type of relationship to establish with the parent</span>
</span><span id="__span-0-455"><a id="__codelineno-0-455" name="__codelineno-0-455"></a><span style="color: #546E7A; font-style: italic">            document. Defaults to &quot;transforms&quot;. This is used in the FHIR relatesTo</span>
</span><span id="__span-0-456"><a id="__codelineno-0-456" name="__codelineno-0-456"></a><span style="color: #546E7A; font-style: italic">            element&#39;s code. See: http://hl7.org/fhir/valueset-document-relationship-type</span>
</span><span id="__span-0-457"><a id="__codelineno-0-457" name="__codelineno-0-457"></a>
</span><span id="__span-0-458"><a id="__codelineno-0-458" name="__codelineno-0-458"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-459"><a id="__codelineno-0-459" name="__codelineno-0-459"></a><span style="color: #546E7A; font-style: italic">        str: The ID of the added document. If the document had no ID, a new UUID-based</span>
</span><span id="__span-0-460"><a id="__codelineno-0-460" name="__codelineno-0-460"></a><span style="color: #546E7A; font-style: italic">            ID is generated.</span>
</span><span id="__span-0-461"><a id="__codelineno-0-461" name="__codelineno-0-461"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-462"><a id="__codelineno-0-462" name="__codelineno-0-462"></a>    <span style="color: #546E7A; font-style: italic"># Generate a consistent ID if not present</span>
</span><span id="__span-0-463"><a id="__codelineno-0-463" name="__codelineno-0-463"></a>    <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #EFF">document</span><span style="color: #89DDFF">.</span><span style="color: #EFF">id</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-464"><a id="__codelineno-0-464" name="__codelineno-0-464"></a>        <span style="color: #EFF">document</span><span style="color: #89DDFF">.</span><span style="color: #EFF">id</span> <span style="color: #89DDFF">=</span> <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;doc-</span><span style="color: #89DDFF">{</span><span style="color: #EFF">uuid4</span><span style="color: #89DDFF">()}</span><span style="color: #C3E88D">&quot;</span>
</span><span id="__span-0-465"><a id="__codelineno-0-465" name="__codelineno-0-465"></a>
</span><span id="__span-0-466"><a id="__codelineno-0-466" name="__codelineno-0-466"></a>    <span style="color: #546E7A; font-style: italic"># Add relationship metadata if there&#39;s a parent</span>
</span><span id="__span-0-467"><a id="__codelineno-0-467" name="__codelineno-0-467"></a>    <span style="color: #BB80B3">if</span> <span style="color: #EFF">parent_id</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-468"><a id="__codelineno-0-468" name="__codelineno-0-468"></a>        <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #82AAFF">hasattr</span><span style="color: #89DDFF">(</span><span style="color: #EFF">document</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;relatesTo&quot;</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF; font-style: italic">or</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #EFF">document</span><span style="color: #89DDFF">.</span><span style="color: #EFF">relatesTo</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-469"><a id="__codelineno-0-469" name="__codelineno-0-469"></a>            <span style="color: #EFF">document</span><span style="color: #89DDFF">.</span><span style="color: #EFF">relatesTo</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[]</span>
</span><span id="__span-0-470"><a id="__codelineno-0-470" name="__codelineno-0-470"></a>        <span style="color: #EFF">document</span><span style="color: #89DDFF">.</span><span style="color: #EFF">relatesTo</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-471"><a id="__codelineno-0-471" name="__codelineno-0-471"></a>            <span style="color: #EFF">DocumentReferenceRelatesTo</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-472"><a id="__codelineno-0-472" name="__codelineno-0-472"></a>                <span style="color: #EFF">target</span><span style="color: #89DDFF">=</span><span style="color: #EFF">Reference</span><span style="color: #89DDFF">(</span><span style="color: #EFF">reference</span><span style="color: #89DDFF">=</span><span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;DocumentReference/</span><span style="color: #89DDFF">{</span><span style="color: #EFF">parent_id</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&quot;</span><span style="color: #89DDFF">),</span>
</span><span id="__span-0-473"><a id="__codelineno-0-473" name="__codelineno-0-473"></a>                <span style="color: #EFF">code</span><span style="color: #89DDFF">=</span><span style="color: #EFF">create_single_codeable_concept</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-474"><a id="__codelineno-0-474" name="__codelineno-0-474"></a>                    <span style="color: #EFF">code</span><span style="color: #89DDFF">=</span><span style="color: #EFF">relationship_type</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-475"><a id="__codelineno-0-475" name="__codelineno-0-475"></a>                    <span style="color: #EFF">display</span><span style="color: #89DDFF">=</span><span style="color: #EFF">relationship_type</span><span style="color: #89DDFF">.</span><span style="color: #EFF">capitalize</span><span style="color: #89DDFF">(),</span>
</span><span id="__span-0-476"><a id="__codelineno-0-476" name="__codelineno-0-476"></a>                    <span style="color: #EFF">system</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&quot;http://hl7.org/fhir/ValueSet/document-relationship-type&quot;</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-477"><a id="__codelineno-0-477" name="__codelineno-0-477"></a>                <span style="color: #89DDFF">),</span>
</span><span id="__span-0-478"><a id="__codelineno-0-478" name="__codelineno-0-478"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-479"><a id="__codelineno-0-479" name="__codelineno-0-479"></a>        <span style="color: #89DDFF">)</span>
</span><span id="__span-0-480"><a id="__codelineno-0-480" name="__codelineno-0-480"></a>
</span><span id="__span-0-481"><a id="__codelineno-0-481" name="__codelineno-0-481"></a>    <span style="color: #89DDFF">self.</span><span style="color: #EFF">add_resources</span><span style="color: #89DDFF">([</span><span style="color: #EFF">document</span><span style="color: #89DDFF">],</span> <span style="color: #C3E88D">&quot;DocumentReference&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">replace</span><span style="color: #89DDFF">=False)</span>
</span><span id="__span-0-482"><a id="__codelineno-0-482" name="__codelineno-0-482"></a>
</span><span id="__span-0-483"><a id="__codelineno-0-483" name="__codelineno-0-483"></a>    <span style="color: #BB80B3">return</span> <span style="color: #EFF">document</span><span style="color: #89DDFF">.</span><span style="color: #EFF">id</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.document.FhirData.add_resources" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">add_resources</span><span style="color: #89DDFF">(</span><span style="color: #EFF">resources</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">resource_type</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">replace</span><span style="color: #89DDFF">=False)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Add resources to the working bundle.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/document.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-430">430</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-431">431</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-432">432</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-433">433</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-434">434</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-435">435</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-436">436</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-430"><a id="__codelineno-0-430" name="__codelineno-0-430"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">add_resources</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-431"><a id="__codelineno-0-431" name="__codelineno-0-431"></a>    <span style="color: #89DDFF">self,</span> <span style="color: #EFF">resources</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Any</span><span style="color: #89DDFF">],</span> <span style="color: #EFF">resource_type</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">replace</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">bool</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">False</span>
</span><span id="__span-0-432"><a id="__codelineno-0-432" name="__codelineno-0-432"></a><span style="color: #89DDFF">):</span>
</span><span id="__span-0-433"><a id="__codelineno-0-433" name="__codelineno-0-433"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Add resources to the working bundle.&quot;&quot;&quot;</span>
</span><span id="__span-0-434"><a id="__codelineno-0-434" name="__codelineno-0-434"></a>    <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_bundle</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-435"><a id="__codelineno-0-435" name="__codelineno-0-435"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">_bundle</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">create_bundle</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-436"><a id="__codelineno-0-436" name="__codelineno-0-436"></a>    <span style="color: #EFF">set_resources</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_bundle</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">resources</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">resource_type</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">replace</span><span style="color: #89DDFF">=</span><span style="color: #EFF">replace</span><span style="color: #89DDFF">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.document.FhirData.get_document_reference_family" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">get_document_reference_family</span><span style="color: #89DDFF">(</span><span style="color: #EFF">document_id</span><span style="color: #89DDFF">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get a DocumentReference resource and all its related resources
based on the relatesTo element in the FHIR standard.
See: https://build.fhir.org/documentreference-definitions.html#DocumentReference.relatesTo</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>document_id</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>ID of the DocumentReference resource to find relationships for</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Dict containing:
'document': The requested DocumentReference resource
'parents': List of parent DocumentReference resources
'children': List of child DocumentReference resources
'siblings': List of DocumentReference resources sharing the same parent</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/document.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-544">544</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-545">545</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-546">546</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-547">547</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-548">548</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-549">549</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-550">550</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-551">551</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-552">552</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-553">553</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-554">554</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-555">555</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-556">556</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-557">557</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-558">558</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-559">559</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-560">560</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-561">561</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-562">562</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-563">563</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-564">564</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-565">565</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-566">566</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-567">567</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-568">568</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-569">569</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-570">570</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-571">571</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-572">572</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-573">573</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-574">574</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-575">575</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-576">576</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-577">577</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-578">578</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-579">579</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-580">580</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-581">581</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-582">582</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-583">583</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-584">584</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-585">585</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-586">586</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-587">587</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-588">588</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-589">589</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-590">590</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-591">591</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-592">592</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-593">593</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-594">594</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-595">595</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-596">596</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-597">597</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-598">598</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-544"><a id="__codelineno-0-544" name="__codelineno-0-544"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_document_reference_family</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">document_id</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-545"><a id="__codelineno-0-545" name="__codelineno-0-545"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-546"><a id="__codelineno-0-546" name="__codelineno-0-546"></a><span style="color: #546E7A; font-style: italic">    Get a DocumentReference resource and all its related resources</span>
</span><span id="__span-0-547"><a id="__codelineno-0-547" name="__codelineno-0-547"></a><span style="color: #546E7A; font-style: italic">    based on the relatesTo element in the FHIR standard.</span>
</span><span id="__span-0-548"><a id="__codelineno-0-548" name="__codelineno-0-548"></a><span style="color: #546E7A; font-style: italic">    See: https://build.fhir.org/documentreference-definitions.html#DocumentReference.relatesTo</span>
</span><span id="__span-0-549"><a id="__codelineno-0-549" name="__codelineno-0-549"></a>
</span><span id="__span-0-550"><a id="__codelineno-0-550" name="__codelineno-0-550"></a><span style="color: #546E7A; font-style: italic">    Args:</span>
</span><span id="__span-0-551"><a id="__codelineno-0-551" name="__codelineno-0-551"></a><span style="color: #546E7A; font-style: italic">        document_id: ID of the DocumentReference resource to find relationships for</span>
</span><span id="__span-0-552"><a id="__codelineno-0-552" name="__codelineno-0-552"></a>
</span><span id="__span-0-553"><a id="__codelineno-0-553" name="__codelineno-0-553"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-554"><a id="__codelineno-0-554" name="__codelineno-0-554"></a><span style="color: #546E7A; font-style: italic">        Dict containing:</span>
</span><span id="__span-0-555"><a id="__codelineno-0-555" name="__codelineno-0-555"></a><span style="color: #546E7A; font-style: italic">            &#39;document&#39;: The requested DocumentReference resource</span>
</span><span id="__span-0-556"><a id="__codelineno-0-556" name="__codelineno-0-556"></a><span style="color: #546E7A; font-style: italic">            &#39;parents&#39;: List of parent DocumentReference resources</span>
</span><span id="__span-0-557"><a id="__codelineno-0-557" name="__codelineno-0-557"></a><span style="color: #546E7A; font-style: italic">            &#39;children&#39;: List of child DocumentReference resources</span>
</span><span id="__span-0-558"><a id="__codelineno-0-558" name="__codelineno-0-558"></a><span style="color: #546E7A; font-style: italic">            &#39;siblings&#39;: List of DocumentReference resources sharing the same parent</span>
</span><span id="__span-0-559"><a id="__codelineno-0-559" name="__codelineno-0-559"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-560"><a id="__codelineno-0-560" name="__codelineno-0-560"></a>    <span style="color: #EFF">documents</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">get_resources</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;DocumentReference&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-561"><a id="__codelineno-0-561" name="__codelineno-0-561"></a>    <span style="color: #EFF">family</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">{</span><span style="color: #C3E88D">&quot;document&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">None,</span> <span style="color: #C3E88D">&quot;parents&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">[],</span> <span style="color: #C3E88D">&quot;children&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">[],</span> <span style="color: #C3E88D">&quot;siblings&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">[]}</span>
</span><span id="__span-0-562"><a id="__codelineno-0-562" name="__codelineno-0-562"></a>
</span><span id="__span-0-563"><a id="__codelineno-0-563" name="__codelineno-0-563"></a>    <span style="color: #546E7A; font-style: italic"># Find the requested document</span>
</span><span id="__span-0-564"><a id="__codelineno-0-564" name="__codelineno-0-564"></a>    <span style="color: #EFF">target_doc</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">next</span><span style="color: #89DDFF">((</span><span style="color: #EFF">doc</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">doc</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">documents</span> <span style="color: #BB80B3">if</span> <span style="color: #EFF">doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">id</span> <span style="color: #89DDFF">==</span> <span style="color: #EFF">document_id</span><span style="color: #89DDFF">),</span> <span style="color: #89DDFF">None)</span>
</span><span id="__span-0-565"><a id="__codelineno-0-565" name="__codelineno-0-565"></a>    <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #EFF">target_doc</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-566"><a id="__codelineno-0-566" name="__codelineno-0-566"></a>        <span style="color: #BB80B3">return</span> <span style="color: #EFF">family</span>
</span><span id="__span-0-567"><a id="__codelineno-0-567" name="__codelineno-0-567"></a>
</span><span id="__span-0-568"><a id="__codelineno-0-568" name="__codelineno-0-568"></a>    <span style="color: #EFF">family</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;document&quot;</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">target_doc</span>
</span><span id="__span-0-569"><a id="__codelineno-0-569" name="__codelineno-0-569"></a>
</span><span id="__span-0-570"><a id="__codelineno-0-570" name="__codelineno-0-570"></a>    <span style="color: #546E7A; font-style: italic"># Find direct relationships</span>
</span><span id="__span-0-571"><a id="__codelineno-0-571" name="__codelineno-0-571"></a>    <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">hasattr</span><span style="color: #89DDFF">(</span><span style="color: #EFF">target_doc</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;relatesTo&quot;</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #EFF">target_doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">relatesTo</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-572"><a id="__codelineno-0-572" name="__codelineno-0-572"></a>        <span style="color: #546E7A; font-style: italic"># Find parents from target&#39;s relationships</span>
</span><span id="__span-0-573"><a id="__codelineno-0-573" name="__codelineno-0-573"></a>        <span style="color: #BB80B3">for</span> <span style="color: #EFF">relation</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">target_doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">relatesTo</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-574"><a id="__codelineno-0-574" name="__codelineno-0-574"></a>            <span style="color: #EFF">parent_ref</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">relation</span><span style="color: #89DDFF">.</span><span style="color: #EFF">target</span><span style="color: #89DDFF">.</span><span style="color: #EFF">reference</span>
</span><span id="__span-0-575"><a id="__codelineno-0-575" name="__codelineno-0-575"></a>            <span style="color: #EFF">parent_id</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">parent_ref</span><span style="color: #89DDFF">.</span><span style="color: #EFF">split</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;/&quot;</span><span style="color: #89DDFF">)[-</span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-576"><a id="__codelineno-0-576" name="__codelineno-0-576"></a>            <span style="color: #EFF">parent</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">next</span><span style="color: #89DDFF">((</span><span style="color: #EFF">doc</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">doc</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">documents</span> <span style="color: #BB80B3">if</span> <span style="color: #EFF">doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">id</span> <span style="color: #89DDFF">==</span> <span style="color: #EFF">parent_id</span><span style="color: #89DDFF">),</span> <span style="color: #89DDFF">None)</span>
</span><span id="__span-0-577"><a id="__codelineno-0-577" name="__codelineno-0-577"></a>            <span style="color: #BB80B3">if</span> <span style="color: #EFF">parent</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-578"><a id="__codelineno-0-578" name="__codelineno-0-578"></a>                <span style="color: #EFF">family</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;parents&quot;</span><span style="color: #89DDFF">].</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">parent</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-579"><a id="__codelineno-0-579" name="__codelineno-0-579"></a>
</span><span id="__span-0-580"><a id="__codelineno-0-580" name="__codelineno-0-580"></a>    <span style="color: #546E7A; font-style: italic"># Find children and siblings</span>
</span><span id="__span-0-581"><a id="__codelineno-0-581" name="__codelineno-0-581"></a>    <span style="color: #BB80B3">for</span> <span style="color: #EFF">doc</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">documents</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-582"><a id="__codelineno-0-582" name="__codelineno-0-582"></a>        <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #82AAFF">hasattr</span><span style="color: #89DDFF">(</span><span style="color: #EFF">doc</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;relatesTo&quot;</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF; font-style: italic">or</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #EFF">doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">relatesTo</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-583"><a id="__codelineno-0-583" name="__codelineno-0-583"></a>            <span style="color: #BB80B3">continue</span>
</span><span id="__span-0-584"><a id="__codelineno-0-584" name="__codelineno-0-584"></a>
</span><span id="__span-0-585"><a id="__codelineno-0-585" name="__codelineno-0-585"></a>        <span style="color: #BB80B3">for</span> <span style="color: #EFF">relation</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">relatesTo</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-586"><a id="__codelineno-0-586" name="__codelineno-0-586"></a>            <span style="color: #EFF">target_ref</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">relation</span><span style="color: #89DDFF">.</span><span style="color: #EFF">target</span><span style="color: #89DDFF">.</span><span style="color: #EFF">reference</span>
</span><span id="__span-0-587"><a id="__codelineno-0-587" name="__codelineno-0-587"></a>            <span style="color: #EFF">related_id</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">target_ref</span><span style="color: #89DDFF">.</span><span style="color: #EFF">split</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;/&quot;</span><span style="color: #89DDFF">)[-</span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-588"><a id="__codelineno-0-588" name="__codelineno-0-588"></a>
</span><span id="__span-0-589"><a id="__codelineno-0-589" name="__codelineno-0-589"></a>            <span style="color: #546E7A; font-style: italic"># Check if this doc is a child of our target</span>
</span><span id="__span-0-590"><a id="__codelineno-0-590" name="__codelineno-0-590"></a>            <span style="color: #BB80B3">if</span> <span style="color: #EFF">related_id</span> <span style="color: #89DDFF">==</span> <span style="color: #EFF">document_id</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-591"><a id="__codelineno-0-591" name="__codelineno-0-591"></a>                <span style="color: #EFF">family</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;children&quot;</span><span style="color: #89DDFF">].</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">doc</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-592"><a id="__codelineno-0-592" name="__codelineno-0-592"></a>
</span><span id="__span-0-593"><a id="__codelineno-0-593" name="__codelineno-0-593"></a>            <span style="color: #546E7A; font-style: italic"># For siblings, check if they share the same parent</span>
</span><span id="__span-0-594"><a id="__codelineno-0-594" name="__codelineno-0-594"></a>            <span style="color: #BB80B3">elif</span> <span style="color: #EFF">family</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;parents&quot;</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #EFF">related_id</span> <span style="color: #89DDFF">==</span> <span style="color: #EFF">family</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;parents&quot;</span><span style="color: #89DDFF">][</span><span style="color: #F78C6C">0</span><span style="color: #89DDFF">].</span><span style="color: #EFF">id</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-595"><a id="__codelineno-0-595" name="__codelineno-0-595"></a>                <span style="color: #BB80B3">if</span> <span style="color: #EFF">doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">id</span> <span style="color: #89DDFF">!=</span> <span style="color: #EFF">document_id</span><span style="color: #89DDFF">:</span>  <span style="color: #546E7A; font-style: italic"># Don&#39;t include self as sibling</span>
</span><span id="__span-0-596"><a id="__codelineno-0-596" name="__codelineno-0-596"></a>                    <span style="color: #EFF">family</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;siblings&quot;</span><span style="color: #89DDFF">].</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">doc</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-597"><a id="__codelineno-0-597" name="__codelineno-0-597"></a>
</span><span id="__span-0-598"><a id="__codelineno-0-598" name="__codelineno-0-598"></a>    <span style="color: #BB80B3">return</span> <span style="color: #EFF">family</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.document.FhirData.get_document_references_readable" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">get_document_references_readable</span><span style="color: #89DDFF">(</span><span style="color: #EFF">include_data</span><span style="color: #89DDFF">=True,</span> <span style="color: #EFF">include_relationships</span><span style="color: #89DDFF">=True)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get DocumentReferences resources with their content and optional relationship data
in a human-readable dictionary format.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>include_data</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If True, decode and include the document data (default: True)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="bool">bool</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>include_relationships</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>If True, include related document information (default: True)</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="bool">bool</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.List">List</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>List of documents with metadata and optionally their content and relationships</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/document.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-485">485</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-486">486</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-487">487</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-488">488</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-489">489</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-490">490</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-491">491</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-492">492</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-493">493</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-494">494</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-495">495</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-496">496</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-497">497</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-498">498</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-499">499</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-500">500</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-501">501</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-502">502</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-503">503</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-504">504</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-505">505</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-506">506</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-507">507</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-508">508</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-509">509</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-510">510</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-511">511</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-512">512</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-513">513</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-514">514</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-515">515</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-516">516</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-517">517</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-518">518</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-519">519</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-520">520</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-521">521</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-522">522</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-523">523</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-524">524</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-525">525</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-526">526</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-527">527</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-528">528</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-529">529</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-530">530</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-531">531</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-532">532</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-533">533</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-534">534</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-535">535</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-536">536</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-537">537</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-538">538</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-539">539</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-540">540</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-541">541</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-542">542</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-485"><a id="__codelineno-0-485" name="__codelineno-0-485"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_document_references_readable</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-486"><a id="__codelineno-0-486" name="__codelineno-0-486"></a>    <span style="color: #89DDFF">self,</span> <span style="color: #EFF">include_data</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">bool</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">True,</span> <span style="color: #EFF">include_relationships</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">bool</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">True</span>
</span><span id="__span-0-487"><a id="__codelineno-0-487" name="__codelineno-0-487"></a><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]]:</span>
</span><span id="__span-0-488"><a id="__codelineno-0-488" name="__codelineno-0-488"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-489"><a id="__codelineno-0-489" name="__codelineno-0-489"></a><span style="color: #546E7A; font-style: italic">    Get DocumentReferences resources with their content and optional relationship data</span>
</span><span id="__span-0-490"><a id="__codelineno-0-490" name="__codelineno-0-490"></a><span style="color: #546E7A; font-style: italic">    in a human-readable dictionary format.</span>
</span><span id="__span-0-491"><a id="__codelineno-0-491" name="__codelineno-0-491"></a>
</span><span id="__span-0-492"><a id="__codelineno-0-492" name="__codelineno-0-492"></a><span style="color: #546E7A; font-style: italic">    Args:</span>
</span><span id="__span-0-493"><a id="__codelineno-0-493" name="__codelineno-0-493"></a><span style="color: #546E7A; font-style: italic">        include_data: If True, decode and include the document data (default: True)</span>
</span><span id="__span-0-494"><a id="__codelineno-0-494" name="__codelineno-0-494"></a><span style="color: #546E7A; font-style: italic">        include_relationships: If True, include related document information (default: True)</span>
</span><span id="__span-0-495"><a id="__codelineno-0-495" name="__codelineno-0-495"></a>
</span><span id="__span-0-496"><a id="__codelineno-0-496" name="__codelineno-0-496"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-497"><a id="__codelineno-0-497" name="__codelineno-0-497"></a><span style="color: #546E7A; font-style: italic">        List of documents with metadata and optionally their content and relationships</span>
</span><span id="__span-0-498"><a id="__codelineno-0-498" name="__codelineno-0-498"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-499"><a id="__codelineno-0-499" name="__codelineno-0-499"></a>    <span style="color: #EFF">documents</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[]</span>
</span><span id="__span-0-500"><a id="__codelineno-0-500" name="__codelineno-0-500"></a>    <span style="color: #BB80B3">for</span> <span style="color: #EFF">doc</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">get_resources</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;DocumentReference&quot;</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-501"><a id="__codelineno-0-501" name="__codelineno-0-501"></a>        <span style="color: #EFF">doc_data</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-502"><a id="__codelineno-0-502" name="__codelineno-0-502"></a>            <span style="color: #C3E88D">&quot;id&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">id</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-503"><a id="__codelineno-0-503" name="__codelineno-0-503"></a>            <span style="color: #C3E88D">&quot;description&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">description</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-504"><a id="__codelineno-0-504" name="__codelineno-0-504"></a>            <span style="color: #C3E88D">&quot;status&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">status</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-505"><a id="__codelineno-0-505" name="__codelineno-0-505"></a>        <span style="color: #89DDFF">}</span>
</span><span id="__span-0-506"><a id="__codelineno-0-506" name="__codelineno-0-506"></a>
</span><span id="__span-0-507"><a id="__codelineno-0-507" name="__codelineno-0-507"></a>        <span style="color: #EFF">attachments</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">read_content_attachment</span><span style="color: #89DDFF">(</span><span style="color: #EFF">doc</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">include_data</span><span style="color: #89DDFF">=</span><span style="color: #EFF">include_data</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-508"><a id="__codelineno-0-508" name="__codelineno-0-508"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">attachments</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-509"><a id="__codelineno-0-509" name="__codelineno-0-509"></a>            <span style="color: #EFF">doc_data</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;attachments&quot;</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[]</span>
</span><span id="__span-0-510"><a id="__codelineno-0-510" name="__codelineno-0-510"></a>            <span style="color: #BB80B3">for</span> <span style="color: #EFF">attachment</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">attachments</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-511"><a id="__codelineno-0-511" name="__codelineno-0-511"></a>                <span style="color: #BB80B3">if</span> <span style="color: #EFF">include_data</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-512"><a id="__codelineno-0-512" name="__codelineno-0-512"></a>                    <span style="color: #EFF">doc_data</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;attachments&quot;</span><span style="color: #89DDFF">].</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-513"><a id="__codelineno-0-513" name="__codelineno-0-513"></a>                        <span style="color: #89DDFF">{</span>
</span><span id="__span-0-514"><a id="__codelineno-0-514" name="__codelineno-0-514"></a>                            <span style="color: #C3E88D">&quot;data&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">attachment</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;data&quot;</span><span style="color: #89DDFF">),</span>
</span><span id="__span-0-515"><a id="__codelineno-0-515" name="__codelineno-0-515"></a>                            <span style="color: #C3E88D">&quot;metadata&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">attachment</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;metadata&quot;</span><span style="color: #89DDFF">),</span>
</span><span id="__span-0-516"><a id="__codelineno-0-516" name="__codelineno-0-516"></a>                        <span style="color: #89DDFF">}</span>
</span><span id="__span-0-517"><a id="__codelineno-0-517" name="__codelineno-0-517"></a>                    <span style="color: #89DDFF">)</span>
</span><span id="__span-0-518"><a id="__codelineno-0-518" name="__codelineno-0-518"></a>                <span style="color: #BB80B3">else</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-519"><a id="__codelineno-0-519" name="__codelineno-0-519"></a>                    <span style="color: #EFF">doc_data</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;attachments&quot;</span><span style="color: #89DDFF">].</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-520"><a id="__codelineno-0-520" name="__codelineno-0-520"></a>                        <span style="color: #89DDFF">{</span><span style="color: #C3E88D">&quot;metadata&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">attachment</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;metadata&quot;</span><span style="color: #89DDFF">)}</span>
</span><span id="__span-0-521"><a id="__codelineno-0-521" name="__codelineno-0-521"></a>                    <span style="color: #89DDFF">)</span>
</span><span id="__span-0-522"><a id="__codelineno-0-522" name="__codelineno-0-522"></a>
</span><span id="__span-0-523"><a id="__codelineno-0-523" name="__codelineno-0-523"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">include_relationships</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-524"><a id="__codelineno-0-524" name="__codelineno-0-524"></a>            <span style="color: #EFF">family</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">get_document_reference_family</span><span style="color: #89DDFF">(</span><span style="color: #EFF">doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">id</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-525"><a id="__codelineno-0-525" name="__codelineno-0-525"></a>            <span style="color: #EFF">doc_data</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;relationships&quot;</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-526"><a id="__codelineno-0-526" name="__codelineno-0-526"></a>                <span style="color: #C3E88D">&quot;parents&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">[</span>
</span><span id="__span-0-527"><a id="__codelineno-0-527" name="__codelineno-0-527"></a>                    <span style="color: #89DDFF">{</span><span style="color: #C3E88D">&quot;id&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">p</span><span style="color: #89DDFF">.</span><span style="color: #EFF">id</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;description&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">p</span><span style="color: #89DDFF">.</span><span style="color: #EFF">description</span><span style="color: #89DDFF">}</span>
</span><span id="__span-0-528"><a id="__codelineno-0-528" name="__codelineno-0-528"></a>                    <span style="color: #BB80B3">for</span> <span style="color: #EFF">p</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">family</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;parents&quot;</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-529"><a id="__codelineno-0-529" name="__codelineno-0-529"></a>                <span style="color: #89DDFF">],</span>
</span><span id="__span-0-530"><a id="__codelineno-0-530" name="__codelineno-0-530"></a>                <span style="color: #C3E88D">&quot;children&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">[</span>
</span><span id="__span-0-531"><a id="__codelineno-0-531" name="__codelineno-0-531"></a>                    <span style="color: #89DDFF">{</span><span style="color: #C3E88D">&quot;id&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">c</span><span style="color: #89DDFF">.</span><span style="color: #EFF">id</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;description&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">c</span><span style="color: #89DDFF">.</span><span style="color: #EFF">description</span><span style="color: #89DDFF">}</span>
</span><span id="__span-0-532"><a id="__codelineno-0-532" name="__codelineno-0-532"></a>                    <span style="color: #BB80B3">for</span> <span style="color: #EFF">c</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">family</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;children&quot;</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-533"><a id="__codelineno-0-533" name="__codelineno-0-533"></a>                <span style="color: #89DDFF">],</span>
</span><span id="__span-0-534"><a id="__codelineno-0-534" name="__codelineno-0-534"></a>                <span style="color: #C3E88D">&quot;siblings&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">[</span>
</span><span id="__span-0-535"><a id="__codelineno-0-535" name="__codelineno-0-535"></a>                    <span style="color: #89DDFF">{</span><span style="color: #C3E88D">&quot;id&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">s</span><span style="color: #89DDFF">.</span><span style="color: #EFF">id</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;description&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">s</span><span style="color: #89DDFF">.</span><span style="color: #EFF">description</span><span style="color: #89DDFF">}</span>
</span><span id="__span-0-536"><a id="__codelineno-0-536" name="__codelineno-0-536"></a>                    <span style="color: #BB80B3">for</span> <span style="color: #EFF">s</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">family</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;siblings&quot;</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-537"><a id="__codelineno-0-537" name="__codelineno-0-537"></a>                <span style="color: #89DDFF">],</span>
</span><span id="__span-0-538"><a id="__codelineno-0-538" name="__codelineno-0-538"></a>            <span style="color: #89DDFF">}</span>
</span><span id="__span-0-539"><a id="__codelineno-0-539" name="__codelineno-0-539"></a>
</span><span id="__span-0-540"><a id="__codelineno-0-540" name="__codelineno-0-540"></a>        <span style="color: #EFF">documents</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">doc_data</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-541"><a id="__codelineno-0-541" name="__codelineno-0-541"></a>
</span><span id="__span-0-542"><a id="__codelineno-0-542" name="__codelineno-0-542"></a>    <span style="color: #BB80B3">return</span> <span style="color: #EFF">documents</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.document.FhirData.get_prefetch_resources" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">get_prefetch_resources</span><span style="color: #89DDFF">(</span><span style="color: #EFF">key</span><span style="color: #89DDFF">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get resources of a specific type from the prefetch bundle.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/document.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-418">418</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-419">419</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-420">420</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-421">421</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-422">422</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-418"><a id="__codelineno-0-418" name="__codelineno-0-418"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_prefetch_resources</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">key</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Any</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-419"><a id="__codelineno-0-419" name="__codelineno-0-419"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get resources of a specific type from the prefetch bundle.&quot;&quot;&quot;</span>
</span><span id="__span-0-420"><a id="__codelineno-0-420" name="__codelineno-0-420"></a>    <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_prefetch_resources</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-421"><a id="__codelineno-0-421" name="__codelineno-0-421"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">[]</span>
</span><span id="__span-0-422"><a id="__codelineno-0-422" name="__codelineno-0-422"></a>    <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_prefetch_resources</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #EFF">key</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">[])</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.document.FhirData.get_resources" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">get_resources</span><span style="color: #89DDFF">(</span><span style="color: #EFF">resource_type</span><span style="color: #89DDFF">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get resources of a specific type from the working bundle.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/document.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-424">424</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-425">425</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-426">426</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-427">427</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-428">428</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-424"><a id="__codelineno-0-424" name="__codelineno-0-424"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_resources</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">resource_type</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Any</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-425"><a id="__codelineno-0-425" name="__codelineno-0-425"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get resources of a specific type from the working bundle.&quot;&quot;&quot;</span>
</span><span id="__span-0-426"><a id="__codelineno-0-426" name="__codelineno-0-426"></a>    <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_bundle</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-427"><a id="__codelineno-0-427" name="__codelineno-0-427"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">[]</span>
</span><span id="__span-0-428"><a id="__codelineno-0-428" name="__codelineno-0-428"></a>    <span style="color: #BB80B3">return</span> <span style="color: #EFF">get_resources</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">_bundle</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">resource_type</span><span style="color: #89DDFF">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="healthchain.io.containers.document.ModelOutputs" class="doc doc-heading">
            <code>ModelOutputs</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">



        <p>Container for storing and managing third-party integration model outputs.</p>
<p>This class stores outputs from different NLP/ML frameworks like Hugging Face
and LangChain, organizing them by task type. It also maintains a list of
generated text outputs across frameworks.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">ATTRIBUTE</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.document.ModelOutputs._huggingface_results">_huggingface_results</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Dictionary storing Hugging Face model
outputs, keyed by task name.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.document.ModelOutputs._langchain_results">_langchain_results</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Dictionary storing LangChain outputs,
keyed by task name.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">METHOD</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.document.ModelOutputs.add_output">add_output</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>str, task: str, output: Any): Adds a model output for a
specific source and task. For text generation tasks, also extracts and
stores the generated text.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.document.ModelOutputs.get_output">get_output</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>str, task: str, default: Any = None) -&gt; Any: Gets the model
output for a specific source and task. Returns default if not found.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="get_generated_text(source, task) (healthchain.io.containers.document.ModelOutputs.get_generated_text)" href="#healthchain.io.containers.document.ModelOutputs.get_generated_text">get_generated_text</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Returns the list of generated text outputs</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>healthchain/io/containers/document.py</code></summary>
                <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-105">105</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-106">106</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-107">107</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-108">108</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-109">109</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-110">110</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-111">111</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-112">112</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-113">113</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-114">114</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-115">115</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-116">116</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-117">117</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-118">118</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-119">119</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-120">120</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-121">121</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-122">122</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-123">123</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-124">124</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-125">125</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-126">126</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-127">127</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-128">128</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-129">129</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-130">130</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-131">131</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-132">132</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-133">133</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-134">134</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-135">135</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-136">136</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-137">137</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-138">138</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-139">139</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-140">140</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-141">141</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-142">142</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-143">143</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-144">144</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-145">145</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-146">146</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-147">147</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-148">148</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-149">149</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-150">150</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-151">151</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-152">152</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-153">153</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-154">154</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-155">155</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-156">156</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-157">157</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-158">158</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-159">159</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-160">160</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-161">161</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-162">162</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-163">163</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-164">164</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-165">165</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-166">166</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-167">167</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-168">168</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-169">169</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-170">170</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-171">171</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-172">172</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-173">173</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-174">174</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-175">175</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-176">176</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-177">177</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-178">178</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-179">179</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-180">180</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-181">181</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-182">182</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-183">183</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-184">184</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-185">185</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-186">186</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-187">187</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-188">188</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-189">189</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-190">190</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-191">191</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-192">192</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-193">193</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-194">194</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-195">195</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-196">196</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-197">197</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-198">198</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-199">199</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-200">200</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-201">201</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-202">202</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-203">203</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-204">204</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-205">205</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-206">206</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-207">207</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-208">208</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-209">209</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-210">210</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-105"><a id="__codelineno-0-105" name="__codelineno-0-105"></a><span style="color: #82AAFF">@dataclass</span>
</span><span id="__span-0-106"><a id="__codelineno-0-106" name="__codelineno-0-106"></a><span style="color: #BB80B3">class</span><span style="color: #EFF"> </span><span style="color: #FFCB6B">ModelOutputs</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-107"><a id="__codelineno-0-107" name="__codelineno-0-107"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-108"><a id="__codelineno-0-108" name="__codelineno-0-108"></a><span style="color: #546E7A; font-style: italic">    Container for storing and managing third-party integration model outputs.</span>
</span><span id="__span-0-109"><a id="__codelineno-0-109" name="__codelineno-0-109"></a>
</span><span id="__span-0-110"><a id="__codelineno-0-110" name="__codelineno-0-110"></a><span style="color: #546E7A; font-style: italic">    This class stores outputs from different NLP/ML frameworks like Hugging Face</span>
</span><span id="__span-0-111"><a id="__codelineno-0-111" name="__codelineno-0-111"></a><span style="color: #546E7A; font-style: italic">    and LangChain, organizing them by task type. It also maintains a list of</span>
</span><span id="__span-0-112"><a id="__codelineno-0-112" name="__codelineno-0-112"></a><span style="color: #546E7A; font-style: italic">    generated text outputs across frameworks.</span>
</span><span id="__span-0-113"><a id="__codelineno-0-113" name="__codelineno-0-113"></a>
</span><span id="__span-0-114"><a id="__codelineno-0-114" name="__codelineno-0-114"></a><span style="color: #546E7A; font-style: italic">    Attributes:</span>
</span><span id="__span-0-115"><a id="__codelineno-0-115" name="__codelineno-0-115"></a><span style="color: #546E7A; font-style: italic">        _huggingface_results (Dict[str, Any]): Dictionary storing Hugging Face model</span>
</span><span id="__span-0-116"><a id="__codelineno-0-116" name="__codelineno-0-116"></a><span style="color: #546E7A; font-style: italic">            outputs, keyed by task name.</span>
</span><span id="__span-0-117"><a id="__codelineno-0-117" name="__codelineno-0-117"></a><span style="color: #546E7A; font-style: italic">        _langchain_results (Dict[str, Any]): Dictionary storing LangChain outputs,</span>
</span><span id="__span-0-118"><a id="__codelineno-0-118" name="__codelineno-0-118"></a><span style="color: #546E7A; font-style: italic">            keyed by task name.</span>
</span><span id="__span-0-119"><a id="__codelineno-0-119" name="__codelineno-0-119"></a>
</span><span id="__span-0-120"><a id="__codelineno-0-120" name="__codelineno-0-120"></a><span style="color: #546E7A; font-style: italic">    Methods:</span>
</span><span id="__span-0-121"><a id="__codelineno-0-121" name="__codelineno-0-121"></a><span style="color: #546E7A; font-style: italic">        add_output(source: str, task: str, output: Any): Adds a model output for a</span>
</span><span id="__span-0-122"><a id="__codelineno-0-122" name="__codelineno-0-122"></a><span style="color: #546E7A; font-style: italic">            specific source and task. For text generation tasks, also extracts and</span>
</span><span id="__span-0-123"><a id="__codelineno-0-123" name="__codelineno-0-123"></a><span style="color: #546E7A; font-style: italic">            stores the generated text.</span>
</span><span id="__span-0-124"><a id="__codelineno-0-124" name="__codelineno-0-124"></a><span style="color: #546E7A; font-style: italic">        get_output(source: str, task: str, default: Any = None) -&gt; Any: Gets the model</span>
</span><span id="__span-0-125"><a id="__codelineno-0-125" name="__codelineno-0-125"></a><span style="color: #546E7A; font-style: italic">            output for a specific source and task. Returns default if not found.</span>
</span><span id="__span-0-126"><a id="__codelineno-0-126" name="__codelineno-0-126"></a><span style="color: #546E7A; font-style: italic">        get_generated_text() -&gt; List[str]: Returns the list of generated text outputs</span>
</span><span id="__span-0-127"><a id="__codelineno-0-127" name="__codelineno-0-127"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-128"><a id="__codelineno-0-128" name="__codelineno-0-128"></a>
</span><span id="__span-0-129"><a id="__codelineno-0-129" name="__codelineno-0-129"></a>    <span style="color: #EFF">_huggingface_results</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">field</span><span style="color: #89DDFF">(</span><span style="color: #EFF">default_factory</span><span style="color: #89DDFF">=</span><span style="color: #82AAFF">dict</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-130"><a id="__codelineno-0-130" name="__codelineno-0-130"></a>    <span style="color: #EFF">_langchain_results</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">field</span><span style="color: #89DDFF">(</span><span style="color: #EFF">default_factory</span><span style="color: #89DDFF">=</span><span style="color: #82AAFF">dict</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-131"><a id="__codelineno-0-131" name="__codelineno-0-131"></a>
</span><span id="__span-0-132"><a id="__codelineno-0-132" name="__codelineno-0-132"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">add_output</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">source</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">task</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">output</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-133"><a id="__codelineno-0-133" name="__codelineno-0-133"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">source</span> <span style="color: #89DDFF">==</span> <span style="color: #C3E88D">&quot;huggingface&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-134"><a id="__codelineno-0-134" name="__codelineno-0-134"></a>            <span style="color: #89DDFF">self.</span><span style="color: #EFF">_huggingface_results</span><span style="color: #89DDFF">[</span><span style="color: #EFF">task</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">output</span>
</span><span id="__span-0-135"><a id="__codelineno-0-135" name="__codelineno-0-135"></a>        <span style="color: #BB80B3">elif</span> <span style="color: #EFF">source</span> <span style="color: #89DDFF">==</span> <span style="color: #C3E88D">&quot;langchain&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-136"><a id="__codelineno-0-136" name="__codelineno-0-136"></a>            <span style="color: #89DDFF">self.</span><span style="color: #EFF">_langchain_results</span><span style="color: #89DDFF">[</span><span style="color: #EFF">task</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">output</span>
</span><span id="__span-0-137"><a id="__codelineno-0-137" name="__codelineno-0-137"></a>        <span style="color: #BB80B3">else</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-138"><a id="__codelineno-0-138" name="__codelineno-0-138"></a>            <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span><span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Unknown source: </span><span style="color: #89DDFF">{</span><span style="color: #EFF">source</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-139"><a id="__codelineno-0-139" name="__codelineno-0-139"></a>
</span><span id="__span-0-140"><a id="__codelineno-0-140" name="__codelineno-0-140"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_output</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">source</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">task</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-141"><a id="__codelineno-0-141" name="__codelineno-0-141"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">source</span> <span style="color: #89DDFF">==</span> <span style="color: #C3E88D">&quot;huggingface&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-142"><a id="__codelineno-0-142" name="__codelineno-0-142"></a>            <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_huggingface_results</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #EFF">task</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">{})</span>
</span><span id="__span-0-143"><a id="__codelineno-0-143" name="__codelineno-0-143"></a>        <span style="color: #BB80B3">elif</span> <span style="color: #EFF">source</span> <span style="color: #89DDFF">==</span> <span style="color: #C3E88D">&quot;langchain&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-144"><a id="__codelineno-0-144" name="__codelineno-0-144"></a>            <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_langchain_results</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #EFF">task</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">{})</span>
</span><span id="__span-0-145"><a id="__codelineno-0-145" name="__codelineno-0-145"></a>        <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span><span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Unknown source: </span><span style="color: #89DDFF">{</span><span style="color: #EFF">source</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-146"><a id="__codelineno-0-146" name="__codelineno-0-146"></a>
</span><span id="__span-0-147"><a id="__codelineno-0-147" name="__codelineno-0-147"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_generated_text</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">source</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">task</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-148"><a id="__codelineno-0-148" name="__codelineno-0-148"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-149"><a id="__codelineno-0-149" name="__codelineno-0-149"></a><span style="color: #546E7A; font-style: italic">        Returns generated text outputs for a given source and task.</span>
</span><span id="__span-0-150"><a id="__codelineno-0-150" name="__codelineno-0-150"></a>
</span><span id="__span-0-151"><a id="__codelineno-0-151" name="__codelineno-0-151"></a><span style="color: #546E7A; font-style: italic">        Handles different output formats for Hugging Face and LangChain. For</span>
</span><span id="__span-0-152"><a id="__codelineno-0-152" name="__codelineno-0-152"></a><span style="color: #546E7A; font-style: italic">        Hugging Face, it extracts the last message content from chat-style</span>
</span><span id="__span-0-153"><a id="__codelineno-0-153" name="__codelineno-0-153"></a><span style="color: #546E7A; font-style: italic">        outputs and common keys like &quot;generated_text&quot;, &quot;summary_text&quot;, and</span>
</span><span id="__span-0-154"><a id="__codelineno-0-154" name="__codelineno-0-154"></a><span style="color: #546E7A; font-style: italic">        &quot;translation&quot;. For LangChain, it converts JSON outputs to strings, and returns</span>
</span><span id="__span-0-155"><a id="__codelineno-0-155" name="__codelineno-0-155"></a><span style="color: #546E7A; font-style: italic">        the output as is if it is already a string.</span>
</span><span id="__span-0-156"><a id="__codelineno-0-156" name="__codelineno-0-156"></a>
</span><span id="__span-0-157"><a id="__codelineno-0-157" name="__codelineno-0-157"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-158"><a id="__codelineno-0-158" name="__codelineno-0-158"></a><span style="color: #546E7A; font-style: italic">            source (str): Framework name (e.g., &quot;huggingface&quot;, &quot;langchain&quot;).</span>
</span><span id="__span-0-159"><a id="__codelineno-0-159" name="__codelineno-0-159"></a><span style="color: #546E7A; font-style: italic">            task (str): Task name for retrieving generated text.</span>
</span><span id="__span-0-160"><a id="__codelineno-0-160" name="__codelineno-0-160"></a>
</span><span id="__span-0-161"><a id="__codelineno-0-161" name="__codelineno-0-161"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-162"><a id="__codelineno-0-162" name="__codelineno-0-162"></a><span style="color: #546E7A; font-style: italic">            List[str]: List of generated text outputs, or an empty list if none.</span>
</span><span id="__span-0-163"><a id="__codelineno-0-163" name="__codelineno-0-163"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-164"><a id="__codelineno-0-164" name="__codelineno-0-164"></a>        <span style="color: #EFF">generated_text</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[]</span>
</span><span id="__span-0-165"><a id="__codelineno-0-165" name="__codelineno-0-165"></a>
</span><span id="__span-0-166"><a id="__codelineno-0-166" name="__codelineno-0-166"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">source</span> <span style="color: #89DDFF">==</span> <span style="color: #C3E88D">&quot;huggingface&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-167"><a id="__codelineno-0-167" name="__codelineno-0-167"></a>            <span style="color: #546E7A; font-style: italic"># Handle chat-style output format</span>
</span><span id="__span-0-168"><a id="__codelineno-0-168" name="__codelineno-0-168"></a>            <span style="color: #EFF">output</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_huggingface_results</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #EFF">task</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-169"><a id="__codelineno-0-169" name="__codelineno-0-169"></a>            <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">output</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-170"><a id="__codelineno-0-170" name="__codelineno-0-170"></a>                <span style="color: #BB80B3">for</span> <span style="color: #EFF">entry</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">output</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-171"><a id="__codelineno-0-171" name="__codelineno-0-171"></a>                    <span style="color: #EFF">text</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">entry</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;generated_text&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-172"><a id="__codelineno-0-172" name="__codelineno-0-172"></a>                    <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">text</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-173"><a id="__codelineno-0-173" name="__codelineno-0-173"></a>                        <span style="color: #EFF">last_msg</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">text</span><span style="color: #89DDFF">[-</span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-174"><a id="__codelineno-0-174" name="__codelineno-0-174"></a>                        <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">last_msg</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">dict</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #C3E88D">&quot;content&quot;</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">last_msg</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-175"><a id="__codelineno-0-175" name="__codelineno-0-175"></a>                            <span style="color: #EFF">generated_text</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">last_msg</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;content&quot;</span><span style="color: #89DDFF">])</span>
</span><span id="__span-0-176"><a id="__codelineno-0-176" name="__codelineno-0-176"></a>                    <span style="color: #546E7A; font-style: italic"># Otherwise get common huggingface output keys</span>
</span><span id="__span-0-177"><a id="__codelineno-0-177" name="__codelineno-0-177"></a>                    <span style="color: #BB80B3">elif</span> <span style="color: #82AAFF">any</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-178"><a id="__codelineno-0-178" name="__codelineno-0-178"></a>                        <span style="color: #EFF">key</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">entry</span>
</span><span id="__span-0-179"><a id="__codelineno-0-179" name="__codelineno-0-179"></a>                        <span style="color: #BB80B3">for</span> <span style="color: #EFF">key</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;generated_text&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;summary_text&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;translation&quot;</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-180"><a id="__codelineno-0-180" name="__codelineno-0-180"></a>                    <span style="color: #89DDFF">):</span>
</span><span id="__span-0-181"><a id="__codelineno-0-181" name="__codelineno-0-181"></a>                        <span style="color: #EFF">generated_text</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-182"><a id="__codelineno-0-182" name="__codelineno-0-182"></a>                            <span style="color: #EFF">text</span>
</span><span id="__span-0-183"><a id="__codelineno-0-183" name="__codelineno-0-183"></a>                            <span style="color: #89DDFF; font-style: italic">or</span> <span style="color: #EFF">entry</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;summary_text&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-184"><a id="__codelineno-0-184" name="__codelineno-0-184"></a>                            <span style="color: #89DDFF; font-style: italic">or</span> <span style="color: #EFF">entry</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;translation&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-185"><a id="__codelineno-0-185" name="__codelineno-0-185"></a>                        <span style="color: #89DDFF">)</span>
</span><span id="__span-0-186"><a id="__codelineno-0-186" name="__codelineno-0-186"></a>            <span style="color: #BB80B3">else</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-187"><a id="__codelineno-0-187" name="__codelineno-0-187"></a>                <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">warning</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;HuggingFace output is not a list of dictionaries. &quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-188"><a id="__codelineno-0-188" name="__codelineno-0-188"></a>        <span style="color: #BB80B3">elif</span> <span style="color: #EFF">source</span> <span style="color: #89DDFF">==</span> <span style="color: #C3E88D">&quot;langchain&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-189"><a id="__codelineno-0-189" name="__codelineno-0-189"></a>            <span style="color: #EFF">output</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_langchain_results</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #EFF">task</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-190"><a id="__codelineno-0-190" name="__codelineno-0-190"></a>            <span style="color: #546E7A; font-style: italic"># Check if output is a string</span>
</span><span id="__span-0-191"><a id="__codelineno-0-191" name="__codelineno-0-191"></a>            <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">output</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-192"><a id="__codelineno-0-192" name="__codelineno-0-192"></a>                <span style="color: #EFF">generated_text</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">output</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-193"><a id="__codelineno-0-193" name="__codelineno-0-193"></a>            <span style="color: #546E7A; font-style: italic"># Try to convert JSON to string</span>
</span><span id="__span-0-194"><a id="__codelineno-0-194" name="__codelineno-0-194"></a>            <span style="color: #BB80B3">elif</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">output</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">dict</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-195"><a id="__codelineno-0-195" name="__codelineno-0-195"></a>                <span style="color: #BB80B3">try</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-196"><a id="__codelineno-0-196" name="__codelineno-0-196"></a>                    <span style="color: #89DDFF; font-style: italic">import</span><span style="color: #EFF"> </span><span style="color: #FFCB6B">json</span>
</span><span id="__span-0-197"><a id="__codelineno-0-197" name="__codelineno-0-197"></a>
</span><span id="__span-0-198"><a id="__codelineno-0-198" name="__codelineno-0-198"></a>                    <span style="color: #EFF">output_str</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">json</span><span style="color: #89DDFF">.</span><span style="color: #EFF">dumps</span><span style="color: #89DDFF">(</span><span style="color: #EFF">output</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-199"><a id="__codelineno-0-199" name="__codelineno-0-199"></a>                    <span style="color: #EFF">generated_text</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">output_str</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-200"><a id="__codelineno-0-200" name="__codelineno-0-200"></a>                <span style="color: #BB80B3">except</span> <span style="color: #FFCB6B">Exception</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-201"><a id="__codelineno-0-201" name="__codelineno-0-201"></a>                    <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">warning</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-202"><a id="__codelineno-0-202" name="__codelineno-0-202"></a>                        <span style="color: #C3E88D">&quot;LangChain output is not a string and could not be converted to JSON string. &quot;</span>
</span><span id="__span-0-203"><a id="__codelineno-0-203" name="__codelineno-0-203"></a>                        <span style="color: #C3E88D">&quot;Chains should output either a string or a JSON object.&quot;</span>
</span><span id="__span-0-204"><a id="__codelineno-0-204" name="__codelineno-0-204"></a>                    <span style="color: #89DDFF">)</span>
</span><span id="__span-0-205"><a id="__codelineno-0-205" name="__codelineno-0-205"></a>            <span style="color: #BB80B3">else</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-206"><a id="__codelineno-0-206" name="__codelineno-0-206"></a>                <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">warning</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-207"><a id="__codelineno-0-207" name="__codelineno-0-207"></a>                    <span style="color: #C3E88D">&quot;LangChain output is not a string. Chains should output either a string or a JSON object.&quot;</span>
</span><span id="__span-0-208"><a id="__codelineno-0-208" name="__codelineno-0-208"></a>                <span style="color: #89DDFF">)</span>
</span><span id="__span-0-209"><a id="__codelineno-0-209" name="__codelineno-0-209"></a>
</span><span id="__span-0-210"><a id="__codelineno-0-210" name="__codelineno-0-210"></a>        <span style="color: #BB80B3">return</span> <span style="color: #EFF">generated_text</span>
</span></code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.document.ModelOutputs.get_generated_text" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">get_generated_text</span><span style="color: #89DDFF">(</span><span style="color: #EFF">source</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">task</span><span style="color: #89DDFF">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Returns generated text outputs for a given source and task.</p>
<p>Handles different output formats for Hugging Face and LangChain. For
Hugging Face, it extracts the last message content from chat-style
outputs and common keys like "generated_text", "summary_text", and
"translation". For LangChain, it converts JSON outputs to strings, and returns
the output as is if it is already a string.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>source</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Framework name (e.g., "huggingface", "langchain").</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>task</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Task name for retrieving generated text.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>List[str]: List of generated text outputs, or an empty list if none.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/document.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-147">147</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-148">148</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-149">149</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-150">150</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-151">151</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-152">152</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-153">153</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-154">154</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-155">155</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-156">156</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-157">157</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-158">158</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-159">159</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-160">160</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-161">161</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-162">162</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-163">163</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-164">164</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-165">165</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-166">166</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-167">167</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-168">168</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-169">169</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-170">170</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-171">171</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-172">172</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-173">173</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-174">174</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-175">175</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-176">176</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-177">177</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-178">178</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-179">179</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-180">180</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-181">181</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-182">182</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-183">183</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-184">184</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-185">185</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-186">186</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-187">187</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-188">188</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-189">189</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-190">190</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-191">191</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-192">192</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-193">193</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-194">194</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-195">195</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-196">196</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-197">197</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-198">198</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-199">199</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-200">200</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-201">201</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-202">202</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-203">203</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-204">204</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-205">205</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-206">206</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-207">207</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-208">208</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-209">209</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-210">210</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-147"><a id="__codelineno-0-147" name="__codelineno-0-147"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_generated_text</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">source</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">task</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-148"><a id="__codelineno-0-148" name="__codelineno-0-148"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-149"><a id="__codelineno-0-149" name="__codelineno-0-149"></a><span style="color: #546E7A; font-style: italic">    Returns generated text outputs for a given source and task.</span>
</span><span id="__span-0-150"><a id="__codelineno-0-150" name="__codelineno-0-150"></a>
</span><span id="__span-0-151"><a id="__codelineno-0-151" name="__codelineno-0-151"></a><span style="color: #546E7A; font-style: italic">    Handles different output formats for Hugging Face and LangChain. For</span>
</span><span id="__span-0-152"><a id="__codelineno-0-152" name="__codelineno-0-152"></a><span style="color: #546E7A; font-style: italic">    Hugging Face, it extracts the last message content from chat-style</span>
</span><span id="__span-0-153"><a id="__codelineno-0-153" name="__codelineno-0-153"></a><span style="color: #546E7A; font-style: italic">    outputs and common keys like &quot;generated_text&quot;, &quot;summary_text&quot;, and</span>
</span><span id="__span-0-154"><a id="__codelineno-0-154" name="__codelineno-0-154"></a><span style="color: #546E7A; font-style: italic">    &quot;translation&quot;. For LangChain, it converts JSON outputs to strings, and returns</span>
</span><span id="__span-0-155"><a id="__codelineno-0-155" name="__codelineno-0-155"></a><span style="color: #546E7A; font-style: italic">    the output as is if it is already a string.</span>
</span><span id="__span-0-156"><a id="__codelineno-0-156" name="__codelineno-0-156"></a>
</span><span id="__span-0-157"><a id="__codelineno-0-157" name="__codelineno-0-157"></a><span style="color: #546E7A; font-style: italic">    Args:</span>
</span><span id="__span-0-158"><a id="__codelineno-0-158" name="__codelineno-0-158"></a><span style="color: #546E7A; font-style: italic">        source (str): Framework name (e.g., &quot;huggingface&quot;, &quot;langchain&quot;).</span>
</span><span id="__span-0-159"><a id="__codelineno-0-159" name="__codelineno-0-159"></a><span style="color: #546E7A; font-style: italic">        task (str): Task name for retrieving generated text.</span>
</span><span id="__span-0-160"><a id="__codelineno-0-160" name="__codelineno-0-160"></a>
</span><span id="__span-0-161"><a id="__codelineno-0-161" name="__codelineno-0-161"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-162"><a id="__codelineno-0-162" name="__codelineno-0-162"></a><span style="color: #546E7A; font-style: italic">        List[str]: List of generated text outputs, or an empty list if none.</span>
</span><span id="__span-0-163"><a id="__codelineno-0-163" name="__codelineno-0-163"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-164"><a id="__codelineno-0-164" name="__codelineno-0-164"></a>    <span style="color: #EFF">generated_text</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[]</span>
</span><span id="__span-0-165"><a id="__codelineno-0-165" name="__codelineno-0-165"></a>
</span><span id="__span-0-166"><a id="__codelineno-0-166" name="__codelineno-0-166"></a>    <span style="color: #BB80B3">if</span> <span style="color: #EFF">source</span> <span style="color: #89DDFF">==</span> <span style="color: #C3E88D">&quot;huggingface&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-167"><a id="__codelineno-0-167" name="__codelineno-0-167"></a>        <span style="color: #546E7A; font-style: italic"># Handle chat-style output format</span>
</span><span id="__span-0-168"><a id="__codelineno-0-168" name="__codelineno-0-168"></a>        <span style="color: #EFF">output</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_huggingface_results</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #EFF">task</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-169"><a id="__codelineno-0-169" name="__codelineno-0-169"></a>        <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">output</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-170"><a id="__codelineno-0-170" name="__codelineno-0-170"></a>            <span style="color: #BB80B3">for</span> <span style="color: #EFF">entry</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">output</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-171"><a id="__codelineno-0-171" name="__codelineno-0-171"></a>                <span style="color: #EFF">text</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">entry</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;generated_text&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-172"><a id="__codelineno-0-172" name="__codelineno-0-172"></a>                <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">text</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-173"><a id="__codelineno-0-173" name="__codelineno-0-173"></a>                    <span style="color: #EFF">last_msg</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">text</span><span style="color: #89DDFF">[-</span><span style="color: #F78C6C">1</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-174"><a id="__codelineno-0-174" name="__codelineno-0-174"></a>                    <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">last_msg</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">dict</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #C3E88D">&quot;content&quot;</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">last_msg</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-175"><a id="__codelineno-0-175" name="__codelineno-0-175"></a>                        <span style="color: #EFF">generated_text</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">last_msg</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;content&quot;</span><span style="color: #89DDFF">])</span>
</span><span id="__span-0-176"><a id="__codelineno-0-176" name="__codelineno-0-176"></a>                <span style="color: #546E7A; font-style: italic"># Otherwise get common huggingface output keys</span>
</span><span id="__span-0-177"><a id="__codelineno-0-177" name="__codelineno-0-177"></a>                <span style="color: #BB80B3">elif</span> <span style="color: #82AAFF">any</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-178"><a id="__codelineno-0-178" name="__codelineno-0-178"></a>                    <span style="color: #EFF">key</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">entry</span>
</span><span id="__span-0-179"><a id="__codelineno-0-179" name="__codelineno-0-179"></a>                    <span style="color: #BB80B3">for</span> <span style="color: #EFF">key</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;generated_text&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;summary_text&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;translation&quot;</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-180"><a id="__codelineno-0-180" name="__codelineno-0-180"></a>                <span style="color: #89DDFF">):</span>
</span><span id="__span-0-181"><a id="__codelineno-0-181" name="__codelineno-0-181"></a>                    <span style="color: #EFF">generated_text</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-182"><a id="__codelineno-0-182" name="__codelineno-0-182"></a>                        <span style="color: #EFF">text</span>
</span><span id="__span-0-183"><a id="__codelineno-0-183" name="__codelineno-0-183"></a>                        <span style="color: #89DDFF; font-style: italic">or</span> <span style="color: #EFF">entry</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;summary_text&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-184"><a id="__codelineno-0-184" name="__codelineno-0-184"></a>                        <span style="color: #89DDFF; font-style: italic">or</span> <span style="color: #EFF">entry</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;translation&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-185"><a id="__codelineno-0-185" name="__codelineno-0-185"></a>                    <span style="color: #89DDFF">)</span>
</span><span id="__span-0-186"><a id="__codelineno-0-186" name="__codelineno-0-186"></a>        <span style="color: #BB80B3">else</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-187"><a id="__codelineno-0-187" name="__codelineno-0-187"></a>            <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">warning</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;HuggingFace output is not a list of dictionaries. &quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-188"><a id="__codelineno-0-188" name="__codelineno-0-188"></a>    <span style="color: #BB80B3">elif</span> <span style="color: #EFF">source</span> <span style="color: #89DDFF">==</span> <span style="color: #C3E88D">&quot;langchain&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-189"><a id="__codelineno-0-189" name="__codelineno-0-189"></a>        <span style="color: #EFF">output</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_langchain_results</span><span style="color: #89DDFF">.</span><span style="color: #EFF">get</span><span style="color: #89DDFF">(</span><span style="color: #EFF">task</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-190"><a id="__codelineno-0-190" name="__codelineno-0-190"></a>        <span style="color: #546E7A; font-style: italic"># Check if output is a string</span>
</span><span id="__span-0-191"><a id="__codelineno-0-191" name="__codelineno-0-191"></a>        <span style="color: #BB80B3">if</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">output</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-192"><a id="__codelineno-0-192" name="__codelineno-0-192"></a>            <span style="color: #EFF">generated_text</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">output</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-193"><a id="__codelineno-0-193" name="__codelineno-0-193"></a>        <span style="color: #546E7A; font-style: italic"># Try to convert JSON to string</span>
</span><span id="__span-0-194"><a id="__codelineno-0-194" name="__codelineno-0-194"></a>        <span style="color: #BB80B3">elif</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">output</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">dict</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-195"><a id="__codelineno-0-195" name="__codelineno-0-195"></a>            <span style="color: #BB80B3">try</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-196"><a id="__codelineno-0-196" name="__codelineno-0-196"></a>                <span style="color: #89DDFF; font-style: italic">import</span><span style="color: #EFF"> </span><span style="color: #FFCB6B">json</span>
</span><span id="__span-0-197"><a id="__codelineno-0-197" name="__codelineno-0-197"></a>
</span><span id="__span-0-198"><a id="__codelineno-0-198" name="__codelineno-0-198"></a>                <span style="color: #EFF">output_str</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">json</span><span style="color: #89DDFF">.</span><span style="color: #EFF">dumps</span><span style="color: #89DDFF">(</span><span style="color: #EFF">output</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-199"><a id="__codelineno-0-199" name="__codelineno-0-199"></a>                <span style="color: #EFF">generated_text</span><span style="color: #89DDFF">.</span><span style="color: #EFF">append</span><span style="color: #89DDFF">(</span><span style="color: #EFF">output_str</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-200"><a id="__codelineno-0-200" name="__codelineno-0-200"></a>            <span style="color: #BB80B3">except</span> <span style="color: #FFCB6B">Exception</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-201"><a id="__codelineno-0-201" name="__codelineno-0-201"></a>                <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">warning</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-202"><a id="__codelineno-0-202" name="__codelineno-0-202"></a>                    <span style="color: #C3E88D">&quot;LangChain output is not a string and could not be converted to JSON string. &quot;</span>
</span><span id="__span-0-203"><a id="__codelineno-0-203" name="__codelineno-0-203"></a>                    <span style="color: #C3E88D">&quot;Chains should output either a string or a JSON object.&quot;</span>
</span><span id="__span-0-204"><a id="__codelineno-0-204" name="__codelineno-0-204"></a>                <span style="color: #89DDFF">)</span>
</span><span id="__span-0-205"><a id="__codelineno-0-205" name="__codelineno-0-205"></a>        <span style="color: #BB80B3">else</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-206"><a id="__codelineno-0-206" name="__codelineno-0-206"></a>            <span style="color: #EFF">logger</span><span style="color: #89DDFF">.</span><span style="color: #EFF">warning</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-207"><a id="__codelineno-0-207" name="__codelineno-0-207"></a>                <span style="color: #C3E88D">&quot;LangChain output is not a string. Chains should output either a string or a JSON object.&quot;</span>
</span><span id="__span-0-208"><a id="__codelineno-0-208" name="__codelineno-0-208"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-209"><a id="__codelineno-0-209" name="__codelineno-0-209"></a>
</span><span id="__span-0-210"><a id="__codelineno-0-210" name="__codelineno-0-210"></a>    <span style="color: #BB80B3">return</span> <span style="color: #EFF">generated_text</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="healthchain.io.containers.document.NlpAnnotations" class="doc doc-heading">
            <code>NlpAnnotations</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">



        <p>Container for NLP-specific annotations and results.</p>
<p>This class stores various NLP annotations and processing results from text analysis,
including preprocessed text, tokens, named entities, embeddings and spaCy documents.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">ATTRIBUTE</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.document.NlpAnnotations._preprocessed_text">_preprocessed_text</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>The preprocessed version of the input text.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.document.NlpAnnotations._tokens">_tokens</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>List of tokenized words from the text.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.document.NlpAnnotations._entities">_entities</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Named entities extracted from the text, with their labels and positions.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.List">List</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.document.NlpAnnotations._embeddings">_embeddings</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Vector embeddings generated from the text.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="typing.List">List</span>[<span title="float">float</span>]]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="healthchain.io.containers.document.NlpAnnotations._spacy_doc">_spacy_doc</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>The processed spaCy Doc object.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Optional">Optional</span>[<span title="spacy.tokens.Doc">Doc</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">METHOD</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.document.NlpAnnotations.add_spacy_doc">add_spacy_doc</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>SpacyDoc): Processes a spaCy Doc to extract tokens and entities.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.document.NlpAnnotations.get_spacy_doc">get_spacy_doc</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Returns the stored spaCy Doc object.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.document.NlpAnnotations.get_tokens">get_tokens</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Returns the list of tokens.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.document.NlpAnnotations.set_tokens">set_tokens</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>List[str]): Sets the token list.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.document.NlpAnnotations.set_entities">set_entities</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>List[Dict[str, Any]]): Sets the named entities list.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.document.NlpAnnotations.get_entities">get_entities</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Returns the list of named entities.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.document.NlpAnnotations.get_embeddings">get_embeddings</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Returns the vector embeddings.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="healthchain.io.containers.document.NlpAnnotations.set_embeddings">set_embeddings</span></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>List[float]): Sets the vector embeddings.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>healthchain/io/containers/document.py</code></summary>
                <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-38"> 38</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-39"> 39</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-40"> 40</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-41"> 41</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-42"> 42</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-43"> 43</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-44"> 44</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-45"> 45</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-46"> 46</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-47"> 47</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-48"> 48</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-49"> 49</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-50"> 50</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-51"> 51</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-52"> 52</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-53"> 53</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-54"> 54</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-55"> 55</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-56"> 56</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-57"> 57</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-58"> 58</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-59"> 59</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-60"> 60</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-61"> 61</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-62"> 62</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-63"> 63</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-64"> 64</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-65"> 65</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-66"> 66</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-67"> 67</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-68"> 68</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-69"> 69</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-70"> 70</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-71"> 71</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-72"> 72</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-73"> 73</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-74"> 74</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-75"> 75</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-76"> 76</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-77"> 77</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-78"> 78</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-79"> 79</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-80"> 80</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-81"> 81</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-82"> 82</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-83"> 83</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-84"> 84</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-85"> 85</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-86"> 86</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-87"> 87</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-88"> 88</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-89"> 89</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-90"> 90</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-91"> 91</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-92"> 92</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-93"> 93</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-94"> 94</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-95"> 95</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-96"> 96</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-97"> 97</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-98"> 98</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-99"> 99</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-100">100</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-101">101</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-102">102</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38"></a><span style="color: #82AAFF">@dataclass</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39"></a><span style="color: #BB80B3">class</span><span style="color: #EFF"> </span><span style="color: #FFCB6B">NlpAnnotations</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;</span>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41"></a><span style="color: #546E7A; font-style: italic">    Container for NLP-specific annotations and results.</span>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42"></a>
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43"></a><span style="color: #546E7A; font-style: italic">    This class stores various NLP annotations and processing results from text analysis,</span>
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44"></a><span style="color: #546E7A; font-style: italic">    including preprocessed text, tokens, named entities, embeddings and spaCy documents.</span>
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45"></a>
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46"></a><span style="color: #546E7A; font-style: italic">    Attributes:</span>
</span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47"></a><span style="color: #546E7A; font-style: italic">        _preprocessed_text (str): The preprocessed version of the input text.</span>
</span><span id="__span-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48"></a><span style="color: #546E7A; font-style: italic">        _tokens (List[str]): List of tokenized words from the text.</span>
</span><span id="__span-0-49"><a id="__codelineno-0-49" name="__codelineno-0-49"></a><span style="color: #546E7A; font-style: italic">        _entities (List[Dict[str, Any]]): Named entities extracted from the text, with their labels and positions.</span>
</span><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50"></a><span style="color: #546E7A; font-style: italic">        _embeddings (Optional[List[float]]): Vector embeddings generated from the text.</span>
</span><span id="__span-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51"></a><span style="color: #546E7A; font-style: italic">        _spacy_doc (Optional[SpacyDoc]): The processed spaCy Doc object.</span>
</span><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52"></a>
</span><span id="__span-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53"></a><span style="color: #546E7A; font-style: italic">    Methods:</span>
</span><span id="__span-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54"></a><span style="color: #546E7A; font-style: italic">        add_spacy_doc(doc: SpacyDoc): Processes a spaCy Doc to extract tokens and entities.</span>
</span><span id="__span-0-55"><a id="__codelineno-0-55" name="__codelineno-0-55"></a><span style="color: #546E7A; font-style: italic">        get_spacy_doc() -&gt; Optional[SpacyDoc]: Returns the stored spaCy Doc object.</span>
</span><span id="__span-0-56"><a id="__codelineno-0-56" name="__codelineno-0-56"></a><span style="color: #546E7A; font-style: italic">        get_tokens() -&gt; List[str]: Returns the list of tokens.</span>
</span><span id="__span-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57"></a><span style="color: #546E7A; font-style: italic">        set_tokens(tokens: List[str]): Sets the token list.</span>
</span><span id="__span-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58"></a><span style="color: #546E7A; font-style: italic">        set_entities(entities: List[Dict[str, Any]]): Sets the named entities list.</span>
</span><span id="__span-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59"></a><span style="color: #546E7A; font-style: italic">        get_entities() -&gt; List[Dict[str, Any]]: Returns the list of named entities.</span>
</span><span id="__span-0-60"><a id="__codelineno-0-60" name="__codelineno-0-60"></a><span style="color: #546E7A; font-style: italic">        get_embeddings() -&gt; Optional[List[float]]: Returns the vector embeddings.</span>
</span><span id="__span-0-61"><a id="__codelineno-0-61" name="__codelineno-0-61"></a><span style="color: #546E7A; font-style: italic">        set_embeddings(embeddings: List[float]): Sets the vector embeddings.</span>
</span><span id="__span-0-62"><a id="__codelineno-0-62" name="__codelineno-0-62"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-63"><a id="__codelineno-0-63" name="__codelineno-0-63"></a>
</span><span id="__span-0-64"><a id="__codelineno-0-64" name="__codelineno-0-64"></a>    <span style="color: #EFF">_preprocessed_text</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;&quot;</span>
</span><span id="__span-0-65"><a id="__codelineno-0-65" name="__codelineno-0-65"></a>    <span style="color: #EFF">_tokens</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">field</span><span style="color: #89DDFF">(</span><span style="color: #EFF">default_factory</span><span style="color: #89DDFF">=</span><span style="color: #82AAFF">list</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-66"><a id="__codelineno-0-66" name="__codelineno-0-66"></a>    <span style="color: #EFF">_entities</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]]</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">field</span><span style="color: #89DDFF">(</span><span style="color: #EFF">default_factory</span><span style="color: #89DDFF">=</span><span style="color: #82AAFF">list</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-67"><a id="__codelineno-0-67" name="__codelineno-0-67"></a>    <span style="color: #EFF">_embeddings</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">float</span><span style="color: #89DDFF">]]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-68"><a id="__codelineno-0-68" name="__codelineno-0-68"></a>    <span style="color: #EFF">_spacy_doc</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">SpacyDoc</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-69"><a id="__codelineno-0-69" name="__codelineno-0-69"></a>
</span><span id="__span-0-70"><a id="__codelineno-0-70" name="__codelineno-0-70"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">add_spacy_doc</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">doc</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">SpacyDoc</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-71"><a id="__codelineno-0-71" name="__codelineno-0-71"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">_spacy_doc</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">doc</span>
</span><span id="__span-0-72"><a id="__codelineno-0-72" name="__codelineno-0-72"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">_tokens</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[</span><span style="color: #EFF">token</span><span style="color: #89DDFF">.</span><span style="color: #EFF">text</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">token</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">doc</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-73"><a id="__codelineno-0-73" name="__codelineno-0-73"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">_entities</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">[</span>
</span><span id="__span-0-74"><a id="__codelineno-0-74" name="__codelineno-0-74"></a>            <span style="color: #89DDFF">{</span>
</span><span id="__span-0-75"><a id="__codelineno-0-75" name="__codelineno-0-75"></a>                <span style="color: #C3E88D">&quot;text&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">ent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">text</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-76"><a id="__codelineno-0-76" name="__codelineno-0-76"></a>                <span style="color: #C3E88D">&quot;label&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">ent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">label_</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-77"><a id="__codelineno-0-77" name="__codelineno-0-77"></a>                <span style="color: #C3E88D">&quot;start&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">ent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">start_char</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-78"><a id="__codelineno-0-78" name="__codelineno-0-78"></a>                <span style="color: #C3E88D">&quot;end&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">ent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">end_char</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-79"><a id="__codelineno-0-79" name="__codelineno-0-79"></a>            <span style="color: #89DDFF">}</span>
</span><span id="__span-0-80"><a id="__codelineno-0-80" name="__codelineno-0-80"></a>            <span style="color: #BB80B3">for</span> <span style="color: #EFF">ent</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">doc</span><span style="color: #89DDFF">.</span><span style="color: #EFF">ents</span>
</span><span id="__span-0-81"><a id="__codelineno-0-81" name="__codelineno-0-81"></a>        <span style="color: #89DDFF">]</span>
</span><span id="__span-0-82"><a id="__codelineno-0-82" name="__codelineno-0-82"></a>
</span><span id="__span-0-83"><a id="__codelineno-0-83" name="__codelineno-0-83"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_spacy_doc</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">SpacyDoc</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-84"><a id="__codelineno-0-84" name="__codelineno-0-84"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_spacy_doc</span>
</span><span id="__span-0-85"><a id="__codelineno-0-85" name="__codelineno-0-85"></a>
</span><span id="__span-0-86"><a id="__codelineno-0-86" name="__codelineno-0-86"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_tokens</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-87"><a id="__codelineno-0-87" name="__codelineno-0-87"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_tokens</span>
</span><span id="__span-0-88"><a id="__codelineno-0-88" name="__codelineno-0-88"></a>
</span><span id="__span-0-89"><a id="__codelineno-0-89" name="__codelineno-0-89"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">set_tokens</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">tokens</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]):</span>
</span><span id="__span-0-90"><a id="__codelineno-0-90" name="__codelineno-0-90"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">_tokens</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">tokens</span>
</span><span id="__span-0-91"><a id="__codelineno-0-91" name="__codelineno-0-91"></a>
</span><span id="__span-0-92"><a id="__codelineno-0-92" name="__codelineno-0-92"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">set_entities</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">entities</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]]):</span>
</span><span id="__span-0-93"><a id="__codelineno-0-93" name="__codelineno-0-93"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">_entities</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">entities</span>
</span><span id="__span-0-94"><a id="__codelineno-0-94" name="__codelineno-0-94"></a>
</span><span id="__span-0-95"><a id="__codelineno-0-95" name="__codelineno-0-95"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_entities</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]]:</span>
</span><span id="__span-0-96"><a id="__codelineno-0-96" name="__codelineno-0-96"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_entities</span>
</span><span id="__span-0-97"><a id="__codelineno-0-97" name="__codelineno-0-97"></a>
</span><span id="__span-0-98"><a id="__codelineno-0-98" name="__codelineno-0-98"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_embeddings</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">float</span><span style="color: #89DDFF">]]:</span>
</span><span id="__span-0-99"><a id="__codelineno-0-99" name="__codelineno-0-99"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">_embeddings</span>
</span><span id="__span-0-100"><a id="__codelineno-0-100" name="__codelineno-0-100"></a>
</span><span id="__span-0-101"><a id="__codelineno-0-101" name="__codelineno-0-101"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">set_embeddings</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">embeddings</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">float</span><span style="color: #89DDFF">]):</span>
</span><span id="__span-0-102"><a id="__codelineno-0-102" name="__codelineno-0-102"></a>        <span style="color: #89DDFF">self.</span><span style="color: #EFF">_embeddings</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">embeddings</span>
</span></code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">












  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="healthchain.io.containers.featureschema" class="doc doc-heading">
            <code>featureschema</code>


</h2>

    <div class="doc doc-contents ">

        <p>Feature schema definitions for FHIR to Dataset data conversion.</p>
<p>This module provides classes to define and manage feature schemas that map
FHIR resources to pandas DataFrame columns for ML model deployment.</p>










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h3 id="healthchain.io.containers.featureschema.FeatureMapping" class="doc doc-heading">
            <code>FeatureMapping</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>



        <p>Maps a single feature to its FHIR source.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
                <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-13">13</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-14">14</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-15">15</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-16">16</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-17">17</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-18">18</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-19">19</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-20">20</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-21">21</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-22">22</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-23">23</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-24">24</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-25">25</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-26">26</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-27">27</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-28">28</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-29">29</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-30">30</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-31">31</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-32">32</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-33">33</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-34">34</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-35">35</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-36">36</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-37">37</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-38">38</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-39">39</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-40">40</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-41">41</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-42">42</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-43">43</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-44">44</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-45">45</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-46">46</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-47">47</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-48">48</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-49">49</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-50">50</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-51">51</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-52">52</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-53">53</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-54">54</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-55">55</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-56">56</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-57">57</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-58">58</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-59">59</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13"></a><span style="color: #BB80B3">class</span><span style="color: #EFF"> </span><span style="color: #FFCB6B">FeatureMapping</span><span style="color: #89DDFF">(</span><span style="color: #EFF">BaseModel</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Maps a single feature to its FHIR source.&quot;&quot;&quot;</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15"></a>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16"></a>    <span style="color: #EFF">name</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17"></a>    <span style="color: #EFF">fhir_resource</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18"></a>    <span style="color: #EFF">code</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19"></a>    <span style="color: #EFF">code_system</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20"></a>    <span style="color: #EFF">field</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21"></a>    <span style="color: #EFF">transform</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22"></a>    <span style="color: #EFF">dtype</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span> <span style="color: #89DDFF">=</span> <span style="color: #C3E88D">&quot;float64&quot;</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23"></a>    <span style="color: #EFF">required</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">bool</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">True</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24"></a>    <span style="color: #EFF">unit</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25"></a>    <span style="color: #EFF">display</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26"></a>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27"></a>    <span style="color: #EFF">model_config</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">ConfigDict</span><span style="color: #89DDFF">(</span><span style="color: #EFF">extra</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&quot;allow&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28"></a>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29"></a>    <span style="color: #82AAFF">@model_validator</span><span style="color: #89DDFF">(</span><span style="color: #EFF">mode</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&quot;after&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">validate_resource_requirements</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;FeatureMapping&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Validate the feature mapping configuration based on resource type.&quot;&quot;&quot;</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32"></a>        <span style="color: #BB80B3">if</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">fhir_resource</span> <span style="color: #89DDFF">==</span> <span style="color: #C3E88D">&quot;Observation&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33"></a>            <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">code</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34"></a>                <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35"></a>                    <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Feature &#39;</span><span style="color: #89DDFF">{self.</span><span style="color: #EFF">name</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&#39;: Observation resources require a &#39;code&#39;&quot;</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36"></a>                <span style="color: #89DDFF">)</span>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37"></a>            <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">code_system</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38"></a>                <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39"></a>                    <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Feature &#39;</span><span style="color: #89DDFF">{self.</span><span style="color: #EFF">name</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&#39;: Observation resources require a &#39;code_system&#39;&quot;</span>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40"></a>                <span style="color: #89DDFF">)</span>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41"></a>        <span style="color: #BB80B3">elif</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">fhir_resource</span> <span style="color: #89DDFF">==</span> <span style="color: #C3E88D">&quot;Patient&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42"></a>            <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">field</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43"></a>                <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44"></a>                    <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Feature &#39;</span><span style="color: #89DDFF">{self.</span><span style="color: #EFF">name</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&#39;: Patient resources require a &#39;field&#39;&quot;</span>
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45"></a>                <span style="color: #89DDFF">)</span>
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self</span>
</span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47"></a>
</span><span id="__span-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48"></a>    <span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-49"><a id="__codelineno-0-49" name="__codelineno-0-49"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">from_dict</span><span style="color: #89DDFF">(cls,</span> <span style="color: #EFF">name</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">data</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;FeatureMapping&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Create a FeatureMapping from a dictionary.</span>
</span><span id="__span-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51"></a>
</span><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53"></a><span style="color: #546E7A; font-style: italic">            name: The feature name</span>
</span><span id="__span-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54"></a><span style="color: #546E7A; font-style: italic">            data: Dictionary containing feature configuration</span>
</span><span id="__span-0-55"><a id="__codelineno-0-55" name="__codelineno-0-55"></a>
</span><span id="__span-0-56"><a id="__codelineno-0-56" name="__codelineno-0-56"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57"></a><span style="color: #546E7A; font-style: italic">            FeatureMapping instance</span>
</span><span id="__span-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">cls(</span><span style="color: #EFF">name</span><span style="color: #89DDFF">=</span><span style="color: #EFF">name</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">**</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)</span>
</span></code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.featureschema.FeatureMapping.from_dict" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">from_dict</span><span style="color: #89DDFF">(</span><span style="color: #EFF">name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">data</span><span style="color: #89DDFF">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Create a FeatureMapping from a dictionary.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The feature name</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Dictionary containing feature configuration</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="FeatureMapping (healthchain.io.containers.featureschema.FeatureMapping)" href="#healthchain.io.containers.featureschema.FeatureMapping">FeatureMapping</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>FeatureMapping instance</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-48">48</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-49">49</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-50">50</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-51">51</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-52">52</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-53">53</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-54">54</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-55">55</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-56">56</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-57">57</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-58">58</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-59">59</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48"></a><span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-49"><a id="__codelineno-0-49" name="__codelineno-0-49"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">from_dict</span><span style="color: #89DDFF">(cls,</span> <span style="color: #EFF">name</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">data</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;FeatureMapping&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Create a FeatureMapping from a dictionary.</span>
</span><span id="__span-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51"></a>
</span><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52"></a><span style="color: #546E7A; font-style: italic">    Args:</span>
</span><span id="__span-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53"></a><span style="color: #546E7A; font-style: italic">        name: The feature name</span>
</span><span id="__span-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54"></a><span style="color: #546E7A; font-style: italic">        data: Dictionary containing feature configuration</span>
</span><span id="__span-0-55"><a id="__codelineno-0-55" name="__codelineno-0-55"></a>
</span><span id="__span-0-56"><a id="__codelineno-0-56" name="__codelineno-0-56"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57"></a><span style="color: #546E7A; font-style: italic">        FeatureMapping instance</span>
</span><span id="__span-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59"></a>    <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">cls(</span><span style="color: #EFF">name</span><span style="color: #89DDFF">=</span><span style="color: #EFF">name</span><span style="color: #89DDFF">,</span> <span style="color: #89DDFF">**</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.featureschema.FeatureMapping.validate_resource_requirements" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">validate_resource_requirements</span><span style="color: #89DDFF">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Validate the feature mapping configuration based on resource type.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-29">29</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-30">30</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-31">31</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-32">32</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-33">33</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-34">34</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-35">35</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-36">36</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-37">37</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-38">38</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-39">39</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-40">40</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-41">41</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-42">42</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-43">43</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-44">44</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-45">45</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-46">46</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29"></a><span style="color: #82AAFF">@model_validator</span><span style="color: #89DDFF">(</span><span style="color: #EFF">mode</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&quot;after&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">validate_resource_requirements</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;FeatureMapping&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Validate the feature mapping configuration based on resource type.&quot;&quot;&quot;</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32"></a>    <span style="color: #BB80B3">if</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">fhir_resource</span> <span style="color: #89DDFF">==</span> <span style="color: #C3E88D">&quot;Observation&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33"></a>        <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">code</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34"></a>            <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35"></a>                <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Feature &#39;</span><span style="color: #89DDFF">{self.</span><span style="color: #EFF">name</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&#39;: Observation resources require a &#39;code&#39;&quot;</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37"></a>        <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">code_system</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38"></a>            <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39"></a>                <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Feature &#39;</span><span style="color: #89DDFF">{self.</span><span style="color: #EFF">name</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&#39;: Observation resources require a &#39;code_system&#39;&quot;</span>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41"></a>    <span style="color: #BB80B3">elif</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">fhir_resource</span> <span style="color: #89DDFF">==</span> <span style="color: #C3E88D">&quot;Patient&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42"></a>        <span style="color: #BB80B3">if</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">field</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43"></a>            <span style="color: #BB80B3">raise</span> <span style="color: #FFCB6B">ValueError</span><span style="color: #89DDFF">(</span>
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44"></a>                <span style="color: #BB80B3">f</span><span style="color: #C3E88D">&quot;Feature &#39;</span><span style="color: #89DDFF">{self.</span><span style="color: #EFF">name</span><span style="color: #89DDFF">}</span><span style="color: #C3E88D">&#39;: Patient resources require a &#39;field&#39;&quot;</span>
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45"></a>            <span style="color: #89DDFF">)</span>
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46"></a>    <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">self</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="healthchain.io.containers.featureschema.FeatureSchema" class="doc doc-heading">
            <code>FeatureSchema</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>



        <p>Schema defining how to extract features from FHIR resources.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
                <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-62"> 62</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-63"> 63</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-64"> 64</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-65"> 65</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-66"> 66</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-67"> 67</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-68"> 68</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-69"> 69</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-70"> 70</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-71"> 71</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-72"> 72</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-73"> 73</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-74"> 74</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-75"> 75</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-76"> 76</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-77"> 77</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-78"> 78</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-79"> 79</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-80"> 80</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-81"> 81</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-82"> 82</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-83"> 83</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-84"> 84</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-85"> 85</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-86"> 86</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-87"> 87</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-88"> 88</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-89"> 89</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-90"> 90</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-91"> 91</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-92"> 92</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-93"> 93</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-94"> 94</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-95"> 95</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-96"> 96</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-97"> 97</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-98"> 98</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-99"> 99</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-100">100</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-101">101</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-102">102</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-103">103</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-104">104</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-105">105</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-106">106</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-107">107</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-108">108</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-109">109</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-110">110</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-111">111</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-112">112</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-113">113</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-114">114</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-115">115</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-116">116</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-117">117</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-118">118</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-119">119</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-120">120</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-121">121</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-122">122</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-123">123</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-124">124</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-125">125</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-126">126</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-127">127</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-128">128</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-129">129</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-130">130</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-131">131</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-132">132</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-133">133</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-134">134</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-135">135</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-136">136</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-137">137</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-138">138</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-139">139</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-140">140</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-141">141</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-142">142</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-143">143</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-144">144</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-145">145</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-146">146</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-147">147</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-148">148</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-149">149</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-150">150</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-151">151</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-152">152</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-153">153</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-154">154</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-155">155</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-156">156</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-157">157</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-158">158</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-159">159</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-160">160</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-161">161</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-162">162</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-163">163</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-164">164</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-165">165</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-166">166</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-167">167</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-168">168</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-169">169</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-170">170</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-171">171</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-172">172</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-173">173</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-174">174</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-175">175</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-176">176</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-177">177</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-178">178</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-179">179</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-180">180</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-181">181</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-182">182</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-183">183</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-184">184</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-185">185</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-186">186</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-187">187</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-188">188</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-189">189</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-190">190</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-191">191</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-192">192</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-193">193</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-194">194</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-195">195</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-196">196</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-197">197</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-198">198</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-199">199</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-200">200</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-201">201</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-202">202</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-203">203</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-204">204</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-205">205</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-206">206</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-207">207</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-208">208</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-209">209</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-210">210</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-211">211</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-212">212</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-213">213</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-214">214</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-215">215</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-216">216</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-217">217</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-218">218</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-219">219</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-220">220</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-62"><a id="__codelineno-0-62" name="__codelineno-0-62"></a><span style="color: #BB80B3">class</span><span style="color: #EFF"> </span><span style="color: #FFCB6B">FeatureSchema</span><span style="color: #89DDFF">(</span><span style="color: #EFF">BaseModel</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-63"><a id="__codelineno-0-63" name="__codelineno-0-63"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Schema defining how to extract features from FHIR resources.&quot;&quot;&quot;</span>
</span><span id="__span-0-64"><a id="__codelineno-0-64" name="__codelineno-0-64"></a>
</span><span id="__span-0-65"><a id="__codelineno-0-65" name="__codelineno-0-65"></a>    <span style="color: #EFF">name</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span>
</span><span id="__span-0-66"><a id="__codelineno-0-66" name="__codelineno-0-66"></a>    <span style="color: #EFF">version</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span>
</span><span id="__span-0-67"><a id="__codelineno-0-67" name="__codelineno-0-67"></a>    <span style="color: #EFF">features</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">FeatureMapping</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">{}</span>
</span><span id="__span-0-68"><a id="__codelineno-0-68" name="__codelineno-0-68"></a>    <span style="color: #EFF">description</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-69"><a id="__codelineno-0-69" name="__codelineno-0-69"></a>    <span style="color: #EFF">model_info</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-70"><a id="__codelineno-0-70" name="__codelineno-0-70"></a>    <span style="color: #EFF">metadata</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Optional</span><span style="color: #89DDFF">[</span><span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-71"><a id="__codelineno-0-71" name="__codelineno-0-71"></a>
</span><span id="__span-0-72"><a id="__codelineno-0-72" name="__codelineno-0-72"></a>    <span style="color: #EFF">model_config</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">ConfigDict</span><span style="color: #89DDFF">(</span><span style="color: #EFF">extra</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&quot;allow&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-73"><a id="__codelineno-0-73" name="__codelineno-0-73"></a>
</span><span id="__span-0-74"><a id="__codelineno-0-74" name="__codelineno-0-74"></a>    <span style="color: #82AAFF">@field_validator</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;features&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mode</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&quot;before&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-75"><a id="__codelineno-0-75" name="__codelineno-0-75"></a>    <span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-76"><a id="__codelineno-0-76" name="__codelineno-0-76"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">convert_feature_dicts</span><span style="color: #89DDFF">(cls,</span> <span style="color: #EFF">v</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-77"><a id="__codelineno-0-77" name="__codelineno-0-77"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Convert feature dicts to FeatureMapping objects if needed.&quot;&quot;&quot;</span>
</span><span id="__span-0-78"><a id="__codelineno-0-78" name="__codelineno-0-78"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">v</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">v</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">dict</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-79"><a id="__codelineno-0-79" name="__codelineno-0-79"></a>            <span style="color: #546E7A; font-style: italic"># Check if values are dicts (need conversion) or already FeatureMapping</span>
</span><span id="__span-0-80"><a id="__codelineno-0-80" name="__codelineno-0-80"></a>            <span style="color: #BB80B3">if</span> <span style="color: #EFF">v</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #82AAFF">list</span><span style="color: #89DDFF">(</span><span style="color: #EFF">v</span><span style="color: #89DDFF">.</span><span style="color: #EFF">values</span><span style="color: #89DDFF">())[</span><span style="color: #F78C6C">0</span><span style="color: #89DDFF">],</span> <span style="color: #82AAFF">dict</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-81"><a id="__codelineno-0-81" name="__codelineno-0-81"></a>                <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-82"><a id="__codelineno-0-82" name="__codelineno-0-82"></a>                    <span style="color: #EFF">name</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">FeatureMapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">from_dict</span><span style="color: #89DDFF">(</span><span style="color: #EFF">name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-83"><a id="__codelineno-0-83" name="__codelineno-0-83"></a>                    <span style="color: #BB80B3">for</span> <span style="color: #EFF">name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">v</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-84"><a id="__codelineno-0-84" name="__codelineno-0-84"></a>                <span style="color: #89DDFF">}</span>
</span><span id="__span-0-85"><a id="__codelineno-0-85" name="__codelineno-0-85"></a>        <span style="color: #BB80B3">return</span> <span style="color: #EFF">v</span>
</span><span id="__span-0-86"><a id="__codelineno-0-86" name="__codelineno-0-86"></a>
</span><span id="__span-0-87"><a id="__codelineno-0-87" name="__codelineno-0-87"></a>    <span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-88"><a id="__codelineno-0-88" name="__codelineno-0-88"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">from_yaml</span><span style="color: #89DDFF">(cls,</span> <span style="color: #EFF">path</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Union</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;FeatureSchema&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-89"><a id="__codelineno-0-89" name="__codelineno-0-89"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Load schema from a YAML file.</span>
</span><span id="__span-0-90"><a id="__codelineno-0-90" name="__codelineno-0-90"></a>
</span><span id="__span-0-91"><a id="__codelineno-0-91" name="__codelineno-0-91"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-92"><a id="__codelineno-0-92" name="__codelineno-0-92"></a><span style="color: #546E7A; font-style: italic">            path: Path to the YAML file</span>
</span><span id="__span-0-93"><a id="__codelineno-0-93" name="__codelineno-0-93"></a>
</span><span id="__span-0-94"><a id="__codelineno-0-94" name="__codelineno-0-94"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-95"><a id="__codelineno-0-95" name="__codelineno-0-95"></a><span style="color: #546E7A; font-style: italic">            FeatureSchema instance</span>
</span><span id="__span-0-96"><a id="__codelineno-0-96" name="__codelineno-0-96"></a>
</span><span id="__span-0-97"><a id="__codelineno-0-97" name="__codelineno-0-97"></a><span style="color: #546E7A; font-style: italic">        Example:</span>
</span><span id="__span-0-98"><a id="__codelineno-0-98" name="__codelineno-0-98"></a><span style="color: #546E7A; font-style: italic">            &gt;&gt;&gt; schema = FeatureSchema.from_yaml(&quot;configs/features/sepsis_vitals.yaml&quot;)</span>
</span><span id="__span-0-99"><a id="__codelineno-0-99" name="__codelineno-0-99"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-100"><a id="__codelineno-0-100" name="__codelineno-0-100"></a>        <span style="color: #EFF">path</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-101"><a id="__codelineno-0-101" name="__codelineno-0-101"></a>        <span style="color: #BB80B3">with</span> <span style="color: #82AAFF">open</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;r&quot;</span><span style="color: #89DDFF">)</span> <span style="color: #BB80B3">as</span> <span style="color: #EFF">f</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-102"><a id="__codelineno-0-102" name="__codelineno-0-102"></a>            <span style="color: #EFF">data</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">yaml</span><span style="color: #89DDFF">.</span><span style="color: #EFF">safe_load</span><span style="color: #89DDFF">(</span><span style="color: #EFF">f</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-103"><a id="__codelineno-0-103" name="__codelineno-0-103"></a>
</span><span id="__span-0-104"><a id="__codelineno-0-104" name="__codelineno-0-104"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">cls.</span><span style="color: #EFF">model_validate</span><span style="color: #89DDFF">(</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-105"><a id="__codelineno-0-105" name="__codelineno-0-105"></a>
</span><span id="__span-0-106"><a id="__codelineno-0-106" name="__codelineno-0-106"></a>    <span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-107"><a id="__codelineno-0-107" name="__codelineno-0-107"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">from_dict</span><span style="color: #89DDFF">(cls,</span> <span style="color: #EFF">data</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;FeatureSchema&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-108"><a id="__codelineno-0-108" name="__codelineno-0-108"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Create a FeatureSchema from a dictionary.</span>
</span><span id="__span-0-109"><a id="__codelineno-0-109" name="__codelineno-0-109"></a>
</span><span id="__span-0-110"><a id="__codelineno-0-110" name="__codelineno-0-110"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-111"><a id="__codelineno-0-111" name="__codelineno-0-111"></a><span style="color: #546E7A; font-style: italic">            data: Dictionary containing schema configuration</span>
</span><span id="__span-0-112"><a id="__codelineno-0-112" name="__codelineno-0-112"></a>
</span><span id="__span-0-113"><a id="__codelineno-0-113" name="__codelineno-0-113"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-114"><a id="__codelineno-0-114" name="__codelineno-0-114"></a><span style="color: #546E7A; font-style: italic">            FeatureSchema instance</span>
</span><span id="__span-0-115"><a id="__codelineno-0-115" name="__codelineno-0-115"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-116"><a id="__codelineno-0-116" name="__codelineno-0-116"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">cls.</span><span style="color: #EFF">model_validate</span><span style="color: #89DDFF">(</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-117"><a id="__codelineno-0-117" name="__codelineno-0-117"></a>
</span><span id="__span-0-118"><a id="__codelineno-0-118" name="__codelineno-0-118"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">to_dict</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-119"><a id="__codelineno-0-119" name="__codelineno-0-119"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Convert schema to dictionary format.</span>
</span><span id="__span-0-120"><a id="__codelineno-0-120" name="__codelineno-0-120"></a>
</span><span id="__span-0-121"><a id="__codelineno-0-121" name="__codelineno-0-121"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-122"><a id="__codelineno-0-122" name="__codelineno-0-122"></a><span style="color: #546E7A; font-style: italic">            Dictionary representation of the schema</span>
</span><span id="__span-0-123"><a id="__codelineno-0-123" name="__codelineno-0-123"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-124"><a id="__codelineno-0-124" name="__codelineno-0-124"></a>        <span style="color: #EFF">result</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-125"><a id="__codelineno-0-125" name="__codelineno-0-125"></a>            <span style="color: #C3E88D">&quot;name&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">name</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-126"><a id="__codelineno-0-126" name="__codelineno-0-126"></a>            <span style="color: #C3E88D">&quot;version&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">version</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-127"><a id="__codelineno-0-127" name="__codelineno-0-127"></a>            <span style="color: #C3E88D">&quot;description&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">description</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-128"><a id="__codelineno-0-128" name="__codelineno-0-128"></a>            <span style="color: #C3E88D">&quot;model_info&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">model_info</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-129"><a id="__codelineno-0-129" name="__codelineno-0-129"></a>            <span style="color: #C3E88D">&quot;features&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-130"><a id="__codelineno-0-130" name="__codelineno-0-130"></a>                <span style="color: #EFF">name</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-131"><a id="__codelineno-0-131" name="__codelineno-0-131"></a>                    <span style="color: #EFF">k</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">v</span>
</span><span id="__span-0-132"><a id="__codelineno-0-132" name="__codelineno-0-132"></a>                    <span style="color: #BB80B3">for</span> <span style="color: #EFF">k</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">v</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">model_dump</span><span style="color: #89DDFF">().</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-133"><a id="__codelineno-0-133" name="__codelineno-0-133"></a>                    <span style="color: #BB80B3">if</span> <span style="color: #EFF">k</span> <span style="color: #89DDFF">!=</span> <span style="color: #C3E88D">&quot;name&quot;</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #EFF">v</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-134"><a id="__codelineno-0-134" name="__codelineno-0-134"></a>                <span style="color: #89DDFF">}</span>
</span><span id="__span-0-135"><a id="__codelineno-0-135" name="__codelineno-0-135"></a>                <span style="color: #BB80B3">for</span> <span style="color: #EFF">name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">features</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-136"><a id="__codelineno-0-136" name="__codelineno-0-136"></a>            <span style="color: #89DDFF">},</span>
</span><span id="__span-0-137"><a id="__codelineno-0-137" name="__codelineno-0-137"></a>        <span style="color: #89DDFF">}</span>
</span><span id="__span-0-138"><a id="__codelineno-0-138" name="__codelineno-0-138"></a>        <span style="color: #BB80B3">if</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">metadata</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-139"><a id="__codelineno-0-139" name="__codelineno-0-139"></a>            <span style="color: #EFF">result</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;metadata&quot;</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">metadata</span>
</span><span id="__span-0-140"><a id="__codelineno-0-140" name="__codelineno-0-140"></a>        <span style="color: #BB80B3">return</span> <span style="color: #EFF">result</span>
</span><span id="__span-0-141"><a id="__codelineno-0-141" name="__codelineno-0-141"></a>
</span><span id="__span-0-142"><a id="__codelineno-0-142" name="__codelineno-0-142"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">to_yaml</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">path</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Union</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-143"><a id="__codelineno-0-143" name="__codelineno-0-143"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Save schema to a YAML file.</span>
</span><span id="__span-0-144"><a id="__codelineno-0-144" name="__codelineno-0-144"></a>
</span><span id="__span-0-145"><a id="__codelineno-0-145" name="__codelineno-0-145"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-146"><a id="__codelineno-0-146" name="__codelineno-0-146"></a><span style="color: #546E7A; font-style: italic">            path: Path where the YAML file will be saved</span>
</span><span id="__span-0-147"><a id="__codelineno-0-147" name="__codelineno-0-147"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-148"><a id="__codelineno-0-148" name="__codelineno-0-148"></a>        <span style="color: #EFF">path</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-149"><a id="__codelineno-0-149" name="__codelineno-0-149"></a>        <span style="color: #EFF">path</span><span style="color: #89DDFF">.</span><span style="color: #EFF">parent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">mkdir</span><span style="color: #89DDFF">(</span><span style="color: #EFF">parents</span><span style="color: #89DDFF">=True,</span> <span style="color: #EFF">exist_ok</span><span style="color: #89DDFF">=True)</span>
</span><span id="__span-0-150"><a id="__codelineno-0-150" name="__codelineno-0-150"></a>
</span><span id="__span-0-151"><a id="__codelineno-0-151" name="__codelineno-0-151"></a>        <span style="color: #BB80B3">with</span> <span style="color: #82AAFF">open</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;w&quot;</span><span style="color: #89DDFF">)</span> <span style="color: #BB80B3">as</span> <span style="color: #EFF">f</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-152"><a id="__codelineno-0-152" name="__codelineno-0-152"></a>            <span style="color: #EFF">yaml</span><span style="color: #89DDFF">.</span><span style="color: #EFF">dump</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">to_dict</span><span style="color: #89DDFF">(),</span> <span style="color: #EFF">f</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">default_flow_style</span><span style="color: #89DDFF">=False,</span> <span style="color: #EFF">sort_keys</span><span style="color: #89DDFF">=False)</span>
</span><span id="__span-0-153"><a id="__codelineno-0-153" name="__codelineno-0-153"></a>
</span><span id="__span-0-154"><a id="__codelineno-0-154" name="__codelineno-0-154"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_feature_names</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-155"><a id="__codelineno-0-155" name="__codelineno-0-155"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get list of feature names in order.</span>
</span><span id="__span-0-156"><a id="__codelineno-0-156" name="__codelineno-0-156"></a>
</span><span id="__span-0-157"><a id="__codelineno-0-157" name="__codelineno-0-157"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-158"><a id="__codelineno-0-158" name="__codelineno-0-158"></a><span style="color: #546E7A; font-style: italic">            List of feature names</span>
</span><span id="__span-0-159"><a id="__codelineno-0-159" name="__codelineno-0-159"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-160"><a id="__codelineno-0-160" name="__codelineno-0-160"></a>        <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">features</span><span style="color: #89DDFF">.</span><span style="color: #EFF">keys</span><span style="color: #89DDFF">())</span>
</span><span id="__span-0-161"><a id="__codelineno-0-161" name="__codelineno-0-161"></a>
</span><span id="__span-0-162"><a id="__codelineno-0-162" name="__codelineno-0-162"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_required_features</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-163"><a id="__codelineno-0-163" name="__codelineno-0-163"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get list of required feature names.</span>
</span><span id="__span-0-164"><a id="__codelineno-0-164" name="__codelineno-0-164"></a>
</span><span id="__span-0-165"><a id="__codelineno-0-165" name="__codelineno-0-165"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-166"><a id="__codelineno-0-166" name="__codelineno-0-166"></a><span style="color: #546E7A; font-style: italic">            List of required feature names</span>
</span><span id="__span-0-167"><a id="__codelineno-0-167" name="__codelineno-0-167"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-168"><a id="__codelineno-0-168" name="__codelineno-0-168"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">[</span><span style="color: #EFF">name</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">features</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()</span> <span style="color: #BB80B3">if</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">required</span><span style="color: #89DDFF">]</span>
</span><span id="__span-0-169"><a id="__codelineno-0-169" name="__codelineno-0-169"></a>
</span><span id="__span-0-170"><a id="__codelineno-0-170" name="__codelineno-0-170"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_features_by_resource</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">resource_type</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">FeatureMapping</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-171"><a id="__codelineno-0-171" name="__codelineno-0-171"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get all features mapped to a specific FHIR resource type.</span>
</span><span id="__span-0-172"><a id="__codelineno-0-172" name="__codelineno-0-172"></a>
</span><span id="__span-0-173"><a id="__codelineno-0-173" name="__codelineno-0-173"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-174"><a id="__codelineno-0-174" name="__codelineno-0-174"></a><span style="color: #546E7A; font-style: italic">            resource_type: FHIR resource type (e.g., &quot;Observation&quot;, &quot;Patient&quot;)</span>
</span><span id="__span-0-175"><a id="__codelineno-0-175" name="__codelineno-0-175"></a>
</span><span id="__span-0-176"><a id="__codelineno-0-176" name="__codelineno-0-176"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-177"><a id="__codelineno-0-177" name="__codelineno-0-177"></a><span style="color: #546E7A; font-style: italic">            Dictionary of features for the specified resource type</span>
</span><span id="__span-0-178"><a id="__codelineno-0-178" name="__codelineno-0-178"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-179"><a id="__codelineno-0-179" name="__codelineno-0-179"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-180"><a id="__codelineno-0-180" name="__codelineno-0-180"></a>            <span style="color: #EFF">name</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">mapping</span>
</span><span id="__span-0-181"><a id="__codelineno-0-181" name="__codelineno-0-181"></a>            <span style="color: #BB80B3">for</span> <span style="color: #EFF">name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">features</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-182"><a id="__codelineno-0-182" name="__codelineno-0-182"></a>            <span style="color: #BB80B3">if</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">fhir_resource</span> <span style="color: #89DDFF">==</span> <span style="color: #EFF">resource_type</span>
</span><span id="__span-0-183"><a id="__codelineno-0-183" name="__codelineno-0-183"></a>        <span style="color: #89DDFF">}</span>
</span><span id="__span-0-184"><a id="__codelineno-0-184" name="__codelineno-0-184"></a>
</span><span id="__span-0-185"><a id="__codelineno-0-185" name="__codelineno-0-185"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_observation_codes</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">FeatureMapping</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-186"><a id="__codelineno-0-186" name="__codelineno-0-186"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get all Observation features with their codes.</span>
</span><span id="__span-0-187"><a id="__codelineno-0-187" name="__codelineno-0-187"></a>
</span><span id="__span-0-188"><a id="__codelineno-0-188" name="__codelineno-0-188"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-189"><a id="__codelineno-0-189" name="__codelineno-0-189"></a><span style="color: #546E7A; font-style: italic">            Dictionary mapping codes to feature mappings</span>
</span><span id="__span-0-190"><a id="__codelineno-0-190" name="__codelineno-0-190"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-191"><a id="__codelineno-0-191" name="__codelineno-0-191"></a>        <span style="color: #EFF">observations</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">get_features_by_resource</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;Observation&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-192"><a id="__codelineno-0-192" name="__codelineno-0-192"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-193"><a id="__codelineno-0-193" name="__codelineno-0-193"></a>            <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">code</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">mapping</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">observations</span><span style="color: #89DDFF">.</span><span style="color: #EFF">values</span><span style="color: #89DDFF">()</span> <span style="color: #BB80B3">if</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">code</span>
</span><span id="__span-0-194"><a id="__codelineno-0-194" name="__codelineno-0-194"></a>        <span style="color: #89DDFF">}</span>
</span><span id="__span-0-195"><a id="__codelineno-0-195" name="__codelineno-0-195"></a>
</span><span id="__span-0-196"><a id="__codelineno-0-196" name="__codelineno-0-196"></a>    <span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">validate_dataframe_columns</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">columns</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-197"><a id="__codelineno-0-197" name="__codelineno-0-197"></a><span style="color: #EFF">        </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Validate that a DataFrame has the expected columns.</span>
</span><span id="__span-0-198"><a id="__codelineno-0-198" name="__codelineno-0-198"></a>
</span><span id="__span-0-199"><a id="__codelineno-0-199" name="__codelineno-0-199"></a><span style="color: #546E7A; font-style: italic">        Args:</span>
</span><span id="__span-0-200"><a id="__codelineno-0-200" name="__codelineno-0-200"></a><span style="color: #546E7A; font-style: italic">            columns: List of column names from a DataFrame</span>
</span><span id="__span-0-201"><a id="__codelineno-0-201" name="__codelineno-0-201"></a>
</span><span id="__span-0-202"><a id="__codelineno-0-202" name="__codelineno-0-202"></a><span style="color: #546E7A; font-style: italic">        Returns:</span>
</span><span id="__span-0-203"><a id="__codelineno-0-203" name="__codelineno-0-203"></a><span style="color: #546E7A; font-style: italic">            Dictionary with validation results:</span>
</span><span id="__span-0-204"><a id="__codelineno-0-204" name="__codelineno-0-204"></a><span style="color: #546E7A; font-style: italic">                - valid: bool</span>
</span><span id="__span-0-205"><a id="__codelineno-0-205" name="__codelineno-0-205"></a><span style="color: #546E7A; font-style: italic">                - missing_required: List of missing required features</span>
</span><span id="__span-0-206"><a id="__codelineno-0-206" name="__codelineno-0-206"></a><span style="color: #546E7A; font-style: italic">                - unexpected: List of unexpected columns</span>
</span><span id="__span-0-207"><a id="__codelineno-0-207" name="__codelineno-0-207"></a><span style="color: #546E7A; font-style: italic">        &quot;&quot;&quot;</span>
</span><span id="__span-0-208"><a id="__codelineno-0-208" name="__codelineno-0-208"></a>        <span style="color: #EFF">expected</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">set</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">get_feature_names</span><span style="color: #89DDFF">())</span>
</span><span id="__span-0-209"><a id="__codelineno-0-209" name="__codelineno-0-209"></a>        <span style="color: #EFF">actual</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">set</span><span style="color: #89DDFF">(</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-210"><a id="__codelineno-0-210" name="__codelineno-0-210"></a>        <span style="color: #EFF">required</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">set</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">get_required_features</span><span style="color: #89DDFF">())</span>
</span><span id="__span-0-211"><a id="__codelineno-0-211" name="__codelineno-0-211"></a>
</span><span id="__span-0-212"><a id="__codelineno-0-212" name="__codelineno-0-212"></a>        <span style="color: #EFF">missing_required</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">(</span><span style="color: #EFF">required</span> <span style="color: #89DDFF">-</span> <span style="color: #EFF">actual</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-213"><a id="__codelineno-0-213" name="__codelineno-0-213"></a>        <span style="color: #EFF">unexpected</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">(</span><span style="color: #EFF">actual</span> <span style="color: #89DDFF">-</span> <span style="color: #EFF">expected</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-214"><a id="__codelineno-0-214" name="__codelineno-0-214"></a>
</span><span id="__span-0-215"><a id="__codelineno-0-215" name="__codelineno-0-215"></a>        <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-216"><a id="__codelineno-0-216" name="__codelineno-0-216"></a>            <span style="color: #C3E88D">&quot;valid&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(</span><span style="color: #EFF">missing_required</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">==</span> <span style="color: #F78C6C">0</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-217"><a id="__codelineno-0-217" name="__codelineno-0-217"></a>            <span style="color: #C3E88D">&quot;missing_required&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">missing_required</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-218"><a id="__codelineno-0-218" name="__codelineno-0-218"></a>            <span style="color: #C3E88D">&quot;unexpected&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">unexpected</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-219"><a id="__codelineno-0-219" name="__codelineno-0-219"></a>            <span style="color: #C3E88D">&quot;missing_optional&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">((</span><span style="color: #EFF">expected</span> <span style="color: #89DDFF">-</span> <span style="color: #EFF">required</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-</span> <span style="color: #EFF">actual</span><span style="color: #89DDFF">),</span>
</span><span id="__span-0-220"><a id="__codelineno-0-220" name="__codelineno-0-220"></a>        <span style="color: #89DDFF">}</span>
</span></code></pre></div></td></tr></table></div>
              </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.featureschema.FeatureSchema.convert_feature_dicts" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">convert_feature_dicts</span><span style="color: #89DDFF">(</span><span style="color: #EFF">v</span><span style="color: #89DDFF">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Convert feature dicts to FeatureMapping objects if needed.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-74">74</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-75">75</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-76">76</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-77">77</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-78">78</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-79">79</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-80">80</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-81">81</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-82">82</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-83">83</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-84">84</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-85">85</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-74"><a id="__codelineno-0-74" name="__codelineno-0-74"></a><span style="color: #82AAFF">@field_validator</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;features&quot;</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mode</span><span style="color: #89DDFF">=</span><span style="color: #C3E88D">&quot;before&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-75"><a id="__codelineno-0-75" name="__codelineno-0-75"></a><span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-76"><a id="__codelineno-0-76" name="__codelineno-0-76"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">convert_feature_dicts</span><span style="color: #89DDFF">(cls,</span> <span style="color: #EFF">v</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-77"><a id="__codelineno-0-77" name="__codelineno-0-77"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Convert feature dicts to FeatureMapping objects if needed.&quot;&quot;&quot;</span>
</span><span id="__span-0-78"><a id="__codelineno-0-78" name="__codelineno-0-78"></a>    <span style="color: #BB80B3">if</span> <span style="color: #EFF">v</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #EFF">v</span><span style="color: #89DDFF">,</span> <span style="color: #82AAFF">dict</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-79"><a id="__codelineno-0-79" name="__codelineno-0-79"></a>        <span style="color: #546E7A; font-style: italic"># Check if values are dicts (need conversion) or already FeatureMapping</span>
</span><span id="__span-0-80"><a id="__codelineno-0-80" name="__codelineno-0-80"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">v</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #82AAFF">isinstance</span><span style="color: #89DDFF">(</span><span style="color: #82AAFF">list</span><span style="color: #89DDFF">(</span><span style="color: #EFF">v</span><span style="color: #89DDFF">.</span><span style="color: #EFF">values</span><span style="color: #89DDFF">())[</span><span style="color: #F78C6C">0</span><span style="color: #89DDFF">],</span> <span style="color: #82AAFF">dict</span><span style="color: #89DDFF">):</span>
</span><span id="__span-0-81"><a id="__codelineno-0-81" name="__codelineno-0-81"></a>            <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-82"><a id="__codelineno-0-82" name="__codelineno-0-82"></a>                <span style="color: #EFF">name</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">FeatureMapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">from_dict</span><span style="color: #89DDFF">(</span><span style="color: #EFF">name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-83"><a id="__codelineno-0-83" name="__codelineno-0-83"></a>                <span style="color: #BB80B3">for</span> <span style="color: #EFF">name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">v</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-84"><a id="__codelineno-0-84" name="__codelineno-0-84"></a>            <span style="color: #89DDFF">}</span>
</span><span id="__span-0-85"><a id="__codelineno-0-85" name="__codelineno-0-85"></a>    <span style="color: #BB80B3">return</span> <span style="color: #EFF">v</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.featureschema.FeatureSchema.from_dict" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">from_dict</span><span style="color: #89DDFF">(</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Create a FeatureSchema from a dictionary.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Dictionary containing schema configuration</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="FeatureSchema (healthchain.io.containers.featureschema.FeatureSchema)" href="#healthchain.io.containers.featureschema.FeatureSchema">FeatureSchema</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>FeatureSchema instance</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-106">106</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-107">107</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-108">108</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-109">109</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-110">110</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-111">111</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-112">112</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-113">113</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-114">114</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-115">115</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-116">116</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-106"><a id="__codelineno-0-106" name="__codelineno-0-106"></a><span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-107"><a id="__codelineno-0-107" name="__codelineno-0-107"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">from_dict</span><span style="color: #89DDFF">(cls,</span> <span style="color: #EFF">data</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;FeatureSchema&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-108"><a id="__codelineno-0-108" name="__codelineno-0-108"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Create a FeatureSchema from a dictionary.</span>
</span><span id="__span-0-109"><a id="__codelineno-0-109" name="__codelineno-0-109"></a>
</span><span id="__span-0-110"><a id="__codelineno-0-110" name="__codelineno-0-110"></a><span style="color: #546E7A; font-style: italic">    Args:</span>
</span><span id="__span-0-111"><a id="__codelineno-0-111" name="__codelineno-0-111"></a><span style="color: #546E7A; font-style: italic">        data: Dictionary containing schema configuration</span>
</span><span id="__span-0-112"><a id="__codelineno-0-112" name="__codelineno-0-112"></a>
</span><span id="__span-0-113"><a id="__codelineno-0-113" name="__codelineno-0-113"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-114"><a id="__codelineno-0-114" name="__codelineno-0-114"></a><span style="color: #546E7A; font-style: italic">        FeatureSchema instance</span>
</span><span id="__span-0-115"><a id="__codelineno-0-115" name="__codelineno-0-115"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-116"><a id="__codelineno-0-116" name="__codelineno-0-116"></a>    <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">cls.</span><span style="color: #EFF">model_validate</span><span style="color: #89DDFF">(</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.featureschema.FeatureSchema.from_yaml" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">from_yaml</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Load schema from a YAML file.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Path to the YAML file</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="pathlib.Path">Path</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><a class="autorefs autorefs-internal" title="FeatureSchema (healthchain.io.containers.featureschema.FeatureSchema)" href="#healthchain.io.containers.featureschema.FeatureSchema">FeatureSchema</a></code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>FeatureSchema instance</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>schema = FeatureSchema.from_yaml("configs/features/sepsis_vitals.yaml")</p>
</blockquote>
</blockquote>
</blockquote>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-87"> 87</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-88"> 88</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-89"> 89</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-90"> 90</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-91"> 91</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-92"> 92</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-93"> 93</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-94"> 94</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-95"> 95</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-96"> 96</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-97"> 97</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-98"> 98</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-99"> 99</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-100">100</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-101">101</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-102">102</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-103">103</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-104">104</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-87"><a id="__codelineno-0-87" name="__codelineno-0-87"></a><span style="color: #82AAFF">@classmethod</span>
</span><span id="__span-0-88"><a id="__codelineno-0-88" name="__codelineno-0-88"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">from_yaml</span><span style="color: #89DDFF">(cls,</span> <span style="color: #EFF">path</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Union</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #C3E88D">&quot;FeatureSchema&quot;</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-89"><a id="__codelineno-0-89" name="__codelineno-0-89"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Load schema from a YAML file.</span>
</span><span id="__span-0-90"><a id="__codelineno-0-90" name="__codelineno-0-90"></a>
</span><span id="__span-0-91"><a id="__codelineno-0-91" name="__codelineno-0-91"></a><span style="color: #546E7A; font-style: italic">    Args:</span>
</span><span id="__span-0-92"><a id="__codelineno-0-92" name="__codelineno-0-92"></a><span style="color: #546E7A; font-style: italic">        path: Path to the YAML file</span>
</span><span id="__span-0-93"><a id="__codelineno-0-93" name="__codelineno-0-93"></a>
</span><span id="__span-0-94"><a id="__codelineno-0-94" name="__codelineno-0-94"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-95"><a id="__codelineno-0-95" name="__codelineno-0-95"></a><span style="color: #546E7A; font-style: italic">        FeatureSchema instance</span>
</span><span id="__span-0-96"><a id="__codelineno-0-96" name="__codelineno-0-96"></a>
</span><span id="__span-0-97"><a id="__codelineno-0-97" name="__codelineno-0-97"></a><span style="color: #546E7A; font-style: italic">    Example:</span>
</span><span id="__span-0-98"><a id="__codelineno-0-98" name="__codelineno-0-98"></a><span style="color: #546E7A; font-style: italic">        &gt;&gt;&gt; schema = FeatureSchema.from_yaml(&quot;configs/features/sepsis_vitals.yaml&quot;)</span>
</span><span id="__span-0-99"><a id="__codelineno-0-99" name="__codelineno-0-99"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-100"><a id="__codelineno-0-100" name="__codelineno-0-100"></a>    <span style="color: #EFF">path</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-101"><a id="__codelineno-0-101" name="__codelineno-0-101"></a>    <span style="color: #BB80B3">with</span> <span style="color: #82AAFF">open</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;r&quot;</span><span style="color: #89DDFF">)</span> <span style="color: #BB80B3">as</span> <span style="color: #EFF">f</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-102"><a id="__codelineno-0-102" name="__codelineno-0-102"></a>        <span style="color: #EFF">data</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">yaml</span><span style="color: #89DDFF">.</span><span style="color: #EFF">safe_load</span><span style="color: #89DDFF">(</span><span style="color: #EFF">f</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-103"><a id="__codelineno-0-103" name="__codelineno-0-103"></a>
</span><span id="__span-0-104"><a id="__codelineno-0-104" name="__codelineno-0-104"></a>    <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">cls.</span><span style="color: #EFF">model_validate</span><span style="color: #89DDFF">(</span><span style="color: #EFF">data</span><span style="color: #89DDFF">)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.featureschema.FeatureSchema.get_feature_names" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">get_feature_names</span><span style="color: #89DDFF">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get list of feature names in order.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>List of feature names</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-154">154</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-155">155</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-156">156</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-157">157</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-158">158</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-159">159</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-160">160</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-154"><a id="__codelineno-0-154" name="__codelineno-0-154"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_feature_names</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-155"><a id="__codelineno-0-155" name="__codelineno-0-155"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get list of feature names in order.</span>
</span><span id="__span-0-156"><a id="__codelineno-0-156" name="__codelineno-0-156"></a>
</span><span id="__span-0-157"><a id="__codelineno-0-157" name="__codelineno-0-157"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-158"><a id="__codelineno-0-158" name="__codelineno-0-158"></a><span style="color: #546E7A; font-style: italic">        List of feature names</span>
</span><span id="__span-0-159"><a id="__codelineno-0-159" name="__codelineno-0-159"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-160"><a id="__codelineno-0-160" name="__codelineno-0-160"></a>    <span style="color: #BB80B3">return</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">features</span><span style="color: #89DDFF">.</span><span style="color: #EFF">keys</span><span style="color: #89DDFF">())</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.featureschema.FeatureSchema.get_features_by_resource" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">get_features_by_resource</span><span style="color: #89DDFF">(</span><span style="color: #EFF">resource_type</span><span style="color: #89DDFF">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get all features mapped to a specific FHIR resource type.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>resource_type</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>FHIR resource type (e.g., "Observation", "Patient")</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <a class="autorefs autorefs-internal" title="FeatureMapping (healthchain.io.containers.featureschema.FeatureMapping)" href="#healthchain.io.containers.featureschema.FeatureMapping">FeatureMapping</a>]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Dictionary of features for the specified resource type</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-170">170</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-171">171</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-172">172</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-173">173</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-174">174</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-175">175</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-176">176</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-177">177</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-178">178</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-179">179</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-180">180</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-181">181</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-182">182</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-183">183</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-170"><a id="__codelineno-0-170" name="__codelineno-0-170"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_features_by_resource</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">resource_type</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">str</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">FeatureMapping</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-171"><a id="__codelineno-0-171" name="__codelineno-0-171"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get all features mapped to a specific FHIR resource type.</span>
</span><span id="__span-0-172"><a id="__codelineno-0-172" name="__codelineno-0-172"></a>
</span><span id="__span-0-173"><a id="__codelineno-0-173" name="__codelineno-0-173"></a><span style="color: #546E7A; font-style: italic">    Args:</span>
</span><span id="__span-0-174"><a id="__codelineno-0-174" name="__codelineno-0-174"></a><span style="color: #546E7A; font-style: italic">        resource_type: FHIR resource type (e.g., &quot;Observation&quot;, &quot;Patient&quot;)</span>
</span><span id="__span-0-175"><a id="__codelineno-0-175" name="__codelineno-0-175"></a>
</span><span id="__span-0-176"><a id="__codelineno-0-176" name="__codelineno-0-176"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-177"><a id="__codelineno-0-177" name="__codelineno-0-177"></a><span style="color: #546E7A; font-style: italic">        Dictionary of features for the specified resource type</span>
</span><span id="__span-0-178"><a id="__codelineno-0-178" name="__codelineno-0-178"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-179"><a id="__codelineno-0-179" name="__codelineno-0-179"></a>    <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-180"><a id="__codelineno-0-180" name="__codelineno-0-180"></a>        <span style="color: #EFF">name</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">mapping</span>
</span><span id="__span-0-181"><a id="__codelineno-0-181" name="__codelineno-0-181"></a>        <span style="color: #BB80B3">for</span> <span style="color: #EFF">name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">features</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-182"><a id="__codelineno-0-182" name="__codelineno-0-182"></a>        <span style="color: #BB80B3">if</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">fhir_resource</span> <span style="color: #89DDFF">==</span> <span style="color: #EFF">resource_type</span>
</span><span id="__span-0-183"><a id="__codelineno-0-183" name="__codelineno-0-183"></a>    <span style="color: #89DDFF">}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.featureschema.FeatureSchema.get_observation_codes" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">get_observation_codes</span><span style="color: #89DDFF">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get all Observation features with their codes.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <a class="autorefs autorefs-internal" title="FeatureMapping (healthchain.io.containers.featureschema.FeatureMapping)" href="#healthchain.io.containers.featureschema.FeatureMapping">FeatureMapping</a>]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Dictionary mapping codes to feature mappings</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-185">185</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-186">186</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-187">187</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-188">188</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-189">189</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-190">190</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-191">191</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-192">192</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-193">193</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-194">194</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-185"><a id="__codelineno-0-185" name="__codelineno-0-185"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_observation_codes</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">FeatureMapping</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-186"><a id="__codelineno-0-186" name="__codelineno-0-186"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get all Observation features with their codes.</span>
</span><span id="__span-0-187"><a id="__codelineno-0-187" name="__codelineno-0-187"></a>
</span><span id="__span-0-188"><a id="__codelineno-0-188" name="__codelineno-0-188"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-189"><a id="__codelineno-0-189" name="__codelineno-0-189"></a><span style="color: #546E7A; font-style: italic">        Dictionary mapping codes to feature mappings</span>
</span><span id="__span-0-190"><a id="__codelineno-0-190" name="__codelineno-0-190"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-191"><a id="__codelineno-0-191" name="__codelineno-0-191"></a>    <span style="color: #EFF">observations</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">get_features_by_resource</span><span style="color: #89DDFF">(</span><span style="color: #C3E88D">&quot;Observation&quot;</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-192"><a id="__codelineno-0-192" name="__codelineno-0-192"></a>    <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-193"><a id="__codelineno-0-193" name="__codelineno-0-193"></a>        <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">code</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">mapping</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">observations</span><span style="color: #89DDFF">.</span><span style="color: #EFF">values</span><span style="color: #89DDFF">()</span> <span style="color: #BB80B3">if</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">code</span>
</span><span id="__span-0-194"><a id="__codelineno-0-194" name="__codelineno-0-194"></a>    <span style="color: #89DDFF">}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.featureschema.FeatureSchema.get_required_features" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">get_required_features</span><span style="color: #89DDFF">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get list of required feature names.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>List of required feature names</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-162">162</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-163">163</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-164">164</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-165">165</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-166">166</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-167">167</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-168">168</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-162"><a id="__codelineno-0-162" name="__codelineno-0-162"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">get_required_features</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-163"><a id="__codelineno-0-163" name="__codelineno-0-163"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Get list of required feature names.</span>
</span><span id="__span-0-164"><a id="__codelineno-0-164" name="__codelineno-0-164"></a>
</span><span id="__span-0-165"><a id="__codelineno-0-165" name="__codelineno-0-165"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-166"><a id="__codelineno-0-166" name="__codelineno-0-166"></a><span style="color: #546E7A; font-style: italic">        List of required feature names</span>
</span><span id="__span-0-167"><a id="__codelineno-0-167" name="__codelineno-0-167"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-168"><a id="__codelineno-0-168" name="__codelineno-0-168"></a>    <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">[</span><span style="color: #EFF">name</span> <span style="color: #BB80B3">for</span> <span style="color: #EFF">name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">features</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()</span> <span style="color: #BB80B3">if</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">required</span><span style="color: #89DDFF">]</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.featureschema.FeatureSchema.to_dict" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">to_dict</span><span style="color: #89DDFF">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Convert schema to dictionary format.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Dictionary representation of the schema</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-118">118</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-119">119</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-120">120</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-121">121</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-122">122</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-123">123</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-124">124</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-125">125</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-126">126</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-127">127</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-128">128</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-129">129</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-130">130</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-131">131</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-132">132</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-133">133</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-134">134</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-135">135</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-136">136</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-137">137</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-138">138</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-139">139</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-140">140</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-118"><a id="__codelineno-0-118" name="__codelineno-0-118"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">to_dict</span><span style="color: #89DDFF">(self)</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-119"><a id="__codelineno-0-119" name="__codelineno-0-119"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Convert schema to dictionary format.</span>
</span><span id="__span-0-120"><a id="__codelineno-0-120" name="__codelineno-0-120"></a>
</span><span id="__span-0-121"><a id="__codelineno-0-121" name="__codelineno-0-121"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-122"><a id="__codelineno-0-122" name="__codelineno-0-122"></a><span style="color: #546E7A; font-style: italic">        Dictionary representation of the schema</span>
</span><span id="__span-0-123"><a id="__codelineno-0-123" name="__codelineno-0-123"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-124"><a id="__codelineno-0-124" name="__codelineno-0-124"></a>    <span style="color: #EFF">result</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-125"><a id="__codelineno-0-125" name="__codelineno-0-125"></a>        <span style="color: #C3E88D">&quot;name&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">name</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-126"><a id="__codelineno-0-126" name="__codelineno-0-126"></a>        <span style="color: #C3E88D">&quot;version&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">version</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-127"><a id="__codelineno-0-127" name="__codelineno-0-127"></a>        <span style="color: #C3E88D">&quot;description&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">description</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-128"><a id="__codelineno-0-128" name="__codelineno-0-128"></a>        <span style="color: #C3E88D">&quot;model_info&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">model_info</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-129"><a id="__codelineno-0-129" name="__codelineno-0-129"></a>        <span style="color: #C3E88D">&quot;features&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-130"><a id="__codelineno-0-130" name="__codelineno-0-130"></a>            <span style="color: #EFF">name</span><span style="color: #89DDFF">:</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-131"><a id="__codelineno-0-131" name="__codelineno-0-131"></a>                <span style="color: #EFF">k</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">v</span>
</span><span id="__span-0-132"><a id="__codelineno-0-132" name="__codelineno-0-132"></a>                <span style="color: #BB80B3">for</span> <span style="color: #EFF">k</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">v</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #EFF">mapping</span><span style="color: #89DDFF">.</span><span style="color: #EFF">model_dump</span><span style="color: #89DDFF">().</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-133"><a id="__codelineno-0-133" name="__codelineno-0-133"></a>                <span style="color: #BB80B3">if</span> <span style="color: #EFF">k</span> <span style="color: #89DDFF">!=</span> <span style="color: #C3E88D">&quot;name&quot;</span> <span style="color: #89DDFF; font-style: italic">and</span> <span style="color: #EFF">v</span> <span style="color: #89DDFF; font-style: italic">is</span> <span style="color: #89DDFF; font-style: italic">not</span> <span style="color: #89DDFF">None</span>
</span><span id="__span-0-134"><a id="__codelineno-0-134" name="__codelineno-0-134"></a>            <span style="color: #89DDFF">}</span>
</span><span id="__span-0-135"><a id="__codelineno-0-135" name="__codelineno-0-135"></a>            <span style="color: #BB80B3">for</span> <span style="color: #EFF">name</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">mapping</span> <span style="color: #89DDFF; font-style: italic">in</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">features</span><span style="color: #89DDFF">.</span><span style="color: #EFF">items</span><span style="color: #89DDFF">()</span>
</span><span id="__span-0-136"><a id="__codelineno-0-136" name="__codelineno-0-136"></a>        <span style="color: #89DDFF">},</span>
</span><span id="__span-0-137"><a id="__codelineno-0-137" name="__codelineno-0-137"></a>    <span style="color: #89DDFF">}</span>
</span><span id="__span-0-138"><a id="__codelineno-0-138" name="__codelineno-0-138"></a>    <span style="color: #BB80B3">if</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">metadata</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-139"><a id="__codelineno-0-139" name="__codelineno-0-139"></a>        <span style="color: #EFF">result</span><span style="color: #89DDFF">[</span><span style="color: #C3E88D">&quot;metadata&quot;</span><span style="color: #89DDFF">]</span> <span style="color: #89DDFF">=</span> <span style="color: #89DDFF">self.</span><span style="color: #EFF">metadata</span>
</span><span id="__span-0-140"><a id="__codelineno-0-140" name="__codelineno-0-140"></a>    <span style="color: #BB80B3">return</span> <span style="color: #EFF">result</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.featureschema.FeatureSchema.to_yaml" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">to_yaml</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Save schema to a YAML file.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>path</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Path where the YAML file will be saved</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="pathlib.Path">Path</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-142">142</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-143">143</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-144">144</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-145">145</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-146">146</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-147">147</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-148">148</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-149">149</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-150">150</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-151">151</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-152">152</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-142"><a id="__codelineno-0-142" name="__codelineno-0-142"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">to_yaml</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">path</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">Union</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #89DDFF">None:</span>
</span><span id="__span-0-143"><a id="__codelineno-0-143" name="__codelineno-0-143"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Save schema to a YAML file.</span>
</span><span id="__span-0-144"><a id="__codelineno-0-144" name="__codelineno-0-144"></a>
</span><span id="__span-0-145"><a id="__codelineno-0-145" name="__codelineno-0-145"></a><span style="color: #546E7A; font-style: italic">    Args:</span>
</span><span id="__span-0-146"><a id="__codelineno-0-146" name="__codelineno-0-146"></a><span style="color: #546E7A; font-style: italic">        path: Path where the YAML file will be saved</span>
</span><span id="__span-0-147"><a id="__codelineno-0-147" name="__codelineno-0-147"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-148"><a id="__codelineno-0-148" name="__codelineno-0-148"></a>    <span style="color: #EFF">path</span> <span style="color: #89DDFF">=</span> <span style="color: #EFF">Path</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-149"><a id="__codelineno-0-149" name="__codelineno-0-149"></a>    <span style="color: #EFF">path</span><span style="color: #89DDFF">.</span><span style="color: #EFF">parent</span><span style="color: #89DDFF">.</span><span style="color: #EFF">mkdir</span><span style="color: #89DDFF">(</span><span style="color: #EFF">parents</span><span style="color: #89DDFF">=True,</span> <span style="color: #EFF">exist_ok</span><span style="color: #89DDFF">=True)</span>
</span><span id="__span-0-150"><a id="__codelineno-0-150" name="__codelineno-0-150"></a>
</span><span id="__span-0-151"><a id="__codelineno-0-151" name="__codelineno-0-151"></a>    <span style="color: #BB80B3">with</span> <span style="color: #82AAFF">open</span><span style="color: #89DDFF">(</span><span style="color: #EFF">path</span><span style="color: #89DDFF">,</span> <span style="color: #C3E88D">&quot;w&quot;</span><span style="color: #89DDFF">)</span> <span style="color: #BB80B3">as</span> <span style="color: #EFF">f</span><span style="color: #89DDFF">:</span>
</span><span id="__span-0-152"><a id="__codelineno-0-152" name="__codelineno-0-152"></a>        <span style="color: #EFF">yaml</span><span style="color: #89DDFF">.</span><span style="color: #EFF">dump</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">to_dict</span><span style="color: #89DDFF">(),</span> <span style="color: #EFF">f</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">default_flow_style</span><span style="color: #89DDFF">=False,</span> <span style="color: #EFF">sort_keys</span><span style="color: #89DDFF">=False)</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="healthchain.io.containers.featureschema.FeatureSchema.validate_dataframe_columns" class="doc doc-heading">
            <code class="highlight language-python"><span style="color: #EFF">validate_dataframe_columns</span><span style="color: #89DDFF">(</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Validate that a DataFrame has the expected columns.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>columns</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>List of column names from a DataFrame</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <span class="doc-returns-annotation">
                    <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
                </span>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>Dictionary with validation results:
- valid: bool
- missing_required: List of missing required features
- unexpected: List of unexpected columns</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>healthchain/io/containers/featureschema.py</code></summary>
              <div class="language-python highlight" style="background: #263238"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-196">196</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-197">197</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-198">198</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-199">199</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-200">200</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-201">201</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-202">202</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-203">203</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-204">204</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-205">205</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-206">206</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-207">207</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-208">208</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-209">209</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-210">210</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-211">211</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-212">212</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-213">213</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-214">214</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-215">215</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-216">216</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-217">217</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-218">218</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-219">219</a></span>
<span style="color: #37474F; background-color: #263238; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-220">220</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span id="__span-0-196"><a id="__codelineno-0-196" name="__codelineno-0-196"></a><span style="color: #BB80B3">def</span><span style="color: #EFF"> </span><span style="color: #82AAFF">validate_dataframe_columns</span><span style="color: #89DDFF">(self,</span> <span style="color: #EFF">columns</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">List</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">])</span> <span style="color: #89DDFF">-&gt;</span> <span style="color: #EFF">Dict</span><span style="color: #89DDFF">[</span><span style="color: #82AAFF">str</span><span style="color: #89DDFF">,</span> <span style="color: #EFF">Any</span><span style="color: #89DDFF">]:</span>
</span><span id="__span-0-197"><a id="__codelineno-0-197" name="__codelineno-0-197"></a><span style="color: #EFF">    </span><span style="color: #546E7A; font-style: italic">&quot;&quot;&quot;Validate that a DataFrame has the expected columns.</span>
</span><span id="__span-0-198"><a id="__codelineno-0-198" name="__codelineno-0-198"></a>
</span><span id="__span-0-199"><a id="__codelineno-0-199" name="__codelineno-0-199"></a><span style="color: #546E7A; font-style: italic">    Args:</span>
</span><span id="__span-0-200"><a id="__codelineno-0-200" name="__codelineno-0-200"></a><span style="color: #546E7A; font-style: italic">        columns: List of column names from a DataFrame</span>
</span><span id="__span-0-201"><a id="__codelineno-0-201" name="__codelineno-0-201"></a>
</span><span id="__span-0-202"><a id="__codelineno-0-202" name="__codelineno-0-202"></a><span style="color: #546E7A; font-style: italic">    Returns:</span>
</span><span id="__span-0-203"><a id="__codelineno-0-203" name="__codelineno-0-203"></a><span style="color: #546E7A; font-style: italic">        Dictionary with validation results:</span>
</span><span id="__span-0-204"><a id="__codelineno-0-204" name="__codelineno-0-204"></a><span style="color: #546E7A; font-style: italic">            - valid: bool</span>
</span><span id="__span-0-205"><a id="__codelineno-0-205" name="__codelineno-0-205"></a><span style="color: #546E7A; font-style: italic">            - missing_required: List of missing required features</span>
</span><span id="__span-0-206"><a id="__codelineno-0-206" name="__codelineno-0-206"></a><span style="color: #546E7A; font-style: italic">            - unexpected: List of unexpected columns</span>
</span><span id="__span-0-207"><a id="__codelineno-0-207" name="__codelineno-0-207"></a><span style="color: #546E7A; font-style: italic">    &quot;&quot;&quot;</span>
</span><span id="__span-0-208"><a id="__codelineno-0-208" name="__codelineno-0-208"></a>    <span style="color: #EFF">expected</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">set</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">get_feature_names</span><span style="color: #89DDFF">())</span>
</span><span id="__span-0-209"><a id="__codelineno-0-209" name="__codelineno-0-209"></a>    <span style="color: #EFF">actual</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">set</span><span style="color: #89DDFF">(</span><span style="color: #EFF">columns</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-210"><a id="__codelineno-0-210" name="__codelineno-0-210"></a>    <span style="color: #EFF">required</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">set</span><span style="color: #89DDFF">(self.</span><span style="color: #EFF">get_required_features</span><span style="color: #89DDFF">())</span>
</span><span id="__span-0-211"><a id="__codelineno-0-211" name="__codelineno-0-211"></a>
</span><span id="__span-0-212"><a id="__codelineno-0-212" name="__codelineno-0-212"></a>    <span style="color: #EFF">missing_required</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">(</span><span style="color: #EFF">required</span> <span style="color: #89DDFF">-</span> <span style="color: #EFF">actual</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-213"><a id="__codelineno-0-213" name="__codelineno-0-213"></a>    <span style="color: #EFF">unexpected</span> <span style="color: #89DDFF">=</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">(</span><span style="color: #EFF">actual</span> <span style="color: #89DDFF">-</span> <span style="color: #EFF">expected</span><span style="color: #89DDFF">)</span>
</span><span id="__span-0-214"><a id="__codelineno-0-214" name="__codelineno-0-214"></a>
</span><span id="__span-0-215"><a id="__codelineno-0-215" name="__codelineno-0-215"></a>    <span style="color: #BB80B3">return</span> <span style="color: #89DDFF">{</span>
</span><span id="__span-0-216"><a id="__codelineno-0-216" name="__codelineno-0-216"></a>        <span style="color: #C3E88D">&quot;valid&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">len</span><span style="color: #89DDFF">(</span><span style="color: #EFF">missing_required</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">==</span> <span style="color: #F78C6C">0</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-217"><a id="__codelineno-0-217" name="__codelineno-0-217"></a>        <span style="color: #C3E88D">&quot;missing_required&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">missing_required</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-218"><a id="__codelineno-0-218" name="__codelineno-0-218"></a>        <span style="color: #C3E88D">&quot;unexpected&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #EFF">unexpected</span><span style="color: #89DDFF">,</span>
</span><span id="__span-0-219"><a id="__codelineno-0-219" name="__codelineno-0-219"></a>        <span style="color: #C3E88D">&quot;missing_optional&quot;</span><span style="color: #89DDFF">:</span> <span style="color: #82AAFF">list</span><span style="color: #89DDFF">((</span><span style="color: #EFF">expected</span> <span style="color: #89DDFF">-</span> <span style="color: #EFF">required</span><span style="color: #89DDFF">)</span> <span style="color: #89DDFF">-</span> <span style="color: #EFF">actual</span><span style="color: #89DDFF">),</span>
</span><span id="__span-0-220"><a id="__codelineno-0-220" name="__codelineno-0-220"></a>    <span style="color: #89DDFF">}</span>
</span></code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>


  </div>

    </div>

</div>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
<footer class="md-footer">
    <div class="md-footer-meta md-typeset">
        <div class="md-footer-meta__inner md-grid">
            <div class="md-copyright">
                Made with care by the HealthChain team
            </div>
        </div>
    </div>
</footer>

    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["content.code.copy", "navigation.expand", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.footer", "navigation.instant", "header.autohide", "announce.dismiss", "search.suggest", "search.highlight"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../javascripts/cookbook-filter.js"></script>
      
    
  </body>
</html>